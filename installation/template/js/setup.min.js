Joomla.setlanguage=function(e){var t=Joomla.serialiseForm(e);return Joomla.loadingLayer("show"),Joomla.removeMessages(),Joomla.request({url:Joomla.baseUrl,method:"POST",data:t,perform:!0,onSuccess:function(e,t){e=JSON.parse(e),Joomla.replaceTokens(e.token),e.messages&&Joomla.renderMessages(e.messages),e.error?(Joomla.renderMessages({error:[e.message]}),Joomla.loadingLayer("hide")):(Joomla.loadingLayer("hide"),Joomla.goToPage(e.data.view,!0))},onError:function(e){Joomla.loadingLayer("hide");try{var t=JSON.parse(e.responseText);Joomla.replaceTokens(t.token),alert(t.message)}catch(e){}}}),!1},Joomla.checkInputs=function(){document.getElementById("jform_admin_password2").value=document.getElementById("jform_admin_password").value;[].slice.call(document.querySelectorAll('input[type="password"], input[type="text"], input[type="email"], select')).forEach(function(e){e.valid||!1}),document.getElementById("installStep1").classList.add("active"),document.getElementById("installStep2").classList.add("active"),document.getElementById("installStep3").classList.add("active"),Joomla.checkFormField(["#jform_site_name","#jform_admin_user","#jform_admin_email","#jform_admin_password","#jform_db_type","#jform_db_host","#jform_db_user","#jform_db_name"])&&Joomla.checkDbCredentials()},Joomla.checkDbCredentials=function(){Joomla.loadingLayer("show");var e=document.getElementById("adminForm"),t=Joomla.serialiseForm(e);Joomla.request({method:"POST",url:Joomla.installationBaseUrl+"?task=installation.dbcheck&format=json",data:t,perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(t,o){(t=JSON.parse(t)).messages&&Joomla.renderMessages(t.messages),Joomla.replaceTokens(t.token),Joomla.loadingLayer("hide"),t.error?Joomla.renderMessages({error:[t.message]}):t.data&&!0===t.data.validated&&Joomla.install(["config"],e)},onError:function(e){Joomla.renderMessages([["",Joomla.JText._("JLIB_DATABASE_ERROR_DATABASE_CONNECT","A Database error occurred.")]]),Joomla.loadingLayer("hide");try{var t=JSON.parse(e.responseText);Joomla.replaceTokens(t.token),alert(t.message)}catch(e){}}})},function(){sessionStorage&&sessionStorage.getItem("installation-data")&&Joomla.extend(this.options,sessionStorage.getItem("installation-data")),Joomla.pageInit();var e=document.querySelector(".nav-steps.hidden");e&&e.classList.remove("hidden"),document.getElementById("jform_site_name")&&document.getElementById("jform_site_name").focus();var t=document.getElementById("jform_language");t&&t.addEventListener("change",function(e){var t=document.getElementById("languageForm");Joomla.setlanguage(t)}),document.getElementById("step1")&&document.getElementById("step1").addEventListener("click",function(e){e.preventDefault(),Joomla.checkFormField(["#jform_site_name"])&&(document.getElementById("languageForm")&&(document.getElementById("languageForm").style.display="none"),document.getElementById("installStep2")&&(document.getElementById("installStep2").classList.add("active"),document.getElementById("installStep1").classList.remove("active"),document.getElementById("jform_admin_user")&&document.getElementById("jform_admin_user").focus()))}),document.getElementById("step2")&&(document.getElementById("step2").addEventListener("click",function(e){e.preventDefault(),Joomla.checkFormField(["#jform_admin_user","#jform_admin_email","#jform_admin_password"])&&document.getElementById("installStep3")&&(document.getElementById("installStep3").classList.add("active"),document.getElementById("installStep2").classList.remove("active"),document.getElementById("setupButton").style.display="block",Joomla.makeRandomDbPrefix(),document.getElementById("jform_db_type")&&document.getElementById("jform_db_type").focus())}),document.getElementById("setupButton").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),Joomla.checkInputs()}))}();