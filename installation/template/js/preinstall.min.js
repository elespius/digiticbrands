Joomla=window.Joomla||{},Joomla.installation=Joomla.installation||{},Joomla.installation.data={ftpUsername:"",ftpPassword:"",ftpHost:"",ftpPort:21,ftpRoot:"/"},Joomla.installation.detectFtpRoot=function(t){var e,o,a=document.getElementById("ftpForm");e=Joomla.serialiseForm(a),t.setAttribute("disabled","disabled"),o="detectftproot",Joomla.request({type:"POST",url:Joomla.installationBaseUrl+"?task="+o+"&format=json",data:e,perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(e,o){var a=JSON.parse(e);a&&(Joomla.replaceTokens(a.token),console.log(a.messages.error),a.messages&&!a.messages.error?a.data&&a.data.root&&(document.getElementById("jform_ftp_host").value+=a.data.root):alert(a.messages.warning)),t.removeAttribute("disabled")},onError:function(t){try{var e=JSON.parse(t.responseText);Joomla.replaceTokens(e.token),alert(t.status+": "+e.message)}catch(e){alert(t.status+": "+t.statusText)}}})},document.getElementById("showFtp")&&(document.getElementById("showFtp").style.display="none",document.getElementById("showFtp").addEventListener("click",function(t){t.preventDefault(),document.getElementById("ftpOptions")&&(document.getElementById("ftpOptions").classList.remove("hidden"),document.getElementById("ftpOptions").scrollIntoView())})),document.getElementById("verifybutton")&&document.getElementById("verifybutton").addEventListener("click",function(t){if(t.preventDefault(),document.getElementById("ftpForm")){Joomla.installation.data.ftpUsername=document.getElementById("jform_ftp_user").value,Joomla.installation.data.ftpPassword=document.getElementById("jform_ftp_pass").value,Joomla.installation.data.ftpHost=document.getElementById("jform_ftp_host").value,Joomla.installation.data.ftpPort=document.getElementById("jform_ftp_port").value;var e,o=[];for(e in Joomla.installation.data)o.push(Joomla.installation.data[e]);sessionStorage.setItem("installData",JSON.stringify(o))}});