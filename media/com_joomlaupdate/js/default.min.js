function extractionMethodHandler(t,a){jQuery(function(e){$em=e(t),displayStyle="direct"===$em.val()?"none":"table-row",document.getElementById(a+"_hostname").style.display=displayStyle,document.getElementById(a+"_port").style.display=displayStyle,document.getElementById(a+"_username").style.display=displayStyle,document.getElementById(a+"_password").style.display=displayStyle,document.getElementById(a+"_directory").style.display=displayStyle})}!function(s,o,t){var l={config:{serverUrl:"index.php?option=com_joomlaupdate&task=update.fetchextensioncompatibility",selector:".extension-check"},STATE:{INCOMPATIBLE:0,COMPATIBLE:1,MISSING_COMPATIBILITY_TAG:2,SERVER_ERROR:3},run:function(){s(".settingstoggle").css("float","right").css("cursor","pointer"),s(".settingstoggle").on("click",function(e,t){var a=s(this).closest("fieldset");"closed"==s(this).data("state")?(s(this).data("state","open"),s(this).html(COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSIONS_SHOW_LESS_COMPATIBILITY_INFORMATION),a.find(".settingsInfo").removeClass("hidden")):(s(this).data("state","closed"),s(this).html(COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSIONS_SHOW_MORE_COMPATIBILITY_INFORMATION),a.find(".settingsInfo").addClass("hidden"))}),l.nonCoreCriticalPlugins="undefined"!=typeof nonCoreCriticalPlugins?Object.values(JSON.parse(nonCoreCriticalPlugins)):[],0===l.nonCoreCriticalPlugins.length&&(s("#preupdateCheckWarning, #preupdateconfirmation, #preupdatecheckbox, #preupdatecheckheadings").css("display","none"),s("#preupdatecheckbox #noncoreplugins").prop("checked",!0),s("button.submitupdate").removeClass("disabled"),s("button.submitupdate").prop("disabled",!1));var e=s(l.config.selector);0!==e.length&&(s("#preupdatecheckbox #noncoreplugins").on("change",function(){s("#preupdatecheckbox #noncoreplugins").is(":checked")?confirm(Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_POTENTIALLY_DANGEROUS_PLUGIN_CONFIRM_MESSAGE"))?(s("button.submitupdate").removeClass("disabled"),s("button.submitupdate").prop("disabled",!1)):s("#preupdatecheckbox #noncoreplugins").prop("checked",!1):(s("button.submitupdate").addClass("disabled"),s("button.submitupdate").prop("disabled",!0))}),l.joomlaTargetVersion=t.joomlaTargetVersion,l.joomlaCurrentVersion=t.joomlaCurrentVersion,s(".compatibilitytypes img").css("height","20px"),s(".compatibilitytypes").css("display","none").css("margin-left",0),s("#compatibilitytype0").css("display","block"),s(".compatibilitytoggle").css("float","right").css("cursor","pointer"),s(".compatibilitytoggle").on("click",function(e,t){var a=s(this).closest("fieldset.compatibilitytypes");"closed"==s(this).data("state")?(s(this).data("state","open"),s(this).html(COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSIONS_SHOW_LESS_COMPATIBILITY_INFORMATION),a.find(".exname").removeClass("span8").addClass("span4"),a.find(".extype").removeClass("span4").addClass("span1"),a.find(".upcomp").removeClass("hidden").addClass("span3"),a.find(".currcomp").removeClass("hidden").addClass("span3"),a.find(".instver").removeClass("hidden").addClass("span1"),l.showyellowwarning&&a.find("#updateyellowwarning").removeClass("hidden"),l.showorangewarning&&a.find("#updateorangewarning").removeClass("hidden")):(s(this).data("state","closed"),s(this).html(COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSIONS_SHOW_MORE_COMPATIBILITY_INFORMATION),a.find(".exname").addClass("span8").removeClass("span4"),a.find(".extype").addClass("span4").removeClass("span1"),a.find(".upcomp").addClass("hidden").removeClass("span3"),a.find(".currcomp").addClass("hidden").removeClass("span3"),a.find(".instver").addClass("hidden").removeClass("span1"),a.find("#updateyellowwarning").addClass("hidden"),a.find("#updateorangewarning").addClass("hidden"))}),e.each(function(){l.checkCompatibility(s(this),l.setResultView)}))},checkCompatibility:function(e,t){var a={$element:e,compatibleVersion:0,serverError:1};s.getJSON(l.config.serverUrl,{"joomla-target-version":l.joomlaTargetVersion,"joomla-current-version":l.joomlaCurrentVersion,"extension-version":e.data("extension-current-version"),"extension-id":e.data("extensionId")}).done(function(e){a.serverError=0,a.compatibilityData=e.data}).always(function(e){t(a)})},setResultView:function(e){var t="";if(e.serverError)t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_SERVER_ERROR"),e.compatibilityData={resultGroup:4};else switch(e.compatibilityData.upgradeCompatibilityStatus.state){case l.STATE.COMPATIBLE:e.compatibilityData.upgradeWarning?(t='<span class="label label-warning">'+e.compatibilityData.upgradeCompatibilityStatus.compatibleVersion+"</span>",l.showyellowwarning=!0):t=0==e.compatibilityData.upgradeCompatibilityStatus.compatibleVersion?Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_NO_COMPATIBILITY_INFORMATION"):e.compatibilityData.upgradeCompatibilityStatus.compatibleVersion;break;case l.STATE.INCOMPATIBLE:case l.STATE.MISSING_COMPATIBILITY_TAG:t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_NO_COMPATIBILITY_INFORMATION"),l.showorangewarning=!0;break;default:t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_WARNING_UNKNOWN")}if(e.$element.html(t),t="",e.serverError)t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_SERVER_ERROR");else switch(e.compatibilityData.currentCompatibilityStatus.state){case l.STATE.COMPATIBLE:t=0==e.compatibilityData.currentCompatibilityStatus.compatibleVersion?Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_NO_COMPATIBILITY_INFORMATION"):e.compatibilityData.currentCompatibilityStatus.compatibleVersion;break;case l.STATE.INCOMPATIBLE:case l.STATE.MISSING_COMPATIBILITY_TAG:t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_NO_COMPATIBILITY_INFORMATION");break;default:t=Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_EXTENSION_WARNING_UNKNOWN")}var a=e.$element.data("extensionId");if(o.getElementById("available-version-"+a).innerHTML=t,e.$element.closest("tr").appendTo(s("#compatibilitytype"+e.compatibilityData.resultGroup+" tbody")),s("#compatibilitytype"+e.compatibilityData.resultGroup).css("display","block"),o.getElementById("compatibilitytype0").style.display="block",3===e.compatibilityData.resultGroup)for(var i in l.nonCoreCriticalPlugins)l.nonCoreCriticalPlugins[i].package_id!=a&&l.nonCoreCriticalPlugins[i].extension_id!=a||(s("#plg_"+l.nonCoreCriticalPlugins[i].extension_id).remove(),l.nonCoreCriticalPlugins.splice(i,1));if(0==s("#preupdatecheckheadings table td").length&&s("#preupdatecheckheadings").css("display","none"),0==s("#compatibilitytype0 tbody td").length){for(var i in s("#compatibilitytype0").css("display","none"),l.nonCoreCriticalPlugins){var n=s("td[data-extension-id="+l.nonCoreCriticalPlugins[i].extension_id+"]");n.length||(n=s("td[data-extension-id="+l.nonCoreCriticalPlugins[i].package_id+"]")),n.length&&((n=n.closest("tr")).addClass("error"),(n=n.find("td:first-child")).html(n.html()+'<span class="label label-warning " ><span class="icon-warning"></span>'+Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_POTENTIALLY_DANGEROUS_PLUGIN")+'</span><span class="label label-important hasPopover"  title="'+Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_POTENTIALLY_DANGEROUS_PLUGIN")+'" data-content="'+Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_POTENTIALLY_DANGEROUS_PLUGIN_DESC")+'"><span class="icon-help"></span>'+Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_HELP")+"</span>"),(n=n.find(".hasPopover")).css("cursor","pointer"),n.popover({placement:"top",trigger:"focus click"}))}0==l.nonCoreCriticalPlugins.length?(s("#preupdateCheckWarning, #preupdateconfirmation, #preupdatecheckbox, #preupdatecheckheadings").css("display","none"),s("#preupdatecheckbox #noncoreplugins").prop("checked",!0),s("button.submitupdate").removeClass("disabled"),s("button.submitupdate").prop("disabled",!1)):(s("#preupdateCheckWarning").addClass("hidden"),s("#preupdateCheckCompleteProblems").removeClass("hidden"),s("#preupdateconfirmation .preupdateconfirmation_label h3").html(Joomla.JText._("COM_JOOMLAUPDATE_VIEW_DEFAULT_POTENTIALLY_DANGEROUS_PLUGIN_LIST")),s("#preupdateconfirmation .preupdateconfirmation_label").removeClass("label-warning").addClass("label-important"))}}};o.addEventListener("DOMContentLoaded",function(){s(l.run)})}(jQuery,document,window);
