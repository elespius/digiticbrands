Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},function(){"use strict";var e=function(e){var t=document.getElementById("myTabContent"),o=document.getElementById("attrib-crop");t.classList.add("row","ml-0","mr-0","p-0"),o.classList.add("col-md-3","p-4");var a=document.getElementById("media-manager-edit-container"),n=document.createElement("div"),r=(document.createElement("div"),document.createElement("img")),d=document.createElement("img");r.src=e.contents,d.src=e.contents,d.id="image-preview",r.style.maxWidth="100%",d.style.maxWidth="100%",n.appendChild(r),a.appendChild(n),Joomla.cropper&&(Joomla.cropper={}),Joomla.cropperCrop=new Cropper(r,{responsive:!0,restore:!0,autoCrop:!0,movable:!1,zoomable:!1,rotatable:!1,autoCropArea:1,minContainerWidth:r.offsetWidth,minContainerHeight:r.offsetHeight,crop:function(e){document.getElementById("jform_crop_x").value=e.detail.x,document.getElementById("jform_crop_y").value=e.detail.y,document.getElementById("jform_crop_width").value=e.detail.width,document.getElementById("jform_crop_height").value=e.detail.height;var t="jpg"===Joomla.MediaManager.Edit.original.extension?"jpeg":Joomla.MediaManager.Edit.original.extension,o=document.getElementById("jform_crop_quality").value;Joomla.MediaManager.Edit.current.contents=Joomla.cropperCrop.getCroppedCanvas().toDataURL("image/"+t,o),window.dispatchEvent(new Event("mediaManager.history.point"))}}),document.getElementById("jform_crop_x").value=0,document.getElementById("jform_crop_y").value=0,document.getElementById("jform_crop_width").value=r.offsetWidth,document.getElementById("jform_crop_height").value=r.offsetHeight};Joomla.MediaManager.Edit.crop={Activate:function(t){e(t)},Deactivate:function(){Joomla.cropperCrop&&Joomla.cropperCrop.destroy()}}}();