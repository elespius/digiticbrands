tinymce.PluginManager.add("joomlabreak", function(a) {
	a.addCommand("mceJoomlaBreak", function() {
		var myRe = /<hr\s*(id="system-readmore")/gi,
			tiny_text = a.getContent(),
			is_set = myRe.exec(tiny_text);

		if (is_set != null) {
			alert(hrExists);
		}
		else
		{
			a.insertContent("<hr id=\"system-readmore\" />");
		}
	}), a.addButton("joomlabreak", {
		text: 'Joomla!',
		title: "Joomla Read More",
		icon: 'pagebreak',
		cmd: "mceJoomlaBreak"
	}), a.addMenuItem("joomlabreak", {
		text: "Joomla Read More",
		icon: "pagebreak",
		cmd: "mceJoomlaBreak",
		context: "insert"
	})
});
