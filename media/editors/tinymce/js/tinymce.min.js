!function(t,e,n,o){"use strict";var i={setupEditors:function(t){t=t||o;for(var n=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{},i=t.querySelectorAll(".js-editor-tinymce"),r=0,a=i.length;r<a;r++){var s=i[r].querySelector("textarea");this.setupEditor(s,n)}},setupEditor:function(n,i){if(!e.editors.instances[n.id]){var r=n?n.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",a=i&&i.tinyMCE||{},s=a.default||{},u=a[r]?a[r]:s;u=u.joomlaMergeDefaults?e.extend(e.extend({},s),u):e.extend({},u),n&&(u.selector=null,u.target=n);var c=[];u.joomlaExtButtons.names.forEach(function(t,n){var i={};i.text=t,i.icon=u.joomlaExtButtons.icons[n],u.joomlaExtButtons.modals[n]?i.onclick=function(){var n=o.getElementById(t.replace(" ","")+"Modal");jQuery(n).modal("show"),e.currentModal=n}:i.onclick=function(){new Function(u.joomlaExtButtons.script[n])()},c.push(i)}),u.setup=function(t){t.addButton("mybutton",{type:"menubutton",text:"CMS Content",icon:"none icon-joomla",menu:c})};var d=new t.Editor(n.id,u,tinymce.EditorManager);d.render(),e.editors.instances[n.id]={getValue:function(){return this.instance.getContent()},setValue:function(t){return this.instance.setContent(t)},replaceSelection:function(t){return this.instance.execCommand("mceInsertContent",!1,t)},id:n.id,instance:d,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},o.getElementById(d.id).form.addEventListener("submit",function(){return e.editors.instances[d.targetElm.id].onSave()})}}};e.JoomlaTinyMCE=i,o.addEventListener("DOMContentLoaded",function(){e.JoomlaTinyMCE.setupEditors(o)}),o.addEventListener("joomla:updated",function(t){e.JoomlaTinyMCE.setupEditors(t.target)})}(tinyMCE,Joomla,window,document);