!function(a,b,c,d){"use strict";c.getSize=c.getSize||function(){return{x:c.innerWidth,y:c.innerHeight}},c.jInsertEditorText=function(a,c){b.editors.instances[c].replaceSelection(a)};var e={setupEditors:function(a){a=a||d;for(var c=b.getOptions?b.getOptions("plg_editor_tinymce",{}):b.optionsStorage.plg_editor_tinymce||{},e=a.querySelectorAll(".joomla-editor-tinymce"),f=0,g=e.length;f<g;f++){var h=e[f].querySelector("textarea");this.setupEditor(h,c)}},setupEditor:function(e,f){var g=e?e.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",h=f?f.tinyMCE||{}:{},i=h.default||{},j=h[g]?h[g]:i;j=b.extend({},j),e&&(j.selector=null,j.target=e),j.setupCallbackString&&!j.setup&&(j.setup=new Function("editor",j.setupCallbackString)),c.parent.Joomla.getOptions("keySave")&&(j.plugins="save",j.toolbar="save",j.save_onsavecallback=function(){c.parent.Joomla.submitbutton(c.parent.Joomla.getOptions("keySave").task)}),c.parent.Joomla.getOptions("dnd-enabled")&&tinymce.PluginManager.load("jdragdrop",c.parent.Joomla.getOptions("dnd-path"));var k=new a.Editor(e.id,j,tinymce.EditorManager);k.render(),b.editors.instances[e.id]={getValue:function(){return this.instance.getContent()},setValue:function(a){return this.instance.setContent(a)},replaceSelection:function(a){return this.instance.execCommand("mceInsertContent",!1,a)},id:e.id,instance:k,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},d.getElementById(k.id).form.addEventListener("submit",function(){b.editors.instances[k.targetElm.id].onSave()})}};b.JoomlaTinyMCE=e,d.addEventListener("DOMContentLoaded",function(){b.JoomlaTinyMCE.setupEditors(),c.jQuery&&jQuery(d).on("subform-row-add",function(a,c){b.JoomlaTinyMCE.setupEditors(c)})})}(tinyMCE,Joomla,window,document);