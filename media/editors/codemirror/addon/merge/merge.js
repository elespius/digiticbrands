(function(){var q=CodeMirror.Pos;var g="http://www.w3.org/2000/svg";function k(D,E){this.mv=D;this.type=E;this.classes=E=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"};
}k.prototype={constructor:k,init:function(F,E,D){this.edit=this.mv.edit;this.orig=CodeMirror(F,u({value:E,readOnly:true},u(D)));this.diff=b(E,D.value);
this.diffOutOfDate=false;this.forceUpdate=y(this);A(this,true,false);n(this);}};function y(D){var E={from:0,to:0,marked:[]};var I={from:0,to:0,marked:[]};
var H;function G(){if(D.diffOutOfDate){D.diff=b(D.orig.getValue(),D.edit.getValue());D.diffOutOfDate=false;}s(D.edit,D.diff,E,DIFF_INSERT,D.classes);s(D.orig,D.diff,I,DIFF_DELETE,D.classes);
o(D);}function F(J){clearTimeout(H);H=setTimeout(G,J==true?250:100);}D.edit.on("change",function(){if(!D.diffOutOfDate){D.diffOutOfDate=true;E.from=E.to=I.from=I.to=0;
}F(true);});D.edit.on("viewportChange",F);D.orig.on("viewportChange",F);G();return G;}function n(D){D.edit.on("scroll",function(){z(D,DIFF_INSERT)&&o(D);
});D.orig.on("scroll",function(){z(D,DIFF_DELETE)&&o(D);});}function z(P,H){if(P.diffOutOfDate){return false;}if(!P.lockScroll){return true;}var I,K,F=+new Date;
if(H==DIFF_INSERT){I=P.edit;K=P.orig;}else{I=P.orig;K=P.edit;}if(I.state.scrollSetBy==P&&(I.state.scrollSetAt||0)+50>F){return false;}var D=I.getScrollInfo(),E=0.5*D.clientHeight,N=D.top+E;
var T=I.lineAtHeight(N,"local");var R=C(P.diff,T,H==DIFF_INSERT);var U=p(I,H==DIFF_INSERT?R.edit:R.orig);var M=p(K,H==DIFF_INSERT?R.orig:R.edit);var L=(N-U.top)/(U.bot-U.top);
var G=(M.top-E)+L*(M.bot-M.top);var J,O;if(G>D.top&&(O=D.top/E)<1){G=G*O+D.top*(1-O);}else{if((J=D.height-D.clientHeight-D.top)<E){var S=K.getScrollInfo();
var Q=S.height-S.clientHeight-G;if(Q>J&&(O=J/E)<1){G=G*O+(S.height-S.clientHeight-J)*(1-O);}}}K.scrollTo(D.left,G);K.state.scrollSetAt=F;K.state.scrollSetBy=P;
return true;}function p(D,E){var F=E.after;if(F==null){F=D.lastLine()+1;}return{top:D.heightAtLine(E.before||0,"local"),bot:D.heightAtLine(F,"local")};
}function A(D,F,E){D.lockScroll=F;if(F&&E!=false){z(D,DIFF_INSERT)&&o(D);}D.lockButton.innerHTML=F?"\u21db\u21da":"\u21db&nbsp;&nbsp;\u21da";}function c(G,D,F){for(var E=0;
E<D.length;++E){var H=D[E];if(H instanceof CodeMirror.TextMarker){H.clear();}else{G.removeLineClass(H,"background",F.chunk);G.removeLineClass(H,"background",F.start);
G.removeLineClass(H,"background",F.end);}}D.length=0;}function s(G,I,H,F,E){var D=G.getViewport();G.operation(function(){if(H.from==H.to||D.from-H.to>20||H.from-D.to>20){c(G,H.marked,E);
m(G,I,F,H.marked,D.from,D.to,E);H.from=D.from;H.to=D.to;}else{if(D.from<H.from){m(G,I,F,H.marked,D.from,H.from,E);H.from=D.from;}if(D.to>H.to){m(G,I,F,H.marked,H.to,D.to,E);
H.to=D.to;}}});}function m(K,N,J,T,S,F,V){var L=q(0,0);var P=q(S,0),O=K.clipPos(q(F-1));var D=J==DIFF_DELETE?V.del:V.insert;function M(ae,aa){var ad=Math.max(S,ae),ab=Math.min(F,aa);
for(var ac=ad;ac<ab;++ac){var Z=K.addLineClass(ac,"background",V.chunk);if(ac==ae){K.addLineClass(Z,"background",V.start);}if(ac==aa-1){K.addLineClass(Z,"background",V.end);
}T.push(Z);}if(ae==aa&&ad==aa&&ab==aa){if(ad){T.push(K.addLineClass(ad-1,"background",V.end));}else{T.push(K.addLineClass(ad,"background",V.start));}}}var Y=0;
for(var U=0;U<N.length;++U){var R=N[U],E=R[0],Q=R[1];if(E==DIFF_EQUAL){var I=L.line+(d(N,U)?0:1);r(L,Q);var H=L.line+(h(N,U)?1:0);if(H>I){if(U){M(Y,I);
}Y=H;}}else{if(E==J){var G=r(L,Q,true);var X=l(P,L),W=j(O,G);if(!i(X,W)){T.push(K.markText(X,W,{className:D}));}L=G;}}}if(Y<=L.line){M(Y,L.line+1);}}function o(G){if(G.svg){t(G.svg);
var E=G.gap.offsetWidth;v(G.svg,"width",E,"height",G.gap.offsetHeight);}t(G.copyButtons);var I=G.type=="left";var J=G.edit.getViewport(),F=G.orig.getViewport();
var D=G.edit.getScrollInfo().top,H=G.orig.getScrollInfo().top;e(G.diff,function(O,Q,R,N){if(R>J.to||N<J.from||O>F.to||Q<F.from){return;}var K=G.orig.heightAtLine(O,"local")-H,T=K;
if(G.svg){var M=G.edit.heightAtLine(R,"local")-D;if(I){var P=K;K=M;M=P;}var S=G.orig.heightAtLine(Q,"local")-H;var V=G.edit.heightAtLine(N,"local")-D;if(I){var P=S;
S=V;V=P;}var W=" C "+E/2+" "+M+" "+E/2+" "+K+" "+(E+2)+" "+K;var U=" C "+E/2+" "+S+" "+E/2+" "+V+" -1 "+V;v(G.svg.appendChild(document.createElementNS(g,"path")),"d","M -1 "+M+W+" L "+(E+2)+" "+S+U+" z","class",G.classes.connect);
}var L=G.copyButtons.appendChild(f("div",G.type=="left"?"\u21dd":"\u21dc","CodeMirror-merge-copy"));L.title="Revert chunk";L.chunk={topEdit:R,botEdit:N,topOrig:O,botOrig:Q};
L.style.top=T+"px";});}function B(E,D){if(E.diffOutOfDate){return;}E.edit.replaceRange(E.orig.getRange(q(D.topOrig,0),q(D.botOrig,0)),q(D.topEdit,0),q(D.botEdit,0));
}var x=CodeMirror.MergeView=function(I,R){if(!(this instanceof x)){return new x(I,R);}var L=R.origLeft,J=R.origRight==null?R.orig:R.origRight;var O=L!=null,S=J!=null;
var M=1+(O?1:0)+(S?1:0);var F=[],H=this.left=null,P=this.right=null;if(O){H=this.left=new k(this,"left");var E=f("div",null,"CodeMirror-merge-pane");F.push(E);
F.push(w(H));}var K=f("div",null,"CodeMirror-merge-pane");F.push(K);if(S){P=this.right=new k(this,"right");F.push(w(P));var N=f("div",null,"CodeMirror-merge-pane");
F.push(N);}(S?N:K).className+=" CodeMirror-merge-pane-rightmost";F.push(f("div",null,null,"height: 0; clear: both;"));var G=this.wrap=I.appendChild(f("div",F,"CodeMirror-merge CodeMirror-merge-"+M+"pane"));
this.edit=CodeMirror(K,u(R));if(H){H.init(E,L,R);}if(P){P.init(N,J,R);}var D=function(){if(H){o(H);}if(P){o(P);}};CodeMirror.on(window,"resize",D);var Q=setInterval(function(){for(var T=G.parentNode;
T&&T!=document.body;T=T.parentNode){}if(!T){clearInterval(Q);CodeMirror.off(window,"resize",D);}},5000);};function w(G){var F=G.lockButton=f("div",null,"CodeMirror-merge-scrolllock");
F.title="Toggle locked scrolling";var H=f("div",[F],"CodeMirror-merge-scrolllock-wrap");CodeMirror.on(F,"click",function(){A(G,!G.lockScroll);});G.copyButtons=f("div",null,"CodeMirror-merge-copybuttons-"+G.type);
CodeMirror.on(G.copyButtons,"click",function(J){var I=J.target||J.srcElement;if(I.chunk){B(G,I.chunk);}});var E=[G.copyButtons,H];var D=document.createElementNS&&document.createElementNS(g,"svg");
if(D&&!D.createSVGRect){D=null;}G.svg=D;if(D){E.push(D);}return G.gap=f("div",E,"CodeMirror-merge-gap");}x.prototype={constuctor:x,editor:function(){return this.edit;
},rightOriginal:function(){return this.right&&this.right.orig;},leftOriginal:function(){return this.left&&this.left.orig;}};var a=new diff_match_patch();
function b(E,D){var H=a.diff_main(E,D);a.diff_cleanupSemantic(H);for(var G=0;G<H.length;++G){var F=H[G];if(!F[1]){H.splice(G--,1);}else{if(G&&H[G-1][0]==F[0]){H.splice(G--,1);
H[G][1]+=F[1];}}}return H;}function e(Q,I){var N=0,M=0;var R=q(0,0),P=q(0,0);for(var F=0;F<Q.length;++F){var E=Q[F],O=E[0];if(O==DIFF_EQUAL){var D=d(Q,F)?0:1;
var H=R.line+D,G=P.line+D;r(R,E[1],null,P);var J=h(Q,F)?1:0;var L=R.line+J,K=P.line+J;if(L>H){if(F){I(M,G,N,H);}N=L;M=K;}}else{r(O==DIFF_INSERT?R:P,E[1]);
}}if(N<=R.line||M<=P.line){I(M,P.line+1,N,R.line+1);}}function h(F,D){if(D==F.length-1){return true;}var E=F[D+1][1];if(E.length==1||E.charCodeAt(0)!=10){return false;
}if(D==F.length-2){return true;}E=F[D+2][1];return E.length>1&&E.charCodeAt(0)==10;}function d(F,D){if(D==0){return true;}var E=F[D-1][1];if(E.charCodeAt(E.length-1)!=10){return false;
}if(D==1){return true;}E=F[D-2][1];return E.charCodeAt(E.length-1)==10;}function C(I,J,F){var E,D,H,G;e(I,function(K,P,N,L){var M=F?N:K;var O=F?L:P;if(D==null){if(M>J){D=N;
G=K;}else{if(O>J){D=L;G=P;}}}if(O<=J){E=L;H=P;}else{if(M<=J){E=N;H=K;}}});return{edit:{before:E,after:D},orig:{before:H,after:G}};}function f(D,H,G,F){var I=document.createElement(D);
if(G){I.className=G;}if(F){I.style.cssText=F;}if(typeof H=="string"){I.appendChild(document.createTextNode(H));}else{if(H){for(var E=0;E<H.length;++E){I.appendChild(H[E]);
}}}return I;}function t(E){for(var D=E.childNodes.length;D>0;--D){E.removeChild(E.firstChild);}}function v(D){for(var E=1;E<arguments.length;E+=2){D.setAttribute(arguments[E],arguments[E+1]);
}}function u(E,D){if(!D){D={};}for(var F in E){if(E.hasOwnProperty(F)){D[F]=E[F];}}return D;}function r(J,H,I,E){var G=I?q(J.line,J.ch):J,D=0;for(;;){var F=H.indexOf("\n",D);
if(F==-1){break;}++G.line;if(E){++E.line;}D=F+1;}G.ch=(D?0:G.ch)+(H.length-D);if(E){E.ch=(D?0:E.ch)+(H.length-D);}return G;}function j(E,D){return(E.line-D.line||E.ch-D.ch)<0?E:D;
}function l(E,D){return(E.line-D.line||E.ch-D.ch)>0?E:D;}function i(E,D){return E.line==D.line&&E.ch==D.ch;}})();