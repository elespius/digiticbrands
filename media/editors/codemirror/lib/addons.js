(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineOption("fullScreen",false,function(d,f,e){if(e==a.Init){e=false}if(!e==!f){return}if(f){b(d)}else{c(d)}});function b(d){var e=d.getWrapperElement();d.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:e.style.width,height:e.style.height};e.style.width="";e.style.height="auto";e.className+=" CodeMirror-fullscreen";document.documentElement.style.overflow="hidden";d.refresh()}function c(d){var e=d.getWrapperElement();e.className=e.className.replace(/\s*CodeMirror-fullscreen\b/,"");document.documentElement.style.overflow="";var f=d.state.fullScreenRestore;e.style.width=f.width;e.style.height=f.height;window.scrollTo(f.scrollLeft,f.scrollTop);d.refresh()}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var h="()[]{}''\"\"";var a="[]{}";var g=/\s/;var e=b.Pos;b.defineOption("autoCloseBrackets",false,function(i,n,j){if(j!=b.Init&&j){i.removeKeyMap("autoCloseBrackets")}if(!n){return}var l=h,k=a;if(typeof n=="string"){l=n}else{if(typeof n=="object"){if(n.pairs!=null){l=n.pairs}if(n.explode!=null){k=n.explode}}}var m=f(l);if(k){m.Enter=c(k)}i.addKeyMap(m)});function d(i,k){var j=i.getRange(e(k.line,k.ch-1),e(k.line,k.ch+1));return j.length==2?j:null}function f(l){var m={name:"autoCloseBrackets",Backspace:function(n){if(n.getOption("disableInput")){return b.Pass}var o=n.listSelections();for(var p=0;p<o.length;p++){if(!o[p].empty()){return b.Pass}var q=d(n,o[p].head);if(!q||l.indexOf(q)%2!=0){return b.Pass}}for(var p=o.length-1;p>=0;p--){var r=o[p].head;n.replaceRange("",e(r.line,r.ch-1),e(r.line,r.ch+1))}}};var k="";for(var j=0;j<l.length;j+=2){(function(n,i){if(n!=i){k+=i}m["'"+n+"'"]=function(o){if(o.getOption("disableInput")){return b.Pass}var p=o.listSelections(),u,t;for(var s=0;s<p.length;s++){var q=p[s],v=q.head,r;if(n=="'"&&o.getTokenTypeAt(v)=="comment"){return b.Pass}var t=o.getRange(v,e(v.line,v.ch+1));if(!q.empty()){r="surround"}else{if(n==i&&t==i){if(o.getRange(v,e(v.line,v.ch+3))==n+n+n){r="skipThree"}else{r="skip"}}else{if(n==i&&v.ch>1&&o.getRange(e(v.line,v.ch-2),v)==n+n&&(v.ch<=2||o.getRange(e(v.line,v.ch-3),e(v.line,v.ch-2))!=n)){r="addFour"}else{if(n==i&&b.isWordChar(t)){return b.Pass}else{if(o.getLine(v.line).length==v.ch||k.indexOf(t)>=0||g.test(t)){r="both"}else{return b.Pass}}}}}if(!u){u=r}else{if(u!=r){return b.Pass}}}o.operation(function(){if(u=="skip"){o.execCommand("goCharRight")}else{if(u=="skipThree"){for(var x=0;x<3;x++){o.execCommand("goCharRight")}}else{if(u=="surround"){var w=o.getSelections();for(var x=0;x<w.length;x++){w[x]=n+w[x]+i}o.replaceSelections(w,"around")}else{if(u=="both"){o.replaceSelection(n+i,null);o.execCommand("goCharLeft")}else{if(u=="addFour"){o.replaceSelection(n+n+n+n,"before");o.execCommand("goCharRight")}}}}}})};if(n!=i){m["'"+i+"'"]=function(o){var p=o.listSelections();for(var r=0;r<p.length;r++){var q=p[r];if(!q.empty()||o.getRange(q.head,e(q.head.line,q.head.ch+1))!=i){return b.Pass}}o.execCommand("goCharRight")}}})(l.charAt(j),l.charAt(j+1))}return m}function c(i){return function(j){if(j.getOption("disableInput")){return b.Pass}var k=j.listSelections();for(var l=0;l<k.length;l++){if(!k[l].empty()){return b.Pass}var m=d(j,k[l].head);if(!m||i.indexOf(m)%2!=0){return b.Pass}}j.operation(function(){j.replaceSelection("\n\n",null);j.execCommand("goCharLeft");k=j.listSelections();for(var o=0;o<k.length;o++){var n=k[o].head.line;j.indentLine(n,null,true);j.indentLine(n+1,null,true)}})}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(b){b.defineOption("autoCloseTags",false,function(h,k,i){if(i!=b.Init&&i){h.removeKeyMap("autoCloseTags")}if(!k){return}var j={name:"autoCloseTags"};if(typeof k!="object"||k.whenClosing){j["'/'"]=function(l){return e(l)}}if(typeof k!="object"||k.whenOpening){j["'>'"]=function(l){return a(l)}}h.addKeyMap(j)});var d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(w){if(w.getOption("disableInput")){return b.Pass}var j=w.listSelections(),q=[];for(var r=0;r<j.length;r++){if(!j[r].empty()){return b.Pass}var v=j[r].head,x=w.getTokenAt(v);var y=b.innerMode(w.getMode(),x.state),h=y.state;if(y.mode.name!="xml"||!h.tagName){return b.Pass}var k=w.getOption("autoCloseTags"),s=y.mode.configuration=="html";var m=(typeof k=="object"&&k.dontCloseTags)||(s&&d);var u=(typeof k=="object"&&k.indentTags)||(s&&c);var p=h.tagName;if(x.end>v.ch){p=p.slice(0,p.length-x.end+v.ch)}var t=p.toLowerCase();if(!p||x.type=="string"&&(x.end!=v.ch||!/[\"\']/.test(x.string.charAt(x.string.length-1))||x.string.length==1)||x.type=="tag"&&h.type=="closeTag"||x.string.indexOf("/")==(x.string.length-1)||m&&g(m,t)>-1||f(w,p,v,h,true)){return b.Pass}var o=u&&g(u,t)>-1;q[r]={indent:o,text:">"+(o?"\n\n":"")+"</"+p+">",newPos:o?b.Pos(v.line+1,0):b.Pos(v.line,v.ch+1)}}for(var r=j.length-1;r>=0;r--){var n=q[r];w.replaceRange(n.text,j[r].head,j[r].anchor,"+insert");var l=w.listSelections().slice(0);l[r]={head:n.newPos,anchor:n.newPos};w.setSelections(l);if(n.indent){w.indentLine(n.newPos.line,null,true);w.indentLine(n.newPos.line+1,null,true)}}}function e(h){if(h.getOption("disableInput")){return b.Pass}var j=h.listSelections(),n=[];for(var m=0;m<j.length;m++){if(!j[m].empty()){return b.Pass}var p=j[m].head,l=h.getTokenAt(p);var k=b.innerMode(h.getMode(),l.state),o=k.state;if(l.type=="string"||l.string.charAt(0)!="<"||l.start!=p.ch-1||k.mode.name!="xml"||!o.context||!o.context.tagName||f(h,o.context.tagName,p,o)){return b.Pass}n[m]="/"+o.context.tagName+">"}h.replaceSelections(n)}function g(l,h){if(l.indexOf){return l.indexOf(h)}for(var j=0,k=l.length;j<k;++j){if(l[j]==h){return j}}return -1}function f(q,j,p,h,s){if(!b.scanForClosingTag){return false}var k=Math.min(q.lastLine()+1,p.line+500);var r=b.scanForClosingTag(q,p,null,k);if(!r||r.tag!=j){return false}var l=h.context;for(var n=s?1:0;l&&l.tagName==j;l=l.prev){++n}p=r.to;for(var m=1;m<n;m++){var o=b.scanForClosingTag(q,p,null,k);if(!o||o.tag!=j){return false}p=o.to}return true}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var i=e.Pos;var a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function f(q,m,p,k){var s=q.getLineHandle(m.line),o=m.ch-1;var n=(o>=0&&a[s.text.charAt(o)])||a[s.text.charAt(++o)];if(!n){return null}var l=n.charAt(1)==">"?1:-1;if(p&&(l>0)!=(o==m.ch)){return null}var j=q.getTokenTypeAt(i(m.line,o+1));var r=g(q,i(m.line,o+(l>0?1:0)),l,j||null,k);if(r==null){return null}return{from:i(m.line,o),to:r&&r.pos,match:r&&r.ch==n.charAt(0),forward:l>0}}function g(w,r,n,k,m){var l=(m&&m.maxScanLineLength)||10000;var t=(m&&m.maxScanLines)||1000;var v=[];var x=m&&m.bracketRegex?m.bracketRegex:/[(){}[\]]/;var q=n>0?Math.min(r.line+t,w.lastLine()+1):Math.max(w.firstLine()-1,r.line-t);for(var o=r.line;o!=q;o+=n){var y=w.getLine(o);if(!y){continue}var u=n>0?0:y.length-1,p=n>0?y.length:-1;if(y.length>l){continue}if(o==r.line){u=r.ch-(n<0?1:0)}for(;u!=p;u+=n){var j=y.charAt(u);if(x.test(j)&&(k===undefined||w.getTokenTypeAt(i(o,u+1))==k)){var s=a[j];if((s.charAt(1)==">")==(n>0)){v.push(j)}else{if(!v.length){return{pos:i(o,u),ch:j}}else{v.pop()}}}}}return o-n==(n>0?w.lastLine():w.firstLine())?false:null}function b(s,n,m){var k=s.state.matchBrackets.maxHighlightLineLength||1000;var r=[],l=s.listSelections();for(var o=0;o<l.length;o++){var q=l[o].empty()&&f(s,l[o].head,false,m);if(q&&s.getLine(q.from.line).length<=k){var j=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";r.push(s.markText(q.from,i(q.from.line,q.from.ch+1),{className:j}));if(q.to&&s.getLine(q.to.line).length<=k){r.push(s.markText(q.to,i(q.to.line,q.to.ch+1),{className:j}))}}}if(r.length){if(d&&s.state.focused){s.display.input.focus()}var p=function(){s.operation(function(){for(var t=0;t<r.length;t++){r[t].clear()}})};if(n){setTimeout(p,800)}else{return p}}}var c=null;function h(j){j.operation(function(){if(c){c();c=null}c=b(j,false,j.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(j,l,k){if(k&&k!=e.Init){j.off("cursorActivity",h)}if(l){j.state.matchBrackets=typeof l=="object"?l:{};j.on("cursorActivity",h)}});e.defineExtension("matchBrackets",function(){b(this,true)});e.defineExtension("findMatchingBracket",function(l,j,k){return f(this,l,j,k)});e.defineExtension("scanForBracket",function(m,k,l,j){return g(this,m,k,l,j)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(c){c.defineOption("matchTags",false,function(e,g,f){if(f&&f!=c.Init){e.off("cursorActivity",b);e.off("viewportChange",d);a(e)}if(g){e.state.matchBothTags=typeof g=="object"&&g.bothTags;e.on("cursorActivity",b);e.on("viewportChange",d);b(e)}});function a(e){if(e.state.tagHit){e.state.tagHit.clear()}if(e.state.tagOther){e.state.tagOther.clear()}e.state.tagHit=e.state.tagOther=null}function b(e){e.state.failedTagMatch=false;e.operation(function(){a(e);if(e.somethingSelected()){return}var j=e.getCursor(),g=e.getViewport();g.from=Math.min(g.from,j.line);g.to=Math.max(j.line+1,g.to);var h=c.findMatchingTag(e,j,g);if(!h){return}if(e.state.matchBothTags){var i=h.at=="open"?h.open:h.close;if(i){e.state.tagHit=e.markText(i.from,i.to,{className:"CodeMirror-matchingtag"})}}var f=h.at=="close"?h.open:h.close;if(f){e.state.tagOther=e.markText(f.from,f.to,{className:"CodeMirror-matchingtag"})}else{e.state.failedTagMatch=true}})}function d(e){if(e.state.failedTagMatch){b(e)}}c.commands.toMatchingTag=function(f){var g=c.findMatchingTag(f,f.getCursor());if(g){var e=g.at=="close"?g.open:g.close;if(e){f.extendSelection(e.to,e.from)}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(m,h){var o=h.line,g=m.getLine(o);var n,t;function d(u){for(var i=h.ch,v=0;;){var w=i<=0?-1:g.lastIndexOf(u,i-1);if(w==-1){if(v==1){break}v=1;i=g.length;continue}if(v==1&&w<h.ch){break}t=m.getTokenTypeAt(a.Pos(o,w+1));if(!/^(comment|string)/.test(t)){return w+1}i=w-1}}var j="{",e="}",n=d("{");if(n==null){j="[",e="]";n=d("[")}if(n==null){return}var l=1,c=m.lastLine(),f,q;outer:for(var s=o;s<=c;++s){var p=m.getLine(s),k=s==o?n:0;for(;;){var b=p.indexOf(j,k),r=p.indexOf(e,k);if(b<0){b=p.length}if(r<0){r=p.length}k=Math.min(b,r);if(k==p.length){break}if(m.getTokenTypeAt(a.Pos(s,k+1))==t){if(k==b){++l}else{if(!--l){f=s;q=k;break outer}}}++k}}if(f==null||o==f&&q==n){return}return{from:a.Pos(o,n),to:a.Pos(f,q)}});a.registerHelper("fold","import",function(b,h){function g(k){if(k<b.firstLine()||k>b.lastLine()){return null}var o=b.getTokenAt(a.Pos(k,1));if(!/\S/.test(o.string)){o=b.getTokenAt(a.Pos(k,o.end+1))}if(o.type!="keyword"||o.string!="import"){return null}for(var l=k,m=Math.min(b.lastLine(),k+10);l<=m;++l){var n=b.getLine(l),j=n.indexOf(";");if(j!=-1){return{startCh:o.end,end:a.Pos(l,j)}}}}var h=h.line,d=g(h),f;if(!d||g(h-1)||((f=g(h-2))&&f.end.line==h-1)){return null}for(var c=d.end;;){var e=g(c.line+1);if(e==null){break}c=e.end}return{from:b.clipPos(a.Pos(h,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,g){function f(h){if(h<b.firstLine()||h>b.lastLine()){return null}var i=b.getTokenAt(a.Pos(h,1));if(!/\S/.test(i.string)){i=b.getTokenAt(a.Pos(h,i.end+1))}if(i.type=="meta"&&i.string.slice(0,8)=="#include"){return i.start+8}}var g=g.line,d=f(g);if(d==null||f(g-1)!=null){return null}for(var c=g;;){var e=f(c+1);if(e==null){break}++c}return{from:a.Pos(g,d+1),to:b.clipPos(a.Pos(c))}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){function d(n,m,o,i){if(o&&o.call){var g=o;o=null}else{var g=c(n,o,"rangeFinder")}if(typeof m=="number"){m=b.Pos(m,0)}var h=c(n,o,"minFoldSize");function f(p){var q=g(n,m);if(!q||q.to.line-q.from.line<h){return null}var s=n.findMarksAt(q.from);for(var r=0;r<s.length;++r){if(s[r].__isFold&&i!=="fold"){if(!p){return null}q.cleared=true;s[r].clear()}}return q}var k=f(true);if(c(n,o,"scanUp")){while(!k&&m.line>n.firstLine()){m=b.Pos(m.line-1,0);k=f(false)}}if(!k||k.cleared||i==="unfold"){return}var l=e(n,o);b.on(l,"mousedown",function(p){j.clear();b.e_preventDefault(p)});var j=n.markText(k.from,k.to,{replacedWith:l,clearOnEnter:true,__isFold:true});j.on("clear",function(q,p){b.signal(n,"unfold",n,q,p)});b.signal(n,"fold",n,k.from,k.to)}function e(f,g){var h=c(f,g,"widget");if(typeof h=="string"){var i=document.createTextNode(h);h=document.createElement("span");h.appendChild(i);h.className="CodeMirror-foldmarker"}return h}b.newFoldFunction=function(g,f){return function(h,i){d(h,i,{rangeFinder:g,widget:f})}};b.defineExtension("foldCode",function(h,f,g){d(this,h,f,g)});b.defineExtension("isFolded",function(h){var g=this.findMarksAt(h);for(var f=0;f<g.length;++f){if(g[f].__isFold){return true}}});b.commands.toggleFold=function(f){f.foldCode(f.getCursor())};b.commands.fold=function(f){f.foldCode(f.getCursor(),null,"fold")};b.commands.unfold=function(f){f.foldCode(f.getCursor(),null,"unfold")};b.commands.foldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"fold")}})};b.commands.unfoldAll=function(f){f.operation(function(){for(var g=f.firstLine(),h=f.lastLine();g<=h;g++){f.foldCode(b.Pos(g,0),null,"unfold")}})};b.registerHelper("fold","combine",function(){var f=Array.prototype.slice.call(arguments,0);return function(g,k){for(var h=0;h<f.length;++h){var j=f[h](g,k);if(j){return j}}}});b.registerHelper("fold","auto",function(f,k){var h=f.getHelpers(k,"fold");for(var g=0;g<h.length;g++){var j=h[g](f,k);if(j){return j}}});var a={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false};b.defineOption("foldOptions",null);function c(f,h,g){if(h&&h[g]!==undefined){return h[g]}var i=f.options.foldOptions;if(i&&i[g]!==undefined){return i[g]}return a[g]}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./foldcode"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./foldcode"],a)}else{a(CodeMirror)}}})(function(d){d.defineOption("foldGutter",false,function(m,o,n){if(n&&n!=d.Init){m.clearGutter(m.state.foldGutter.options.gutter);m.state.foldGutter=null;m.off("gutterClick",k);m.off("change",g);m.off("viewportChange",l);m.off("fold",e);m.off("unfold",e);m.off("swapDoc",b)}if(o){m.state.foldGutter=new j(i(o));b(m);m.on("gutterClick",k);m.on("change",g);m.on("viewportChange",l);m.on("fold",e);m.on("unfold",e);m.on("swapDoc",b)}});var h=d.Pos;function j(m){this.options=m;this.from=this.to=0}function i(m){if(m===true){m={}}if(m.gutter==null){m.gutter="CodeMirror-foldgutter"}if(m.indicatorOpen==null){m.indicatorOpen="CodeMirror-foldgutter-open"}if(m.indicatorFolded==null){m.indicatorFolded="CodeMirror-foldgutter-folded"}return m}function c(m,n){var p=m.findMarksAt(h(n));for(var o=0;o<p.length;++o){if(p[o].__isFold&&p[o].find().from.line==n){return true}}}function f(m){if(typeof m=="string"){var n=document.createElement("div");n.className=m;return n}else{return m.cloneNode(true)}}function a(m,q,p){var n=m.state.foldGutter.options,o=q;m.eachLine(q,p,function(r){var v=null;if(c(m,o)){v=f(n.indicatorFolded)}else{var u=h(o,0),t=n.rangeFinder||d.fold.auto;var s=t&&t(m,u);if(s&&s.from.line+1<s.to.line){v=f(n.indicatorOpen)}}m.setGutterMarker(r,n.gutter,v);++o})}function b(m){var n=m.getViewport(),o=m.state.foldGutter;if(!o){return}m.operation(function(){a(m,n.from,n.to)});o.from=n.from;o.to=n.to}function k(m,n,p){var o=m.state.foldGutter.options;if(p!=o.gutter){return}m.foldCode(h(n,0),o.rangeFinder)}function g(m){var o=m.state.foldGutter,n=m.state.foldGutter.options;o.from=o.to=0;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){b(m)},n.foldOnChangeTimeSpan||600)}function l(m){var o=m.state.foldGutter,n=m.state.foldGutter.options;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){var p=m.getViewport();if(o.from==o.to||p.from-o.to>20||o.from-p.to>20){b(m)}else{m.operation(function(){if(p.from<o.from){a(m,p.from,o.from);o.from=p.from}if(p.to>o.to){a(m,o.to,p.to);o.to=p.to}})}},n.updateViewportTimeSpan||400)}function e(m,p){var o=m.state.foldGutter,n=p.line;if(n>=o.from&&n<o.to){a(m,n,n+1)}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(i){var m=i.Pos;function l(r,q){return r.line-q.line||r.ch-q.ch}var j="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var o=j+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+j+"]["+o+"]*)","g");function b(q,r,t,s){this.line=r;this.ch=t;this.cm=q;this.text=q.getLine(r);this.min=s?s.from:q.firstLine();this.max=s?s.to-1:q.lastLine()}function h(q,s){var r=q.cm.getTokenTypeAt(m(q.line,s));return r&&/\btag\b/.test(r)}function a(q){if(q.line>=q.max){return}q.ch=0;q.text=q.cm.getLine(++q.line);return true}function n(q){if(q.line<=q.min){return}q.text=q.cm.getLine(--q.line);q.ch=q.text.length;return true}function g(s){for(;;){var r=s.text.indexOf(">",s.ch);if(r==-1){if(a(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r+1;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function k(r){for(;;){var q=r.ch?r.text.lastIndexOf("<",r.ch-1):-1;if(q==-1){if(n(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}d.lastIndex=q;r.ch=q;var s=d.exec(r.text);if(s&&s.index==q){return s}}}function p(q){for(;;){d.lastIndex=q.ch;var r=d.exec(q.text);if(!r){if(a(q)){continue}else{return}}if(!h(q,r.index+1)){q.ch=r.index+1;continue}q.ch=r.index+r[0].length;return r}}function e(s){for(;;){var r=s.ch?s.text.lastIndexOf(">",s.ch-1):-1;if(r==-1){if(n(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function f(t,r){var q=[];for(;;){var v=p(t),s,x=t.line,w=t.ch-(v?v[0].length:0);if(!v||!(s=g(t))){return}if(s=="selfClose"){continue}if(v[1]){for(var u=q.length-1;u>=0;--u){if(q[u]==v[2]){q.length=u;break}}if(u<0&&(!r||r==v[2])){return{tag:v[2],from:m(x,w),to:m(t.line,t.ch)}}}else{q.push(v[2])}}}function c(s,r){var q=[];for(;;){var w=e(s);if(!w){return}if(w=="selfClose"){k(s);continue}var v=s.line,u=s.ch;var x=k(s);if(!x){return}if(x[1]){q.push(x[2])}else{for(var t=q.length-1;t>=0;--t){if(q[t]==x[2]){q.length=t;break}}if(t<0&&(!r||r==x[2])){return{tag:x[2],from:m(s.line,s.ch),to:m(v,u)}}}}}i.registerHelper("fold","xml",function(q,v){var s=new b(q,v.line,0);for(;;){var t=p(s),r;if(!t||s.line!=v.line||!(r=g(s))){return}if(!t[1]&&r!="selfClose"){var v=m(s.line,s.ch);var u=f(s,t[2]);return u&&{from:v,to:u.from}}}});i.findMatchingTag=function(q,x,t){var s=new b(q,x.line,x.ch,t);if(s.text.indexOf(">")==-1&&s.text.indexOf("<")==-1){return}var r=g(s),w=r&&m(s.line,s.ch);var v=r&&k(s);if(!r||r=="selfClose"||!v||l(s,x)>0){return}var u={from:m(s.line,s.ch),to:w,tag:v[2]};if(v[1]){return{open:c(s,v[2]),close:u,at:"close"}}else{s=new b(q,w.line,w.ch,t);return{open:u,close:f(s,v[2]),at:"open"}}};i.findEnclosingTag=function(q,w,s){var r=new b(q,w.line,w.ch,s);for(;;){var u=c(r);if(!u){break}var t=new b(q,w.line,w.ch,s);var v=f(t,u.tag);if(v){return{open:u,close:v}}}};i.scanForClosingTag=function(q,u,t,s){var r=new b(q,u.line,u.ch,s?{from:0,to:s}:null);return f(r,t)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){if(!a.modeURL){a.modeURL="../mode/%N/%N.js"}var d={};function c(e,g){var f=g;return function(){if(--f==0){e()}}}function b(k,e){var j=a.modes[k].dependencies;if(!j){return e()}var h=[];for(var g=0;g<j.length;++g){if(!a.modes.hasOwnProperty(j[g])){h.push(j[g])}}if(!h.length){return e()}var f=c(e,h.length);for(var g=0;g<h.length;++g){a.requireMode(h[g],f)}}a.requireMode=function(k,e){if(typeof k!="string"){k=k.name}if(a.modes.hasOwnProperty(k)){return b(k,e)}if(d.hasOwnProperty(k)){return d[k].push(e)}var f=document.createElement("script");f.src=a.modeURL.replace(/%N/g,k);var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(f,g);var i=d[k]=[e];var h=0,j=setInterval(function(){if(++h>100){return clearInterval(j)}if(a.modes.hasOwnProperty(k)){clearInterval(j);d[k]=null;b(k,function(){for(var l=0;l<i.length;++l){i[l]()}})}},200)};a.autoLoadMode=function(e,f){if(!a.modes.hasOwnProperty(f)){a.requireMode(f,function(){e.setOption("mode",e.getOption("mode"))})}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.multiplexingMode=function(c){var e=Array.prototype.slice.call(arguments,1);var b=e.length;function d(g,h,i){if(typeof h=="string"){return g.indexOf(h,i)}var f=h.exec(i?g.slice(i):g);return f?f.index+i:-1}return{startState:function(){return{outer:a.startState(c),innerActive:null,inner:null}},copyState:function(f){return{outer:a.copyState(c,f.outer),innerActive:f.innerActive,inner:f.innerActive&&a.copyState(f.innerActive.mode,f.inner)}},token:function(o,f){if(!f.innerActive){var h=Infinity,m=o.string;for(var j=0;j<b;++j){var l=e[j];var p=d(m,l.open,o.pos);if(p==o.pos){o.match(l.open);f.innerActive=l;f.inner=a.startState(l.mode,c.indent?c.indent(f.outer,""):0);return l.delimStyle}else{if(p!=-1&&p<h){h=p}}}if(h!=Infinity){o.string=m.slice(0,h)}var g=c.token(o,f.outer);if(h!=Infinity){o.string=m}return g}else{var k=f.innerActive,m=o.string;if(!k.close&&o.sol()){f.innerActive=f.inner=null;return this.token(o,f)}var p=k.close?d(m,k.close,o.pos):-1;if(p==o.pos){o.match(k.close);f.innerActive=f.inner=null;return k.delimStyle}if(p>-1){o.string=m.slice(0,p)}var n=k.mode.token(o,f.inner);if(p>-1){o.string=m}if(k.innerStyle){if(n){n=n+" "+k.innerStyle}else{n=k.innerStyle}}return n}},indent:function(g,f){var h=g.innerActive?g.innerActive.mode:c;if(!h.indent){return a.Pass}return h.indent(g.innerActive?g.inner:g.outer,f)},blankLine:function(h){var j=h.innerActive?h.innerActive.mode:c;if(j.blankLine){j.blankLine(h.innerActive?h.inner:h.outer)}if(!h.innerActive){for(var g=0;g<b;++g){var f=e[g];if(f.open==="\n"){h.innerActive=f;h.inner=a.startState(f.mode,j.indent?j.indent(h.outer,""):0)}}}else{if(h.innerActive.close==="\n"){h.innerActive=h.inner=null}}},electricChars:c.electricChars,innerMode:function(f){return f.inner?{state:f.inner,mode:f.innerActive.mode}:{state:f.outer,mode:c}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var g="CodeMirror-activeline";var f="CodeMirror-activeline-background";c.defineOption("styleActiveLine",false,function(h,k,i){var j=i&&i!=c.Init;if(k&&!j){h.state.activeLines=[];e(h,h.listSelections());h.on("beforeSelectionChange",b)}else{if(!k&&j){h.off("beforeSelectionChange",b);d(h);delete h.state.activeLines}}});function d(h){for(var j=0;j<h.state.activeLines.length;j++){h.removeLineClass(h.state.activeLines[j],"wrap",g);h.removeLineClass(h.state.activeLines[j],"background",f)}}function a(j,h){if(j.length!=h.length){return false}for(var k=0;k<j.length;k++){if(j[k]!=h[k]){return false}}return true}function e(h,k){var m=[];for(var l=0;l<k.length;l++){var j=h.getLineHandleVisualStart(k[l].head.line);if(m[m.length-1]!=j){m.push(j)}}if(a(h.state.activeLines,m)){return}h.operation(function(){d(h);for(var n=0;n<m.length;n++){h.addLineClass(m[n],"wrap",g);h.addLineClass(m[n],"background",f)}h.state.activeLines=m})}function b(h,i){e(h,i.ranges)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],a)}else{a(CodeMirror)}}})(function(b){var a=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["<C-[>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["<CR>"],type:"keyToKey",toKeys:["j","^"],context:"normal"},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false,toJumplist:true}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true,toJumplist:true}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:true,explicitRepeat:true}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:false,explicitRepeat:true}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true,toJumplist:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:true}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true,linewise:true}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["]","p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true,matchIndent:true}},{keys:["[","p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true,matchIndent:true}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:true,toJumplist:true}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:false,toJumplist:true}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["o"],type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{},context:"visual"},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false,toJumplist:true}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:true},motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:true}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:false}},{keys:["<C-e>"],type:"action",action:"scroll",actionArgs:{forward:true,linewise:true}},{keys:["<C-y>"],type:"action",action:"scroll",actionArgs:{forward:false,linewise:true}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"eol"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["g","v"],type:"action",action:"reselectLastSelection"},{keys:["J"],type:"action",action:"joinLines",isEdit:true},{keys:["p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true}},{keys:["P"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true}},{keys:["r","character"],type:"action",action:"replace",isEdit:true},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{replace:true}},{keys:["u"],type:"action",action:"undo"},{keys:["u"],type:"action",action:"changeCase",actionArgs:{toLower:true},context:"visual",isEdit:true},{keys:["U"],type:"action",action:"changeCase",actionArgs:{toLower:false},context:"visual",isEdit:true},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:true,backtrack:false}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:false,backtrack:false}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt",toJumplist:true}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt",toJumplist:true}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",wholeWordOnly:true,toJumplist:true}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",wholeWordOnly:true,toJumplist:true}},{keys:["g","*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",toJumplist:true}},{keys:["g","#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",toJumplist:true}},{keys:[":"],type:"ex"}];var c=b.Pos;var d=function(){b.defineOption("vimMode",false,function(a9,ba){if(ba){a9.setOption("keyMap","vim");a9.setOption("disableInput",true);b.signal(a9,"vim-mode-change",{mode:"normal"});a9.on("beforeSelectionChange",j);a9.on("cursorActivity",O);z(a9);b.on(a9.getInputField(),"paste",J(a9))}else{if(a9.state.vim){a9.setOption("keyMap","default");a9.setOption("disableInput",false);a9.off("beforeSelectionChange",j);a9.off("cursorActivity",O);b.off(a9.getInputField(),"paste",J(a9));a9.state.vim=null}}});function j(a9,bd){var ba=a9.state.vim;if(ba.insertMode||ba.exMode){return}var bc=bd.ranges[0].head;var bb=bd.ranges[0].anchor;if(bc.ch&&bc.ch==a9.doc.getLine(bc.line).length){var be=c(bc.line,bc.ch-1);bd.update([{anchor:a7(bc,bb)?be:bb,head:be}])}}function J(a9){var ba=a9.state.vim;if(!ba.onPasteFn){ba.onPasteFn=function(){if(!ba.insertMode){a9.setCursor(x(a9.getCursor(),0,1));p.enterInsertMode(a9,{},ba)}}}return ba.onPasteFn}var aG=/[\d]/;var ae=[(/\w/),(/[^\w\s]/)],aZ=[(/\S/)];function ad(bc,ba){var bb=[];for(var a9=bc;a9<bc+ba;a9++){bb.push(String.fromCharCode(a9))}return bb}var U=ad(65,26);var aa=ad(97,26);var K=ad(48,10);var h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split("");var aE=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var ap=[].concat(U,aa,K,["<",">"]);var l=[].concat(U,aa,K,["-",'"',".",":"]);function e(a9,ba){return ba>=a9.firstLine()&&ba<=a9.lastLine()}function y(a9){return(/^[a-z]$/).test(a9)}function E(a9){return"()[]{}".indexOf(a9)!=-1}function T(a9){return aG.test(a9)}function u(a9){return(/^[A-Z]$/).test(a9)}function H(a9){return(/^\s*$/).test(a9)}function C(bb,a9){for(var ba=0;ba<a9.length;ba++){if(a9[ba]==bb){return true}}return false}var ag={};function av(ba,a9,bb){if(a9===undefined){throw Error("defaultValue is required")}if(!bb){bb="string"}ag[ba]={type:bb,defaultValue:a9};at(ba,a9)}function at(a9,bb){var ba=ag[a9];if(!ba){throw Error("Unknown option: "+a9)}if(ba.type=="boolean"){if(bb&&bb!==true){throw Error("Invalid argument: "+a9+"="+bb)}else{if(bb!==false){bb=true}}}ba.value=ba.type=="boolean"?!!bb:bb}function o(a9){var ba=ag[a9];if(!ba){throw Error("Unknown option: "+a9)}return ba.value}var ac=function(){var bd=100;var bf=-1;var bc=0;var bb=0;var ba=new Array(bd);function be(bg,bi,bj){var bk=bf%bd;var bl=ba[bk];function bh(bo){var bn=++bf%bd;var bp=ba[bn];if(bp){bp.clear()}ba[bn]=bg.setBookmark(bo)}if(bl){var bm=bl.find();if(bm&&!a7(bm,bi)){bh(bi)}}else{bh(bi)}bh(bj);bc=bf;bb=bf-bd+1;if(bb<0){bb=0}}function a9(bg,bk){bf+=bk;if(bf>bc){bf=bc}else{if(bf<bb){bf=bb}}var bl=ba[(bd+bf)%bd];if(bl&&!bl.find()){var bj=bk>0?1:-1;var bi;var bh=bg.getCursor();do{bf+=bj;bl=ba[(bd+bf)%bd];if(bl&&(bi=bl.find())&&!a7(bh,bi)){break}}while(bf<bc&&bf>bb)}return bl}return{cachedCursor:undefined,add:be,move:a9}};var g=function(a9){if(a9){return{changes:a9.changes,expectCursorActivityForChange:a9.expectCursorActivityForChange}}return{changes:[],expectCursorActivityForChange:false}};function ai(){this.latestRegister=undefined;this.isPlaying=false;this.isRecording=false;this.replaySearchQueries=[];this.onRecordingDone=undefined;this.lastInsertModeChanges=g()}ai.prototype={exitMacroRecordMode:function(){var a9=q.macroModeState;a9.onRecordingDone();a9.onRecordingDone=undefined;a9.isRecording=false},enterMacroRecordMode:function(a9,bb){var ba=q.registerController.getRegister(bb);if(ba){ba.clear();this.latestRegister=bb;this.onRecordingDone=a9.openDialog("(recording)["+bb+"]",null,{bottom:true});this.isRecording=true}}};function z(a9){if(!a9.state.vim){a9.state.vim={inputState:new ak(),lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:false,insertModeRepeat:undefined,visualMode:false,visualLine:false,lastSelection:null}}return a9.state.vim}var q;function t(){q={searchQuery:null,searchIsReversed:false,lastSubstituteReplacePart:undefined,jumpList:ac(),macroModeState:new ai,lastChararacterSearch:{increment:0,forward:true,selectedCharacter:""},registerController:new V({})};for(var a9 in ag){var ba=ag[a9];ba.value=ba.defaultValue}}var az={buildKeyMap:function(){},getRegisterController:function(){return q.registerController},resetVimGlobalState_:t,getVimGlobalState_:function(){return q},maybeInitVimState_:z,InsertModeKey:aW,map:function(ba,bb,a9){m.map(ba,bb,a9)},setOption:at,getOption:o,defineOption:av,defineEx:function(a9,bb,ba){if(a9.indexOf(bb)!==0){throw new Error('(Vim.defineEx) "'+bb+'" is not a prefix of "'+a9+'", command not registered')}aL[a9]=ba;m.commandMap_[bb]={name:a9,shortName:bb,type:"api"}},handleKey:function(a9,bc){var be;var ba=z(a9);var bd=q.macroModeState;if(bd.isRecording){if(bc=="q"){bd.exitMacroRecordMode();i(a9);return}}if(bc=="<Esc>"){i(a9);if(ba.visualMode){aC(a9)}return}if(!ba.visualMode&&!a7(a9.getCursor("head"),a9.getCursor("anchor"))){ba.visualMode=true;ba.visualLine=false;b.signal(a9,"vim-mode-change",{mode:"visual"});a9.on("mousedown",aC)}if(bc!="0"||(bc=="0"&&ba.inputState.getRepeat()===0)){be=aP.matchCommand(bc,a,ba)}if(!be){if(T(bc)){ba.inputState.pushRepeatDigit(bc)}if(bd.isRecording){B(bd,bc)}return}if(be.type=="keyToKey"){for(var bb=0;bb<be.toKeys.length;bb++){this.handleKey(a9,be.toKeys[bb])}}else{if(bd.isRecording){B(bd,bc)}aP.processCommand(a9,ba,be)}},handleEx:function(a9,ba){m.processCommand(a9,ba)}};function ak(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}ak.prototype.pushRepeatDigit=function(a9){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(a9)}else{this.motionRepeat=this.motionRepeat.concat(a9)}};ak.prototype.getRepeat=function(){var a9=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){a9=1;if(this.prefixRepeat.length>0){a9*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){a9*=parseInt(this.motionRepeat.join(""),10)}}return a9};function i(a9,ba){a9.state.vim.inputState=new ak();b.signal(a9,"vim-command-done",ba)}function a0(ba,a9){this.clear();this.keyBuffer=[ba||""];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!!a9}a0.prototype={setText:function(ba,a9){this.keyBuffer=[ba||""];this.linewise=!!a9},pushText:function(ba,a9){if(a9){if(!this.linewise){this.keyBuffer.push("\n")}this.linewise=true}this.keyBuffer.push(ba)},pushInsertModeChanges:function(a9){this.insertModeChanges.push(g(a9))},pushSearchQuery:function(a9){this.searchQueries.push(a9)},clear:function(){this.keyBuffer=[];this.insertModeChanges=[];this.searchQueries=[];this.linewise=false},toString:function(){return this.keyBuffer.join("")}};function V(a9){this.registers=a9;this.unnamedRegister=a9['"']=new a0();a9["."]=new a0();a9[":"]=new a0()}V.prototype={pushText:function(bc,ba,be,bd){if(bd&&be.charAt(0)=="\n"){be=be.slice(1)+"\n"}if(bd&&be.charAt(be.length-1)!=="\n"){be+="\n"}var bb=this.isValidRegister(bc)?this.getRegister(bc):null;if(!bb){switch(ba){case"yank":this.registers["0"]=new a0(be,bd);break;case"delete":case"change":if(be.indexOf("\n")==-1){this.registers["-"]=new a0(be,bd)}else{this.shiftNumericRegisters_();this.registers["1"]=new a0(be,bd)}break}this.unnamedRegister.setText(be,bd);return}var a9=u(bc);if(a9){bb.pushText(be,bd)}else{bb.setText(be,bd)}this.unnamedRegister.setText(bb.toString(),bd)},getRegister:function(a9){if(!this.isValidRegister(a9)){return this.unnamedRegister}a9=a9.toLowerCase();if(!this.registers[a9]){this.registers[a9]=new a0()}return this.registers[a9]},isValidRegister:function(a9){return a9&&C(a9,l)},shiftNumericRegisters_:function(){for(var a9=9;a9>=2;a9--){this.registers[a9]=this.getRegister(""+(a9-1))}}};var aP={matchCommand:function(bk,bj,bc){var bg=bc.inputState;var bl=bg.keyBuffer.concat(bk);var bf=[];var a9;for(var bd=0;bd<bj.length;bd++){var bb=bj[bd];if(aY(bl,bb.keys)){if(bg.operator&&bb.type=="action"){continue}if(bb.keys[bl.length-1]=="character"){a9=bl[bl.length-1];if(a9.length>1){switch(a9){case"<CR>":a9="\n";break;case"<Space>":a9=" ";break;default:continue}}}bf.push(bb)}}function bi(bm){if(bl.length<bm.keys.length){bg.keyBuffer.push(bk);return null}else{if(bm.keys[bl.length-1]=="character"){bg.selectedCharacter=a9}bg.keyBuffer=[];return bm}}if(!bf.length){bg.keyBuffer=[];return null}else{if(bf.length==1){return bi(bf[0])}else{var ba=bc.visualMode?"visual":"normal";var be;for(var bd=0;bd<bf.length;bd++){var bh=bf[bd];if(bh.context==ba){be=bh;break}else{if(!be&&!bh.context){be=bh}}}return bi(be)}}},processCommand:function(a9,ba,bb){ba.inputState.repeatOverride=bb.repeatOverride;switch(bb.type){case"motion":this.processMotion(a9,ba,bb);break;case"operator":this.processOperator(a9,ba,bb);break;case"operatorMotion":this.processOperatorMotion(a9,ba,bb);break;case"action":this.processAction(a9,ba,bb);break;case"search":this.processSearch(a9,ba,bb);break;case"ex":case"keyToEx":this.processEx(a9,ba,bb);break;default:break}},processMotion:function(a9,ba,bb){ba.inputState.motion=bb.motion;ba.inputState.motionArgs=aV(bb.motionArgs);this.evalInput(a9,ba)},processOperator:function(ba,bb,bc){var a9=bb.inputState;if(a9.operator){if(a9.operator==bc.operator){a9.motion="expandToLine";a9.motionArgs={linewise:true};this.evalInput(ba,bb);return}else{i(ba)}}a9.operator=bc.operator;a9.operatorArgs=aV(bc.operatorArgs);if(bb.visualMode){this.evalInput(ba,bb)}},processOperatorMotion:function(a9,bc,bd){var bb=bc.visualMode;var ba=aV(bd.operatorMotionArgs);if(ba){if(bb&&ba.visualLine){bc.visualLine=true}}this.processOperator(a9,bc,bd);if(!bb){this.processMotion(a9,bc,bd)}},processAction:function(ba,bc,bf){var a9=bc.inputState;var be=a9.getRepeat();var bd=!!be;var bb=aV(bf.actionArgs)||{};if(a9.selectedCharacter){bb.selectedCharacter=a9.selectedCharacter}if(bf.operator){this.processOperator(ba,bc,bf)}if(bf.motion){this.processMotion(ba,bc,bf)}if(bf.motion||bf.operator){this.evalInput(ba,bc)}bb.repeat=be||1;bb.repeatIsExplicit=bd;bb.registerName=a9.registerName;i(ba);bc.lastMotion=null;if(bf.isEdit){this.recordLastEdit(bc,a9,bf)}p[bf.action](ba,bb,bc)},processSearch:function(bo,bh,bg){if(!bo.getSearchCursor){return}var bj=bg.searchArgs.forward;var be=bg.searchArgs.wholeWordOnly;ar(bo).setReversed(!bj);var bk=(bj)?"/":"?";var bm=ar(bo).getQuery();var bb=bo.getScrollInfo();function bf(br,bp,bq){try{a6(bo,br,bp,bq)}catch(bs){aX(bo,"Invalid regex: "+br);return}aP.processMotion(bo,bh,{type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:bg.searchArgs.toJumplist}})}function bn(bp){bo.scrollTo(bb.left,bb.top);bf(bp,true,true);var bq=q.macroModeState;if(bq.isRecording){F(bq,bp)}}function bd(bp,br){var bq;try{bq=a6(bo,br,true,true)}catch(bs){}if(bq){bo.scrollIntoView(a8(bo,!bj,bq),30)}else{aw(bo);bo.scrollTo(bb.left,bb.top)}}function ba(br,bp,bs){var bq=b.keyName(br);if(bq=="Esc"||bq=="Ctrl-C"||bq=="Ctrl-["){a6(bo,bm);aw(bo);bo.scrollTo(bb.left,bb.top);b.e_stop(br);bs();bo.focus()}}switch(bg.searchArgs.querySrc){case"prompt":var bi=q.macroModeState;if(bi.isPlaying){var bl=bi.replaySearchQueries.shift();bf(bl,true,false)}else{aJ(bo,{onClose:bn,prefix:bk,desc:G,onKeyUp:bd,onKeyDown:ba})}break;case"wordUnderCursor":var bc=ao(bo,false,true,false,true);var a9=true;if(!bc){bc=ao(bo,false,true,false,false);a9=false}if(!bc){return}var bl=bo.getLine(bc.start.line).substring(bc.start.ch,bc.end.ch);if(a9&&be){bl="\\b"+bl+"\\b"}else{bl=f(bl)}q.jumpList.cachedCursor=bo.getCursor();bo.setCursor(bc.start);bf(bl,true,false);break}},processEx:function(a9,ba,bd){function bc(be){m.processCommand(a9,be)}function bb(bg,bf,bh){var be=b.keyName(bg);if(be=="Esc"||be=="Ctrl-C"||be=="Ctrl-["){b.e_stop(bg);bh();a9.focus()}}if(bd.type=="keyToEx"){m.processCommand(a9,bd.exArgs.input)}else{if(ba.visualMode){aJ(a9,{onClose:bc,prefix:":",value:"'<,'>",onKeyDown:bb})}else{aJ(a9,{onClose:bc,prefix:":",onKeyDown:bb})}}},evalInput:function(bd,bq){var bi=bq.inputState;var bn=bi.motion;var bj=bi.motionArgs||{};var be=bi.operator;var bu=bi.operatorArgs||{};var bk=bi.registerName;var ba=w(bd.getCursor("head"));var bo=w(bd.getCursor("anchor"));var bc=w(ba);var bh=w(bc);var br;var bf;if(be){this.recordLastEdit(bq,bi)}if(bi.repeatOverride!==undefined){bf=bi.repeatOverride}else{bf=bi.getRepeat()}if(bf>0&&bj.explicitRepeat){bj.repeatIsExplicit=true}else{if(bj.noRepeat||(!bj.explicitRepeat&&bf===0)){bf=1;bj.repeatIsExplicit=false}}if(bi.selectedCharacter){bj.selectedCharacter=bu.selectedCharacter=bi.selectedCharacter}bj.repeat=bf;i(bd);if(bn){var bp=aK[bn](bd,bj,bq);bq.lastMotion=aK[bn];if(!bp){return}if(bj.toJumplist){var bt=q.jumpList;var bg=bt.cachedCursor;if(bg){aT(bd,bg,bp);delete bt.cachedCursor}else{aT(bd,bh,bp)}}if(bp instanceof Array){bc=bp[0];br=bp[1]}else{br=bp}if(!br){br=c(bc.line,bc.ch)}if(bq.visualMode){if(ay(bo,ba)&&(a7(bo,br)||ay(br,bo))){bo.ch+=1}else{if(ay(ba,bo)&&(a7(bo,br)||ay(bo,br))){bo.ch-=1}}ba=br;bo=(bp instanceof Array)?bc:bo;if(bq.visualLine){if(ay(bo,ba)){bo.ch=0;var a9=bd.lastLine();if(ba.line>a9){ba.line=a9}ba.ch=aF(bd,ba.line)}else{ba.ch=0;bo.ch=aF(bd,bo.line)}}bd.setSelection(bo,ba);aB(bd,bq,"<",ay(bo,ba)?bo:ba);aB(bd,bq,">",ay(bo,ba)?ba:bo)}else{if(!be){br=N(bd,br);bd.setCursor(br.line,br.ch)}}}if(be){var bm=false;bq.lastMotion=null;bu.repeat=bf;if(bq.visualMode){bc=bo;br=ba;bj.inclusive=true}if(br&&ay(br,bc)){var bs=bc;bc=br;br=bs;bm=true}else{if(!br){br=w(bc)}}if(bj.inclusive&&!(bq.visualMode&&bm)){br.ch++}if(bu.selOffset){br.line=bc.line+bu.selOffset.line;if(bu.selOffset.line){br.ch=bu.selOffset.ch}else{br.ch=bc.ch+bu.selOffset.ch}}else{if(bq.visualMode){var bl=c();bl.line=br.line-bc.line;if(bl.line){bl.ch=br.ch}else{bl.ch=br.ch-bc.ch}bu.selOffset=bl}}var bb=bj.linewise||(bq.visualMode&&bq.visualLine)||bu.linewise;if(bb){aS(bd,bc,br)}else{if(bj.forward){Z(bd,bc,br)}}bu.registerName=bk;bu.linewise=bb;D[be](bd,bu,bq,bc,br,bh);if(bq.visualMode){aC(bd)}}},recordLastEdit:function(ba,a9,bb){var bc=q.macroModeState;if(bc.isPlaying){return}ba.lastEditInputState=a9;ba.lastEditActionCommand=bb;bc.lastInsertModeChanges.changes=[];bc.lastInsertModeChanges.expectCursorActivityForChange=false}};var aK={moveToTopLine:function(a9,bb){var ba=aR(a9).top+bb.repeat-1;return c(ba,aI(a9.getLine(ba)))},moveToMiddleLine:function(a9){var bb=aR(a9);var ba=Math.floor((bb.top+bb.bottom)*0.5);return c(ba,aI(a9.getLine(ba)))},moveToBottomLine:function(a9,bb){var ba=aR(a9).bottom-bb.repeat+1;return c(ba,aI(a9.getLine(ba)))},expandToLine:function(a9,ba){var bb=a9.getCursor();return c(bb.line+ba.repeat-1,Infinity)},findNext:function(a9,ba){var bd=ar(a9);var bc=bd.getQuery();if(!bc){return}var bb=!ba.forward;bb=(bd.isReversed())?!bb:bb;au(a9,bc);return a8(a9,bb,bc,ba.repeat)},goToMark:function(a9,bb,ba){var bd=ba.marks[bb.selectedCharacter];if(bd){var bc=bd.find();return bb.linewise?{line:bc.line,ch:aI(a9.getLine(bc.line))}:bc}return null},moveToOtherHighlightedEnd:function(ba){var bb=w(ba.getCursor("head"));var a9=w(ba.getCursor("anchor"));if(ay(a9,bb)){bb.ch+=1}else{if(ay(bb,a9)){a9.ch-=1}}return([bb,a9])},jumpToMark:function(bg,bc,bd){var bb=bg.getCursor();for(var be=0;be<bc.repeat;be++){var bi=bb;for(var bh in bd.marks){if(!y(bh)){continue}var ba=bd.marks[bh].find();var a9=(bc.forward)?ay(ba,bi):ay(bi,ba);if(a9){continue}if(bc.linewise&&(ba.line==bi.line)){continue}var bf=a7(bi,bb);var bj=(bc.forward)?aD(bi,ba,bb):aD(bb,ba,bi);if(bf||bj){bb=ba}}}if(bc.linewise){bb=c(bb.line,aI(bg.getLine(bb.line)))}return bb},moveByCharacters:function(a9,ba){var bd=a9.getCursor();var bc=ba.repeat;var bb=ba.forward?bd.ch+bc:bd.ch-bc;return c(bd.line,bb)},moveByLines:function(be,ba,bb){var bg=be.getCursor();var bc=bg.ch;switch(bb.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:bc=bb.lastHPos;break;default:bb.lastHPos=bc}var a9=ba.repeat+(ba.repeatOffset||0);var bh=ba.forward?bg.line+a9:bg.line-a9;var bd=be.firstLine();var bf=be.lastLine();if((bh<bd&&bg.line==bd)||(bh>bf&&bg.line==bf)){return}if(ba.toFirstChar){bc=aI(be.getLine(bh));bb.lastHPos=bc}bb.lastHSPos=be.charCoords(c(bh,bc),"div").left;return c(bh,bc)},moveByDisplayLines:function(bg,bb,bc){var bh=bg.getCursor();switch(bc.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:bc.lastHSPos=bg.charCoords(bh,"div").left}var a9=bb.repeat;var bf=bg.findPosV(bh,(bb.forward?a9:-a9),"line",bc.lastHSPos);if(bf.hitSide){if(bb.forward){var ba=bg.charCoords(bf,"div");var bd={top:ba.top+8,left:bc.lastHSPos};var bf=bg.coordsChar(bd,"div")}else{var be=bg.charCoords(c(bg.firstLine(),0),"div");be.left=bc.lastHSPos;bf=bg.coordsChar(be,"div")}}bc.lastHPos=bf.ch;return bf},moveByPage:function(ba,bb){var a9=ba.getCursor();var bc=bb.repeat;return ba.findPosV(a9,(bb.forward?bc:-bc),"page")},moveByParagraph:function(a9,bb){var ba=a9.getCursor().line;var bd=bb.repeat;var be=bb.forward?1:-1;for(var bc=0;bc<bd;bc++){if((!bb.forward&&ba===a9.firstLine())||(bb.forward&&ba==a9.lastLine())){break}ba+=be;while(ba!==a9.firstLine()&&ba!=a9.lastLine()&&a9.getLine(ba)){ba+=be}}return c(ba,0)},moveByScroll:function(a9,bc,ba){var bg=a9.getScrollInfo();var be=null;var bd=bc.repeat;if(!bd){bd=bg.clientHeight/(2*a9.defaultTextHeight())}var bf=a9.charCoords(a9.getCursor(),"local");bc.repeat=bd;var be=aK.moveByDisplayLines(a9,bc,ba);if(!be){return null}var bb=a9.charCoords(be,"local");a9.scrollTo(null,bg.top+bb.top-bf.top);return be},moveByWords:function(a9,ba){return al(a9,ba.repeat,!!ba.forward,!!ba.wordEnd,!!ba.bigWord)},moveTillCharacter:function(ba,bb){var bd=bb.repeat;var bc=a2(ba,bd,bb.forward,bb.selectedCharacter);var a9=bb.forward?-1:1;am(a9,bb);if(!bc){return null}bc.ch+=a9;return bc},moveToCharacter:function(a9,ba){var bb=ba.repeat;am(0,ba);return a2(a9,bb,ba.forward,ba.selectedCharacter)||a9.getCursor()},moveToSymbol:function(a9,ba){var bb=ba.repeat;return a3(a9,bb,ba.forward,ba.selectedCharacter)||a9.getCursor()},moveToColumn:function(a9,bb,ba){var bc=bb.repeat;ba.lastHPos=bc-1;ba.lastHSPos=a9.charCoords(a9.getCursor(),"div").left;return X(a9,bc)},moveToEol:function(a9,bd,bc){var be=a9.getCursor();bc.lastHPos=Infinity;var bb=c(be.line+bd.repeat-1,Infinity);var ba=a9.clipPos(bb);ba.ch--;bc.lastHSPos=a9.charCoords(ba,"div").left;return bb},moveToFirstNonWhiteSpaceCharacter:function(a9){var ba=a9.getCursor();return c(ba.line,aI(a9.getLine(ba.line)))},moveToMatchedSymbol:function(ba){var bg=ba.getCursor();var bc=bg.line;var be=bg.ch;var bb=ba.getLine(bc);var bf;do{bf=bb.charAt(be++);if(bf&&E(bf)){var bd=ba.getTokenTypeAt(c(bc,be));if(bd!=="string"&&bd!=="comment"){break}}}while(bf);if(bf){var a9=ba.findMatchingBracket(c(bc,be));return a9.to}else{return bg}},moveToStartOfLine:function(a9){var ba=a9.getCursor();return c(ba.line,0)},moveToLineOrEdgeOfDocument:function(a9,ba){var bb=ba.forward?a9.lastLine():a9.firstLine();if(ba.repeatIsExplicit){bb=ba.repeat-a9.getOption("firstLineNumber")}return c(bb,aI(a9.getLine(bb)))},textObjectManipulation:function(ba,bc){var bb={"(":")",")":"(","{":"}","}":"{","[":"]","]":"["};var bf={"'":true,'"':true};var be=bc.selectedCharacter;if(be=="b"){be="("}else{if(be=="B"){be="{"}}var a9=!bc.textObjectInner;var bd;if(bb[be]){bd=n(ba,be,a9)}else{if(bf[be]){bd=aA(ba,be,a9)}else{if(be==="W"){bd=ao(ba,a9,true,true)}else{if(be==="w"){bd=ao(ba,a9,true,false)}else{return null}}}}return[bd.start,bd.end]},repeatLastCharacterSearch:function(bb,bd){var ba=q.lastChararacterSearch;var bf=bd.repeat;var bc=bd.forward===ba.forward;var a9=(ba.increment?1:0)*(bc?-1:1);bb.moveH(-a9,"char");bd.inclusive=bc?true:false;var be=a2(bb,bf,bc,ba.selectedCharacter);if(!be){bb.moveH(a9,"char");return bb.getCursor()}be.ch+=a9;return be}};var D={change:function(ba,be,bc,a9,bf){q.registerController.pushText(be.registerName,"change",ba.getRange(a9,bf),be.linewise);if(be.linewise){var bd=bf.line>ba.lastLine()?"":"\n";ba.replaceRange(bd,a9,bf);ba.indentLine(a9.line,"smart");a9.ch=null}else{var bg=ba.getRange(a9,bf);if(!H(bg)){var bb=(/\s+$/).exec(bg);if(bb){bf=x(bf,0,-bb[0].length)}}ba.replaceRange("",a9,bf)}p.enterInsertMode(ba,{},ba.state.vim);ba.setCursor(a9)},"delete":function(ba,bc,bb,a9,bd){if(bc.linewise&&bd.line>ba.lastLine()&&a9.line>ba.firstLine()){a9.line--;a9.ch=aF(ba,a9.line)}q.registerController.pushText(bc.registerName,"delete",ba.getRange(a9,bd),bc.linewise);ba.replaceRange("",a9,bd);if(bc.linewise){ba.setCursor(aK.moveToFirstNonWhiteSpaceCharacter(ba))}else{ba.setCursor(a9)}},indent:function(bg,bb,bd,bf,bh){var bi=bf.line;var ba=bh.line;var a9=(bd.visualMode)?bb.repeat:1;if(bb.linewise){ba--}for(var be=bi;be<=ba;be++){for(var bc=0;bc<a9;bc++){bg.indentLine(be,bb.indentRight)}}bg.setCursor(bf);bg.setCursor(aK.moveToFirstNonWhiteSpaceCharacter(bg))},swapcase:function(bh,ba,bf,bg,bi,be){var bc=bh.getRange(bg,bi);var a9="";for(var bb=0;bb<bc.length;bb++){var bd=bc.charAt(bb);a9+=u(bd)?bd.toLowerCase():bd.toUpperCase()}bh.replaceRange(a9,bg,bi);if(!ba.shouldMoveCursor){bh.setCursor(be)}},yank:function(ba,bd,bc,a9,be,bb){q.registerController.pushText(bd.registerName,"yank",ba.getRange(a9,be),bd.linewise);ba.setCursor(bb)}};var p={jumpListWalk:function(a9,bb,bc){if(bc.visualMode){return}var be=bb.repeat;var bd=bb.forward;var ba=q.jumpList;var bg=ba.move(a9,bd?be:-be);var bf=bg?bg.find():undefined;bf=bf?bf:a9.getCursor();a9.setCursor(bf)},scroll:function(bh,bb,bd){if(bd.visualMode){return}var a9=bb.repeat||1;var bg=bh.defaultTextHeight();var bf=bh.getScrollInfo().top;var bi=bg*a9;var be=bb.forward?bf+bi:bf-bi;var bj=w(bh.getCursor());var bc=bh.charCoords(bj,"local");if(bb.forward){if(be>bc.top){bj.line+=(be-bc.top)/bg;bj.line=Math.ceil(bj.line);bh.setCursor(bj);bc=bh.charCoords(bj,"local");bh.scrollTo(null,bc.top)}else{bh.scrollTo(null,be)}}else{var ba=be+bh.getScrollInfo().clientHeight;if(ba<bc.bottom){bj.line-=(bc.bottom-ba)/bg;bj.line=Math.floor(bj.line);bh.setCursor(bj);bc=bh.charCoords(bj,"local");bh.scrollTo(null,bc.bottom-bh.getScrollInfo().clientHeight)}else{bh.scrollTo(null,be)}}},scrollToCursor:function(ba,bb){var be=ba.getCursor().line;var bc=ba.charCoords(c(be,0),"local");var a9=ba.getScrollInfo().clientHeight;var bf=bc.top;var bd=bc.bottom-bf;switch(bb.position){case"center":bf=bf-(a9/2)+bd;break;case"bottom":bf=bf-a9+bd*1.4;break;case"top":bf=bf+bd*0.4;break}ba.scrollTo(null,bf)},replayMacro:function(a9,ba,bb){var bc=ba.selectedCharacter;var bd=ba.repeat;var be=q.macroModeState;if(bc=="@"){bc=be.latestRegister}while(bd--){A(a9,bb,be,bc)}},enterMacroRecordMode:function(a9,ba){var bc=q.macroModeState;var bb=ba.selectedCharacter;bc.enterMacroRecordMode(a9,bb)},enterInsertMode:function(a9,ba,bb){if(a9.getOption("readOnly")){return}bb.insertMode=true;bb.insertModeRepeat=ba&&ba.repeat||1;var bc=(ba)?ba.insertAt:null;if(bc=="eol"){var bf=a9.getCursor();bf=c(bf.line,aF(a9,bf.line));a9.setCursor(bf)}else{if(bc=="charAfter"){a9.setCursor(x(a9.getCursor(),0,1))}else{if(bc=="firstNonBlank"){a9.setCursor(aK.moveToFirstNonWhiteSpaceCharacter(a9))}else{if(bc=="endOfSelectedArea"){var be=a9.getCursor("head");var bd=a9.getCursor("anchor");be=ay(bd,be)?c(be.line,be.ch+1):(be.line<bd.line?c(bd.line,0):be);a9.setCursor(be);aC(a9)}}}}a9.setOption("keyMap","vim-insert");a9.setOption("disableInput",false);if(ba&&ba.replace){a9.toggleOverwrite(true);a9.setOption("keyMap","vim-replace");b.signal(a9,"vim-mode-change",{mode:"replace"})}else{a9.setOption("keyMap","vim-insert");b.signal(a9,"vim-mode-change",{mode:"insert"})}if(!q.macroModeState.isPlaying){a9.on("change",aU);b.on(a9.getInputField(),"keydown",L)}},toggleVisualMode:function(ba,bb,bc){var be=bb.repeat;var a9=ba.getCursor();var bd;if(!bc.visualMode){ba.on("mousedown",aC);bc.visualMode=true;bc.visualLine=!!bb.linewise;if(bc.visualLine){a9.ch=0;bd=N(ba,c(a9.line+be-1,aF(ba,a9.line)),true)}else{bd=N(ba,c(a9.line,a9.ch+be),true)}if(!bb.repeatIsExplicit&&!bc.visualLine){ba.setCursor(bd);ba.setSelection(bd,a9)}else{ba.setSelection(a9,bd)}b.signal(ba,"vim-mode-change",{mode:"visual",subMode:bc.visualLine?"linewise":""})}else{a9=ba.getCursor("anchor");bd=ba.getCursor("head");if(!bc.visualLine&&bb.linewise){bc.visualLine=true;a9.ch=ay(a9,bd)?0:aF(ba,a9.line);bd.ch=ay(a9,bd)?aF(ba,bd.line):0;ba.setSelection(a9,bd);b.signal(ba,"vim-mode-change",{mode:"visual",subMode:"linewise"})}else{if(bc.visualLine&&!bb.linewise){bc.visualLine=false;b.signal(ba,"vim-mode-change",{mode:"visual"})}else{aC(ba)}}}aB(ba,bc,"<",ay(a9,bd)?a9:bd);aB(ba,bc,">",ay(a9,bd)?bd:a9)},reselectLastSelection:function(a9,bc,bb){if(bb.lastSelection){var ba=bb.lastSelection;a9.setSelection(ba.curStart,ba.curEnd);if(ba.visualLine){bb.visualMode=true;bb.visualLine=true}else{bb.visualMode=true;bb.visualLine=false}b.signal(a9,"vim-mode-change",{mode:"visual",subMode:bb.visualLine?"linewise":""})}},joinLines:function(ba,bb,bc){var a9,be;if(bc.visualMode){a9=ba.getCursor("anchor");be=ba.getCursor("head");be.ch=aF(ba,be.line)-1}else{var bd=Math.max(bb.repeat,2);a9=ba.getCursor();be=N(ba,c(a9.line+bd-1,Infinity))}var bf=0;ba.operation(function(){for(var bi=a9.line;bi<be.line;bi++){bf=aF(ba,a9.line);var bh=c(a9.line+1,aF(ba,a9.line+1));var bj=ba.getRange(a9,bh);bj=bj.replace(/\n\s*/g," ");ba.replaceRange(bj,a9,bh)}var bg=c(a9.line,bf);ba.setCursor(bg)})},newLineAndEnterInsertMode:function(a9,ba,bb){bb.insertMode=true;var bc=w(a9.getCursor());if(bc.line===a9.firstLine()&&!ba.after){a9.replaceRange("\n",c(a9.firstLine(),0));a9.setCursor(a9.firstLine(),0)}else{bc.line=(ba.after)?bc.line:bc.line-1;bc.ch=aF(a9,bc.line);a9.setCursor(bc);var bd=b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent;bd(a9)}this.enterInsertMode(a9,{repeat:ba.repeat},bb)},paste:function(bj,bi,bo){var be=w(bj.getCursor());var ba=q.registerController.getRegister(bi.registerName);var bl=ba.toString();if(!bl){return}if(bi.matchIndent){var bf=function(bt){var bs=(bt.split("\t").length-1);var br=(bt.split(" ").length-1);return bs*bj.options.tabSize+br*1};var bp=bj.getLine(bj.getCursor().line);var bk=bf(bp.match(/^\s*/)[0]);var a9=bl.replace(/\n$/,"");var bd=bl!==a9;var bh=bf(bl.match(/^\s*/)[0]);var bl=a9.replace(/^\s*/gm,function(br){var bs=bk+(bf(br)-bh);if(bs<0){return""}else{if(bj.options.indentWithTabs){var bt=Math.floor(bs/bj.options.tabSize);return Array(bt+1).join("\t")}else{return Array(bs+1).join(" ")}}});bl+=bd?"\n":""}if(bi.repeat>1){var bl=Array(bi.repeat+1).join(bl)}var bg=ba.linewise;if(bg){if(bo.visualMode){bl=bo.visualLine?bl.slice(0,-1):"\n"+bl.slice(0,bl.length-1)+"\n"}else{if(bi.after){bl="\n"+bl.slice(0,bl.length-1);be.ch=aF(bj,be.line)}else{be.ch=0}}}else{be.ch+=bi.after?1:0}var bc;var bm;if(bo.visualMode){var bq=aM(bj,bo);var bn=bq[0];var bb=bq[1];q.registerController.unnamedRegister.setText(bj.getRange(bn,bb));bj.replaceRange(bl,bn,bb);bc=bj.posFromIndex(bj.indexFromPos(bn)+bl.length-1);if(bg){bc.ch=0}}else{bj.replaceRange(bl,be);if(bg&&bi.after){bc=c(be.line+1,aI(bj.getLine(be.line+1)))}else{if(bg&&!bi.after){bc=c(be.line,aI(bj.getLine(be.line)))}else{if(!bg&&bi.after){bm=bj.indexFromPos(be);bc=bj.posFromIndex(bm+bl.length-1)}else{bm=bj.indexFromPos(be);bc=bj.posFromIndex(bm+bl.length)}}}}bj.setCursor(bc)},undo:function(a9,ba){a9.operation(function(){ah(a9,b.commands.undo,ba.repeat)();a9.setCursor(a9.getCursor("anchor"))})},redo:function(a9,ba){ah(a9,b.commands.redo,ba.repeat)()},setRegister:function(bb,a9,ba){ba.inputState.registerName=a9.selectedCharacter},setMark:function(a9,ba,bb){var bc=ba.selectedCharacter;aB(a9,bb,bc,a9.getCursor())},replace:function(bf,ba,bc){var bb=ba.selectedCharacter;var be=bf.getCursor();var bd;var bg;if(bc.visualMode){be=bf.getCursor("start");bg=bf.getCursor("end");bg=bf.clipPos(c(bg.line,bg.ch+1))}else{var bh=bf.getLine(be.line);bd=be.ch+ba.repeat;if(bd>bh.length){bd=bh.length}bg=c(be.line,bd)}if(bb=="\n"){if(!bc.visualMode){bf.replaceRange("",be,bg)}(b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent)(bf)}else{var a9=bf.getRange(be,bg);a9=a9.replace(/[^\n]/g,bb);bf.replaceRange(a9,be,bg);if(bc.visualMode){bf.setCursor(be);aC(bf)}else{bf.setCursor(x(bg,0,-1))}}},incrementNumberToken:function(bj,ba){var bk=bj.getCursor();var bf=bj.getLine(bk.line);var bm=/-?\d+/g;var be;var a9;var bd;var bl;var bb;while((be=bm.exec(bf))!==null){bb=be[0];a9=be.index;bd=a9+bb.length;if(bk.ch<bd){break}}if(!ba.backtrack&&(bd<=bk.ch)){return}if(bb){var bi=ba.increase?1:-1;var bc=parseInt(bb)+(bi*ba.repeat);var bh=c(bk.line,a9);var bg=c(bk.line,bd);bl=bc.toString();bj.replaceRange(bl,bh,bg)}else{return}bj.setCursor(c(bk.line,a9+bl.length-1))},repeatLastEdit:function(ba,bb,bc){var a9=bc.lastEditInputState;if(!a9){return}var bd=bb.repeat;if(bd&&bb.repeatIsExplicit){bc.lastEditInputState.repeatOverride=bd}else{bd=bc.lastEditInputState.repeatOverride||bd}s(ba,bc,bd,false)},changeCase:function(a9,ba,bb){var bf=aM(a9,bb);var bc=bf[0];var be=bf[1];var bd=ba.toLower;var bg=a9.getRange(bc,be);a9.replaceRange(bd?bg.toLowerCase():bg.toUpperCase(),bc,be);a9.setCursor(bc)}};function N(ba,be,bc){var bb=Math.min(Math.max(ba.firstLine(),be.line),ba.lastLine());var a9=aF(ba,bb)-1;a9=(bc)?a9+1:a9;var bd=Math.min(Math.max(0,be.ch),a9);return c(bb,bd)}function aV(ba){var a9={};for(var bb in ba){if(ba.hasOwnProperty(bb)){a9[bb]=ba[bb]}}return a9}function x(ba,a9,bb){return c(ba.line+a9,ba.ch+bb)}function aY(bb,a9){for(var ba=0;ba<bb.length;ba++){if(bb[ba]!=a9[ba]&&a9[ba]!="character"){return false}}return true}function ah(a9,ba,bb){return function(){for(var bc=0;bc<bb;bc++){ba(a9)}}}function w(a9){return c(a9.line,a9.ch)}function a7(ba,a9){return ba.ch==a9.ch&&ba.line==a9.line}function ay(ba,a9){if(ba.line<a9.line){return true}if(ba.line==a9.line&&ba.ch<a9.ch){return true}return false}function aD(bc,bb,ba){var bd=ay(bc,bb);var a9=ay(bb,ba);return bd&&a9}function aF(a9,ba){return a9.getLine(ba).length}function k(a9){return a9.split("").reverse().join("")}function aO(a9){if(a9.trim){return a9.trim()}return a9.replace(/^\s+|\s+$/g,"")}function f(a9){return a9.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function aM(a9,bc){var bf=a9.getCursor("anchor");var bg=a9.getCursor("head");var bb=bc.lastSelection;if(!bc.visualMode){var ba=bb.curEnd.line-bb.curStart.line;var be=ba?bb.curEnd.ch:bb.curEnd.ch-bb.curStart.ch;bg={line:bg.line+ba,ch:ba?bg.ch:be+bg.ch};if(bb.visualLine){return[{line:bf.line,ch:0},{line:bg.line,ch:aF(a9,bg.line)}]}}else{if(ay(bg,bf)){var bd=bf;bf=bg;bg=bd}else{bg=a9.clipPos(c(bg.line,bg.ch+1))}aC(a9)}return[bf,bg]}function aC(a9){a9.off("mousedown",aC);var ba=a9.state.vim;ba.lastSelection={curStart:ba.marks["<"].find(),curEnd:ba.marks[">"].find(),visualMode:ba.visualMode,visualLine:ba.visualLine};ba.visualMode=false;ba.visualLine=false;var bb=a9.getCursor("anchor");var bc=a9.getCursor("head");if(!a7(bb,bc)){a9.setCursor(N(a9,bc))}b.signal(a9,"vim-mode-change",{mode:"normal"})}function Z(ba,a9,be){var bd=ba.getRange(a9,be);if(/\n\s*$/.test(bd)){var bc=bd.split("\n");bc.pop();var bb;for(var bb=bc.pop();bc.length>0&&bb&&H(bb);bb=bc.pop()){be.line--;be.ch=0}if(bb){be.line--;be.ch=aF(ba,be.line)}else{be.ch=0}}}function aS(ba,a9,bb){a9.ch=0;bb.ch=0;bb.line++}function aI(ba){if(!ba){return 0}var a9=ba.search(/\S/);return a9==-1?ba.length:a9}function ao(bi,be,bs,ba,bt){var bc=bi.getCursor();var bl=bi.getLine(bc.line);var bo=bc.ch;var bn=bl.substring(bo);var bp;if(bt){bp=bn.search(/\w/)}else{bp=bn.search(/\S/)}if(bp==-1){return null}bo+=bp;bn=bl.substring(bo);var br=bl.substring(0,bo);var bu;if(ba){bu=/^\S+/}else{if((/\w/).test(bl.charAt(bo))){bu=/^\w+/}else{bu=/^[^\w\s]+/}}var bf=bu.exec(bn);var bm=bo;var bb=bo+bf[0].length;var bd=k(br);var bj=bu.exec(bd);if(bj){bm-=bj[0].length}if(be){var bk=bl.substring(bb);var a9=bk.match(/^\s*/)[0].length;if(a9>0){bb+=a9}else{var bh=bd.length-bm;var bg=bd.substring(bh);var bq=bg.match(/^\s*/)[0].length;bm-=bq}}return{start:c(bc.line,bm),end:c(bc.line,bb)}}function aT(a9,ba,bb){if(!a7(ba,bb)){q.jumpList.add(a9,ba,bb)}}function am(a9,ba){q.lastChararacterSearch.increment=a9;q.lastChararacterSearch.forward=ba.forward;q.lastChararacterSearch.selectedCharacter=ba.selectedCharacter}var I={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"};var aH={bracket:{isComplete:function(a9){if(a9.nextCh===a9.symb){a9.depth++;if(a9.depth>=1){return true}}else{if(a9.nextCh===a9.reverseSymb){a9.depth--}}return false}},section:{init:function(a9){a9.curMoveThrough=true;a9.symb=(a9.forward?"]":"[")===a9.symb?"{":"}"},isComplete:function(a9){return a9.index===0&&a9.nextCh===a9.symb}},comment:{isComplete:function(ba){var a9=ba.lastCh==="*"&&ba.nextCh==="/";ba.lastCh=ba.nextCh;return a9}},method:{init:function(a9){a9.symb=(a9.symb==="m"?"{":"}");a9.reverseSymb=a9.symb==="{"?"}":"{"},isComplete:function(a9){if(a9.nextCh===a9.symb){return true}return false}},preprocess:{init:function(a9){a9.index=0},isComplete:function(ba){if(ba.nextCh==="#"){var a9=ba.lineText.match(/#(\w+)/)[1];if(a9==="endif"){if(ba.forward&&ba.depth===0){return true}ba.depth++}else{if(a9==="if"){if(!ba.forward&&ba.depth===0){return true}ba.depth--}}if(a9==="else"&&ba.depth===0){return true}}return false}}};function a3(bi,ba,bd,bb){var bl=w(bi.getCursor());var bj=bd?1:-1;var bc=bd?bi.lineCount():-1;var bh=bl.ch;var bn=bl.line;var bg=bi.getLine(bn);var a9={lineText:bg,nextCh:bg.charAt(bh),lastCh:null,index:bh,symb:bb,reverseSymb:(bd?{")":"(","}":"{"}:{"(":")","{":"}"})[bb],forward:bd,depth:0,curMoveThrough:false};var be=I[bb];if(!be){return bl}var bm=aH[be].init;var bk=aH[be].isComplete;if(bm){bm(a9)}while(bn!==bc&&ba){a9.index+=bj;a9.nextCh=a9.lineText.charAt(a9.index);if(!a9.nextCh){bn+=bj;a9.lineText=bi.getLine(bn)||"";if(bj>0){a9.index=0}else{var bf=a9.lineText.length;a9.index=(bf>0)?(bf-1):0}a9.nextCh=a9.lineText.charAt(a9.index)}if(bk(a9)){bl.line=bn;bl.ch=a9.index;ba--}}if(a9.nextCh||a9.curMoveThrough){return c(bn,a9.index)}return bl}function a5(bj,bk,bc,bh,bi){var bd=bk.line;var bg=bk.ch;var bn=bj.getLine(bd);var ba=bc?1:-1;var be=bh?aZ:ae;if(bi&&bn==""){bd+=ba;bn=bj.getLine(bd);if(!e(bj,bd)){return null}bg=(bc)?0:bn.length}while(true){if(bi&&bn==""){return{from:0,to:0,line:bd}}var bf=(ba>0)?bn.length:-1;var bm=bf,bl=bf;while(bg!=bf){var a9=false;for(var bb=0;bb<be.length&&!a9;++bb){if(be[bb].test(bn.charAt(bg))){bm=bg;while(bg!=bf&&be[bb].test(bn.charAt(bg))){bg+=ba}bl=bg;a9=bm!=bl;if(bm==bk.ch&&bd==bk.line&&bl==bm+ba){continue}else{return{from:Math.min(bm,bl+1),to:Math.max(bm,bl),line:bd}}}}if(!a9){bg+=ba}}bd+=ba;if(!e(bj,bd)){return null}bn=bj.getLine(bd);bg=(ba>0)?0:bn.length}throw new Error("The impossible happened.")}function al(bj,ba,be,bn,bh){var bl=bj.getCursor();var bf=w(bl);var bg=[];if(be&&!bn||!be&&bn){ba++}var bi=!(be&&bn);for(var bc=0;bc<ba;bc++){var a9=a5(bj,bl,be,bh,bi);if(!a9){var bb=aF(bj,bj.lastLine());bg.push(be?{line:bj.lastLine(),from:bb,to:bb}:{line:0,from:0,to:0});break}bg.push(a9);bl=c(a9.line,be?(a9.to-1):a9.from)}var bd=bg.length!=ba;var bk=bg[0];var bm=bg.pop();if(be&&!bn){if(!bd&&(bk.from!=bf.ch||bk.line!=bf.line)){bm=bg.pop()}return c(bm.line,bm.from)}else{if(be&&bn){return c(bm.line,bm.to-1)}else{if(!be&&bn){if(!bd&&(bk.to!=bf.ch||bk.line!=bf.line)){bm=bg.pop()}return c(bm.line,bm.to)}else{return c(bm.line,bm.from)}}}}function a2(be,ba,bc,bd){var bg=be.getCursor();var a9=bg.ch;var bf;for(var bb=0;bb<ba;bb++){var bh=be.getLine(bg.line);bf=aQ(a9,bh,bd,bc,true);if(bf==-1){return null}a9=bf}return c(be.getCursor().line,bf)}function X(a9,bb){var ba=a9.getCursor().line;return N(a9,c(ba,bb-1))}function aB(a9,ba,bb,bc){if(!C(bb,ap)){return}if(ba.marks[bb]){ba.marks[bb].clear()}ba.marks[bb]=a9.setBookmark(bc)}function aQ(be,ba,bd,bb,bc){var a9;if(bb){a9=ba.indexOf(bd,be+1);if(a9!=-1&&!bc){a9-=1}}else{a9=ba.lastIndexOf(bd,be-1);if(a9!=-1&&!bc){a9+=1}}return a9}function n(bi,bb,bh){var bj=bi.getCursor(),ba,bd;var bg=({"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/})[bb];var bc=({"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"})[bb];var a9=bi.getLine(bj.line).charAt(bj.ch);var be=a9===bc?1:0;ba=bi.scanForBracket(c(bj.line,bj.ch+be),-1,null,{bracketRegex:bg});bd=bi.scanForBracket(c(bj.line,bj.ch+be),1,null,{bracketRegex:bg});if(!ba||!bd){return{start:bj,end:bj}}ba=ba.pos;bd=bd.pos;if((ba.line==bd.line&&ba.ch>bd.ch)||(ba.line>bd.line)){var bf=ba;ba=bd;bd=bf}if(bh){bd.ch+=1}else{ba.ch+=1}return{start:ba,end:bd}}function aA(bh,bb,bg){var bi=w(bh.getCursor());var bj=bh.getLine(bi.line);var bf=bj.split("");var ba,bc,bd,be;var a9=bf.indexOf(bb);if(bi.ch<a9){bi.ch=a9}else{if(a9<bi.ch&&bf[bi.ch]==bb){bc=bi.ch;--bi.ch}}if(bf[bi.ch]==bb&&!bc){ba=bi.ch+1}else{for(bd=bi.ch;bd>-1&&!ba;bd--){if(bf[bd]==bb){ba=bd+1}}}if(ba&&!bc){for(bd=ba,be=bf.length;bd<be&&!bc;bd++){if(bf[bd]==bb){bc=bd}}}if(!ba||!bc){return{start:bi,end:bi}}if(bg){--ba;++bc}return{start:c(bi.line,ba),end:c(bi.line,bc)}}av("pcre",true,"boolean");function Q(){}Q.prototype={getQuery:function(){return q.query},setQuery:function(a9){q.query=a9},getOverlay:function(){return this.searchOverlay},setOverlay:function(a9){this.searchOverlay=a9},isReversed:function(){return q.isReversed},setReversed:function(a9){q.isReversed=a9}};function ar(a9){var ba=a9.state.vim;return ba.searchState_||(ba.searchState_=new Q())}function P(a9,bc,bd,ba,bb){if(a9.openDialog){a9.openDialog(bc,ba,{bottom:true,value:bb.value,onKeyDown:bb.onKeyDown,onKeyUp:bb.onKeyUp})}else{ba(prompt(bd,""))}}function Y(bc){var ba=false;var bb=[];for(var a9=0;a9<bc.length;a9++){var bd=bc.charAt(a9);if(!ba&&bd=="/"){bb.push(a9)}ba=!ba&&(bd=="\\")}return bb}function a1(bg){var bh="|(){";var bd="}";var be=false;var ba=[];for(var bb=-1;bb<bg.length;bb++){var bf=bg.charAt(bb)||"";var a9=bg.charAt(bb+1)||"";var bc=(a9&&bh.indexOf(a9)!=-1);if(be){if(bf!=="\\"||!bc){ba.push(bf)}be=false}else{if(bf==="\\"){be=true;if(a9&&bd.indexOf(a9)!=-1){bc=true}if(!bc||a9==="\\"){ba.push(bf)}}else{ba.push(bf);if(bc&&a9!=="\\"){ba.push("\\")}}}}return ba.join("")}function a4(bc){var bb=false;var a9=[];for(var ba=-1;ba<bc.length;ba++){var be=bc.charAt(ba)||"";var bd=bc.charAt(ba+1)||"";if(bb){a9.push(be);bb=false}else{if(be==="\\"){bb=true;if((T(bd)||bd==="$")){a9.push("$")}else{if(bd!=="/"&&bd!=="\\"){a9.push("\\")}}}else{if(be==="$"){a9.push("$")}a9.push(be);if(bd==="/"){a9.push("\\")}}}}return a9.join("")}function S(bb){var ba=new b.StringStream(bb);var a9=[];while(!ba.eol()){while(ba.peek()&&ba.peek()!="\\"){a9.push(ba.next())}if(ba.match("\\/",true)){a9.push("/")}else{if(ba.match("\\\\",true)){a9.push("\\")}else{a9.push(ba.next())}}}return a9.join("")}function aj(bg,ba,bc){if(bg instanceof RegExp){return bg}var be=Y(bg);var bb;var a9;if(!be.length){bb=bg}else{bb=bg.substring(0,be[0]);var bd=bg.substring(be[0]);a9=(bd.indexOf("i")!=-1)}if(!bb){return null}if(!o("pcre")){bb=a1(bb)}if(bc){ba=(/^[^A-Z]*$/).test(bb)}var bf=new RegExp(bb,(ba||a9)?"i":undefined);return bf}function aX(a9,ba){if(a9.openNotification){a9.openNotification('<span style="color: red">'+ba+"</span>",{bottom:true,duration:5000})}else{alert(ba)}}function aq(ba,bb){var a9="";if(ba){a9+='<span style="font-family: monospace">'+ba+"</span>"}a9+='<input type="text"/> <span style="color: #888">';if(bb){a9+='<span style="color: #888">';a9+=bb;a9+="</span>"}return a9}var G="(Javascript regexp)";function aJ(ba,bb){var bc=(bb.prefix||"")+" "+(bb.desc||"");var a9=aq(bb.prefix,bb.desc);P(ba,a9,bc,bb.onClose,bb)}function M(ba,a9){if(ba instanceof RegExp&&a9 instanceof RegExp){var bc=["global","multiline","ignoreCase","source"];for(var bb=0;bb<bc.length;bb++){var bd=bc[bb];if(ba[bd]!==a9[bd]){return false}}return true}return false}function a6(a9,be,ba,bb){if(!be){return}var bd=ar(a9);var bc=aj(be,!!ba,!!bb);if(!bc){return}au(a9,bc);if(M(bc,bd.getQuery())){return bc}bd.setQuery(bc);return bc}function ax(ba){if(ba.source.charAt(0)=="^"){var a9=true}return{token:function(bc){if(a9&&!bc.sol()){bc.skipToEnd();return}var bb=bc.match(ba,false);if(bb){if(bb[0].length==0){bc.next();return"searching"}if(!bc.sol()){bc.backUp(1);if(!ba.exec(bc.next()+bb[0])){bc.next();return null}}bc.match(ba);return"searching"}while(!bc.eol()){bc.next();if(bc.match(ba,false)){break}}},query:ba}}function au(a9,bb){var ba=ar(a9).getOverlay();if(!ba||bb!=ba.query){if(ba){a9.removeOverlay(ba)}ba=ax(bb);a9.addOverlay(ba);ar(a9).setOverlay(ba)}}function a8(a9,ba,bc,bb){if(bb===undefined){bb=1}return a9.operation(function(){var bg=a9.getCursor();var bf=a9.getSearchCursor(bc,bg);for(var bd=0;bd<bb;bd++){var be=bf.find(ba);if(bd==0&&be&&a7(bf.from(),bg)){be=bf.find(ba)}if(!be){bf=a9.getSearchCursor(bc,(ba)?c(a9.lastLine()):c(a9.firstLine(),0));if(!bf.find(ba)){return}}}return bf.from()})}function aw(a9){a9.removeOverlay(ar(a9).getOverlay());ar(a9).setOverlay(null)}function R(bb,ba,a9){if(typeof bb!="number"){bb=bb.line}if(ba instanceof Array){return C(bb,ba)}else{if(a9){return(bb>=ba&&bb<=a9)}else{return bb==ba}}}function aR(a9){var bc=a9.getScrollInfo();var bb=6;var bf=10;var be=a9.coordsChar({left:0,top:bb+bc.top},"local");var ba=bc.clientHeight-bf+bc.top;var bd=a9.coordsChar({left:0,top:ba},"local");return{top:be.line,bottom:bd.line}}var v=[{name:"map"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"set"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s"},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:true}];d.ExCommandDispatcher=function(){this.buildCommandMap_()};d.ExCommandDispatcher.prototype={processCommand:function(bj,bi){var bd=bj.state.vim;var ba=q.registerController.getRegister(":");var bg=ba.toString();if(bd.visualMode){aC(bj)}var a9=new b.StringStream(bi);ba.setText(bi);var bc={};bc.input=bi;try{this.parseInput_(bj,a9,bc)}catch(bh){aX(bj,bh);throw bh}var bf;if(!bc.commandName){if(bc.line!==undefined){bf="move"}}else{var bb=this.matchCommand_(bc.commandName);if(bb){bf=bb.name;if(bb.excludeFromCommandHistory){ba.setText(bg)}this.parseCommandArgs_(a9,bc,bb);if(bb.type=="exToKey"){for(var be=0;be<bb.toKeys.length;be++){b.Vim.handleKey(bj,bb.toKeys[be])}return}else{if(bb.type=="exToEx"){this.processCommand(bj,bb.toInput);return}}}}if(!bf){aX(bj,'Not an editor command ":'+bi+'"');return}try{aL[bf](bj,bc)}catch(bh){aX(bj,bh);throw bh}},parseInput_:function(ba,bb,a9){bb.eatWhile(":");if(bb.eat("%")){a9.line=ba.firstLine();a9.lineEnd=ba.lastLine()}else{a9.line=this.parseLineSpec_(ba,bb);if(a9.line!==undefined&&bb.eat(",")){a9.lineEnd=this.parseLineSpec_(ba,bb)}}var bc=bb.match(/^(\w+)/);if(bc){a9.commandName=bc[1]}else{a9.commandName=bb.match(/.*/)[0]}return a9},parseLineSpec_:function(a9,ba){var bb=ba.match(/^(\d+)/);if(bb){return parseInt(bb[1],10)-1}switch(ba.next()){case".":return a9.getCursor().line;case"$":return a9.lastLine();case"'":var bc=a9.state.vim.marks[ba.next()];if(bc&&bc.find()){return bc.find().line}throw new Error("Mark not set");default:ba.backUp(1);return undefined}},parseCommandArgs_:function(ba,bd,bc){if(ba.eol()){return}bd.argString=ba.match(/.*/)[0];var bb=bc.argDelimiter||/\s+/;var a9=aO(bd.argString).split(bb);if(a9.length&&a9[0]){bd.args=a9}},matchCommand_:function(ba){for(var a9=ba.length;a9>0;a9--){var bb=ba.substring(0,a9);if(this.commandMap_[bb]){var bc=this.commandMap_[bb];if(bc.name.indexOf(ba)===0){return bc}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var ba=0;ba<v.length;ba++){var bb=v[ba];var a9=bb.shortName||bb.name;this.commandMap_[a9]=bb}},map:function(ba,bd,a9){if(ba!=":"&&ba.charAt(0)==":"){if(a9){throw Error("Mode not supported for ex mappings")}var bc=ba.substring(1);if(bd!=":"&&bd.charAt(0)==":"){this.commandMap_[bc]={name:bc,type:"exToEx",toInput:bd.substring(1),user:true}}else{this.commandMap_[bc]={name:bc,type:"exToKey",toKeys:W(bd),user:true}}}else{if(bd!=":"&&bd.charAt(0)==":"){var bb={keys:W(ba),type:"keyToEx",exArgs:{input:bd.substring(1)},user:true};if(a9){bb.context=a9}a.unshift(bb)}else{var bb={keys:W(ba),type:"keyToKey",toKeys:W(bd),user:true};if(a9){bb.context=a9}a.unshift(bb)}}},unmap:function(ba,a9){var be=function(bg,bf){if(bg===bf){return true}if(bg==null||bf==null){return true}if(bg.length!=bf.length){return false}for(var bh=0;bh<bg.length;bh++){if(bg[bh]!==bf[bh]){return false}}return true};if(ba!=":"&&ba.charAt(0)==":"){if(a9){throw Error("Mode not supported for ex mappings")}var bc=ba.substring(1);if(this.commandMap_[bc]&&this.commandMap_[bc].user){delete this.commandMap_[bc];return}}else{var bd=W(ba);for(var bb=0;bb<a.length;bb++){if(be(bd,a[bb].keys)&&a[bb].context===a9&&a[bb].user){a.splice(bb,1);return}}}throw Error("No such mapping.")}};function W(bc){var ba,a9;var bb=[];while(bc){a9=(/<\w+-.+?>|<\w+>|./).exec(bc);if(a9===null){break}ba=a9[0];bc=bc.substring(a9.index+ba.length);bb.push(ba)}return bb}var aL={map:function(a9,bc,ba){var bb=bc.args;if(!bb||bb.length<2){if(a9){aX(a9,"Invalid mapping: "+bc.input)}return}m.map(bb[0],bb[1],ba)},nmap:function(a9,ba){this.map(a9,ba,"normal")},vmap:function(a9,ba){this.map(a9,ba,"visual")},unmap:function(a9,bc,ba){var bb=bc.args;if(!bb||bb.length<1){if(a9){aX(a9,"No such mapping: "+bc.input)}return}m.unmap(bb[0],ba)},move:function(a9,ba){aP.processCommand(a9,a9.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:ba.line+1})},set:function(bh,be){var bb=be.args;if(!bb||bb.length<1){if(bh){aX(bh,"Invalid mapping: "+be.input)}return}var bf=bb[0].split("=");var ba=bf[0];var bg=bf[1];var bd=false;if(ba.charAt(ba.length-1)=="?"){if(bg){throw Error("Trailing characters: "+be.argString)}ba=ba.substring(0,ba.length-1);bd=true}if(bg===undefined&&ba.substring(0,2)=="no"){ba=ba.substring(2);bg=false}var bc=ag[ba]&&ag[ba].type=="boolean";if(bc&&bg==undefined){bg=true}if(!bc&&!bg||bd){var a9=o(ba);if(a9===true||a9===false){aX(bh," "+(a9?"":"no")+ba)}else{aX(bh,"  "+ba+"="+a9)}}else{at(ba,bg)}},registers:function(be,ba){var bg=ba.args;var bd=q.registerController.registers;var bb="----------Registers----------<br><br>";if(!bg){for(var a9 in bd){var bh=bd[a9].toString();if(bh.length){bb+='"'+a9+"    "+bh+"<br>"}}}else{var a9;bg=bg.join("");for(var bc=0;bc<bg.length;bc++){a9=bg.charAt(bc);if(!q.registerController.isValidRegister(a9)){continue}var bf=bd[a9]||new a0();bb+='"'+a9+"    "+bf.toString()+"<br>"}}aX(be,bb)},sort:function(bi,bs){var bj,bc,ba,bb;function bd(){if(bs.argString){var bw=new b.StringStream(bs.argString);if(bw.eat("!")){bj=true}if(bw.eol()){return}if(!bw.eatSpace()){return"Invalid arguments"}var by=bw.match(/[a-z]+/);if(by){by=by[0];bc=by.indexOf("i")!=-1;ba=by.indexOf("u")!=-1;var bv=by.indexOf("d")!=-1&&1;var bx=by.indexOf("x")!=-1&&1;var bu=by.indexOf("o")!=-1&&1;if(bv+bx+bu>1){return"Invalid arguments"}bb=bv&&"decimal"||bx&&"hex"||bu&&"octal"}if(bw.eatSpace()&&bw.match(/\/.*\//)){"patterns not supported"}}}var be=bd();if(be){aX(bi,be+": "+bs.argString);return}var bn=bs.line||bi.firstLine();var br=bs.lineEnd||bs.line||bi.lastLine();if(bn==br){return}var bh=c(bn,0);var bp=c(br,aF(bi,br));var bm=bi.getRange(bh,bp).split("\n");var bf=(bb=="decimal")?/(-?)([\d]+)/:(bb=="hex")?/(-?)(?:0x)?([0-9a-f]+)/i:(bb=="octal")?/([0-7]+)/:null;var bg=(bb=="decimal")?10:(bb=="hex")?16:(bb=="octal")?8:null;var bk=[],bo=[];if(bb){for(var bq=0;bq<bm.length;bq++){if(bf.exec(bm[bq])){bk.push(bm[bq])}else{bo.push(bm[bq])}}}else{bo=bm}function bt(bv,bu){if(bj){var bw;bw=bv;bv=bu;bu=bw}if(bc){bv=bv.toLowerCase();bu=bu.toLowerCase()}var by=bb&&bf.exec(bv);var bx=bb&&bf.exec(bu);if(!by){return bv<bu?-1:1}by=parseInt((by[1]+by[2]).toLowerCase(),bg);bx=parseInt((bx[1]+bx[2]).toLowerCase(),bg);return by-bx}bk.sort(bt);bo.sort(bt);bm=(!bj)?bo.concat(bk):bk.concat(bo);if(ba){var bl=bm;var a9;bm=[];for(var bq=0;bq<bl.length;bq++){if(bl[bq]!=a9){bm.push(bl[bq])}a9=bl[bq]}}bi.replaceRange(bm.join("\n"),bh,bp)},substitute:function(bn,bc){if(!bn.getSearchCursor){throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.")}var ba=bc.argString;var bm=ba?Y(ba):[];var bg="";if(bm.length){if(bm[0]!==0){aX(bn,"Substitutions should be of the form :s/pattern/replace/");return}var bp=ba.substring(bm[0]+1,bm[1]);var bh;var bi;var a9=false;if(bm[1]){bg=ba.substring(bm[1]+1,bm[2]);if(o("pcre")){bg=S(bg)}else{bg=a4(bg)}q.lastSubstituteReplacePart=bg}if(bm[2]){var bf=ba.substring(bm[2]+1).split(" ");bh=bf[0];bi=parseInt(bf[1])}if(bh){if(bh.indexOf("c")!=-1){a9=true;bh.replace("c","")}bp=bp+"/"+bh}}if(bp){try{a6(bn,bp,true,true)}catch(bk){aX(bn,"Invalid regex: "+bp);return}}bg=bg||q.lastSubstituteReplacePart;if(bg===undefined){aX(bn,"No previous substitute regular expression");return}var bb=ar(bn);var bl=bb.getQuery();var be=(bc.line!==undefined)?bc.line:bn.getCursor().line;var bd=bc.lineEnd||be;if(bi){be=bd;bd=be+bi-1}var bj=N(bn,c(be,0));var bo=bn.getSearchCursor(bl,bj);aN(bn,a9,be,bd,bo,bl,bg)},redo:b.commands.redo,undo:b.commands.undo,write:function(a9){if(b.commands.save){b.commands.save(a9)}else{a9.save()}},nohlsearch:function(a9){aw(a9)},delmarks:function(bj,be){if(!be.argString||!aO(be.argString)){aX(bj,"Argument required");return}var a9=bj.state.vim;var bk=new b.StringStream(aO(be.argString));while(!bk.eol()){bk.eatSpace();var bh=bk.pos;if(!bk.match(/[a-zA-Z]/,false)){aX(bj,"Invalid argument: "+be.argString.substring(bh));return}var bb=bk.next();if(bk.match("-",true)){if(!bk.match(/[a-zA-Z]/,false)){aX(bj,"Invalid argument: "+be.argString.substring(bh));return}var bc=bb;var bg=bk.next();if(y(bc)&&y(bg)||u(bc)&&u(bg)){var ba=bc.charCodeAt(0);var bi=bg.charCodeAt(0);if(ba>=bi){aX(bj,"Invalid argument: "+be.argString.substring(bh));return}for(var bf=0;bf<=bi-ba;bf++){var bd=String.fromCharCode(ba+bf);delete a9.marks[bd]}}else{aX(bj,"Invalid argument: "+bc+"-");return}}else{delete a9.marks[bb]}}}};var m=new d.ExCommandDispatcher();function aN(bm,ba,bh,be,bb,bj,bd){bm.state.vim.exMode=true;var bf=false;var bl=bb.from();function bi(){bm.operation(function(){while(!bf){bc();bg()}bk()})}function bc(){var bo=bm.getRange(bb.from(),bb.to());var bn=bo.replace(bj,bd);bb.replace(bn)}function bg(){var bn=bb.findNext();if(!bn){bf=true}else{if(R(bb.from(),bh,be)){bm.scrollIntoView(bb.from(),30);bm.setSelection(bb.from(),bb.to());bl=bb.from();bf=false}else{bf=true}}}function bk(bo){if(bo){bo()}bm.focus();if(bl){bm.setCursor(bl);var bn=bm.state.vim;bn.exMode=false;bn.lastHPos=bn.lastHSPos=bl.ch}}function a9(bp,bn,bq){b.e_stop(bp);var bo=b.keyName(bp);switch(bo){case"Y":bc();bg();break;case"N":bg();break;case"A":bm.operation(bi);break;case"L":bc();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":bk(bq);break}if(bf){bk(bq)}}bg();if(bf){aX(bm,"No matches for "+bj.source);return}if(!ba){bi();return}aJ(bm,{prefix:"replace with <strong>"+bd+"</strong> (y/n/a/q/l)",onKeyDown:a9})}function an(){function bb(bf,be){var bd=bf;if(u(bd)&&be=="Ctrl"){bd=bd.toLowerCase()}if(be){bd=be.charAt(0)+"-"+bd}var bg=({Enter:"CR",Backspace:"BS",Delete:"Del"})[bd];bd=bg?bg:bd;bd=bd.length>1?"<"+bd+">":bd;return bd}function ba(bd){return function(be){b.signal(be,"vim-keypress",bd);b.Vim.handleKey(be,bd)}}var a9={nofallthrough:true,style:"fat-cursor"};function bc(bi,be){for(var bh=0;bh<bi.length;bh++){var bg=bi[bh];if(!be&&bg.length==1){bg="'"+bg+"'"}var bd=bb(bi[bh],be);var bf=be?be+"-"+bg:bg;a9[bf]=ba(bd)}}bc(U);bc(aa);bc(U,"Ctrl");bc(h);bc(h,"Ctrl");bc(K);bc(K,"Ctrl");bc(aE);bc(aE,"Ctrl");return a9}b.keyMap.vim=an();function r(a9){var bb=a9.state.vim;var bd=q.macroModeState;var ba=q.registerController.getRegister(".");var bc=bd.isPlaying;if(!bc){a9.off("change",aU);b.off(a9.getInputField(),"keydown",L)}if(!bc&&bb.insertModeRepeat>1){s(a9,bb,bb.insertModeRepeat-1,true);bb.lastEditInputState.repeatOverride=bb.insertModeRepeat}delete bb.insertModeRepeat;bb.insertMode=false;a9.setCursor(a9.getCursor().line,a9.getCursor().ch-1);a9.setOption("keyMap","vim");a9.setOption("disableInput",true);a9.toggleOverwrite(false);ba.setText(bd.lastInsertModeChanges.changes.join(""));b.signal(a9,"vim-mode-change",{mode:"normal"});if(bd.isRecording){ab(bd)}}b.keyMap["vim-insert"]={Esc:r,"Ctrl-[":r,"Ctrl-C":r,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(a9){var ba=b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent;ba(a9)},fallthrough:["default"]};b.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]};function A(bg,bb,bc,a9){var bi=q.registerController.getRegister(a9);var ba=bi.keyBuffer;var bf=0;bc.isPlaying=true;bc.replaySearchQueries=bi.searchQueries.slice(0);for(var bd=0;bd<ba.length;bd++){var bj=ba[bd];var be,bh;while(bj){be=(/<\w+-.+?>|<\w+>|./).exec(bj);bh=be[0];bj=bj.substring(be.index+bh.length);b.Vim.handleKey(bg,bh);if(bb.insertMode){af(bg,bi.insertModeChanges[bf++].changes,1);r(bg)}}}bc.isPlaying=false}function B(bc,a9){if(bc.isPlaying){return}var bb=bc.latestRegister;var ba=q.registerController.getRegister(bb);if(ba){ba.pushText(a9)}}function ab(bb){if(bb.isPlaying){return}var ba=bb.latestRegister;var a9=q.registerController.getRegister(ba);if(a9){a9.pushInsertModeChanges(bb.lastInsertModeChanges)}}function F(bc,bb){if(bc.isPlaying){return}var ba=bc.latestRegister;var a9=q.registerController.getRegister(ba);if(a9){a9.pushSearchQuery(bb)}}function aU(ba,a9){var bc=q.macroModeState;var bb=bc.lastInsertModeChanges;if(!bc.isPlaying){while(a9){bb.expectCursorActivityForChange=true;if(a9.origin=="+input"||a9.origin=="paste"||a9.origin===undefined){var bd=a9.text.join("\n");bb.changes.push(bd)}a9=a9.next}}}function O(a9){var ba=a9.state.vim;if(ba.insertMode){var bc=q.macroModeState;if(bc.isPlaying){return}var bb=bc.lastInsertModeChanges;if(bb.expectCursorActivityForChange){bb.expectCursorActivityForChange=false}else{bb.changes=[]}}else{if(a9.doc.history.lastSelOrigin=="*mouse"){ba.lastHPos=a9.doc.getCursor().ch}}}function aW(a9){this.keyName=a9}function L(bd){var bc=q.macroModeState;var bb=bc.lastInsertModeChanges;var ba=b.keyName(bd);function a9(){bb.changes.push(new aW(ba));return true}if(ba.indexOf("Delete")!=-1||ba.indexOf("Backspace")!=-1){b.lookupKey(ba,["vim-insert"],a9)}}function s(bh,bc,ba,a9){var be=q.macroModeState;be.isPlaying=true;var bi=!!bc.lastEditActionCommand;var bf=bc.inputState;function bb(){if(bi){aP.processAction(bh,bc,bc.lastEditActionCommand)}else{aP.evalInput(bh,bc)}}function bg(bk){if(be.lastInsertModeChanges.changes.length>0){bk=!bc.lastEditActionCommand?1:bk;var bj=be.lastInsertModeChanges;be.lastInsertModeChanges={};af(bh,bj.changes,bk);be.lastInsertModeChanges=bj}}bc.inputState=bc.lastEditInputState;if(bi&&bc.lastEditActionCommand.interlaceInsertRepeat){for(var bd=0;bd<ba;bd++){bb();bg(1)}}else{if(!a9){bb()}bg(ba)}bc.inputState=bf;if(bc.insertMode&&!a9){r(bh)}be.isPlaying=false}function af(a9,bc,bd){function be(bh){if(typeof bh=="string"){b.commands[bh](a9)}else{bh(a9)}return true}for(var bb=0;bb<bd;bb++){for(var ba=0;ba<bc.length;ba++){var bg=bc[ba];if(bg instanceof aW){b.lookupKey(bg.keyName,["vim-insert"],be)}else{var bf=a9.getCursor();a9.replaceRange(bg,bf,bf)}}}}t();return az};b.Vim=d()});