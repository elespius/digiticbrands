(function(){CodeMirror.defineOption("fullScreen",false,function(c,e,d){if(d==CodeMirror.Init){d=false}if(!d==!e){return}if(e){a(c)}else{b(c)}});function a(c){var d=c.getWrapperElement();c.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:d.style.width,height:d.style.height};d.style.width="";d.style.height="auto";d.className+=" CodeMirror-fullscreen";document.documentElement.style.overflow="hidden";c.refresh()}function b(c){var d=c.getWrapperElement();d.className=d.className.replace(/\s*CodeMirror-fullscreen\b/,"");document.documentElement.style.overflow="";var e=c.state.fullScreenRestore;d.style.width=e.width;d.style.height=e.height;window.scrollTo(e.scrollLeft,e.scrollTop);c.refresh()}})();(function(){var f="()[]{}''\"\"";var a="[]{}";var e=/\s/;CodeMirror.defineOption("autoCloseBrackets",false,function(g,l,h){if(h!=CodeMirror.Init&&h){g.removeKeyMap("autoCloseBrackets")}if(!l){return}var j=f,i=a;if(typeof l=="string"){j=l}else{if(typeof l=="object"){if(l.pairs!=null){j=l.pairs}if(l.explode!=null){i=l.explode}}}var k=d(j);if(i){k.Enter=b(i)}g.addKeyMap(k)});function c(g,i){var h=g.getRange(CodeMirror.Pos(i.line,i.ch-1),CodeMirror.Pos(i.line,i.ch+1));return h.length==2?h:null}function d(j){var k={name:"autoCloseBrackets",Backspace:function(i){if(i.somethingSelected()||i.getOption("disableInput")){return CodeMirror.Pass}var m=i.getCursor(),l=c(i,m);if(l&&j.indexOf(l)%2==0){i.replaceRange("",CodeMirror.Pos(m.line,m.ch-1),CodeMirror.Pos(m.line,m.ch+1))}else{return CodeMirror.Pass}}};var h="";for(var g=0;g<j.length;g+=2){(function(n,m){if(n!=m){h+=m}function i(o){var p=o.getSelection();o.replaceSelection(n+p+m)}function l(o){var q=o.getCursor(),p=o.getRange(q,CodeMirror.Pos(q.line,q.ch+1));if(p!=m||o.somethingSelected()){return CodeMirror.Pass}else{o.execCommand("goCharRight")}}k["'"+n+"'"]=function(o){if(n=="'"&&o.getTokenAt(o.getCursor()).type=="comment"||o.getOption("disableInput")){return CodeMirror.Pass}if(o.somethingSelected()){return i(o)}if(n==m&&l(o)!=CodeMirror.Pass){return}var t=o.getCursor(),r=CodeMirror.Pos(t.line,t.ch+1);var p=o.getLine(t.line),s=p.charAt(t.ch),q=t.ch>0?p.charAt(t.ch-1):"";if(n==m&&CodeMirror.isWordChar(q)){return CodeMirror.Pass}if(p.length==t.ch||h.indexOf(s)>=0||e.test(s)){o.replaceSelection(n+m,{head:r,anchor:r})}else{return CodeMirror.Pass}};if(n!=m){k["'"+m+"'"]=l}})(j.charAt(g),j.charAt(g+1))}return k}function b(g){return function(h){var j=h.getCursor(),i=c(h,j);if(!i||g.indexOf(i)%2!=0||h.getOption("disableInput")){return CodeMirror.Pass}h.operation(function(){var k=CodeMirror.Pos(j.line+1,0);h.replaceSelection("\n\n",{anchor:k,head:k},"+input");h.indentLine(j.line+1,null,true);h.indentLine(j.line+2,null,true)})}}})();(function(){CodeMirror.defineOption("autoCloseTags",false,function(f,i,g){if(g!=CodeMirror.Init&&g){f.removeKeyMap("autoCloseTags")}if(!i){return}var h={name:"autoCloseTags"};if(typeof i!="object"||i.whenClosing){h["'/'"]=function(j){return d(j)}}if(typeof i!="object"||i.whenOpening){h["'>'"]=function(j){return a(j)}}f.addKeyMap(h)});var c=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var b=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(p){var o=p.getCursor(),q=p.getTokenAt(o);var r=CodeMirror.innerMode(p.getMode(),q.state),f=r.state;if(r.mode.name!="xml"||!f.tagName||p.getOption("disableInput")){return CodeMirror.Pass}var g=p.getOption("autoCloseTags"),k=r.mode.configuration=="html";var h=(typeof g=="object"&&g.dontCloseTags)||(k&&c);var m=(typeof g=="object"&&g.indentTags)||(k&&b);var i=f.tagName;if(q.end>o.ch){i=i.slice(0,i.length-q.end+o.ch)}var l=i.toLowerCase();if(!i||q.type=="string"&&(q.end!=o.ch||!/[\"\']/.test(q.string.charAt(q.string.length-1))||q.string.length==1)||q.type=="tag"&&f.type=="closeTag"||q.string.indexOf("/")==(q.string.length-1)||h&&e(h,l)>-1||CodeMirror.scanForClosingTag&&CodeMirror.scanForClosingTag(p,o,i,Math.min(p.lastLine()+1,o.line+50))){return CodeMirror.Pass}var n=m&&e(m,l)>-1;var j=n?CodeMirror.Pos(o.line+1,0):CodeMirror.Pos(o.line,o.ch+1);p.replaceSelection(">"+(n?"\n\n":"")+"</"+i+">",{head:j,anchor:j});if(n){p.indentLine(o.line+1,null,true);p.indentLine(o.line+2,null)}}function d(f){var k=f.getCursor(),h=f.getTokenAt(k);var g=CodeMirror.innerMode(f.getMode(),h.state),j=g.state;if(h.type=="string"||h.string.charAt(0)!="<"||h.start!=k.ch-1||g.mode.name!="xml"||f.getOption("disableInput")){return CodeMirror.Pass}var i=j.context&&j.context.tagName;if(i){f.replaceSelection("/"+i+">","end")}}function e(j,f){if(j.indexOf){return j.indexOf(f)}for(var g=0,h=j.length;g<h;++g){if(j[g]==f){return g}}return -1}})();(function(){var b=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var d=CodeMirror.Pos;var g={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function c(n,p,A){var j=n.state.matchBrackets;var u=(j&&j.maxScanLineLength)||10000;var z=(j&&j.maxScanLines)||100;var h=p||n.getCursor(),q=n.getLineHandle(h.line),k=h.ch-1;var m=(k>=0&&g[q.text.charAt(k)])||g[q.text.charAt(++k)];if(!m){return null}var o=m.charAt(1)==">",y=o?1:-1;if(A&&o!=(k==h.ch)){return null}var w=n.getTokenTypeAt(d(h.line,k+1));var l=[q.text.charAt(k)],t=/[(){}[\]]/;function s(B,G,F){if(!B.text){return}var E=o?0:B.text.length-1,i=o?B.text.length:-1;if(B.text.length>u){return null}if(F!=null){E=F+y}for(;E!=i;E+=y){var D=B.text.charAt(E);if(t.test(D)&&n.getTokenTypeAt(d(G,E+1))==w){var C=g[D];if(C.charAt(1)==">"==o){l.push(D)}else{if(l.pop()!=C.charAt(0)){return{pos:E,match:false}}else{if(!l.length){return{pos:E,match:true}}}}}}}for(var v=h.line,r,x=o?Math.min(v+z,n.lineCount()):Math.max(-1,v-z);v!=x;v+=y){if(v==h.line){r=s(q,v,k)}else{r=s(n.getLineHandle(v),v)}if(r){break}}return{from:d(h.line,k),to:r&&d(v,r.pos),match:r&&r.match,forward:o}}function a(i,o){var l=i.state.matchBrackets.maxHighlightLineLength||1000;var n=c(i);if(!n||i.getLine(n.from.line).length>l||n.to&&i.getLine(n.to.line).length>l){return}var m=n.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var k=i.markText(n.from,d(n.from.line,n.from.ch+1),{className:m});var j=n.to&&i.markText(n.to,d(n.to.line,n.to.ch+1),{className:m});if(b&&i.state.focused){i.display.input.focus()}var h=function(){i.operation(function(){k.clear();j&&j.clear()})};if(o){setTimeout(h,800)}else{return h}}var e=null;function f(h){h.operation(function(){if(e){e();e=null}if(!h.somethingSelected()){e=a(h,false)}})}CodeMirror.defineOption("matchBrackets",false,function(h,j,i){if(i&&i!=CodeMirror.Init){h.off("cursorActivity",f)}if(j){h.state.matchBrackets=typeof j=="object"?j:{};h.on("cursorActivity",f)}});CodeMirror.defineExtension("matchBrackets",function(){a(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(i,h){return c(this,i,h)})})();(function(){CodeMirror.defineOption("matchTags",false,function(d,f,e){if(e&&e!=CodeMirror.Init){d.off("cursorActivity",b);d.off("viewportChange",c);a(d)}if(f){d.state.matchBothTags=typeof f=="object"&&f.bothTags;d.on("cursorActivity",b);d.on("viewportChange",c);b(d)}});function a(d){if(d.state.tagHit){d.state.tagHit.clear()}if(d.state.tagOther){d.state.tagOther.clear()}d.state.tagHit=d.state.tagOther=null}function b(d){d.state.failedTagMatch=false;d.operation(function(){a(d);if(d.somethingSelected()){return}var i=d.getCursor(),f=d.getViewport();f.from=Math.min(f.from,i.line);f.to=Math.max(i.line+1,f.to);var g=CodeMirror.findMatchingTag(d,i,f);if(!g){return}if(d.state.matchBothTags){var h=g.at=="open"?g.open:g.close;if(h){d.state.tagHit=d.markText(h.from,h.to,{className:"CodeMirror-matchingtag"})}}var e=g.at=="close"?g.open:g.close;if(e){d.state.tagOther=d.markText(e.from,e.to,{className:"CodeMirror-matchingtag"})}else{d.state.failedTagMatch=true}})}function c(d){if(d.state.failedTagMatch){b(d)}}CodeMirror.commands.toMatchingTag=function(e){var f=CodeMirror.findMatchingTag(e,e.getCursor());if(f){var d=f.at=="close"?f.open:f.close;if(d){e.setSelection(d.to,d.from)}}}})();CodeMirror.registerHelper("fold","brace",function(l,g){var n=g.line,f=l.getLine(n);var m,s;function c(t){for(var i=g.ch,u=0;;){var v=i<=0?-1:f.lastIndexOf(t,i-1);if(v==-1){if(u==1){break}u=1;i=f.length;continue}if(u==1&&v<g.ch){break}s=l.getTokenTypeAt(CodeMirror.Pos(n,v+1));if(!/^(comment|string)/.test(s)){return v+1}i=v-1}}var h="{",d="}",m=c("{");if(m==null){h="[",d="]";m=c("[")}if(m==null){return}var k=1,b=l.lastLine(),e,p;outer:for(var r=n;r<=b;++r){var o=l.getLine(r),j=r==n?m:0;for(;;){var a=o.indexOf(h,j),q=o.indexOf(d,j);if(a<0){a=o.length}if(q<0){q=o.length}j=Math.min(a,q);if(j==o.length){break}if(l.getTokenTypeAt(CodeMirror.Pos(r,j+1))==s){if(j==a){++k}else{if(!--k){e=r;p=j;break outer}}}++j}}if(e==null||n==e&&p==m){return}return{from:CodeMirror.Pos(n,m),to:CodeMirror.Pos(e,p)}});CodeMirror.braceRangeFinder=CodeMirror.fold.brace;CodeMirror.registerHelper("fold","import",function(a,g){function f(j){if(j<a.firstLine()||j>a.lastLine()){return null}var n=a.getTokenAt(CodeMirror.Pos(j,1));if(!/\S/.test(n.string)){n=a.getTokenAt(CodeMirror.Pos(j,n.end+1))}if(n.type!="keyword"||n.string!="import"){return null}for(var k=j,l=Math.min(a.lastLine(),j+10);k<=l;++k){var m=a.getLine(k),h=m.indexOf(";");if(h!=-1){return{startCh:n.end,end:CodeMirror.Pos(k,h)}}}}var g=g.line,c=f(g),e;if(!c||f(g-1)||((e=f(g-2))&&e.end.line==g-1)){return null}for(var b=c.end;;){var d=f(b.line+1);if(d==null){break}b=d.end}return{from:a.clipPos(CodeMirror.Pos(g,c.startCh+1)),to:b}});CodeMirror.importRangeFinder=CodeMirror.fold["import"];CodeMirror.registerHelper("fold","include",function(a,f){function e(g){if(g<a.firstLine()||g>a.lastLine()){return null}var h=a.getTokenAt(CodeMirror.Pos(g,1));if(!/\S/.test(h.string)){h=a.getTokenAt(CodeMirror.Pos(g,h.end+1))}if(h.type=="meta"&&h.string.slice(0,8)=="#include"){return h.start+8}}var f=f.line,c=e(f);if(c==null||e(f-1)!=null){return null}for(var b=f;;){var d=e(b+1);if(d==null){break}++b}return{from:CodeMirror.Pos(f,c+1),to:a.clipPos(CodeMirror.Pos(b))}});CodeMirror.includeRangeFinder=CodeMirror.fold.include;(function(){function a(k,j,l,f){var d=l&&(l.call?l:l.rangeFinder);if(!d){d=CodeMirror.fold.auto}if(typeof j=="number"){j=CodeMirror.Pos(j,0)}var e=l&&l.minFoldSize||0;function c(m){var n=d(k,j);if(!n||n.to.line-n.from.line<e){return null}var p=k.findMarksAt(n.from);for(var o=0;o<p.length;++o){if(p[o].__isFold&&f!=="fold"){if(!m){return null}n.cleared=true;p[o].clear()}}return n}var h=c(true);if(l&&l.scanUp){while(!h&&j.line>k.firstLine()){j=CodeMirror.Pos(j.line-1,0);h=c(false)}}if(!h||h.cleared||f==="unfold"){return}var i=b(l);CodeMirror.on(i,"mousedown",function(){g.clear()});var g=k.markText(h.from,h.to,{replacedWith:i,clearOnEnter:true,__isFold:true});g.on("clear",function(n,m){CodeMirror.signal(k,"unfold",k,n,m)});CodeMirror.signal(k,"fold",k,h.from,h.to)}function b(c){var d=(c&&c.widget)||"\u2194";if(typeof d=="string"){var e=document.createTextNode(d);d=document.createElement("span");d.appendChild(e);d.className="CodeMirror-foldmarker"}return d}CodeMirror.newFoldFunction=function(d,c){return function(e,f){a(e,f,{rangeFinder:d,widget:c})}};CodeMirror.defineExtension("foldCode",function(e,c,d){a(this,e,c,d)});CodeMirror.commands.fold=function(c){c.foldCode(c.getCursor())};CodeMirror.registerHelper("fold","combine",function(){var c=Array.prototype.slice.call(arguments,0);return function(d,g){for(var e=0;e<c.length;++e){var f=c[e](d,g);if(f){return f}}}});CodeMirror.registerHelper("fold","auto",function(c,g){var e=c.getHelpers(g,"fold");for(var d=0;d<e.length;d++){var f=e[d](c,g);if(f){return f}}})})();(function(){CodeMirror.defineOption("foldGutter",false,function(l,n,m){if(m&&m!=CodeMirror.Init){l.clearGutter(l.state.foldGutter.options.gutter);l.state.foldGutter=null;l.off("gutterClick",j);l.off("change",f);l.off("viewportChange",k);l.off("fold",d);l.off("unfold",d);l.off("swapDoc",b)}if(n){l.state.foldGutter=new i(h(n));b(l);l.on("gutterClick",j);l.on("change",f);l.on("viewportChange",k);l.on("fold",d);l.on("unfold",d);l.on("swapDoc",b)}});var g=CodeMirror.Pos;function i(l){this.options=l;this.from=this.to=0}function h(l){if(l===true){l={}}if(l.gutter==null){l.gutter="CodeMirror-foldgutter"}if(l.indicatorOpen==null){l.indicatorOpen="CodeMirror-foldgutter-open"}if(l.indicatorFolded==null){l.indicatorFolded="CodeMirror-foldgutter-folded"}return l}function c(l,m){var o=l.findMarksAt(g(m));for(var n=0;n<o.length;++n){if(o[n].__isFold&&o[n].find().from.line==m){return true}}}function e(l){if(typeof l=="string"){var m=document.createElement("div");m.className=l;return m}else{return l.cloneNode(true)}}function a(l,p,o){var m=l.state.foldGutter.options,n=p;l.eachLine(p,o,function(q){var u=null;if(c(l,n)){u=e(m.indicatorFolded)}else{var t=g(n,0),s=m.rangeFinder||CodeMirror.fold.auto;var r=s&&s(l,t);if(r&&r.from.line+1<r.to.line){u=e(m.indicatorOpen)}}l.setGutterMarker(q,m.gutter,u);++n})}function b(l){var m=l.getViewport(),n=l.state.foldGutter;if(!n){return}l.operation(function(){a(l,m.from,m.to)});n.from=m.from;n.to=m.to}function j(l,m,o){var n=l.state.foldGutter.options;if(o!=n.gutter){return}l.foldCode(g(m,0),n.rangeFinder)}function f(l){var n=l.state.foldGutter,m=l.state.foldGutter.options;n.from=n.to=0;clearTimeout(n.changeUpdate);n.changeUpdate=setTimeout(function(){b(l)},m.foldOnChangeTimeSpan||600)}function k(l){var n=l.state.foldGutter,m=l.state.foldGutter.options;clearTimeout(n.changeUpdate);n.changeUpdate=setTimeout(function(){var o=l.getViewport();if(n.from==n.to||o.from-n.to>20||n.from-o.to>20){b(l)}else{l.operation(function(){if(o.from<n.from){a(l,o.from,n.from);n.from=o.from}if(o.to>n.to){a(l,n.to,o.to);n.to=o.to}})}},m.updateViewportTimeSpan||400)}function d(l,o){var n=l.state.foldGutter,m=o.line;if(m>=n.from&&m<n.to){a(l,m,m+1)}}})();(function(){var l=CodeMirror.Pos;function k(q,p){return q.line-p.line||q.ch-p.ch}var i="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var n=i+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+i+"]["+n+"]*)","g");function a(p,q,s,r){this.line=q;this.ch=s;this.cm=p;this.text=p.getLine(q);this.min=r?r.from:p.firstLine();this.max=r?r.to-1:p.lastLine()}function h(p,r){var q=p.cm.getTokenTypeAt(l(p.line,r));return q&&/\btag\b/.test(q)}function b(p){if(p.line>=p.max){return}p.ch=0;p.text=p.cm.getLine(++p.line);return true}function m(p){if(p.line<=p.min){return}p.text=p.cm.getLine(--p.line);p.ch=p.text.length;return true}function g(r){for(;;){var q=r.text.indexOf(">",r.ch);if(q==-1){if(b(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q+1;continue}var p=r.text.lastIndexOf("/",q);var s=p>-1&&!/\S/.test(r.text.slice(p+1,q));r.ch=q+1;return s?"selfClose":"regular"}}function j(q){for(;;){var p=q.ch?q.text.lastIndexOf("<",q.ch-1):-1;if(p==-1){if(m(q)){continue}else{return}}if(!h(q,p+1)){q.ch=p;continue}d.lastIndex=p;q.ch=p;var r=d.exec(q.text);if(r&&r.index==p){return r}}}function o(p){for(;;){d.lastIndex=p.ch;var q=d.exec(p.text);if(!q){if(b(p)){continue}else{return}}if(!h(p,q.index+1)){p.ch=q.index+1;continue}p.ch=q.index+q[0].length;return q}}function e(r){for(;;){var q=r.ch?r.text.lastIndexOf(">",r.ch-1):-1;if(q==-1){if(m(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}var p=r.text.lastIndexOf("/",q);var s=p>-1&&!/\S/.test(r.text.slice(p+1,q));r.ch=q+1;return s?"selfClose":"regular"}}function f(s,q){var p=[];for(;;){var u=o(s),r,w=s.line,v=s.ch-(u?u[0].length:0);if(!u||!(r=g(s))){return}if(r=="selfClose"){continue}if(u[1]){for(var t=p.length-1;t>=0;--t){if(p[t]==u[2]){p.length=t;break}}if(t<0&&(!q||q==u[2])){return{tag:u[2],from:l(w,v),to:l(s.line,s.ch)}}}else{p.push(u[2])}}}function c(r,q){var p=[];for(;;){var v=e(r);if(!v){return}if(v=="selfClose"){j(r);continue}var u=r.line,t=r.ch;var w=j(r);if(!w){return}if(w[1]){p.push(w[2])}else{for(var s=p.length-1;s>=0;--s){if(p[s]==w[2]){p.length=s;break}}if(s<0&&(!q||q==w[2])){return{tag:w[2],from:l(r.line,r.ch),to:l(u,t)}}}}}CodeMirror.registerHelper("fold","xml",function(p,u){var r=new a(p,u.line,0);for(;;){var s=o(r),q;if(!s||r.line!=u.line||!(q=g(r))){return}if(!s[1]&&q!="selfClose"){var u=l(r.line,r.ch);var t=f(r,s[2]);return t&&{from:u,to:t.from}}}});CodeMirror.tagRangeFinder=CodeMirror.fold.xml;CodeMirror.findMatchingTag=function(p,w,s){var r=new a(p,w.line,w.ch,s);if(r.text.indexOf(">")==-1&&r.text.indexOf("<")==-1){return}var q=g(r),v=q&&l(r.line,r.ch);var u=q&&j(r);if(!q||q=="selfClose"||!u||k(r,w)>0){return}var t={from:l(r.line,r.ch),to:v,tag:u[2]};if(u[1]){return{open:c(r,u[2]),close:t,at:"close"}}else{r=new a(p,v.line,v.ch,s);return{open:t,close:f(r,u[2]),at:"open"}}};CodeMirror.findEnclosingTag=function(p,v,r){var q=new a(p,v.line,v.ch,r);for(;;){var t=c(q);if(!t){break}var s=new a(p,v.line,v.ch,r);var u=f(s,t.tag);if(u){return{open:t,close:u}}}};CodeMirror.scanForClosingTag=function(p,t,s,r){var q=new a(p,t.line,t.ch,r?{from:0,to:r}:null);return !!f(q,s)}})();(function(){if(!CodeMirror.modeURL){CodeMirror.modeURL="../mode/%N/%N.js"}var c={};function b(d,f){var e=f;return function(){if(--e==0){d()}}}function a(j,d){var h=CodeMirror.modes[j].dependencies;if(!h){return d()}var g=[];for(var f=0;f<h.length;++f){if(!CodeMirror.modes.hasOwnProperty(h[f])){g.push(h[f])}}if(!g.length){return d()}var e=b(d,g.length);for(var f=0;f<g.length;++f){CodeMirror.requireMode(g[f],e)}}CodeMirror.requireMode=function(j,d){if(typeof j!="string"){j=j.name}if(CodeMirror.modes.hasOwnProperty(j)){return a(j,d)}if(c.hasOwnProperty(j)){return c[j].push(d)}var e=document.createElement("script");e.src=CodeMirror.modeURL.replace(/%N/g,j);var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f);var h=c[j]=[d];var g=0,i=setInterval(function(){if(++g>100){return clearInterval(i)}if(CodeMirror.modes.hasOwnProperty(j)){clearInterval(i);c[j]=null;a(j,function(){for(var k=0;k<h.length;++k){h[k]()}})}},200)};CodeMirror.autoLoadMode=function(d,e){if(!CodeMirror.modes.hasOwnProperty(e)){CodeMirror.requireMode(e,function(){d.setOption("mode",d.getOption("mode"))})}}}());(function(){var e="CodeMirror-activeline";var d="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",false,function(f,i,g){var h=g&&g!=CodeMirror.Init;if(i&&!h){c(f,f.getCursor().line);f.on("beforeSelectionChange",a)}else{if(!i&&h){f.off("beforeSelectionChange",a);b(f);delete f.state.activeLine}}});function b(f){if("activeLine" in f.state){f.removeLineClass(f.state.activeLine,"wrap",e);f.removeLineClass(f.state.activeLine,"background",d)}}function c(f,h){var g=f.getLineHandleVisualStart(h);if(f.state.activeLine==g){return}f.operation(function(){b(f);f.addLineClass(g,"wrap",e);f.addLineClass(g,"background",d);f.state.activeLine=g})}function a(f,g){c(f,g.head.line)}})();(function(){var a=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["C-["],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["<CR>"],type:"keyToKey",toKeys:["j","^"],context:"normal"},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false,toJumplist:true}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true,toJumplist:true}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:true,explicitRepeat:true}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:false,explicitRepeat:true}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true,toJumplist:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:true}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:true,toJumplist:true}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:false,toJumplist:true}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false,toJumplist:true}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:true},motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:true}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:false}},{keys:["<C-e>"],type:"action",action:"scroll",actionArgs:{forward:true,linewise:true}},{keys:["<C-y>"],type:"action",action:"scroll",actionArgs:{forward:false,linewise:true}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["J"],type:"action",action:"joinLines",isEdit:true},{keys:["p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true}},{keys:["P"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true}},{keys:["r","character"],type:"action",action:"replace",isEdit:true},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{replace:true}},{keys:["u"],type:"action",action:"undo"},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:true,backtrack:false}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:false,backtrack:false}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt",toJumplist:true}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt",toJumplist:true}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",toJumplist:true}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",toJumplist:true}},{keys:[":"],type:"ex"}];var b=function(){CodeMirror.defineOption("vimMode",false,function(a1,a2){if(a2){a1.setOption("keyMap","vim");a1.setOption("disableInput",true);CodeMirror.signal(a1,"vim-mode-change",{mode:"normal"});a1.on("beforeSelectionChange",f);u(a1);CodeMirror.on(a1.getInputField(),"paste",C(a1))}else{if(a1.state.vim){a1.setOption("keyMap","default");a1.setOption("disableInput",false);a1.off("beforeSelectionChange",f);CodeMirror.off(a1.getInputField(),"paste",C(a1));a1.state.vim=null}}});function f(a1,a4){var a2=a1.state.vim;if(a2.insertMode||a2.exMode){return}var a3=a4.head;if(a3.ch&&a3.ch==a1.doc.getLine(a3.line).length){a3.ch--}}function C(a1){var a2=a1.state.vim;if(!a2.onPasteFn){a2.onPasteFn=function(){if(!a2.insertMode){a1.setCursor(s(a1.getCursor(),0,1));k.enterInsertMode(a1,{},a2)}}}return a2.onPasteFn}var ay=/[\d]/;var Z=[(/\w/),(/[^\w\s]/)],aR=[(/\S/)];function Y(a4,a2){var a3=[];for(var a1=a4;a1<a4+a2;a1++){a3.push(String.fromCharCode(a1))}return a3}var N=Y(65,26);var V=Y(97,26);var D=Y(48,10);var e="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split("");var aw=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var ai=[].concat(N,V,D,["<",">"]);var h=[].concat(N,V,D,["-",'"']);function c(a1,a2){return a2>=a1.firstLine()&&a2<=a1.lastLine()}function t(a1){return(/^[a-z]$/).test(a1)}function y(a1){return"()[]{}".indexOf(a1)!=-1}function M(a1){return ay.test(a1)}function p(a1){return(/^[A-Z]$/).test(a1)}function A(a1){return(/^\s*$/).test(a1)}function w(a3,a1){for(var a2=0;a2<a1.length;a2++){if(a1[a2]==a3){return true}}return false}var X=function(){var a5=100;var a7=-1;var a4=0;var a3=0;var a2=new Array(a5);function a6(a8,ba,bb){var bc=a7%a5;var bd=a2[bc];function a9(bg){var bf=++a7%a5;var bh=a2[bf];if(bh){bh.clear()}a2[bf]=a8.setBookmark(bg)}if(bd){var be=bd.find();if(be&&!aZ(be,ba)){a9(ba)}}else{a9(ba)}a9(bb);a4=a7;a3=a7-a5+1;if(a3<0){a3=0}}function a1(a8,bc){a7+=bc;if(a7>a4){a7=a4}else{if(a7<a3){a7=a3}}var bd=a2[(a5+a7)%a5];if(bd&&!bd.find()){var bb=bc>0?1:-1;var ba;var a9=a8.getCursor();do{a7+=bb;bd=a2[(a5+a7)%a5];if(bd&&(ba=bd.find())&&!aZ(a9,ba)){break}}while(a7<a4&&a7>a3)}return bd}return{cachedCursor:undefined,add:a6,move:a1}};var aT=function(){return{macroKeyBuffer:[],latestRegister:undefined,inReplay:false,lastInsertModeChanges:{changes:[],expectCursorActivityForChange:false},enteredMacroMode:undefined,isMacroPlaying:false,toggle:function(a1,a2){if(this.enteredMacroMode){this.enteredMacroMode();this.enteredMacroMode=undefined}else{this.latestRegister=a2;this.enteredMacroMode=a1.openDialog("(recording)["+a2+"]",null,{bottom:true})}}}};function u(a1){if(!a1.state.vim){a1.state.vim={inputState:new ad(),lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:false,insertModeRepeat:undefined,visualMode:false,visualLine:false}}return a1.state.vim}var l;function o(){l={searchQuery:null,searchIsReversed:false,jumpList:X(),macroModeState:aT(),lastChararacterSearch:{increment:0,forward:true,selectedCharacter:""},registerController:new O({})}}var aq={buildKeyMap:function(){},getRegisterController:function(){return l.registerController},resetVimGlobalState_:o,getVimGlobalState_:function(){return l},maybeInitVimState_:u,InsertModeKey:aO,map:function(a2,a3,a1){i.map(a2,a3,a1)},defineEx:function(a1,a3,a2){if(a1.indexOf(a3)!==0){throw new Error('(Vim.defineEx) "'+a3+'" is not a prefix of "'+a1+'", command not registered')}aD[a1]=a2;i.commandMap_[a3]={name:a1,shortName:a3,type:"api"}},handleKey:function(a1,a4){var a6;var a2=u(a1);var a5=l.macroModeState;if(a5.enteredMacroMode){if(a4=="q"){k.exitMacroRecordMode();a2.inputState=new ad();return}}if(a4=="<Esc>"){a2.inputState=new ad();if(a2.visualMode){au(a1)}return}if(!a2.visualMode&&!aZ(a1.getCursor("head"),a1.getCursor("anchor"))){a2.visualMode=true;a2.visualLine=false;CodeMirror.signal(a1,"vim-mode-change",{mode:"visual"});a1.on("mousedown",au)}if(a4!="0"||(a4=="0"&&a2.inputState.getRepeat()===0)){a6=aG.matchCommand(a4,a,a2)}if(!a6){if(M(a4)){a2.inputState.pushRepeatDigit(a4)}return}if(a6.type=="keyToKey"){for(var a3=0;a3<a6.toKeys.length;a3++){this.handleKey(a1,a6.toKeys[a3])}}else{if(a5.enteredMacroMode){v(a5,a4)}aG.processCommand(a1,a2,a6)}},handleEx:function(a1,a2){i.processCommand(a1,a2)}};function ad(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}ad.prototype.pushRepeatDigit=function(a1){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(a1)}else{this.motionRepeat=this.motionRepeat.concat(a1)}};ad.prototype.getRepeat=function(){var a1=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){a1=1;if(this.prefixRepeat.length>0){a1*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){a1*=parseInt(this.motionRepeat.join(""),10)}}return a1};function aS(a2,a1){this.clear();if(a2){this.set(a2,a1)}}aS.prototype={set:function(a2,a1){this.text=a2;this.linewise=!!a1},append:function(a2,a1){if(a1||this.linewise){this.text+="\n"+a2;this.linewise=true}else{this.text+=a2}},clear:function(){this.text="";this.linewise=false},toString:function(){return this.text}};function O(a1){this.registers=a1;this.unamedRegister=a1['"']=new aS()}O.prototype={pushText:function(a4,a2,a6,a5){if(a5&&a6.charAt(0)=="\n"){a6=a6.slice(1)+"\n"}if(a5&&a6.charAt(a6.length-1)!=="\n"){a6+="\n"}var a3=this.isValidRegister(a4)?this.getRegister(a4):null;if(!a3){switch(a2){case"yank":this.registers["0"]=new aS(a6,a5);break;case"delete":case"change":if(a6.indexOf("\n")==-1){this.registers["-"]=new aS(a6,a5)}else{this.shiftNumericRegisters_();this.registers["1"]=new aS(a6,a5)}break}this.unamedRegister.set(a6,a5);return}var a1=p(a4);if(a1){a3.append(a6,a5);this.unamedRegister.append(a6,a5)}else{a3.set(a6,a5);this.unamedRegister.set(a6,a5)}},setRegisterText:function(a1,a3,a2){this.getRegister(a1).set(a3,a2)},getRegister:function(a1){if(!this.isValidRegister(a1)){return this.unamedRegister}a1=a1.toLowerCase();if(!this.registers[a1]){this.registers[a1]=new aS()}return this.registers[a1]},isValidRegister:function(a1){return a1&&w(a1,h)},shiftNumericRegisters_:function(){for(var a1=9;a1>=2;a1--){this.registers[a1]=this.getRegister(""+(a1-1))}}};var aG={matchCommand:function(bc,bb,a4){var a8=a4.inputState;var bd=a8.keyBuffer.concat(bc);var a7=[];var a1;for(var a5=0;a5<bb.length;a5++){var a3=bb[a5];if(aQ(bd,a3.keys)){if(a8.operator&&a3.type=="action"){continue}if(a3.keys[bd.length-1]=="character"){a1=bd[bd.length-1];if(a1.length>1){switch(a1){case"<CR>":a1="\n";break;case"<Space>":a1=" ";break;default:continue}}}a7.push(a3)}}function ba(be){if(bd.length<be.keys.length){a8.keyBuffer.push(bc);return null}else{if(be.keys[bd.length-1]=="character"){a8.selectedCharacter=a1}a8.keyBuffer=[];return be}}if(!a7.length){a8.keyBuffer=[];return null}else{if(a7.length==1){return ba(a7[0])}else{var a2=a4.visualMode?"visual":"normal";var a6;for(var a5=0;a5<a7.length;a5++){var a9=a7[a5];if(a9.context==a2){a6=a9;break}else{if(!a6&&!a9.context){a6=a9}}}return ba(a6)}}},processCommand:function(a1,a2,a3){a2.inputState.repeatOverride=a3.repeatOverride;switch(a3.type){case"motion":this.processMotion(a1,a2,a3);break;case"operator":this.processOperator(a1,a2,a3);break;case"operatorMotion":this.processOperatorMotion(a1,a2,a3);break;case"action":this.processAction(a1,a2,a3);break;case"search":this.processSearch(a1,a2,a3);break;case"ex":case"keyToEx":this.processEx(a1,a2,a3);break;default:break}},processMotion:function(a1,a2,a3){a2.inputState.motion=a3.motion;a2.inputState.motionArgs=aN(a3.motionArgs);this.evalInput(a1,a2)},processOperator:function(a2,a3,a4){var a1=a3.inputState;if(a1.operator){if(a1.operator==a4.operator){a1.motion="expandToLine";a1.motionArgs={linewise:true};this.evalInput(a2,a3);return}else{a3.inputState=new ad()}}a1.operator=a4.operator;a1.operatorArgs=aN(a4.operatorArgs);if(a3.visualMode){this.evalInput(a2,a3)}},processOperatorMotion:function(a1,a4,a5){var a3=a4.visualMode;var a2=aN(a5.operatorMotionArgs);if(a2){if(a3&&a2.visualLine){a4.visualLine=true}}this.processOperator(a1,a4,a5);if(!a3){this.processMotion(a1,a4,a5)}},processAction:function(a2,a4,a7){var a1=a4.inputState;var a6=a1.getRepeat();var a5=!!a6;var a3=aN(a7.actionArgs)||{};if(a1.selectedCharacter){a3.selectedCharacter=a1.selectedCharacter}if(a7.operator){this.processOperator(a2,a4,a7)}if(a7.motion){this.processMotion(a2,a4,a7)}if(a7.motion||a7.operator){this.evalInput(a2,a4)}a3.repeat=a6||1;a3.repeatIsExplicit=a5;a3.registerName=a1.registerName;a4.inputState=new ad();a4.lastMotion=null;if(a7.isEdit){this.recordLastEdit(a4,a1,a7)}k[a7.action](a2,a3,a4)},processSearch:function(be,a8,a7){if(!be.getSearchCursor){return}var a9=a7.searchArgs.forward;ak(be).setReversed(!a9);var ba=(a9)?"/":"?";var bc=ak(be).getQuery();var a3=be.getScrollInfo();function a6(bh,bf,bg){try{aY(be,bh,bf,bg)}catch(bi){aP(be,"Invalid regex: "+bh);return}aG.processMotion(be,a8,{type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:a7.searchArgs.toJumplist}})}function bd(bf){be.scrollTo(a3.left,a3.top);a6(bf,true,true)}function a5(bf,bh){var bg;try{bg=aY(be,bh,true,true)}catch(bi){}if(bg){be.scrollIntoView(a0(be,!a9,bg),30)}else{am(be);be.scrollTo(a3.left,a3.top)}}function a2(bh,bf,bi){var bg=CodeMirror.keyName(bh);if(bg=="Esc"||bg=="Ctrl-C"||bg=="Ctrl-["){aY(be,bc);am(be);be.scrollTo(a3.left,a3.top);CodeMirror.e_stop(bh);bi();be.focus()}}switch(a7.searchArgs.querySrc){case"prompt":aB(be,{onClose:bd,prefix:ba,desc:z,onKeyUp:a5,onKeyDown:a2});break;case"wordUnderCursor":var a4=ah(be,false,true,false,true);var a1=true;if(!a4){a4=ah(be,false,true,false,false);a1=false}if(!a4){return}var bb=be.getLine(a4.start.line).substring(a4.start.ch,a4.end.ch);if(a1){bb="\\b"+bb+"\\b"}else{bb=d(bb)}l.jumpList.cachedCursor=be.getCursor();be.setCursor(a4.start);a6(bb,true,false);break}},processEx:function(a1,a2,a5){function a4(a6){i.processCommand(a1,a6)}function a3(a8,a7,a9){var a6=CodeMirror.keyName(a8);if(a6=="Esc"||a6=="Ctrl-C"||a6=="Ctrl-["){CodeMirror.e_stop(a8);a9();a1.focus()}}if(a5.type=="keyToEx"){i.processCommand(a1,a5.exArgs.input)}else{if(a2.visualMode){aB(a1,{onClose:a4,prefix:":",value:"'<,'>",onKeyDown:a3})}else{aB(a1,{onClose:a4,prefix:":",onKeyDown:a3})}}},evalInput:function(a5,bh){var ba=bh.inputState;var be=ba.motion;var bb=ba.motionArgs||{};var a6=ba.operator;var bl=ba.operatorArgs||{};var bc=ba.registerName;var a2=a5.getCursor("head");var bf=a5.getCursor("anchor");var a4=r(a2);var a9=r(a4);var bi;var a7;if(a6){this.recordLastEdit(bh,ba)}if(ba.repeatOverride!==undefined){a7=ba.repeatOverride}else{a7=ba.getRepeat()}if(a7>0&&bb.explicitRepeat){bb.repeatIsExplicit=true}else{if(bb.noRepeat||(!bb.explicitRepeat&&a7===0)){a7=1;bb.repeatIsExplicit=false}}if(ba.selectedCharacter){bb.selectedCharacter=bl.selectedCharacter=ba.selectedCharacter}bb.repeat=a7;bh.inputState=new ad();if(be){var bg=aC[be](a5,bb,bh);bh.lastMotion=aC[be];if(!bg){return}if(bb.toJumplist){var bk=l.jumpList;var a8=bk.cachedCursor;if(a8){aL(a5,a8,bg);delete bk.cachedCursor}else{aL(a5,a9,bg)}}if(bg instanceof Array){a4=bg[0];bi=bg[1]}else{bi=bg}if(!bi){bi={ch:a4.ch,line:a4.line}}if(bh.visualMode){if(ao(bf,a2)&&(aZ(bf,bi)||ao(bi,bf))){bf.ch+=1}else{if(ao(a2,bf)&&(aZ(bf,bi)||ao(bf,bi))){bf.ch-=1}}a2=bi;if(bh.visualLine){if(ao(bf,a2)){bf.ch=0;var a1=a5.lastLine();if(a2.line>a1){a2.line=a1}a2.ch=ax(a5,a2.line)}else{a2.ch=0;bf.ch=ax(a5,bf.line)}}a5.setSelection(bf,a2);at(a5,bh,"<",ao(bf,a2)?bf:a2);at(a5,bh,">",ao(bf,a2)?a2:bf)}else{if(!a6){bi=H(a5,bi);a5.setCursor(bi.line,bi.ch)}}}if(a6){var bd=false;bh.lastMotion=null;bl.repeat=a7;if(bh.visualMode){a4=bf;bi=a2;bb.inclusive=true}if(ao(bi,a4)){var bj=a4;a4=bi;bi=bj;bd=true}if(bb.inclusive&&!(bh.visualMode&&bd)){bi.ch++}var a3=bb.linewise||(bh.visualMode&&bh.visualLine);if(a3){aJ(a5,a4,bi)}else{if(bb.forward){U(a5,a4,bi)}}bl.registerName=bc;bl.linewise=a3;x[a6](a5,bl,bh,a4,bi,a9);if(bh.visualMode){au(a5)}}},recordLastEdit:function(a2,a1,a3){var a4=l.macroModeState;if(a4.inReplay){return}a2.lastEditInputState=a1;a2.lastEditActionCommand=a3;a4.lastInsertModeChanges.changes=[];a4.lastInsertModeChanges.expectCursorActivityForChange=false}};var aC={moveToTopLine:function(a1,a3){var a2=aI(a1).top+a3.repeat-1;return{line:a2,ch:aA(a1.getLine(a2))}},moveToMiddleLine:function(a1){var a3=aI(a1);var a2=Math.floor((a3.top+a3.bottom)*0.5);return{line:a2,ch:aA(a1.getLine(a2))}},moveToBottomLine:function(a1,a3){var a2=aI(a1).bottom-a3.repeat+1;return{line:a2,ch:aA(a1.getLine(a2))}},expandToLine:function(a1,a2){var a3=a1.getCursor();return{line:a3.line+a2.repeat-1,ch:Infinity}},findNext:function(a1,a2){var a5=ak(a1);var a4=a5.getQuery();if(!a4){return}var a3=!a2.forward;a3=(a5.isReversed())?!a3:a3;al(a1,a4);return a0(a1,a3,a4,a2.repeat)},goToMark:function(a3,a2,a1){var a4=a1.marks[a2.selectedCharacter];if(a4){return a4.find()}return null},jumpToMark:function(a8,a4,a5){var a3=a8.getCursor();for(var a6=0;a6<a4.repeat;a6++){var ba=a3;for(var a9 in a5.marks){if(!t(a9)){continue}var a2=a5.marks[a9].find();var a1=(a4.forward)?ao(a2,ba):ao(ba,a2);if(a1){continue}if(a4.linewise&&(a2.line==ba.line)){continue}var a7=aZ(ba,a3);var bb=(a4.forward)?av(ba,a2,a3):av(a3,a2,ba);if(a7||bb){a3=a2}}}if(a4.linewise){a3.ch=aA(a8.getLine(a3.line))}return a3},moveByCharacters:function(a1,a2){var a5=a1.getCursor();var a4=a2.repeat;var a3=a2.forward?a5.ch+a4:a5.ch-a4;return{line:a5.line,ch:a3}},moveByLines:function(a6,a2,a3){var a8=a6.getCursor();var a4=a8.ch;switch(a3.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:a4=a3.lastHPos;break;default:a3.lastHPos=a4}var a1=a2.repeat+(a2.repeatOffset||0);var a9=a2.forward?a8.line+a1:a8.line-a1;var a5=a6.firstLine();var a7=a6.lastLine();if((a9<a5&&a8.line==a5)||(a9>a7&&a8.line==a7)){return}if(a2.toFirstChar){a4=aA(a6.getLine(a9));a3.lastHPos=a4}a3.lastHSPos=a6.charCoords({line:a9,ch:a4},"div").left;return{line:a9,ch:a4}},moveByDisplayLines:function(a8,a3,a4){var a9=a8.getCursor();switch(a4.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:a4.lastHSPos=a8.charCoords(a9,"div").left}var a1=a3.repeat;var a7=a8.findPosV(a9,(a3.forward?a1:-a1),"line",a4.lastHSPos);if(a7.hitSide){if(a3.forward){var a2=a8.charCoords(a7,"div");var a5={top:a2.top+8,left:a4.lastHSPos};var a7=a8.coordsChar(a5,"div")}else{var a6=a8.charCoords({line:a8.firstLine(),ch:0},"div");a6.left=a4.lastHSPos;a7=a8.coordsChar(a6,"div")}}a4.lastHPos=a7.ch;return a7},moveByPage:function(a2,a3){var a1=a2.getCursor();var a5=a3.repeat;a2.moveV((a3.forward?a5:-a5),"page");var a4=a2.getCursor();a2.setCursor(a1);return a4},moveByParagraph:function(a1,a3){var a2=a1.getCursor().line;var a5=a3.repeat;var a6=a3.forward?1:-1;for(var a4=0;a4<a5;a4++){if((!a3.forward&&a2===a1.firstLine())||(a3.forward&&a2==a1.lastLine())){break}a2+=a6;while(a2!==a1.firstLine()&&a2!=a1.lastLine()&&a1.getLine(a2)){a2+=a6}}return{line:a2,ch:0}},moveByScroll:function(a1,a4,a2){var a8=a1.getScrollInfo();var a6=null;var a5=a4.repeat;if(!a5){a5=a8.clientHeight/(2*a1.defaultTextHeight())}var a7=a1.charCoords(a1.getCursor(),"local");a4.repeat=a5;var a6=aC.moveByDisplayLines(a1,a4,a2);if(!a6){return null}var a3=a1.charCoords(a6,"local");a1.scrollTo(null,a8.top+a3.top-a7.top);return a6},moveByWords:function(a1,a2){return ae(a1,a2.repeat,!!a2.forward,!!a2.wordEnd,!!a2.bigWord)},moveTillCharacter:function(a2,a3){var a5=a3.repeat;var a4=aU(a2,a5,a3.forward,a3.selectedCharacter);var a1=a3.forward?-1:1;af(a1,a3);if(!a4){return a2.getCursor()}a4.ch+=a1;return a4},moveToCharacter:function(a1,a2){var a3=a2.repeat;af(0,a2);return aU(a1,a3,a2.forward,a2.selectedCharacter)||a1.getCursor()},moveToSymbol:function(a1,a2){var a3=a2.repeat;return aV(a1,a3,a2.forward,a2.selectedCharacter)||a1.getCursor()},moveToColumn:function(a1,a3,a2){var a4=a3.repeat;a2.lastHPos=a4-1;a2.lastHSPos=a1.charCoords(a1.getCursor(),"div").left;return S(a1,a4)},moveToEol:function(a1,a5,a4){var a6=a1.getCursor();a4.lastHPos=Infinity;var a3={line:a6.line+a5.repeat-1,ch:Infinity};var a2=a1.clipPos(a3);a2.ch--;a4.lastHSPos=a1.charCoords(a2,"div").left;return a3},moveToFirstNonWhiteSpaceCharacter:function(a1){var a2=a1.getCursor();return{line:a2.line,ch:aA(a1.getLine(a2.line))}},moveToMatchedSymbol:function(a7){var a9=a7.getCursor();var ba=a9.line;var a1=a9.ch;var a6=a7.getLine(ba);var a2;var a3=a7.getTokenAt(a9).type;var a5=W(a3);do{a2=a6.charAt(a1++);if(a2&&y(a2)){var a8=a7.getTokenAt({line:ba,ch:a1}).type;var a4=W(a8);if(a5>=a4){break}}}while(a2);if(a2){return aa(a7,{line:ba,ch:a1-1},a2)}else{return a9}},moveToStartOfLine:function(a1){var a2=a1.getCursor();return{line:a2.line,ch:0}},moveToLineOrEdgeOfDocument:function(a1,a2){var a3=a2.forward?a1.lastLine():a1.firstLine();if(a2.repeatIsExplicit){a3=a2.repeat-a1.getOption("firstLineNumber")}return{line:a3,ch:aA(a1.getLine(a3))}},textObjectManipulation:function(a2,a4){var a6=a4.selectedCharacter;var a1=!a4.textObjectInner;if(!aW[a6]){return null}var a5=aW[a6](a2,a1);var a7=a5.start;var a3=a5.end;return[a7,a3]},repeatLastCharacterSearch:function(a3,a5){var a2=l.lastChararacterSearch;var a7=a5.repeat;var a4=a5.forward===a2.forward;var a1=(a2.increment?1:0)*(a4?-1:1);a3.moveH(-a1,"char");a5.inclusive=a4?true:false;var a6=aU(a3,a7,a4,a2.selectedCharacter);if(!a6){a3.moveH(a1,"char");return a3.getCursor()}a6.ch+=a1;return a6}};var x={change:function(a2,a6,a4,a1,a7){l.registerController.pushText(a6.registerName,"change",a2.getRange(a1,a7),a6.linewise);if(a6.linewise){var a5=a7.line>a2.lastLine()?"":"\n";a2.replaceRange(a5,a1,a7);a2.indentLine(a1.line,"smart");a1.ch=null}else{var a8=a2.getRange(a1,a7);if(!A(a8)){var a3=(/\s+$/).exec(a8);if(a3){a7=s(a7,0,-a3[0].length)}}a2.replaceRange("",a1,a7)}k.enterInsertMode(a2,{},a2.state.vim);a2.setCursor(a1)},"delete":function(a2,a4,a3,a1,a5){if(a4.linewise&&a5.line>a2.lastLine()&&a1.line>a2.firstLine()){a1.line--;a1.ch=ax(a2,a1.line)}l.registerController.pushText(a4.registerName,"delete",a2.getRange(a1,a5),a4.linewise);a2.replaceRange("",a1,a5);if(a4.linewise){a2.setCursor(aC.moveToFirstNonWhiteSpaceCharacter(a2))}else{a2.setCursor(a1)}},indent:function(a8,a3,a5,a7,a9){var ba=a7.line;var a2=a9.line;var a1=(a5.visualMode)?a3.repeat:1;if(a3.linewise){a2--}for(var a6=ba;a6<=a2;a6++){for(var a4=0;a4<a1;a4++){a8.indentLine(a6,a3.indentRight)}}a8.setCursor(a7);a8.setCursor(aC.moveToFirstNonWhiteSpaceCharacter(a8))},swapcase:function(a9,a2,a7,a8,ba,a6){var a4=a9.getRange(a8,ba);var a1="";for(var a3=0;a3<a4.length;a3++){var a5=a4.charAt(a3);a1+=p(a5)?a5.toLowerCase():a5.toUpperCase()}a9.replaceRange(a1,a8,ba);if(!a2.shouldMoveCursor){a9.setCursor(a6)}},yank:function(a2,a5,a4,a1,a6,a3){l.registerController.pushText(a5.registerName,"yank",a2.getRange(a1,a6),a5.linewise);a2.setCursor(a3)}};var k={jumpListWalk:function(a1,a3,a4){if(a4.visualMode){return}var a6=a3.repeat;var a5=a3.forward;var a2=l.jumpList;var a8=a2.move(a1,a5?a6:-a6);var a7=a8?a8.find():undefined;a7=a7?a7:a1.getCursor();a1.setCursor(a7)},scroll:function(a9,a3,a5){if(a5.visualMode){return}var a1=a3.repeat||1;var a8=a9.defaultTextHeight();var a7=a9.getScrollInfo().top;var ba=a8*a1;var a6=a3.forward?a7+ba:a7-ba;var bb=a9.getCursor();var a4=a9.charCoords(bb,"local");if(a3.forward){if(a6>a4.top){bb.line+=(a6-a4.top)/a8;bb.line=Math.ceil(bb.line);a9.setCursor(bb);a4=a9.charCoords(bb,"local");a9.scrollTo(null,a4.top)}else{a9.scrollTo(null,a6)}}else{var a2=a6+a9.getScrollInfo().clientHeight;if(a2<a4.bottom){bb.line-=(a4.bottom-a2)/a8;bb.line=Math.floor(bb.line);a9.setCursor(bb);a4=a9.charCoords(bb,"local");a9.scrollTo(null,a4.bottom-a9.getScrollInfo().clientHeight)}else{a9.scrollTo(null,a6)}}},scrollToCursor:function(a2,a3){var a6=a2.getCursor().line;var a4=a2.charCoords({line:a6,ch:0},"local");var a1=a2.getScrollInfo().clientHeight;var a7=a4.top;var a5=a4.bottom-a7;switch(a3.position){case"center":a7=a7-(a1/2)+a5;break;case"bottom":a7=a7-a1+a5*1.4;break;case"top":a7=a7+a5*0.4;break}a2.scrollTo(null,a7)},replayMacro:function(a1,a2){var a3=a2.selectedCharacter;var a4=a2.repeat;var a5=l.macroModeState;if(a3=="@"){a3=a5.latestRegister}var a6=F(a5,a3);while(a4--){R(a1,a5,a6)}},exitMacroRecordMode:function(){var a1=l.macroModeState;a1.toggle();ap(a1.latestRegister,a1.macroKeyBuffer)},enterMacroRecordMode:function(a1,a2){var a4=l.macroModeState;var a3=a2.selectedCharacter;a4.toggle(a1,a3);aK(a4)},enterInsertMode:function(a1,a2,a3){if(a1.getOption("readOnly")){return}a3.insertMode=true;a3.insertModeRepeat=a2&&a2.repeat||1;var a4=(a2)?a2.insertAt:null;if(a4=="eol"){var a5=a1.getCursor();a5={line:a5.line,ch:ax(a1,a5.line)};a1.setCursor(a5)}else{if(a4=="charAfter"){a1.setCursor(s(a1.getCursor(),0,1))}else{if(a4=="firstNonBlank"){a1.setCursor(aC.moveToFirstNonWhiteSpaceCharacter(a1))}}}a1.setOption("keyMap","vim-insert");a1.setOption("disableInput",false);if(a2&&a2.replace){a1.toggleOverwrite(true);a1.setOption("keyMap","vim-replace");CodeMirror.signal(a1,"vim-mode-change",{mode:"replace"})}else{a1.setOption("keyMap","vim-insert");CodeMirror.signal(a1,"vim-mode-change",{mode:"insert"})}if(!l.macroModeState.inReplay){a1.on("change",aM);a1.on("cursorActivity",I);CodeMirror.on(a1.getInputField(),"keydown",E)}},toggleVisualMode:function(a2,a3,a4){var a6=a3.repeat;var a1=a2.getCursor();var a5;if(!a4.visualMode){a2.on("mousedown",au);a4.visualMode=true;a4.visualLine=!!a3.linewise;if(a4.visualLine){a1.ch=0;a5=H(a2,{line:a1.line+a6-1,ch:ax(a2,a1.line)},true)}else{a5=H(a2,{line:a1.line,ch:a1.ch+a6},true)}if(!a3.repeatIsExplicit&&!a4.visualLine){a2.setCursor(a5);a2.setSelection(a5,a1)}else{a2.setSelection(a1,a5)}CodeMirror.signal(a2,"vim-mode-change",{mode:"visual",subMode:a4.visualLine?"linewise":""})}else{a1=a2.getCursor("anchor");a5=a2.getCursor("head");if(!a4.visualLine&&a3.linewise){a4.visualLine=true;a1.ch=ao(a1,a5)?0:ax(a2,a1.line);a5.ch=ao(a1,a5)?ax(a2,a5.line):0;a2.setSelection(a1,a5);CodeMirror.signal(a2,"vim-mode-change",{mode:"visual",subMode:"linewise"})}else{if(a4.visualLine&&!a3.linewise){a4.visualLine=false;CodeMirror.signal(a2,"vim-mode-change",{mode:"visual"})}else{au(a2)}}}at(a2,a4,"<",ao(a1,a5)?a1:a5);at(a2,a4,">",ao(a1,a5)?a5:a1)},joinLines:function(a2,a3,a4){var a1,a6;if(a4.visualMode){a1=a2.getCursor("anchor");a6=a2.getCursor("head");a6.ch=ax(a2,a6.line)-1}else{var a5=Math.max(a3.repeat,2);a1=a2.getCursor();a6=H(a2,{line:a1.line+a5-1,ch:Infinity})}var a7=0;a2.operation(function(){for(var ba=a1.line;ba<a6.line;ba++){a7=ax(a2,a1.line);var a9={line:a1.line+1,ch:ax(a2,a1.line+1)};var bb=a2.getRange(a1,a9);bb=bb.replace(/\n\s*/g," ");a2.replaceRange(bb,a1,a9)}var a8={line:a1.line,ch:a7};a2.setCursor(a8)})},newLineAndEnterInsertMode:function(a1,a2,a3){a3.insertMode=true;var a4=a1.getCursor();if(a4.line===a1.firstLine()&&!a2.after){a1.replaceRange("\n",{line:a1.firstLine(),ch:0});a1.setCursor(a1.firstLine(),0)}else{a4.line=(a2.after)?a4.line:a4.line-1;a4.ch=ax(a1,a4.line);a1.setCursor(a4);var a5=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;a5(a1)}this.enterInsertMode(a1,{repeat:a2.repeat},a3)},paste:function(a5,a1){var a6=a5.getCursor();var a7=l.registerController.getRegister(a1.registerName);if(!a7.text){return}for(var a8="",a2=0;a2<a1.repeat;a2++){a8+=a7.text}var a9=a7.linewise;if(a9){if(a1.after){a8="\n"+a8.slice(0,a8.length-1);a6.ch=ax(a5,a6.line)}else{a6.ch=0}}else{a6.ch+=a1.after?1:0}a5.replaceRange(a8,a6);var a3;var a4;if(a9&&a1.after){a3={line:a6.line+1,ch:aA(a5.getLine(a6.line+1))}}else{if(a9&&!a1.after){a3={line:a6.line,ch:aA(a5.getLine(a6.line))}}else{if(!a9&&a1.after){a4=a5.indexFromPos(a6);a3=a5.posFromIndex(a4+a8.length-1)}else{a4=a5.indexFromPos(a6);a3=a5.posFromIndex(a4+a8.length)}}}a5.setCursor(a3)},undo:function(a1,a2){a1.operation(function(){ab(a1,CodeMirror.commands.undo,a2.repeat)();a1.setCursor(a1.getCursor("anchor"))})},redo:function(a1,a2){ab(a1,CodeMirror.commands.redo,a2.repeat)()},setRegister:function(a3,a1,a2){a2.inputState.registerName=a1.selectedCharacter},setMark:function(a1,a2,a3){var a4=a2.selectedCharacter;at(a1,a3,a4,a1.getCursor())},replace:function(a7,a2,a4){var a3=a2.selectedCharacter;var a6=a7.getCursor();var a5;var a8;if(a4.visualMode){a6=a7.getCursor("start");a8=a7.getCursor("end");a8=a7.clipPos({line:a8.line,ch:a8.ch+1})}else{var a9=a7.getLine(a6.line);a5=a6.ch+a2.repeat;if(a5>a9.length){a5=a9.length}a8={line:a6.line,ch:a5}}if(a3=="\n"){if(!a4.visualMode){a7.replaceRange("",a6,a8)}(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(a7)}else{var a1=a7.getRange(a6,a8);a1=a1.replace(/[^\n]/g,a3);a7.replaceRange(a1,a6,a8);if(a4.visualMode){a7.setCursor(a6);au(a7)}else{a7.setCursor(s(a8,0,-1))}}},incrementNumberToken:function(bb,a2){var bc=bb.getCursor();var a7=bb.getLine(bc.line);var be=/-?\d+/g;var a6;var a1;var a5;var bd;var a3;while((a6=be.exec(a7))!==null){a3=a6[0];a1=a6.index;a5=a1+a3.length;if(bc.ch<a5){break}}if(!a2.backtrack&&(a5<=bc.ch)){return}if(a3){var ba=a2.increase?1:-1;var a4=parseInt(a3)+(ba*a2.repeat);var a9={ch:a1,line:bc.line};var a8={ch:a5,line:bc.line};bd=a4.toString();bb.replaceRange(bd,a9,a8)}else{return}bb.setCursor({line:bc.line,ch:a1+bd.length-1})},repeatLastEdit:function(a2,a3,a4){var a1=a4.lastEditInputState;if(!a1){return}var a5=a3.repeat;if(a5&&a3.repeatIsExplicit){a4.lastEditInputState.repeatOverride=a5}else{a5=a4.lastEditInputState.repeatOverride||a5}n(a2,a4,a5,false)}};var aW={w:function(a2,a1){return ah(a2,a1,true,false)},W:function(a2,a1){return ah(a2,a1,true,true)},"{":function(a2,a1){return j(a2,"}",a1)},"(":function(a2,a1){return j(a2,")",a1)},"[":function(a2,a1){return j(a2,"]",a1)},"'":function(a2,a1){return ar(a2,"'",a1)},'"':function(a2,a1){return ar(a2,'"',a1)}};function H(a2,a6,a4){var a3=Math.min(Math.max(a2.firstLine(),a6.line),a2.lastLine());var a1=ax(a2,a3)-1;a1=(a4)?a1+1:a1;var a5=Math.min(Math.max(0,a6.ch),a1);return{line:a3,ch:a5}}function aN(a2){var a1={};for(var a3 in a2){if(a2.hasOwnProperty(a3)){a1[a3]=a2[a3]}}return a1}function s(a2,a1,a3){return{line:a2.line+a1,ch:a2.ch+a3}}function aQ(a3,a1){for(var a2=0;a2<a3.length;a2++){if(a3[a2]!=a1[a2]&&a1[a2]!="character"){return false}}return true}function ab(a1,a2,a3){return function(){for(var a4=0;a4<a3;a4++){a2(a1)}}}function r(a1){return{line:a1.line,ch:a1.ch}}function aZ(a2,a1){return a2.ch==a1.ch&&a2.line==a1.line}function ao(a2,a1){if(a2.line<a1.line){return true}if(a2.line==a1.line&&a2.ch<a1.ch){return true}return false}function av(a4,a3,a2){var a5=ao(a4,a3);var a1=ao(a3,a2);return a5&&a1}function ax(a1,a2){return a1.getLine(a2).length}function g(a1){return a1.split("").reverse().join("")}function aF(a1){if(a1.trim){return a1.trim()}return a1.replace(/^\s+|\s+$/g,"")}function d(a1){return a1.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function au(a1){a1.off("mousedown",au);var a2=a1.state.vim;a2.visualMode=false;a2.visualLine=false;var a3=a1.getCursor("anchor");var a4=a1.getCursor("head");if(!aZ(a3,a4)){a1.setCursor(H(a1,a4))}CodeMirror.signal(a1,"vim-mode-change",{mode:"normal"})}function U(a2,a1,a6){var a5=a2.getRange(a1,a6);if(/\n\s*$/.test(a5)){var a4=a5.split("\n");a4.pop();var a3;for(var a3=a4.pop();a4.length>0&&a3&&A(a3);a3=a4.pop()){a6.line--;a6.ch=0}if(a3){a6.line--;a6.ch=ax(a2,a6.line)}else{a6.ch=0}}}function aJ(a2,a1,a3){a1.ch=0;a3.ch=0;a3.line++}function aA(a2){if(!a2){return 0}var a1=a2.search(/\S/);return a1==-1?a2.length:a1}function ah(ba,a6,bk,a2,bl){var a4=ba.getCursor();var bd=ba.getLine(a4.line);var bg=a4.ch;var bf=bd.substring(bg);var bh;if(bl){bh=bf.search(/\w/)}else{bh=bf.search(/\S/)}if(bh==-1){return null}bg+=bh;bf=bd.substring(bg);var bj=bd.substring(0,bg);var bm;if(a2){bm=/^\S+/}else{if((/\w/).test(bd.charAt(bg))){bm=/^\w+/}else{bm=/^[^\w\s]+/}}var a7=bm.exec(bf);var be=bg;var a3=bg+a7[0].length;var a5=g(bj);var bb=bm.exec(a5);if(bb){be-=bb[0].length}if(a6){var bc=bd.substring(a3);var a1=bc.match(/^\s*/)[0].length;if(a1>0){a3+=a1}else{var a9=a5.length-be;var a8=a5.substring(a9);var bi=a8.match(/^\s*/)[0].length;be-=bi}}return{start:{line:a4.line,ch:be},end:{line:a4.line,ch:a3}}}function aL(a1,a2,a3){if(!aZ(a2,a3)){l.jumpList.add(a1,a2,a3)}}function af(a1,a2){l.lastChararacterSearch.increment=a1;l.lastChararacterSearch.forward=a2.forward;l.lastChararacterSearch.selectedCharacter=a2.selectedCharacter}var B={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"};var az={bracket:{isComplete:function(a1){if(a1.nextCh===a1.symb){a1.depth++;if(a1.depth>=1){return true}}else{if(a1.nextCh===a1.reverseSymb){a1.depth--}}return false}},section:{init:function(a1){a1.curMoveThrough=true;a1.symb=(a1.forward?"]":"[")===a1.symb?"{":"}"},isComplete:function(a1){return a1.index===0&&a1.nextCh===a1.symb}},comment:{isComplete:function(a2){var a1=a2.lastCh==="*"&&a2.nextCh==="/";a2.lastCh=a2.nextCh;return a1}},method:{init:function(a1){a1.symb=(a1.symb==="m"?"{":"}");a1.reverseSymb=a1.symb==="{"?"}":"{"},isComplete:function(a1){if(a1.nextCh===a1.symb){return true}return false}},preprocess:{init:function(a1){a1.index=0},isComplete:function(a2){if(a2.nextCh==="#"){var a1=a2.lineText.match(/#(\w+)/)[1];if(a1==="endif"){if(a2.forward&&a2.depth===0){return true}a2.depth++}else{if(a1==="if"){if(!a2.forward&&a2.depth===0){return true}a2.depth--}}if(a1==="else"&&a2.depth===0){return true}}return false}}};function aV(ba,a2,a5,a3){var bd=ba.getCursor();var bb=a5?1:-1;var a4=a5?ba.lineCount():-1;var a9=bd.ch;var bf=bd.line;var a8=ba.getLine(bf);var a1={lineText:a8,nextCh:a8.charAt(a9),lastCh:null,index:a9,symb:a3,reverseSymb:(a5?{")":"(","}":"{"}:{"(":")","{":"}"})[a3],forward:a5,depth:0,curMoveThrough:false};var a6=B[a3];if(!a6){return bd}var be=az[a6].init;var bc=az[a6].isComplete;if(be){be(a1)}while(bf!==a4&&a2){a1.index+=bb;a1.nextCh=a1.lineText.charAt(a1.index);if(!a1.nextCh){bf+=bb;a1.lineText=ba.getLine(bf)||"";if(bb>0){a1.index=0}else{var a7=a1.lineText.length;a1.index=(a7>0)?(a7-1):0}a1.nextCh=a1.lineText.charAt(a1.index)}if(bc(a1)){bd.line=bf;bd.ch=a1.index;a2--}}if(a1.nextCh||a1.curMoveThrough){return{line:bf,ch:a1.index}}return bd}function aX(bb,bc,a4,a9,ba){var a5=bc.line;var a8=bc.ch;var bf=bb.getLine(a5);var a2=a4?1:-1;var a6=a9?aR:Z;if(ba&&bf==""){a5+=a2;bf=bb.getLine(a5);if(!c(bb,a5)){return null}a8=(a4)?0:bf.length}while(true){if(ba&&bf==""){return{from:0,to:0,line:a5}}var a7=(a2>0)?bf.length:-1;var be=a7,bd=a7;while(a8!=a7){var a1=false;for(var a3=0;a3<a6.length&&!a1;++a3){if(a6[a3].test(bf.charAt(a8))){be=a8;while(a8!=a7&&a6[a3].test(bf.charAt(a8))){a8+=a2}bd=a8;a1=be!=bd;if(be==bc.ch&&a5==bc.line&&bd==be+a2){continue}else{return{from:Math.min(be,bd+1),to:Math.max(be,bd),line:a5}}}}if(!a1){a8+=a2}}a5+=a2;if(!c(bb,a5)){return null}bf=bb.getLine(a5);a8=(a2>0)?0:bf.length}throw new Error("The impossible happened.")}function ae(bb,a2,a6,bf,a9){var bd=bb.getCursor();var a7=r(bd);var a8=[];if(a6&&!bf||!a6&&bf){a2++}var ba=!(a6&&bf);for(var a4=0;a4<a2;a4++){var a1=aX(bb,bd,a6,a9,ba);if(!a1){var a3=ax(bb,bb.lastLine());a8.push(a6?{line:bb.lastLine(),from:a3,to:a3}:{line:0,from:0,to:0});break}a8.push(a1);bd={line:a1.line,ch:a6?(a1.to-1):a1.from}}var a5=a8.length!=a2;var bc=a8[0];var be=a8.pop();if(a6&&!bf){if(!a5&&(bc.from!=a7.ch||bc.line!=a7.line)){be=a8.pop()}return{line:be.line,ch:be.from}}else{if(a6&&bf){return{line:be.line,ch:be.to-1}}else{if(!a6&&bf){if(!a5&&(bc.to!=a7.ch||bc.line!=a7.line)){be=a8.pop()}return{line:be.line,ch:be.to}}else{return{line:be.line,ch:be.from}}}}}function aU(a6,a2,a4,a5){var a8=a6.getCursor();var a1=a8.ch;var a7;for(var a3=0;a3<a2;a3++){var a9=a6.getLine(a8.line);a7=aH(a1,a9,a5,a4,true);if(a7==-1){return null}a1=a7}return{line:a6.getCursor().line,ch:a7}}function S(a1,a3){var a2=a1.getCursor().line;return H(a1,{line:a2,ch:a3-1})}function at(a1,a2,a3,a4){if(!w(a3,ai)){return}if(a2.marks[a3]){a2.marks[a3].clear()}a2.marks[a3]=a1.setBookmark(a4)}function aH(a6,a2,a5,a3,a4){var a1;if(a3){a1=a2.indexOf(a5,a6+1);if(a1!=-1&&!a4){a1-=1}}else{a1=a2.lastIndexOf(a5,a6-1);if(a1!=-1&&!a4){a1+=1}}return a1}function W(a1){return(a1==="string"||a1==="comment")?1:0}function aa(bd,be,a3){var bg=be.line;var a2=be.ch;a3=a3?a3:bd.getLine(bg).charAt(a2);var bf=bd.getTokenAt({line:bg,ch:a2+1}).type;var bh=W(bf);var a5=({"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"})[a3];if(!a5){return be}var bc=({"(":1,"{":1,"[":1})[a3]||-1;var a4=bc===1?bd.lineCount():-1;var a7=1,a1=a3,a9=a2,bb=bd.getLine(bg);while(bg!==a4&&a7>0){a9+=bc;a1=bb.charAt(a9);if(!a1){bg+=bc;bb=bd.getLine(bg)||"";if(bc>0){a9=0}else{var ba=bb.length;a9=(ba>0)?(ba-1):0}a1=bb.charAt(a9)}var a8=bd.getTokenAt({line:bg,ch:a9+1}).type;var a6=W(a8);if(bh>=a6){if(a1===a3){a7++}else{if(a1===a5){a7--}}}}if(a1){return{line:bg,ch:a9}}return be}function j(a2,a5,a1){var a4=a2.getCursor();var a3=aa(a2,a4,a5);var a6=aa(a2,a3);a6.ch+=a1?1:0;a3.ch+=a1?0:1;return{start:a6,end:a3}}function ar(a9,a3,a8){var ba=a9.getCursor();var bb=a9.getLine(ba.line);var a7=bb.split("");var a2,a4,a5,a6;var a1=a7.indexOf(a3);if(ba.ch<a1){ba.ch=a1}else{if(a1<ba.ch&&a7[ba.ch]==a3){a4=ba.ch;--ba.ch}}if(a7[ba.ch]==a3&&!a4){a2=ba.ch+1}else{for(a5=ba.ch;a5>-1&&!a2;a5--){if(a7[a5]==a3){a2=a5+1}}}if(a2&&!a4){for(a5=a2,a6=a7.length;a5<a6&&!a4;a5++){if(a7[a5]==a3){a4=a5}}}if(!a2||!a4){return{start:ba,end:ba}}if(a8){--a2;++a4}return{start:{line:ba.line,ch:a2},end:{line:ba.line,ch:a4}}}function K(){}K.prototype={getQuery:function(){return l.query},setQuery:function(a1){l.query=a1},getOverlay:function(){return this.searchOverlay},setOverlay:function(a1){this.searchOverlay=a1},isReversed:function(){return l.isReversed},setReversed:function(a1){l.isReversed=a1}};function ak(a1){var a2=a1.state.vim;return a2.searchState_||(a2.searchState_=new K())}function J(a1,a4,a5,a2,a3){if(a1.openDialog){a1.openDialog(a4,a2,{bottom:true,value:a3.value,onKeyDown:a3.onKeyDown,onKeyUp:a3.onKeyUp})}else{a2(prompt(a5,""))}}function T(a4){var a2=false;var a3=[];for(var a1=0;a1<a4.length;a1++){var a5=a4.charAt(a1);if(!a2&&a5=="/"){a3.push(a1)}a2=(a5=="\\")}return a3}function ac(a8,a2,a4){if(a8 instanceof RegExp){return a8}var a6=T(a8);var a3;var a1;if(!a6.length){a3=a8}else{a3=a8.substring(0,a6[0]);var a5=a8.substring(a6[0]);a1=(a5.indexOf("i")!=-1)}if(!a3){return null}if(a4){a2=(/^[^A-Z]*$/).test(a3)}var a7=new RegExp(a3,(a2||a1)?"i":undefined);return a7}function aP(a1,a2){if(a1.openNotification){a1.openNotification('<span style="color: red">'+a2+"</span>",{bottom:true,duration:5000})}else{alert(a2)}}function aj(a2,a3){var a1="";if(a2){a1+='<span style="font-family: monospace">'+a2+"</span>"}a1+='<input type="text"/> <span style="color: #888">';if(a3){a1+='<span style="color: #888">';a1+=a3;a1+="</span>"}return a1}var z="(Javascript regexp)";function aB(a2,a3){var a4=(a3.prefix||"")+" "+(a3.desc||"");var a1=aj(a3.prefix,a3.desc);J(a2,a1,a4,a3.onClose,a3)}function G(a2,a1){if(a2 instanceof RegExp&&a1 instanceof RegExp){var a4=["global","multiline","ignoreCase","source"];for(var a3=0;a3<a4.length;a3++){var a5=a4[a3];if(a2[a5]!==a1[a5]){return false}}return true}return false}function aY(a1,a6,a2,a3){if(!a6){return}var a5=ak(a1);var a4=ac(a6,!!a2,!!a3);if(!a4){return}al(a1,a4);if(G(a4,a5.getQuery())){return a4}a5.setQuery(a4);return a4}function an(a2){if(a2.source.charAt(0)=="^"){var a1=true}return{token:function(a4){if(a1&&!a4.sol()){a4.skipToEnd();return}var a3=a4.match(a2,false);if(a3){if(a3[0].length==0){a4.next();return"searching"}if(!a4.sol()){a4.backUp(1);if(!a2.exec(a4.next()+a3[0])){a4.next();return null}}a4.match(a2);return"searching"}while(!a4.eol()){a4.next();if(a4.match(a2,false)){break}}},query:a2}}function al(a1,a3){var a2=ak(a1).getOverlay();if(!a2||a3!=a2.query){if(a2){a1.removeOverlay(a2)}a2=an(a3);a1.addOverlay(a2);ak(a1).setOverlay(a2)}}function a0(a1,a2,a4,a3){if(a3===undefined){a3=1}return a1.operation(function(){var a8=a1.getCursor();var a7=a1.getSearchCursor(a4,a8);for(var a5=0;a5<a3;a5++){var a6=a7.find(a2);if(a5==0&&a6&&aZ(a7.from(),a8)){a6=a7.find(a2)}if(!a6){a7=a1.getSearchCursor(a4,(a2)?{line:a1.lastLine()}:{line:a1.firstLine(),ch:0});if(!a7.find(a2)){return}}}return a7.from()})}function am(a1){a1.removeOverlay(ak(a1).getOverlay());ak(a1).setOverlay(null)}function L(a3,a2,a1){if(typeof a3!="number"){a3=a3.line}if(a2 instanceof Array){return w(a3,a2)}else{if(a1){return(a3>=a2&&a3<=a1)}else{return a3==a2}}}function aI(a1){var a4=a1.getScrollInfo();var a3=6;var a7=10;var a6=a1.coordsChar({left:0,top:a3+a4.top},"local");var a2=a4.clientHeight-a7+a4.top;var a5=a1.coordsChar({left:0,top:a2},"local");return{top:a6.line,bottom:a5.line}}var q=[{name:"map"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s"},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"}];b.ExCommandDispatcher=function(){this.buildCommandMap_()};b.ExCommandDispatcher.prototype={processCommand:function(a9,a8){var a4=a9.state.vim;if(a4.visualMode){au(a9)}var a1=new CodeMirror.StringStream(a8);var a2={};a2.input=a8;try{this.parseInput_(a9,a1,a2)}catch(a7){aP(a9,a7);return}var a6;if(!a2.commandName){if(a2.line!==undefined){a6="move"}}else{var a3=this.matchCommand_(a2.commandName);if(a3){a6=a3.name;this.parseCommandArgs_(a1,a2,a3);if(a3.type=="exToKey"){for(var a5=0;a5<a3.toKeys.length;a5++){CodeMirror.Vim.handleKey(a9,a3.toKeys[a5])}return}else{if(a3.type=="exToEx"){this.processCommand(a9,a3.toInput);return}}}}if(!a6){aP(a9,'Not an editor command ":'+a8+'"');return}try{aD[a6](a9,a2)}catch(a7){aP(a9,a7);throw a7}},parseInput_:function(a2,a3,a1){a3.eatWhile(":");if(a3.eat("%")){a1.line=a2.firstLine();a1.lineEnd=a2.lastLine()}else{a1.line=this.parseLineSpec_(a2,a3);if(a1.line!==undefined&&a3.eat(",")){a1.lineEnd=this.parseLineSpec_(a2,a3)}}var a4=a3.match(/^(\w+)/);if(a4){a1.commandName=a4[1]}else{a1.commandName=a3.match(/.*/)[0]}return a1},parseLineSpec_:function(a1,a2){var a3=a2.match(/^(\d+)/);if(a3){return parseInt(a3[1],10)-1}switch(a2.next()){case".":return a1.getCursor().line;case"$":return a1.lastLine();case"'":var a4=a1.state.vim.marks[a2.next()];if(a4&&a4.find()){return a4.find().line}throw new Error("Mark not set");default:a2.backUp(1);return undefined}},parseCommandArgs_:function(a2,a5,a4){if(a2.eol()){return}a5.argString=a2.match(/.*/)[0];var a3=a4.argDelimiter||/\s+/;var a1=aF(a5.argString).split(a3);if(a1.length&&a1[0]){a5.args=a1}},matchCommand_:function(a2){for(var a1=a2.length;a1>0;a1--){var a3=a2.substring(0,a1);if(this.commandMap_[a3]){var a4=this.commandMap_[a3];if(a4.name.indexOf(a2)===0){return a4}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a2=0;a2<q.length;a2++){var a3=q[a2];var a1=a3.shortName||a3.name;this.commandMap_[a1]=a3}},map:function(a2,a5,a1){if(a2!=":"&&a2.charAt(0)==":"){if(a1){throw Error("Mode not supported for ex mappings")}var a4=a2.substring(1);if(a5!=":"&&a5.charAt(0)==":"){this.commandMap_[a4]={name:a4,type:"exToEx",toInput:a5.substring(1)}}else{this.commandMap_[a4]={name:a4,type:"exToKey",toKeys:Q(a5)}}}else{if(a5!=":"&&a5.charAt(0)==":"){var a3={keys:Q(a2),type:"keyToEx",exArgs:{input:a5.substring(1)}};if(a1){a3.context=a1}a.unshift(a3)}else{var a3={keys:Q(a2),type:"keyToKey",toKeys:Q(a5)};if(a1){a3.context=a1}a.unshift(a3)}}}};function Q(a4){var a2,a1;var a3=[];while(a4){a1=(/<\w+-.+?>|<\w+>|./).exec(a4);if(a1===null){break}a2=a1[0];a4=a4.substring(a1.index+a2.length);a3.push(a2)}return a3}var aD={map:function(a1,a4,a2){var a3=a4.args;if(!a3||a3.length<2){if(a1){aP(a1,"Invalid mapping: "+a4.input)}return}i.map(a3[0],a3[1],a2)},nmap:function(a1,a2){this.map(a1,a2,"normal")},vmap:function(a1,a2){this.map(a1,a2,"visual")},move:function(a1,a2){aG.processCommand(a1,a1.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:a2.line+1})},sort:function(ba,bk){var bb,a4,a2,a3;function a5(){if(bk.argString){var bo=new CodeMirror.StringStream(bk.argString);if(bo.eat("!")){bb=true}if(bo.eol()){return}if(!bo.eatSpace()){return"Invalid arguments"}var bq=bo.match(/[a-z]+/);if(bq){bq=bq[0];a4=bq.indexOf("i")!=-1;a2=bq.indexOf("u")!=-1;var bn=bq.indexOf("d")!=-1&&1;var bp=bq.indexOf("x")!=-1&&1;var bm=bq.indexOf("o")!=-1&&1;if(bn+bp+bm>1){return"Invalid arguments"}a3=bn&&"decimal"||bp&&"hex"||bm&&"octal"}if(bo.eatSpace()&&bo.match(/\/.*\//)){"patterns not supported"}}}var a6=a5();if(a6){aP(ba,a6+": "+bk.argString);return}var bf=bk.line||ba.firstLine();var bj=bk.lineEnd||bk.line||ba.lastLine();if(bf==bj){return}var a9={line:bf,ch:0};var bh={line:bj,ch:ax(ba,bj)};var be=ba.getRange(a9,bh).split("\n");var a7=(a3=="decimal")?/(-?)([\d]+)/:(a3=="hex")?/(-?)(?:0x)?([0-9a-f]+)/i:(a3=="octal")?/([0-7]+)/:null;var a8=(a3=="decimal")?10:(a3=="hex")?16:(a3=="octal")?8:null;var bc=[],bg=[];if(a3){for(var bi=0;bi<be.length;bi++){if(a7.exec(be[bi])){bc.push(be[bi])}else{bg.push(be[bi])}}}else{bg=be}function bl(bn,bm){if(bb){var bo;bo=bn;bn=bm;bm=bo}if(a4){bn=bn.toLowerCase();bm=bm.toLowerCase()}var bq=a3&&a7.exec(bn);var bp=a3&&a7.exec(bm);if(!bq){return bn<bm?-1:1}bq=parseInt((bq[1]+bq[2]).toLowerCase(),a8);bp=parseInt((bp[1]+bp[2]).toLowerCase(),a8);return bq-bp}bc.sort(bl);bg.sort(bl);be=(!bb)?bg.concat(bc):bc.concat(bg);if(a2){var bd=be;var a1;be=[];for(var bi=0;bi<bd.length;bi++){if(bd[bi]!=a1){be.push(bd[bi])}a1=bd[bi]}}ba.replaceRange(be.join("\n"),a9,bh)},substitute:function(bf,a4){if(!bf.getSearchCursor){throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.")}var a2=a4.argString;var be=T(a2);if(be[0]!==0){aP(bf,"Substitutions should be of the form :s/pattern/replace/");return}var bh=a2.substring(be[0]+1,be[1]);var a8="";var a9;var ba;var a1=false;if(be[1]){a8=a2.substring(be[1]+1,be[2])}if(be[2]){var a7=a2.substring(be[2]+1).split(" ");a9=a7[0];ba=parseInt(a7[1])}if(a9){if(a9.indexOf("c")!=-1){a1=true;a9.replace("c","")}bh=bh+"/"+a9}if(bh){try{aY(bf,bh,true,true)}catch(bc){aP(bf,"Invalid regex: "+bh);return}}var a3=ak(bf);var bd=a3.getQuery();var a6=(a4.line!==undefined)?a4.line:bf.getCursor().line;var a5=a4.lineEnd||a6;if(ba){a6=a5;a5=a6+ba-1}var bb=H(bf,{line:a6,ch:0});var bg=bf.getSearchCursor(bd,bb);aE(bf,a1,a6,a5,bg,bd,a8)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(a1){if(CodeMirror.commands.save){CodeMirror.commands.save(a1)}else{a1.save()}},nohlsearch:function(a1){am(a1)},delmarks:function(bb,a6){if(!a6.argString||!aF(a6.argString)){aP(bb,"Argument required");return}var a1=bb.state.vim;var bc=new CodeMirror.StringStream(aF(a6.argString));while(!bc.eol()){bc.eatSpace();var a9=bc.pos;if(!bc.match(/[a-zA-Z]/,false)){aP(bb,"Invalid argument: "+a6.argString.substring(a9));return}var a3=bc.next();if(bc.match("-",true)){if(!bc.match(/[a-zA-Z]/,false)){aP(bb,"Invalid argument: "+a6.argString.substring(a9));return}var a4=a3;var a8=bc.next();if(t(a4)&&t(a8)||p(a4)&&p(a8)){var a2=a4.charCodeAt(0);var ba=a8.charCodeAt(0);if(a2>=ba){aP(bb,"Invalid argument: "+a6.argString.substring(a9));return}for(var a7=0;a7<=ba-a2;a7++){var a5=String.fromCharCode(a2+a7);delete a1.marks[a5]}}else{aP(bb,"Invalid argument: "+a4+"-");return}}else{delete a1.marks[a3]}}}};var i=new b.ExCommandDispatcher();function aE(be,a2,a9,a6,a3,bb,a5){be.state.vim.exMode=true;var a7=false;var bd=a3.from();function ba(){be.operation(function(){while(!a7){a4();a8()}bc()})}function a4(){var bg=be.getRange(a3.from(),a3.to());var bf=bg.replace(bb,a5);a3.replace(bf)}function a8(){var bf=a3.findNext();if(!bf){a7=true}else{if(L(a3.from(),a9,a6)){be.scrollIntoView(a3.from(),30);be.setSelection(a3.from(),a3.to());bd=a3.from();a7=false}else{a7=true}}}function bc(bg){if(bg){bg()}be.focus();if(bd){be.setCursor(bd);var bf=be.state.vim;bf.exMode=false;bf.lastHPos=bf.lastHSPos=bd.ch}}function a1(bh,bf,bi){CodeMirror.e_stop(bh);var bg=CodeMirror.keyName(bh);switch(bg){case"Y":a4();a8();break;case"N":a8();break;case"A":be.operation(ba);break;case"L":a4();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":bc(bi);break}if(a7){bc(bi)}}a8();if(a7){aP(be,"No matches for "+bb.source);return}if(!a2){ba();return}aB(be,{prefix:"replace with <strong>"+a5+"</strong> (y/n/a/q/l)",onKeyDown:a1})}function ag(){function a3(a7,a6){var a5=a7;if(p(a5)){if(a6=="Shift"){a6=null}else{a5=a5.toLowerCase()}}if(a6){a5=a6.charAt(0)+"-"+a5}var a8=({Enter:"CR",Backspace:"BS",Delete:"Del"})[a5];a5=a8?a8:a5;a5=a5.length>1?"<"+a5+">":a5;return a5}function a2(a5){return function(a6){CodeMirror.Vim.handleKey(a6,a5)}}var a1={nofallthrough:true,style:"fat-cursor"};function a4(ba,a6){for(var a9=0;a9<ba.length;a9++){var a8=ba[a9];if(!a6&&w(a8,e)){a8="'"+a8+"'"}var a5=a3(ba[a9],a6);var a7=a6?a6+"-"+a8:a8;a1[a7]=a2(a5)}}a4(N);a4(N,"Shift");a4(N,"Ctrl");a4(e);a4(e,"Ctrl");a4(D);a4(D,"Ctrl");a4(aw);a4(aw,"Ctrl");return a1}CodeMirror.keyMap.vim=ag();function m(a1){var a3=a1.state.vim;var a2=l.macroModeState.inReplay;if(!a2){a1.off("change",aM);a1.off("cursorActivity",I);CodeMirror.off(a1.getInputField(),"keydown",E)}if(!a2&&a3.insertModeRepeat>1){n(a1,a3,a3.insertModeRepeat-1,true);a3.lastEditInputState.repeatOverride=a3.insertModeRepeat}delete a3.insertModeRepeat;a1.setCursor(a1.getCursor().line,a1.getCursor().ch-1,true);a3.insertMode=false;a1.setOption("keyMap","vim");a1.setOption("disableInput",true);a1.toggleOverwrite(false);CodeMirror.signal(a1,"vim-mode-change",{mode:"normal"})}CodeMirror.keyMap["vim-insert"]={Esc:m,"Ctrl-[":m,"Ctrl-C":m,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(a1){var a2=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;a2(a1)},fallthrough:["default"]};CodeMirror.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]};function F(a6,a5){var a1,a3;var a4=l.registerController.getRegister(a5);var a7=a4.toString();var a2=a6.macroKeyBuffer;aK(a6);do{a1=(/<\w+-.+?>|<\w+>|./).exec(a7);if(a1===null){break}a3=a1[0];a7=a7.substring(a1.index+a3.length);a2.push(a3)}while(a7);return a2}function ap(a1,a3){var a2=a3.join("");l.registerController.setRegisterText(a1,a2)}function aK(a2){if(a2.isMacroPlaying){return}var a1=a2.macroKeyBuffer;a1.length=0}function R(a2,a4,a5){a4.isMacroPlaying=true;for(var a3=0,a1=a5.length;a3<a1;a3++){CodeMirror.Vim.handleKey(a2,a5[a3])}a4.isMacroPlaying=false}function v(a3,a2){if(a3.isMacroPlaying){return}var a1=a3.macroKeyBuffer;a1.push(a2)}function aM(a2,a1){var a4=l.macroModeState;var a3=a4.lastInsertModeChanges;while(a1){a3.expectCursorActivityForChange=true;if(a1.origin=="+input"||a1.origin=="paste"||a1.origin===undefined){var a5=a1.text.join("\n");a3.changes.push(a5)}a1=a1.next}}function I(){var a2=l.macroModeState;var a1=a2.lastInsertModeChanges;if(a1.expectCursorActivityForChange){a1.expectCursorActivityForChange=false}else{a1.changes=[]}}function aO(a1){this.keyName=a1}function E(a5){var a4=l.macroModeState;var a3=a4.lastInsertModeChanges;var a2=CodeMirror.keyName(a5);function a1(){a3.changes.push(new aO(a2));return true}if(a2.indexOf("Delete")!=-1||a2.indexOf("Backspace")!=-1){CodeMirror.lookupKey(a2,["vim-insert"],a1)}}function n(a9,a4,a2,a1){var a6=l.macroModeState;a6.inReplay=true;var ba=!!a4.lastEditActionCommand;var a7=a4.inputState;function a3(){if(ba){aG.processAction(a9,a4,a4.lastEditActionCommand)}else{aG.evalInput(a9,a4)}}function a8(bb){if(a6.lastInsertModeChanges.changes.length>0){bb=!a4.lastEditActionCommand?1:bb;P(a9,bb,a6)}}a4.inputState=a4.lastEditInputState;if(ba&&a4.lastEditActionCommand.interlaceInsertRepeat){for(var a5=0;a5<a2;a5++){a3();a8(1)}}else{if(!a1){a3()}a8(a2)}a4.inputState=a7;if(a4.insertMode&&!a1){m(a9)}a6.inReplay=false}function P(a8,a1,a3){var a4=a3.lastInsertModeChanges;function a6(ba){if(typeof ba=="string"){CodeMirror.commands[ba](a8)}else{ba(a8)}return true}for(var a5=0;a5<a1;a5++){for(var a2=0;a2<a4.changes.length;a2++){var a7=a4.changes[a2];if(a7 instanceof aO){CodeMirror.lookupKey(a7.keyName,["vim-insert"],a6)}else{var a9=a8.getCursor();a8.replaceRange(a7,a9,a9)}}}}o();return aq};CodeMirror.Vim=b()})();