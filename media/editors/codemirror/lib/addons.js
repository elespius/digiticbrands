(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineOption("fullScreen",false,function(d,f,e){if(e==a.Init){e=false}if(!e==!f){return}if(f){b(d)}else{c(d)}});function b(d){var e=d.getWrapperElement();d.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:e.style.width,height:e.style.height};e.style.width="";e.style.height="auto";e.className+=" CodeMirror-fullscreen";document.documentElement.style.overflow="hidden";d.refresh()}function c(d){var e=d.getWrapperElement();e.className=e.className.replace(/\s*CodeMirror-fullscreen\b/,"");document.documentElement.style.overflow="";var f=d.state.fullScreenRestore;e.style.width=f.width;e.style.height=f.height;window.scrollTo(f.scrollLeft,f.scrollTop);d.refresh()}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var h="()[]{}''\"\"";var a="[]{}";var g=/\s/;var e=b.Pos;b.defineOption("autoCloseBrackets",false,function(i,n,j){if(j!=b.Init&&j){i.removeKeyMap("autoCloseBrackets")}if(!n){return}var l=h,k=a;if(typeof n=="string"){l=n}else{if(typeof n=="object"){if(n.pairs!=null){l=n.pairs}if(n.explode!=null){k=n.explode}}}var m=f(l);if(k){m.Enter=c(k)}i.addKeyMap(m)});function d(i,k){var j=i.getRange(e(k.line,k.ch-1),e(k.line,k.ch+1));return j.length==2?j:null}function f(l){var m={name:"autoCloseBrackets",Backspace:function(n){if(n.getOption("disableInput")){return b.Pass}var o=n.listSelections();for(var p=0;p<o.length;p++){if(!o[p].empty()){return b.Pass}var q=d(n,o[p].head);if(!q||l.indexOf(q)%2!=0){return b.Pass}}for(var p=o.length-1;p>=0;p--){var r=o[p].head;n.replaceRange("",e(r.line,r.ch-1),e(r.line,r.ch+1))}}};var k="";for(var j=0;j<l.length;j+=2){(function(n,i){if(n!=i){k+=i}m["'"+n+"'"]=function(o){if(o.getOption("disableInput")){return b.Pass}var p=o.listSelections(),u,t;for(var s=0;s<p.length;s++){var q=p[s],v=q.head,r;if(n=="'"&&o.getTokenTypeAt(v)=="comment"){return b.Pass}var t=o.getRange(v,e(v.line,v.ch+1));if(!q.empty()){r="surround"}else{if(n==i&&t==i){if(o.getRange(v,e(v.line,v.ch+3))==n+n+n){r="skipThree"}else{r="skip"}}else{if(n==i&&v.ch>1&&o.getRange(e(v.line,v.ch-2),v)==n+n&&(v.ch<=2||o.getRange(e(v.line,v.ch-3),e(v.line,v.ch-2))!=n)){r="addFour"}else{if(n==i&&b.isWordChar(t)){return b.Pass}else{if(o.getLine(v.line).length==v.ch||k.indexOf(t)>=0||g.test(t)){r="both"}else{return b.Pass}}}}}if(!u){u=r}else{if(u!=r){return b.Pass}}}o.operation(function(){if(u=="skip"){o.execCommand("goCharRight")}else{if(u=="skipThree"){for(var x=0;x<3;x++){o.execCommand("goCharRight")}}else{if(u=="surround"){var w=o.getSelections();for(var x=0;x<w.length;x++){w[x]=n+w[x]+i}o.replaceSelections(w,"around")}else{if(u=="both"){o.replaceSelection(n+i,null);o.execCommand("goCharLeft")}else{if(u=="addFour"){o.replaceSelection(n+n+n+n,"before");o.execCommand("goCharRight")}}}}}})};if(n!=i){m["'"+i+"'"]=function(o){var p=o.listSelections();for(var r=0;r<p.length;r++){var q=p[r];if(!q.empty()||o.getRange(q.head,e(q.head.line,q.head.ch+1))!=i){return b.Pass}}o.execCommand("goCharRight")}}})(l.charAt(j),l.charAt(j+1))}return m}function c(i){return function(j){if(j.getOption("disableInput")){return b.Pass}var k=j.listSelections();for(var l=0;l<k.length;l++){if(!k[l].empty()){return b.Pass}var m=d(j,k[l].head);if(!m||i.indexOf(m)%2!=0){return b.Pass}}j.operation(function(){j.replaceSelection("\n\n",null);j.execCommand("goCharLeft");k=j.listSelections();for(var o=0;o<k.length;o++){var n=k[o].head.line;j.indentLine(n,null,true);j.indentLine(n+1,null,true)}})}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(b){b.defineOption("autoCloseTags",false,function(g,j,h){if(h!=b.Init&&h){g.removeKeyMap("autoCloseTags")}if(!j){return}var i={name:"autoCloseTags"};if(typeof j!="object"||j.whenClosing){i["'/'"]=function(k){return e(k)}}if(typeof j!="object"||j.whenOpening){i["'>'"]=function(k){return a(k)}}g.addKeyMap(i)});var d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(v){if(v.getOption("disableInput")){return b.Pass}var h=v.listSelections(),p=[];for(var q=0;q<h.length;q++){if(!h[q].empty()){return b.Pass}var u=h[q].head,w=v.getTokenAt(u);var x=b.innerMode(v.getMode(),w.state),g=x.state;if(x.mode.name!="xml"||!g.tagName){return b.Pass}var j=v.getOption("autoCloseTags"),r=x.mode.configuration=="html";var l=(typeof j=="object"&&j.dontCloseTags)||(r&&d);var t=(typeof j=="object"&&j.indentTags)||(r&&c);var o=g.tagName;if(w.end>u.ch){o=o.slice(0,o.length-w.end+u.ch)}var s=o.toLowerCase();if(!o||w.type=="string"&&(w.end!=u.ch||!/[\"\']/.test(w.string.charAt(w.string.length-1))||w.string.length==1)||w.type=="tag"&&g.type=="closeTag"||w.string.indexOf("/")==(w.string.length-1)||l&&f(l,s)>-1||b.scanForClosingTag&&b.scanForClosingTag(v,u,o,Math.min(v.lastLine()+1,u.line+50))){return b.Pass}var n=t&&f(t,s)>-1;p[q]={indent:n,text:">"+(n?"\n\n":"")+"</"+o+">",newPos:n?b.Pos(u.line+1,0):b.Pos(u.line,u.ch+1)}}for(var q=h.length-1;q>=0;q--){var m=p[q];v.replaceRange(m.text,h[q].head,h[q].anchor,"+insert");var k=v.listSelections().slice(0);k[q]={head:m.newPos,anchor:m.newPos};v.setSelections(k);if(m.indent){v.indentLine(m.newPos.line,null,true);v.indentLine(m.newPos.line+1,null,true)}}}function e(g){if(g.getOption("disableInput")){return b.Pass}var h=g.listSelections(),m=[];for(var l=0;l<h.length;l++){if(!h[l].empty()){return b.Pass}var o=h[l].head,k=g.getTokenAt(o);var j=b.innerMode(g.getMode(),k.state),n=j.state;if(k.type=="string"||k.string.charAt(0)!="<"||k.start!=o.ch-1||j.mode.name!="xml"||!n.context||!n.context.tagName){return b.Pass}m[l]="/"+n.context.tagName+">"}g.replaceSelections(m)}function f(k,g){if(k.indexOf){return k.indexOf(g)}for(var h=0,j=k.length;h<j;++h){if(k[h]==g){return h}}return -1}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(e){var d=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var i=e.Pos;var a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function f(q,m,p,k){var s=q.getLineHandle(m.line),o=m.ch-1;var n=(o>=0&&a[s.text.charAt(o)])||a[s.text.charAt(++o)];if(!n){return null}var l=n.charAt(1)==">"?1:-1;if(p&&(l>0)!=(o==m.ch)){return null}var j=q.getTokenTypeAt(i(m.line,o+1));var r=g(q,i(m.line,o+(l>0?1:0)),l,j||null,k);if(r==null){return null}return{from:i(m.line,o),to:r&&r.pos,match:r&&r.ch==n.charAt(0),forward:l>0}}function g(w,r,n,k,m){var l=(m&&m.maxScanLineLength)||10000;var t=(m&&m.maxScanLines)||1000;var v=[];var x=m&&m.bracketRegex?m.bracketRegex:/[(){}[\]]/;var q=n>0?Math.min(r.line+t,w.lastLine()+1):Math.max(w.firstLine()-1,r.line-t);for(var o=r.line;o!=q;o+=n){var y=w.getLine(o);if(!y){continue}var u=n>0?0:y.length-1,p=n>0?y.length:-1;if(y.length>l){continue}if(o==r.line){u=r.ch-(n<0?1:0)}for(;u!=p;u+=n){var j=y.charAt(u);if(x.test(j)&&(k===undefined||w.getTokenTypeAt(i(o,u+1))==k)){var s=a[j];if((s.charAt(1)==">")==(n>0)){v.push(j)}else{if(!v.length){return{pos:i(o,u),ch:j}}else{v.pop()}}}}}return o-n==(n>0?w.lastLine():w.firstLine())?false:null}function b(s,n,m){var k=s.state.matchBrackets.maxHighlightLineLength||1000;var r=[],l=s.listSelections();for(var o=0;o<l.length;o++){var q=l[o].empty()&&f(s,l[o].head,false,m);if(q&&s.getLine(q.from.line).length<=k){var j=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";r.push(s.markText(q.from,i(q.from.line,q.from.ch+1),{className:j}));if(q.to&&s.getLine(q.to.line).length<=k){r.push(s.markText(q.to,i(q.to.line,q.to.ch+1),{className:j}))}}}if(r.length){if(d&&s.state.focused){s.display.input.focus()}var p=function(){s.operation(function(){for(var t=0;t<r.length;t++){r[t].clear()}})};if(n){setTimeout(p,800)}else{return p}}}var c=null;function h(j){j.operation(function(){if(c){c();c=null}c=b(j,false,j.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(j,l,k){if(k&&k!=e.Init){j.off("cursorActivity",h)}if(l){j.state.matchBrackets=typeof l=="object"?l:{};j.on("cursorActivity",h)}});e.defineExtension("matchBrackets",function(){b(this,true)});e.defineExtension("findMatchingBracket",function(l,j,k){return f(this,l,j,k)});e.defineExtension("scanForBracket",function(m,k,l,j){return g(this,m,k,l,j)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a)}else{a(CodeMirror)}}})(function(c){c.defineOption("matchTags",false,function(e,g,f){if(f&&f!=c.Init){e.off("cursorActivity",b);e.off("viewportChange",d);a(e)}if(g){e.state.matchBothTags=typeof g=="object"&&g.bothTags;e.on("cursorActivity",b);e.on("viewportChange",d);b(e)}});function a(e){if(e.state.tagHit){e.state.tagHit.clear()}if(e.state.tagOther){e.state.tagOther.clear()}e.state.tagHit=e.state.tagOther=null}function b(e){e.state.failedTagMatch=false;e.operation(function(){a(e);if(e.somethingSelected()){return}var j=e.getCursor(),g=e.getViewport();g.from=Math.min(g.from,j.line);g.to=Math.max(j.line+1,g.to);var h=c.findMatchingTag(e,j,g);if(!h){return}if(e.state.matchBothTags){var i=h.at=="open"?h.open:h.close;if(i){e.state.tagHit=e.markText(i.from,i.to,{className:"CodeMirror-matchingtag"})}}var f=h.at=="close"?h.open:h.close;if(f){e.state.tagOther=e.markText(f.from,f.to,{className:"CodeMirror-matchingtag"})}else{e.state.failedTagMatch=true}})}function d(e){if(e.state.failedTagMatch){b(e)}}c.commands.toMatchingTag=function(f){var g=c.findMatchingTag(f,f.getCursor());if(g){var e=g.at=="close"?g.open:g.close;if(e){f.extendSelection(e.to,e.from)}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.registerHelper("fold","brace",function(m,h){var o=h.line,g=m.getLine(o);var n,t;function d(u){for(var i=h.ch,v=0;;){var w=i<=0?-1:g.lastIndexOf(u,i-1);if(w==-1){if(v==1){break}v=1;i=g.length;continue}if(v==1&&w<h.ch){break}t=m.getTokenTypeAt(a.Pos(o,w+1));if(!/^(comment|string)/.test(t)){return w+1}i=w-1}}var j="{",e="}",n=d("{");if(n==null){j="[",e="]";n=d("[")}if(n==null){return}var l=1,c=m.lastLine(),f,q;outer:for(var s=o;s<=c;++s){var p=m.getLine(s),k=s==o?n:0;for(;;){var b=p.indexOf(j,k),r=p.indexOf(e,k);if(b<0){b=p.length}if(r<0){r=p.length}k=Math.min(b,r);if(k==p.length){break}if(m.getTokenTypeAt(a.Pos(s,k+1))==t){if(k==b){++l}else{if(!--l){f=s;q=k;break outer}}}++k}}if(f==null||o==f&&q==n){return}return{from:a.Pos(o,n),to:a.Pos(f,q)}});a.registerHelper("fold","import",function(b,h){function g(k){if(k<b.firstLine()||k>b.lastLine()){return null}var o=b.getTokenAt(a.Pos(k,1));if(!/\S/.test(o.string)){o=b.getTokenAt(a.Pos(k,o.end+1))}if(o.type!="keyword"||o.string!="import"){return null}for(var l=k,m=Math.min(b.lastLine(),k+10);l<=m;++l){var n=b.getLine(l),j=n.indexOf(";");if(j!=-1){return{startCh:o.end,end:a.Pos(l,j)}}}}var h=h.line,d=g(h),f;if(!d||g(h-1)||((f=g(h-2))&&f.end.line==h-1)){return null}for(var c=d.end;;){var e=g(c.line+1);if(e==null){break}c=e.end}return{from:b.clipPos(a.Pos(h,d.startCh+1)),to:c}});a.registerHelper("fold","include",function(b,g){function f(h){if(h<b.firstLine()||h>b.lastLine()){return null}var i=b.getTokenAt(a.Pos(h,1));if(!/\S/.test(i.string)){i=b.getTokenAt(a.Pos(h,i.end+1))}if(i.type=="meta"&&i.string.slice(0,8)=="#include"){return i.start+8}}var g=g.line,d=f(g);if(d==null||f(g-1)!=null){return null}for(var c=g;;){var e=f(c+1);if(e==null){break}++c}return{from:a.Pos(g,d+1),to:b.clipPos(a.Pos(c))}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){function b(l,k,m,g){var e=m&&(m.call?m:m.rangeFinder);if(!e){e=a.fold.auto}if(typeof k=="number"){k=a.Pos(k,0)}var f=m&&m.minFoldSize||0;function d(n){var o=e(l,k);if(!o||o.to.line-o.from.line<f){return null}var q=l.findMarksAt(o.from);for(var p=0;p<q.length;++p){if(q[p].__isFold&&g!=="fold"){if(!n){return null}o.cleared=true;q[p].clear()}}return o}var i=d(true);if(m&&m.scanUp){while(!i&&k.line>l.firstLine()){k=a.Pos(k.line-1,0);i=d(false)}}if(!i||i.cleared||g==="unfold"){return}var j=c(m);a.on(j,"mousedown",function(){h.clear()});var h=l.markText(i.from,i.to,{replacedWith:j,clearOnEnter:true,__isFold:true});h.on("clear",function(o,n){a.signal(l,"unfold",l,o,n)});a.signal(l,"fold",l,i.from,i.to)}function c(d){var e=(d&&d.widget)||"\u2194";if(typeof e=="string"){var f=document.createTextNode(e);e=document.createElement("span");e.appendChild(f);e.className="CodeMirror-foldmarker"}return e}a.newFoldFunction=function(e,d){return function(f,g){b(f,g,{rangeFinder:e,widget:d})}};a.defineExtension("foldCode",function(f,d,e){b(this,f,d,e)});a.defineExtension("isFolded",function(f){var e=this.findMarksAt(f);for(var d=0;d<e.length;++d){if(e[d].__isFold){return true}}});a.commands.toggleFold=function(d){d.foldCode(d.getCursor())};a.commands.fold=function(d){d.foldCode(d.getCursor(),null,"fold")};a.commands.unfold=function(d){d.foldCode(d.getCursor(),null,"unfold")};a.commands.foldAll=function(d){d.operation(function(){for(var f=d.firstLine(),g=d.lastLine();f<=g;f++){d.foldCode(a.Pos(f,0),null,"fold")}})};a.commands.unfoldAll=function(d){d.operation(function(){for(var f=d.firstLine(),g=d.lastLine();f<=g;f++){d.foldCode(a.Pos(f,0),null,"unfold")}})};a.registerHelper("fold","combine",function(){var d=Array.prototype.slice.call(arguments,0);return function(e,h){for(var f=0;f<d.length;++f){var g=d[f](e,h);if(g){return g}}}});a.registerHelper("fold","auto",function(d,h){var f=d.getHelpers(h,"fold");for(var e=0;e<f.length;e++){var g=f[e](d,h);if(g){return g}}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("./foldcode"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./foldcode"],a)}else{a(CodeMirror)}}})(function(d){d.defineOption("foldGutter",false,function(m,o,n){if(n&&n!=d.Init){m.clearGutter(m.state.foldGutter.options.gutter);m.state.foldGutter=null;m.off("gutterClick",k);m.off("change",g);m.off("viewportChange",l);m.off("fold",e);m.off("unfold",e);m.off("swapDoc",b)}if(o){m.state.foldGutter=new j(i(o));b(m);m.on("gutterClick",k);m.on("change",g);m.on("viewportChange",l);m.on("fold",e);m.on("unfold",e);m.on("swapDoc",b)}});var h=d.Pos;function j(m){this.options=m;this.from=this.to=0}function i(m){if(m===true){m={}}if(m.gutter==null){m.gutter="CodeMirror-foldgutter"}if(m.indicatorOpen==null){m.indicatorOpen="CodeMirror-foldgutter-open"}if(m.indicatorFolded==null){m.indicatorFolded="CodeMirror-foldgutter-folded"}return m}function c(m,n){var p=m.findMarksAt(h(n));for(var o=0;o<p.length;++o){if(p[o].__isFold&&p[o].find().from.line==n){return true}}}function f(m){if(typeof m=="string"){var n=document.createElement("div");n.className=m;return n}else{return m.cloneNode(true)}}function a(m,q,p){var n=m.state.foldGutter.options,o=q;m.eachLine(q,p,function(r){var v=null;if(c(m,o)){v=f(n.indicatorFolded)}else{var u=h(o,0),t=n.rangeFinder||d.fold.auto;var s=t&&t(m,u);if(s&&s.from.line+1<s.to.line){v=f(n.indicatorOpen)}}m.setGutterMarker(r,n.gutter,v);++o})}function b(m){var n=m.getViewport(),o=m.state.foldGutter;if(!o){return}m.operation(function(){a(m,n.from,n.to)});o.from=n.from;o.to=n.to}function k(m,n,p){var o=m.state.foldGutter.options;if(p!=o.gutter){return}m.foldCode(h(n,0),o.rangeFinder)}function g(m){var o=m.state.foldGutter,n=m.state.foldGutter.options;o.from=o.to=0;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){b(m)},n.foldOnChangeTimeSpan||600)}function l(m){var o=m.state.foldGutter,n=m.state.foldGutter.options;clearTimeout(o.changeUpdate);o.changeUpdate=setTimeout(function(){var p=m.getViewport();if(o.from==o.to||p.from-o.to>20||o.from-p.to>20){b(m)}else{m.operation(function(){if(p.from<o.from){a(m,p.from,o.from);o.from=p.from}if(p.to>o.to){a(m,o.to,p.to);o.to=p.to}})}},n.updateViewportTimeSpan||400)}function e(m,p){var o=m.state.foldGutter,n=p.line;if(n>=o.from&&n<o.to){a(m,n,n+1)}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(i){var m=i.Pos;function l(r,q){return r.line-q.line||r.ch-q.ch}var j="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var o=j+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+j+"]["+o+"]*)","g");function b(q,r,t,s){this.line=r;this.ch=t;this.cm=q;this.text=q.getLine(r);this.min=s?s.from:q.firstLine();this.max=s?s.to-1:q.lastLine()}function h(q,s){var r=q.cm.getTokenTypeAt(m(q.line,s));return r&&/\btag\b/.test(r)}function a(q){if(q.line>=q.max){return}q.ch=0;q.text=q.cm.getLine(++q.line);return true}function n(q){if(q.line<=q.min){return}q.text=q.cm.getLine(--q.line);q.ch=q.text.length;return true}function g(s){for(;;){var r=s.text.indexOf(">",s.ch);if(r==-1){if(a(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r+1;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function k(r){for(;;){var q=r.ch?r.text.lastIndexOf("<",r.ch-1):-1;if(q==-1){if(n(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}d.lastIndex=q;r.ch=q;var s=d.exec(r.text);if(s&&s.index==q){return s}}}function p(q){for(;;){d.lastIndex=q.ch;var r=d.exec(q.text);if(!r){if(a(q)){continue}else{return}}if(!h(q,r.index+1)){q.ch=r.index+1;continue}q.ch=r.index+r[0].length;return r}}function e(s){for(;;){var r=s.ch?s.text.lastIndexOf(">",s.ch-1):-1;if(r==-1){if(n(s)){continue}else{return}}if(!h(s,r+1)){s.ch=r;continue}var q=s.text.lastIndexOf("/",r);var t=q>-1&&!/\S/.test(s.text.slice(q+1,r));s.ch=r+1;return t?"selfClose":"regular"}}function f(t,r){var q=[];for(;;){var v=p(t),s,x=t.line,w=t.ch-(v?v[0].length:0);if(!v||!(s=g(t))){return}if(s=="selfClose"){continue}if(v[1]){for(var u=q.length-1;u>=0;--u){if(q[u]==v[2]){q.length=u;break}}if(u<0&&(!r||r==v[2])){return{tag:v[2],from:m(x,w),to:m(t.line,t.ch)}}}else{q.push(v[2])}}}function c(s,r){var q=[];for(;;){var w=e(s);if(!w){return}if(w=="selfClose"){k(s);continue}var v=s.line,u=s.ch;var x=k(s);if(!x){return}if(x[1]){q.push(x[2])}else{for(var t=q.length-1;t>=0;--t){if(q[t]==x[2]){q.length=t;break}}if(t<0&&(!r||r==x[2])){return{tag:x[2],from:m(s.line,s.ch),to:m(v,u)}}}}}i.registerHelper("fold","xml",function(q,v){var s=new b(q,v.line,0);for(;;){var t=p(s),r;if(!t||s.line!=v.line||!(r=g(s))){return}if(!t[1]&&r!="selfClose"){var v=m(s.line,s.ch);var u=f(s,t[2]);return u&&{from:v,to:u.from}}}});i.findMatchingTag=function(q,x,t){var s=new b(q,x.line,x.ch,t);if(s.text.indexOf(">")==-1&&s.text.indexOf("<")==-1){return}var r=g(s),w=r&&m(s.line,s.ch);var v=r&&k(s);if(!r||r=="selfClose"||!v||l(s,x)>0){return}var u={from:m(s.line,s.ch),to:w,tag:v[2]};if(v[1]){return{open:c(s,v[2]),close:u,at:"close"}}else{s=new b(q,w.line,w.ch,t);return{open:u,close:f(s,v[2]),at:"open"}}};i.findEnclosingTag=function(q,w,s){var r=new b(q,w.line,w.ch,s);for(;;){var u=c(r);if(!u){break}var t=new b(q,w.line,w.ch,s);var v=f(t,u.tag);if(v){return{open:u,close:v}}}};i.scanForClosingTag=function(q,u,t,s){var r=new b(q,u.line,u.ch,s?{from:0,to:s}:null);return !!f(r,t)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){if(!a.modeURL){a.modeURL="../mode/%N/%N.js"}var d={};function c(e,g){var f=g;return function(){if(--f==0){e()}}}function b(k,e){var j=a.modes[k].dependencies;if(!j){return e()}var h=[];for(var g=0;g<j.length;++g){if(!a.modes.hasOwnProperty(j[g])){h.push(j[g])}}if(!h.length){return e()}var f=c(e,h.length);for(var g=0;g<h.length;++g){a.requireMode(h[g],f)}}a.requireMode=function(k,e){if(typeof k!="string"){k=k.name}if(a.modes.hasOwnProperty(k)){return b(k,e)}if(d.hasOwnProperty(k)){return d[k].push(e)}var f=document.createElement("script");f.src=a.modeURL.replace(/%N/g,k);var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(f,g);var i=d[k]=[e];var h=0,j=setInterval(function(){if(++h>100){return clearInterval(j)}if(a.modes.hasOwnProperty(k)){clearInterval(j);d[k]=null;b(k,function(){for(var l=0;l<i.length;++l){i[l]()}})}},200)};a.autoLoadMode=function(e,f){if(!a.modes.hasOwnProperty(f)){a.requireMode(f,function(){e.setOption("mode",e.getOption("mode"))})}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.multiplexingMode=function(c){var e=Array.prototype.slice.call(arguments,1);var b=e.length;function d(g,h,i){if(typeof h=="string"){return g.indexOf(h,i)}var f=h.exec(i?g.slice(i):g);return f?f.index+i:-1}return{startState:function(){return{outer:a.startState(c),innerActive:null,inner:null}},copyState:function(f){return{outer:a.copyState(c,f.outer),innerActive:f.innerActive,inner:f.innerActive&&a.copyState(f.innerActive.mode,f.inner)}},token:function(o,f){if(!f.innerActive){var h=Infinity,m=o.string;for(var j=0;j<b;++j){var l=e[j];var p=d(m,l.open,o.pos);if(p==o.pos){o.match(l.open);f.innerActive=l;f.inner=a.startState(l.mode,c.indent?c.indent(f.outer,""):0);return l.delimStyle}else{if(p!=-1&&p<h){h=p}}}if(h!=Infinity){o.string=m.slice(0,h)}var g=c.token(o,f.outer);if(h!=Infinity){o.string=m}return g}else{var k=f.innerActive,m=o.string;if(!k.close&&o.sol()){f.innerActive=f.inner=null;return this.token(o,f)}var p=k.close?d(m,k.close,o.pos):-1;if(p==o.pos){o.match(k.close);f.innerActive=f.inner=null;return k.delimStyle}if(p>-1){o.string=m.slice(0,p)}var n=k.mode.token(o,f.inner);if(p>-1){o.string=m}if(k.innerStyle){if(n){n=n+" "+k.innerStyle}else{n=k.innerStyle}}return n}},indent:function(g,f){var h=g.innerActive?g.innerActive.mode:c;if(!h.indent){return a.Pass}return h.indent(g.innerActive?g.inner:g.outer,f)},blankLine:function(h){var j=h.innerActive?h.innerActive.mode:c;if(j.blankLine){j.blankLine(h.innerActive?h.inner:h.outer)}if(!h.innerActive){for(var g=0;g<b;++g){var f=e[g];if(f.open==="\n"){h.innerActive=f;h.inner=a.startState(f.mode,j.indent?j.indent(h.outer,""):0)}}}else{if(h.innerActive.close==="\n"){h.innerActive=h.inner=null}}},electricChars:c.electricChars,innerMode:function(f){return f.inner?{state:f.inner,mode:f.innerActive.mode}:{state:f.outer,mode:c}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(c){var g="CodeMirror-activeline";var f="CodeMirror-activeline-background";c.defineOption("styleActiveLine",false,function(h,k,i){var j=i&&i!=c.Init;if(k&&!j){h.state.activeLines=[];e(h,h.listSelections());h.on("beforeSelectionChange",b)}else{if(!k&&j){h.off("beforeSelectionChange",b);d(h);delete h.state.activeLines}}});function d(h){for(var j=0;j<h.state.activeLines.length;j++){h.removeLineClass(h.state.activeLines[j],"wrap",g);h.removeLineClass(h.state.activeLines[j],"background",f)}}function a(j,h){if(j.length!=h.length){return false}for(var k=0;k<j.length;k++){if(j[k]!=h[k]){return false}}return true}function e(h,k){var m=[];for(var l=0;l<k.length;l++){var j=h.getLineHandleVisualStart(k[l].head.line);if(m[m.length-1]!=j){m.push(j)}}if(a(h.state.activeLines,m)){return}h.operation(function(){d(h);for(var n=0;n<m.length;n++){h.addLineClass(m[n],"wrap",g);h.addLineClass(m[n],"background",f)}h.state.activeLines=m})}function b(h,i){e(h,i.ranges)}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog","../addon/edit/matchbrackets"],a)}else{a(CodeMirror)}}})(function(b){var a=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["<C-[>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["<CR>"],type:"keyToKey",toKeys:["j","^"],context:"normal"},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false,toJumplist:true}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true,toJumplist:true}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:true,explicitRepeat:true}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:false,explicitRepeat:true}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true,toJumplist:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:true}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true,linewise:true}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["]","p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true,matchIndent:true}},{keys:["[","p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true,matchIndent:true}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:true,toJumplist:true}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:false,toJumplist:true}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["o"],type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{},context:"visual"},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false,toJumplist:true}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:true},motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:true}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:false}},{keys:["<C-e>"],type:"action",action:"scroll",actionArgs:{forward:true,linewise:true}},{keys:["<C-y>"],type:"action",action:"scroll",actionArgs:{forward:false,linewise:true}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["g","v"],type:"action",action:"reselectLastSelection"},{keys:["J"],type:"action",action:"joinLines",isEdit:true},{keys:["p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true}},{keys:["P"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true}},{keys:["r","character"],type:"action",action:"replace",isEdit:true},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{replace:true}},{keys:["u"],type:"action",action:"undo"},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:true,backtrack:false}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:false,backtrack:false}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt",toJumplist:true}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt",toJumplist:true}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",wholeWordOnly:true,toJumplist:true}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",wholeWordOnly:true,toJumplist:true}},{keys:["g","*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",toJumplist:true}},{keys:["g","#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",toJumplist:true}},{keys:[":"],type:"ex"}];var c=b.Pos;var d=function(){b.defineOption("vimMode",false,function(a7,a8){if(a8){a7.setOption("keyMap","vim");a7.setOption("disableInput",true);b.signal(a7,"vim-mode-change",{mode:"normal"});a7.on("beforeSelectionChange",i);a7.on("cursorActivity",N);y(a7);b.on(a7.getInputField(),"paste",I(a7))}else{if(a7.state.vim){a7.setOption("keyMap","default");a7.setOption("disableInput",false);a7.off("beforeSelectionChange",i);a7.off("cursorActivity",N);b.off(a7.getInputField(),"paste",I(a7));a7.state.vim=null}}});function i(a7,bb){var a8=a7.state.vim;if(a8.insertMode||a8.exMode){return}var ba=bb.ranges[0].head;var a9=bb.ranges[0].anchor;if(ba.ch&&ba.ch==a7.doc.getLine(ba.line).length){var bc=c(ba.line,ba.ch-1);bb.update([{anchor:a5(ba,a9)?bc:a9,head:bc}])}}function I(a7){var a8=a7.state.vim;if(!a8.onPasteFn){a8.onPasteFn=function(){if(!a8.insertMode){a7.setCursor(w(a7.getCursor(),0,1));o.enterInsertMode(a7,{},a8)}}}return a8.onPasteFn}var aF=/[\d]/;var ad=[(/\w/),(/[^\w\s]/)],aX=[(/\S/)];function ac(ba,a8){var a9=[];for(var a7=ba;a7<ba+a8;a7++){a9.push(String.fromCharCode(a7))}return a9}var T=ac(65,26);var Z=ac(97,26);var J=ac(48,10);var h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split("");var aD=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var ao=[].concat(T,Z,J,["<",">"]);var k=[].concat(T,Z,J,["-",'"',".",":"]);function e(a7,a8){return a8>=a7.firstLine()&&a8<=a7.lastLine()}function x(a7){return(/^[a-z]$/).test(a7)}function D(a7){return"()[]{}".indexOf(a7)!=-1}function S(a7){return aF.test(a7)}function t(a7){return(/^[A-Z]$/).test(a7)}function G(a7){return(/^\s*$/).test(a7)}function B(a9,a7){for(var a8=0;a8<a7.length;a8++){if(a7[a8]==a9){return true}}return false}var af={};function au(a8,a7,a9){if(a7===undefined){throw Error("defaultValue is required")}if(!a9){a9="string"}af[a8]={type:a9,defaultValue:a7};ar(a8,a7)}function ar(a7,a9){var a8=af[a7];if(!a8){throw Error("Unknown option: "+a7)}if(a8.type=="boolean"){if(a9&&a9!==true){throw Error("Invalid argument: "+a7+"="+a9)}else{if(a9!==false){a9=true}}}a8.value=a8.type=="boolean"?!!a9:a9}function n(a7){var a8=af[a7];if(!a8){throw Error("Unknown option: "+a7)}return a8.value}var ab=function(){var bb=100;var bd=-1;var ba=0;var a9=0;var a8=new Array(bb);function bc(be,bg,bh){var bi=bd%bb;var bj=a8[bi];function bf(bm){var bl=++bd%bb;var bn=a8[bl];if(bn){bn.clear()}a8[bl]=be.setBookmark(bm)}if(bj){var bk=bj.find();if(bk&&!a5(bk,bg)){bf(bg)}}else{bf(bg)}bf(bh);ba=bd;a9=bd-bb+1;if(a9<0){a9=0}}function a7(be,bi){bd+=bi;if(bd>ba){bd=ba}else{if(bd<a9){bd=a9}}var bj=a8[(bb+bd)%bb];if(bj&&!bj.find()){var bh=bi>0?1:-1;var bg;var bf=be.getCursor();do{bd+=bh;bj=a8[(bb+bd)%bb];if(bj&&(bg=bj.find())&&!a5(bf,bg)){break}}while(bd<ba&&bd>a9)}return bj}return{cachedCursor:undefined,add:bc,move:a7}};var g=function(a7){if(a7){return{changes:a7.changes,expectCursorActivityForChange:a7.expectCursorActivityForChange}}return{changes:[],expectCursorActivityForChange:false}};function ah(){this.latestRegister=undefined;this.isPlaying=false;this.isRecording=false;this.replaySearchQueries=[];this.onRecordingDone=undefined;this.lastInsertModeChanges=g()}ah.prototype={exitMacroRecordMode:function(){var a7=p.macroModeState;a7.onRecordingDone();a7.onRecordingDone=undefined;a7.isRecording=false},enterMacroRecordMode:function(a7,a9){var a8=p.registerController.getRegister(a9);if(a8){a8.clear();this.latestRegister=a9;this.onRecordingDone=a7.openDialog("(recording)["+a9+"]",null,{bottom:true});this.isRecording=true}}};function y(a7){if(!a7.state.vim){a7.state.vim={inputState:new aj(),lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:false,insertModeRepeat:undefined,visualMode:false,visualLine:false,lastSelection:null}}return a7.state.vim}var p;function s(){p={searchQuery:null,searchIsReversed:false,lastSubstituteReplacePart:undefined,jumpList:ab(),macroModeState:new ah,lastChararacterSearch:{increment:0,forward:true,selectedCharacter:""},registerController:new U({})};for(var a7 in af){var a8=af[a7];a8.value=a8.defaultValue}}var ay={buildKeyMap:function(){},getRegisterController:function(){return p.registerController},resetVimGlobalState_:s,getVimGlobalState_:function(){return p},maybeInitVimState_:y,InsertModeKey:aU,map:function(a8,a9,a7){l.map(a8,a9,a7)},setOption:ar,getOption:n,defineOption:au,defineEx:function(a7,a9,a8){if(a7.indexOf(a9)!==0){throw new Error('(Vim.defineEx) "'+a9+'" is not a prefix of "'+a7+'", command not registered')}aK[a7]=a8;l.commandMap_[a9]={name:a7,shortName:a9,type:"api"}},handleKey:function(a7,ba){var bc;var a8=y(a7);var bb=p.macroModeState;if(bb.isRecording){if(ba=="q"){bb.exitMacroRecordMode();a8.inputState=new aj();return}}if(ba=="<Esc>"){a8.inputState=new aj();if(a8.visualMode){aB(a7)}return}if(!a8.visualMode&&!a5(a7.getCursor("head"),a7.getCursor("anchor"))){a8.visualMode=true;a8.visualLine=false;b.signal(a7,"vim-mode-change",{mode:"visual"});a7.on("mousedown",aB)}if(ba!="0"||(ba=="0"&&a8.inputState.getRepeat()===0)){bc=aN.matchCommand(ba,a,a8)}if(!bc){if(S(ba)){a8.inputState.pushRepeatDigit(ba)}if(bb.isRecording){A(bb,ba)}return}if(bc.type=="keyToKey"){for(var a9=0;a9<bc.toKeys.length;a9++){this.handleKey(a7,bc.toKeys[a9])}}else{if(bb.isRecording){A(bb,ba)}aN.processCommand(a7,a8,bc)}},handleEx:function(a7,a8){l.processCommand(a7,a8)}};function aj(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}aj.prototype.pushRepeatDigit=function(a7){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(a7)}else{this.motionRepeat=this.motionRepeat.concat(a7)}};aj.prototype.getRepeat=function(){var a7=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){a7=1;if(this.prefixRepeat.length>0){a7*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){a7*=parseInt(this.motionRepeat.join(""),10)}}return a7};function aY(a8,a7){this.clear();this.keyBuffer=[a8||""];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!!a7}aY.prototype={setText:function(a8,a7){this.keyBuffer=[a8||""];this.linewise=!!a7},pushText:function(a8,a7){if(a7){if(!this.linewise){this.keyBuffer.push("\n")}this.linewise=true}this.keyBuffer.push(a8)},pushInsertModeChanges:function(a7){this.insertModeChanges.push(g(a7))},pushSearchQuery:function(a7){this.searchQueries.push(a7)},clear:function(){this.keyBuffer=[];this.insertModeChanges=[];this.searchQueries=[];this.linewise=false},toString:function(){return this.keyBuffer.join("")}};function U(a7){this.registers=a7;this.unnamedRegister=a7['"']=new aY();a7["."]=new aY();a7[":"]=new aY()}U.prototype={pushText:function(ba,a8,bc,bb){if(bb&&bc.charAt(0)=="\n"){bc=bc.slice(1)+"\n"}if(bb&&bc.charAt(bc.length-1)!=="\n"){bc+="\n"}var a9=this.isValidRegister(ba)?this.getRegister(ba):null;if(!a9){switch(a8){case"yank":this.registers["0"]=new aY(bc,bb);break;case"delete":case"change":if(bc.indexOf("\n")==-1){this.registers["-"]=new aY(bc,bb)}else{this.shiftNumericRegisters_();this.registers["1"]=new aY(bc,bb)}break}this.unnamedRegister.setText(bc,bb);return}var a7=t(ba);if(a7){a9.pushText(bc,bb)}else{a9.setText(bc,bb)}this.unnamedRegister.setText(a9.toString(),bb)},getRegister:function(a7){if(!this.isValidRegister(a7)){return this.unnamedRegister}a7=a7.toLowerCase();if(!this.registers[a7]){this.registers[a7]=new aY()}return this.registers[a7]},isValidRegister:function(a7){return a7&&B(a7,k)},shiftNumericRegisters_:function(){for(var a7=9;a7>=2;a7--){this.registers[a7]=this.getRegister(""+(a7-1))}}};var aN={matchCommand:function(bi,bh,ba){var be=ba.inputState;var bj=be.keyBuffer.concat(bi);var bd=[];var a7;for(var bb=0;bb<bh.length;bb++){var a9=bh[bb];if(aW(bj,a9.keys)){if(be.operator&&a9.type=="action"){continue}if(a9.keys[bj.length-1]=="character"){a7=bj[bj.length-1];if(a7.length>1){switch(a7){case"<CR>":a7="\n";break;case"<Space>":a7=" ";break;default:continue}}}bd.push(a9)}}function bg(bk){if(bj.length<bk.keys.length){be.keyBuffer.push(bi);return null}else{if(bk.keys[bj.length-1]=="character"){be.selectedCharacter=a7}be.keyBuffer=[];return bk}}if(!bd.length){be.keyBuffer=[];return null}else{if(bd.length==1){return bg(bd[0])}else{var a8=ba.visualMode?"visual":"normal";var bc;for(var bb=0;bb<bd.length;bb++){var bf=bd[bb];if(bf.context==a8){bc=bf;break}else{if(!bc&&!bf.context){bc=bf}}}return bg(bc)}}},processCommand:function(a7,a8,a9){a8.inputState.repeatOverride=a9.repeatOverride;switch(a9.type){case"motion":this.processMotion(a7,a8,a9);break;case"operator":this.processOperator(a7,a8,a9);break;case"operatorMotion":this.processOperatorMotion(a7,a8,a9);break;case"action":this.processAction(a7,a8,a9);break;case"search":this.processSearch(a7,a8,a9);break;case"ex":case"keyToEx":this.processEx(a7,a8,a9);break;default:break}},processMotion:function(a7,a8,a9){a8.inputState.motion=a9.motion;a8.inputState.motionArgs=aT(a9.motionArgs);this.evalInput(a7,a8)},processOperator:function(a8,a9,ba){var a7=a9.inputState;if(a7.operator){if(a7.operator==ba.operator){a7.motion="expandToLine";a7.motionArgs={linewise:true};this.evalInput(a8,a9);return}else{a9.inputState=new aj()}}a7.operator=ba.operator;a7.operatorArgs=aT(ba.operatorArgs);if(a9.visualMode){this.evalInput(a8,a9)}},processOperatorMotion:function(a7,ba,bb){var a9=ba.visualMode;var a8=aT(bb.operatorMotionArgs);if(a8){if(a9&&a8.visualLine){ba.visualLine=true}}this.processOperator(a7,ba,bb);if(!a9){this.processMotion(a7,ba,bb)}},processAction:function(a8,ba,bd){var a7=ba.inputState;var bc=a7.getRepeat();var bb=!!bc;var a9=aT(bd.actionArgs)||{};if(a7.selectedCharacter){a9.selectedCharacter=a7.selectedCharacter}if(bd.operator){this.processOperator(a8,ba,bd)}if(bd.motion){this.processMotion(a8,ba,bd)}if(bd.motion||bd.operator){this.evalInput(a8,ba)}a9.repeat=bc||1;a9.repeatIsExplicit=bb;a9.registerName=a7.registerName;ba.inputState=new aj();ba.lastMotion=null;if(bd.isEdit){this.recordLastEdit(ba,a7,bd)}o[bd.action](a8,a9,ba)},processSearch:function(bm,bf,be){if(!bm.getSearchCursor){return}var bh=be.searchArgs.forward;var bc=be.searchArgs.wholeWordOnly;aq(bm).setReversed(!bh);var bi=(bh)?"/":"?";var bk=aq(bm).getQuery();var a9=bm.getScrollInfo();function bd(bp,bn,bo){try{a4(bm,bp,bn,bo)}catch(bq){aV(bm,"Invalid regex: "+bp);return}aN.processMotion(bm,bf,{type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:be.searchArgs.toJumplist}})}function bl(bn){bm.scrollTo(a9.left,a9.top);bd(bn,true,true);var bo=p.macroModeState;if(bo.isRecording){E(bo,bn)}}function bb(bn,bp){var bo;try{bo=a4(bm,bp,true,true)}catch(bq){}if(bo){bm.scrollIntoView(a6(bm,!bh,bo),30)}else{av(bm);bm.scrollTo(a9.left,a9.top)}}function a8(bp,bn,bq){var bo=b.keyName(bp);if(bo=="Esc"||bo=="Ctrl-C"||bo=="Ctrl-["){a4(bm,bk);av(bm);bm.scrollTo(a9.left,a9.top);b.e_stop(bp);bq();bm.focus()}}switch(be.searchArgs.querySrc){case"prompt":var bg=p.macroModeState;if(bg.isPlaying){var bj=bg.replaySearchQueries.shift();bd(bj,true,false)}else{aI(bm,{onClose:bl,prefix:bi,desc:F,onKeyUp:bb,onKeyDown:a8})}break;case"wordUnderCursor":var ba=an(bm,false,true,false,true);var a7=true;if(!ba){ba=an(bm,false,true,false,false);a7=false}if(!ba){return}var bj=bm.getLine(ba.start.line).substring(ba.start.ch,ba.end.ch);if(a7&&bc){bj="\\b"+bj+"\\b"}else{bj=f(bj)}p.jumpList.cachedCursor=bm.getCursor();bm.setCursor(ba.start);bd(bj,true,false);break}},processEx:function(a7,a8,bb){function ba(bc){l.processCommand(a7,bc)}function a9(be,bd,bf){var bc=b.keyName(be);if(bc=="Esc"||bc=="Ctrl-C"||bc=="Ctrl-["){b.e_stop(be);bf();a7.focus()}}if(bb.type=="keyToEx"){l.processCommand(a7,bb.exArgs.input)}else{if(a8.visualMode){aI(a7,{onClose:ba,prefix:":",value:"'<,'>",onKeyDown:a9})}else{aI(a7,{onClose:ba,prefix:":",onKeyDown:a9})}}},evalInput:function(bb,bo){var bg=bo.inputState;var bl=bg.motion;var bh=bg.motionArgs||{};var bc=bg.operator;var bs=bg.operatorArgs||{};var bi=bg.registerName;var a8=v(bb.getCursor("head"));var bm=v(bb.getCursor("anchor"));var ba=v(a8);var bf=v(ba);var bp;var bd;if(bc){this.recordLastEdit(bo,bg)}if(bg.repeatOverride!==undefined){bd=bg.repeatOverride}else{bd=bg.getRepeat()}if(bd>0&&bh.explicitRepeat){bh.repeatIsExplicit=true}else{if(bh.noRepeat||(!bh.explicitRepeat&&bd===0)){bd=1;bh.repeatIsExplicit=false}}if(bg.selectedCharacter){bh.selectedCharacter=bs.selectedCharacter=bg.selectedCharacter}bh.repeat=bd;bo.inputState=new aj();if(bl){var bn=aJ[bl](bb,bh,bo);bo.lastMotion=aJ[bl];if(!bn){return}if(bh.toJumplist){var br=p.jumpList;var be=br.cachedCursor;if(be){aR(bb,be,bn);delete br.cachedCursor}else{aR(bb,bf,bn)}}if(bn instanceof Array){ba=bn[0];bp=bn[1]}else{bp=bn}if(!bp){bp=c(ba.line,ba.ch)}if(bo.visualMode){if(ax(bm,a8)&&(a5(bm,bp)||ax(bp,bm))){bm.ch+=1}else{if(ax(a8,bm)&&(a5(bm,bp)||ax(bm,bp))){bm.ch-=1}}a8=bp;bm=(bn instanceof Array)?ba:bm;if(bo.visualLine){if(ax(bm,a8)){bm.ch=0;var a7=bb.lastLine();if(a8.line>a7){a8.line=a7}a8.ch=aE(bb,a8.line)}else{a8.ch=0;bm.ch=aE(bb,bm.line)}}bb.setSelection(bm,a8);aA(bb,bo,"<",ax(bm,a8)?bm:a8);aA(bb,bo,">",ax(bm,a8)?a8:bm)}else{if(!bc){bp=M(bb,bp);bb.setCursor(bp.line,bp.ch)}}}if(bc){var bk=false;bo.lastMotion=null;bs.repeat=bd;if(bo.visualMode){ba=bm;bp=a8;bh.inclusive=true}if(bp&&ax(bp,ba)){var bq=ba;ba=bp;bp=bq;bk=true}else{if(!bp){bp=v(ba)}}if(bh.inclusive&&!(bo.visualMode&&bk)){bp.ch++}if(bs.selOffset){bp.line=ba.line+bs.selOffset.line;if(bs.selOffset.line){bp.ch=bs.selOffset.ch}else{bp.ch=ba.ch+bs.selOffset.ch}}else{if(bo.visualMode){var bj=c();bj.line=bp.line-ba.line;if(bj.line){bj.ch=bp.ch}else{bj.ch=bp.ch-ba.ch}bs.selOffset=bj}}var a9=bh.linewise||(bo.visualMode&&bo.visualLine)||bs.linewise;if(a9){aQ(bb,ba,bp)}else{if(bh.forward){Y(bb,ba,bp)}}bs.registerName=bi;bs.linewise=a9;C[bc](bb,bs,bo,ba,bp,bf);if(bo.visualMode){aB(bb)}}},recordLastEdit:function(a8,a7,a9){var ba=p.macroModeState;if(ba.isPlaying){return}a8.lastEditInputState=a7;a8.lastEditActionCommand=a9;ba.lastInsertModeChanges.changes=[];ba.lastInsertModeChanges.expectCursorActivityForChange=false}};var aJ={moveToTopLine:function(a7,a9){var a8=aP(a7).top+a9.repeat-1;return c(a8,aH(a7.getLine(a8)))},moveToMiddleLine:function(a7){var a9=aP(a7);var a8=Math.floor((a9.top+a9.bottom)*0.5);return c(a8,aH(a7.getLine(a8)))},moveToBottomLine:function(a7,a9){var a8=aP(a7).bottom-a9.repeat+1;return c(a8,aH(a7.getLine(a8)))},expandToLine:function(a7,a8){var a9=a7.getCursor();return c(a9.line+a8.repeat-1,Infinity)},findNext:function(a7,a8){var bb=aq(a7);var ba=bb.getQuery();if(!ba){return}var a9=!a8.forward;a9=(bb.isReversed())?!a9:a9;at(a7,ba);return a6(a7,a9,ba,a8.repeat)},goToMark:function(a7,a9,a8){var bb=a8.marks[a9.selectedCharacter];if(bb){var ba=bb.find();return a9.linewise?{line:ba.line,ch:aH(a7.getLine(ba.line))}:ba}return null},moveToOtherHighlightedEnd:function(a8){var a9=v(a8.getCursor("head"));var a7=v(a8.getCursor("anchor"));if(ax(a7,a9)){a9.ch+=1}else{if(ax(a9,a7)){a7.ch-=1}}return([a9,a7])},jumpToMark:function(be,ba,bb){var a9=be.getCursor();for(var bc=0;bc<ba.repeat;bc++){var bg=a9;for(var bf in bb.marks){if(!x(bf)){continue}var a8=bb.marks[bf].find();var a7=(ba.forward)?ax(a8,bg):ax(bg,a8);if(a7){continue}if(ba.linewise&&(a8.line==bg.line)){continue}var bd=a5(bg,a9);var bh=(ba.forward)?aC(bg,a8,a9):aC(a9,a8,bg);if(bd||bh){a9=a8}}}if(ba.linewise){a9=c(a9.line,aH(be.getLine(a9.line)))}return a9},moveByCharacters:function(a7,a8){var bb=a7.getCursor();var ba=a8.repeat;var a9=a8.forward?bb.ch+ba:bb.ch-ba;return c(bb.line,a9)},moveByLines:function(bc,a8,a9){var be=bc.getCursor();var ba=be.ch;switch(a9.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:ba=a9.lastHPos;break;default:a9.lastHPos=ba}var a7=a8.repeat+(a8.repeatOffset||0);var bf=a8.forward?be.line+a7:be.line-a7;var bb=bc.firstLine();var bd=bc.lastLine();if((bf<bb&&be.line==bb)||(bf>bd&&be.line==bd)){return}if(a8.toFirstChar){ba=aH(bc.getLine(bf));a9.lastHPos=ba}a9.lastHSPos=bc.charCoords(c(bf,ba),"div").left;return c(bf,ba)},moveByDisplayLines:function(be,a9,ba){var bf=be.getCursor();switch(ba.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:ba.lastHSPos=be.charCoords(bf,"div").left}var a7=a9.repeat;var bd=be.findPosV(bf,(a9.forward?a7:-a7),"line",ba.lastHSPos);if(bd.hitSide){if(a9.forward){var a8=be.charCoords(bd,"div");var bb={top:a8.top+8,left:ba.lastHSPos};var bd=be.coordsChar(bb,"div")}else{var bc=be.charCoords(c(be.firstLine(),0),"div");bc.left=ba.lastHSPos;bd=be.coordsChar(bc,"div")}}ba.lastHPos=bd.ch;return bd},moveByPage:function(a8,a9){var a7=a8.getCursor();var bb=a9.repeat;a8.moveV((a9.forward?bb:-bb),"page");var ba=a8.getCursor();a8.setCursor(a7);return ba},moveByParagraph:function(a7,a9){var a8=a7.getCursor().line;var bb=a9.repeat;var bc=a9.forward?1:-1;for(var ba=0;ba<bb;ba++){if((!a9.forward&&a8===a7.firstLine())||(a9.forward&&a8==a7.lastLine())){break}a8+=bc;while(a8!==a7.firstLine()&&a8!=a7.lastLine()&&a7.getLine(a8)){a8+=bc}}return c(a8,0)},moveByScroll:function(a7,ba,a8){var be=a7.getScrollInfo();var bc=null;var bb=ba.repeat;if(!bb){bb=be.clientHeight/(2*a7.defaultTextHeight())}var bd=a7.charCoords(a7.getCursor(),"local");ba.repeat=bb;var bc=aJ.moveByDisplayLines(a7,ba,a8);if(!bc){return null}var a9=a7.charCoords(bc,"local");a7.scrollTo(null,be.top+a9.top-bd.top);return bc},moveByWords:function(a7,a8){return ak(a7,a8.repeat,!!a8.forward,!!a8.wordEnd,!!a8.bigWord)},moveTillCharacter:function(a8,a9){var bb=a9.repeat;var ba=a0(a8,bb,a9.forward,a9.selectedCharacter);var a7=a9.forward?-1:1;al(a7,a9);if(!ba){return null}ba.ch+=a7;return ba},moveToCharacter:function(a7,a8){var a9=a8.repeat;al(0,a8);return a0(a7,a9,a8.forward,a8.selectedCharacter)||a7.getCursor()},moveToSymbol:function(a7,a8){var a9=a8.repeat;return a1(a7,a9,a8.forward,a8.selectedCharacter)||a7.getCursor()},moveToColumn:function(a7,a9,a8){var ba=a9.repeat;a8.lastHPos=ba-1;a8.lastHSPos=a7.charCoords(a7.getCursor(),"div").left;return W(a7,ba)},moveToEol:function(a7,bb,ba){var bc=a7.getCursor();ba.lastHPos=Infinity;var a9=c(bc.line+bb.repeat-1,Infinity);var a8=a7.clipPos(a9);a8.ch--;ba.lastHSPos=a7.charCoords(a8,"div").left;return a9},moveToFirstNonWhiteSpaceCharacter:function(a7){var a8=a7.getCursor();return c(a8.line,aH(a7.getLine(a8.line)))},moveToMatchedSymbol:function(bd){var be=bd.getCursor();var bf=be.line;var a7=be.ch;var bc=bd.getLine(bf);var bb;do{bb=bc.charAt(a7++);if(bb&&D(bb)){var ba=["string","comment"];var a8=bd.getTokenTypeAt(c(bf,a7));if(ba.indexOf(a8)<0){break}}}while(bb);if(bb){var a9=bd.findMatchingBracket(c(bf,a7-1));return a9.to}else{return be}},moveToStartOfLine:function(a7){var a8=a7.getCursor();return c(a8.line,0)},moveToLineOrEdgeOfDocument:function(a7,a8){var a9=a8.forward?a7.lastLine():a7.firstLine();if(a8.repeatIsExplicit){a9=a8.repeat-a7.getOption("firstLineNumber")}return c(a9,aH(a7.getLine(a9)))},textObjectManipulation:function(a8,ba){var a9={"(":")",")":"(","{":"}","}":"{","[":"]","]":"["};var bd={"'":true,'"':true};var bc=ba.selectedCharacter;if(bc=="b"){bc="("}else{if(bc=="B"){bc="{"}}var a7=!ba.textObjectInner;var bb;if(a9[bc]){bb=m(a8,bc,a7)}else{if(bd[bc]){bb=az(a8,bc,a7)}else{if(bc==="W"){bb=an(a8,a7,true,true)}else{if(bc==="w"){bb=an(a8,a7,true,false)}else{return null}}}}return[bb.start,bb.end]},repeatLastCharacterSearch:function(a9,bb){var a8=p.lastChararacterSearch;var bd=bb.repeat;var ba=bb.forward===a8.forward;var a7=(a8.increment?1:0)*(ba?-1:1);a9.moveH(-a7,"char");bb.inclusive=ba?true:false;var bc=a0(a9,bd,ba,a8.selectedCharacter);if(!bc){a9.moveH(a7,"char");return a9.getCursor()}bc.ch+=a7;return bc}};var C={change:function(a8,bc,ba,a7,bd){p.registerController.pushText(bc.registerName,"change",a8.getRange(a7,bd),bc.linewise);if(bc.linewise){var bb=bd.line>a8.lastLine()?"":"\n";a8.replaceRange(bb,a7,bd);a8.indentLine(a7.line,"smart");a7.ch=null}else{var be=a8.getRange(a7,bd);if(!G(be)){var a9=(/\s+$/).exec(be);if(a9){bd=w(bd,0,-a9[0].length)}}a8.replaceRange("",a7,bd)}o.enterInsertMode(a8,{},a8.state.vim);a8.setCursor(a7)},"delete":function(a8,ba,a9,a7,bb){if(ba.linewise&&bb.line>a8.lastLine()&&a7.line>a8.firstLine()){a7.line--;a7.ch=aE(a8,a7.line)}p.registerController.pushText(ba.registerName,"delete",a8.getRange(a7,bb),ba.linewise);a8.replaceRange("",a7,bb);if(ba.linewise){a8.setCursor(aJ.moveToFirstNonWhiteSpaceCharacter(a8))}else{a8.setCursor(a7)}},indent:function(be,a9,bb,bd,bf){var bg=bd.line;var a8=bf.line;var a7=(bb.visualMode)?a9.repeat:1;if(a9.linewise){a8--}for(var bc=bg;bc<=a8;bc++){for(var ba=0;ba<a7;ba++){be.indentLine(bc,a9.indentRight)}}be.setCursor(bd);be.setCursor(aJ.moveToFirstNonWhiteSpaceCharacter(be))},swapcase:function(bf,a8,bd,be,bg,bc){var ba=bf.getRange(be,bg);var a7="";for(var a9=0;a9<ba.length;a9++){var bb=ba.charAt(a9);a7+=t(bb)?bb.toLowerCase():bb.toUpperCase()}bf.replaceRange(a7,be,bg);if(!a8.shouldMoveCursor){bf.setCursor(bc)}},yank:function(a8,bb,ba,a7,bc,a9){p.registerController.pushText(bb.registerName,"yank",a8.getRange(a7,bc),bb.linewise);a8.setCursor(a9)}};var o={jumpListWalk:function(a7,a9,ba){if(ba.visualMode){return}var bc=a9.repeat;var bb=a9.forward;var a8=p.jumpList;var be=a8.move(a7,bb?bc:-bc);var bd=be?be.find():undefined;bd=bd?bd:a7.getCursor();a7.setCursor(bd)},scroll:function(bf,a9,bb){if(bb.visualMode){return}var a7=a9.repeat||1;var be=bf.defaultTextHeight();var bd=bf.getScrollInfo().top;var bg=be*a7;var bc=a9.forward?bd+bg:bd-bg;var bh=v(bf.getCursor());var ba=bf.charCoords(bh,"local");if(a9.forward){if(bc>ba.top){bh.line+=(bc-ba.top)/be;bh.line=Math.ceil(bh.line);bf.setCursor(bh);ba=bf.charCoords(bh,"local");bf.scrollTo(null,ba.top)}else{bf.scrollTo(null,bc)}}else{var a8=bc+bf.getScrollInfo().clientHeight;if(a8<ba.bottom){bh.line-=(ba.bottom-a8)/be;bh.line=Math.floor(bh.line);bf.setCursor(bh);ba=bf.charCoords(bh,"local");bf.scrollTo(null,ba.bottom-bf.getScrollInfo().clientHeight)}else{bf.scrollTo(null,bc)}}},scrollToCursor:function(a8,a9){var bc=a8.getCursor().line;var ba=a8.charCoords(c(bc,0),"local");var a7=a8.getScrollInfo().clientHeight;var bd=ba.top;var bb=ba.bottom-bd;switch(a9.position){case"center":bd=bd-(a7/2)+bb;break;case"bottom":bd=bd-a7+bb*1.4;break;case"top":bd=bd+bb*0.4;break}a8.scrollTo(null,bd)},replayMacro:function(a7,a8,a9){var ba=a8.selectedCharacter;var bb=a8.repeat;var bc=p.macroModeState;if(ba=="@"){ba=bc.latestRegister}while(bb--){z(a7,a9,bc,ba)}},enterMacroRecordMode:function(a7,a8){var ba=p.macroModeState;var a9=a8.selectedCharacter;ba.enterMacroRecordMode(a7,a9)},enterInsertMode:function(a7,a8,a9){if(a7.getOption("readOnly")){return}a9.insertMode=true;a9.insertModeRepeat=a8&&a8.repeat||1;var ba=(a8)?a8.insertAt:null;if(ba=="eol"){var bb=a7.getCursor();bb=c(bb.line,aE(a7,bb.line));a7.setCursor(bb)}else{if(ba=="charAfter"){a7.setCursor(w(a7.getCursor(),0,1))}else{if(ba=="firstNonBlank"){a7.setCursor(aJ.moveToFirstNonWhiteSpaceCharacter(a7))}}}a7.setOption("keyMap","vim-insert");a7.setOption("disableInput",false);if(a8&&a8.replace){a7.toggleOverwrite(true);a7.setOption("keyMap","vim-replace");b.signal(a7,"vim-mode-change",{mode:"replace"})}else{a7.setOption("keyMap","vim-insert");b.signal(a7,"vim-mode-change",{mode:"insert"})}if(!p.macroModeState.isPlaying){a7.on("change",aS);b.on(a7.getInputField(),"keydown",K)}},toggleVisualMode:function(a8,a9,ba){var bc=a9.repeat;var a7=a8.getCursor();var bb;if(!ba.visualMode){a8.on("mousedown",aB);ba.visualMode=true;ba.visualLine=!!a9.linewise;if(ba.visualLine){a7.ch=0;bb=M(a8,c(a7.line+bc-1,aE(a8,a7.line)),true)}else{bb=M(a8,c(a7.line,a7.ch+bc),true)}if(!a9.repeatIsExplicit&&!ba.visualLine){a8.setCursor(bb);a8.setSelection(bb,a7)}else{a8.setSelection(a7,bb)}b.signal(a8,"vim-mode-change",{mode:"visual",subMode:ba.visualLine?"linewise":""})}else{a7=a8.getCursor("anchor");bb=a8.getCursor("head");if(!ba.visualLine&&a9.linewise){ba.visualLine=true;a7.ch=ax(a7,bb)?0:aE(a8,a7.line);bb.ch=ax(a7,bb)?aE(a8,bb.line):0;a8.setSelection(a7,bb);b.signal(a8,"vim-mode-change",{mode:"visual",subMode:"linewise"})}else{if(ba.visualLine&&!a9.linewise){ba.visualLine=false;b.signal(a8,"vim-mode-change",{mode:"visual"})}else{aB(a8)}}}aA(a8,ba,"<",ax(a7,bb)?a7:bb);aA(a8,ba,">",ax(a7,bb)?bb:a7)},reselectLastSelection:function(a7,ba,a9){if(a9.lastSelection){var a8=a9.lastSelection;a7.setSelection(a8.curStart,a8.curEnd);if(a8.visualLine){a9.visualMode=true;a9.visualLine=true}else{a9.visualMode=true;a9.visualLine=false}b.signal(a7,"vim-mode-change",{mode:"visual",subMode:a9.visualLine?"linewise":""})}},joinLines:function(a8,a9,ba){var a7,bc;if(ba.visualMode){a7=a8.getCursor("anchor");bc=a8.getCursor("head");bc.ch=aE(a8,bc.line)-1}else{var bb=Math.max(a9.repeat,2);a7=a8.getCursor();bc=M(a8,c(a7.line+bb-1,Infinity))}var bd=0;a8.operation(function(){for(var bg=a7.line;bg<bc.line;bg++){bd=aE(a8,a7.line);var bf=c(a7.line+1,aE(a8,a7.line+1));var bh=a8.getRange(a7,bf);bh=bh.replace(/\n\s*/g," ");a8.replaceRange(bh,a7,bf)}var be=c(a7.line,bd);a8.setCursor(be)})},newLineAndEnterInsertMode:function(a7,a8,a9){a9.insertMode=true;var ba=v(a7.getCursor());if(ba.line===a7.firstLine()&&!a8.after){a7.replaceRange("\n",c(a7.firstLine(),0));a7.setCursor(a7.firstLine(),0)}else{ba.line=(a8.after)?ba.line:ba.line-1;ba.ch=aE(a7,ba.line);a7.setCursor(ba);var bb=b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent;bb(a7)}this.enterInsertMode(a7,{repeat:a8.repeat},a9)},paste:function(bf,a9){var bh=v(bf.getCursor());var bi=p.registerController.getRegister(a9.registerName);var bk=bi.toString();if(!bk){return}if(a9.matchIndent){var a7=function(bn){var bm=(bn.split("\t").length-1);var bl=(bn.split(" ").length-1);return bm*bf.options.tabSize+bl*1};var bg=bf.getLine(bf.getCursor().line);var ba=a7(bg.match(/^\s*/)[0]);var bd=bk.replace(/\n$/,"");var a8=bk!==bd;var bb=a7(bk.match(/^\s*/)[0]);var bk=bd.replace(/^\s*/gm,function(bl){var bm=ba+(a7(bl)-bb);if(bm<0){return""}else{if(bf.options.indentWithTabs){var bn=Math.floor(bm/bf.options.tabSize);return Array(bn+1).join("\t")}else{return Array(bm+1).join(" ")}}});bk+=a8?"\n":""}if(a9.repeat>1){var bk=Array(a9.repeat+1).join(bk)}var bj=bi.linewise;if(bj){if(a9.after){bk="\n"+bk.slice(0,bk.length-1);bh.ch=aE(bf,bh.line)}else{bh.ch=0}}else{bh.ch+=a9.after?1:0}bf.replaceRange(bk,bh);var bc;var be;if(bj&&a9.after){bc=c(bh.line+1,aH(bf.getLine(bh.line+1)))}else{if(bj&&!a9.after){bc=c(bh.line,aH(bf.getLine(bh.line)))}else{if(!bj&&a9.after){be=bf.indexFromPos(bh);bc=bf.posFromIndex(be+bk.length-1)}else{be=bf.indexFromPos(bh);bc=bf.posFromIndex(be+bk.length)}}}bf.setCursor(bc)},undo:function(a7,a8){a7.operation(function(){ag(a7,b.commands.undo,a8.repeat)();a7.setCursor(a7.getCursor("anchor"))})},redo:function(a7,a8){ag(a7,b.commands.redo,a8.repeat)()},setRegister:function(a9,a7,a8){a8.inputState.registerName=a7.selectedCharacter},setMark:function(a7,a8,a9){var ba=a8.selectedCharacter;aA(a7,a9,ba,a7.getCursor())},replace:function(bd,a8,ba){var a9=a8.selectedCharacter;var bc=bd.getCursor();var bb;var be;if(ba.visualMode){bc=bd.getCursor("start");be=bd.getCursor("end");be=bd.clipPos(c(be.line,be.ch+1))}else{var bf=bd.getLine(bc.line);bb=bc.ch+a8.repeat;if(bb>bf.length){bb=bf.length}be=c(bc.line,bb)}if(a9=="\n"){if(!ba.visualMode){bd.replaceRange("",bc,be)}(b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent)(bd)}else{var a7=bd.getRange(bc,be);a7=a7.replace(/[^\n]/g,a9);bd.replaceRange(a7,bc,be);if(ba.visualMode){bd.setCursor(bc);aB(bd)}else{bd.setCursor(w(be,0,-1))}}},incrementNumberToken:function(bh,a8){var bi=bh.getCursor();var bd=bh.getLine(bi.line);var bk=/-?\d+/g;var bc;var a7;var bb;var bj;var a9;while((bc=bk.exec(bd))!==null){a9=bc[0];a7=bc.index;bb=a7+a9.length;if(bi.ch<bb){break}}if(!a8.backtrack&&(bb<=bi.ch)){return}if(a9){var bg=a8.increase?1:-1;var ba=parseInt(a9)+(bg*a8.repeat);var bf=c(bi.line,a7);var be=c(bi.line,bb);bj=ba.toString();bh.replaceRange(bj,bf,be)}else{return}bh.setCursor(c(bi.line,a7+bj.length-1))},repeatLastEdit:function(a8,a9,ba){var a7=ba.lastEditInputState;if(!a7){return}var bb=a9.repeat;if(bb&&a9.repeatIsExplicit){ba.lastEditInputState.repeatOverride=bb}else{bb=ba.lastEditInputState.repeatOverride||bb}r(a8,ba,bb,false)}};function M(a8,bc,ba){var a9=Math.min(Math.max(a8.firstLine(),bc.line),a8.lastLine());var a7=aE(a8,a9)-1;a7=(ba)?a7+1:a7;var bb=Math.min(Math.max(0,bc.ch),a7);return c(a9,bb)}function aT(a8){var a7={};for(var a9 in a8){if(a8.hasOwnProperty(a9)){a7[a9]=a8[a9]}}return a7}function w(a8,a7,a9){return c(a8.line+a7,a8.ch+a9)}function aW(a9,a7){for(var a8=0;a8<a9.length;a8++){if(a9[a8]!=a7[a8]&&a7[a8]!="character"){return false}}return true}function ag(a7,a8,a9){return function(){for(var ba=0;ba<a9;ba++){a8(a7)}}}function v(a7){return c(a7.line,a7.ch)}function a5(a8,a7){return a8.ch==a7.ch&&a8.line==a7.line}function ax(a8,a7){if(a8.line<a7.line){return true}if(a8.line==a7.line&&a8.ch<a7.ch){return true}return false}function aC(ba,a9,a8){var bb=ax(ba,a9);var a7=ax(a9,a8);return bb&&a7}function aE(a7,a8){return a7.getLine(a8).length}function j(a7){return a7.split("").reverse().join("")}function aM(a7){if(a7.trim){return a7.trim()}return a7.replace(/^\s+|\s+$/g,"")}function f(a7){return a7.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function aB(a7){a7.off("mousedown",aB);var a8=a7.state.vim;a8.lastSelection={curStart:a8.marks["<"].find(),curEnd:a8.marks[">"].find(),visualMode:a8.visualMode,visualLine:a8.visualLine};a8.visualMode=false;a8.visualLine=false;var a9=a7.getCursor("anchor");var ba=a7.getCursor("head");if(!a5(a9,ba)){a7.setCursor(M(a7,ba))}b.signal(a7,"vim-mode-change",{mode:"normal"})}function Y(a8,a7,bc){var bb=a8.getRange(a7,bc);if(/\n\s*$/.test(bb)){var ba=bb.split("\n");ba.pop();var a9;for(var a9=ba.pop();ba.length>0&&a9&&G(a9);a9=ba.pop()){bc.line--;bc.ch=0}if(a9){bc.line--;bc.ch=aE(a8,bc.line)}else{bc.ch=0}}}function aQ(a8,a7,a9){a7.ch=0;a9.ch=0;a9.line++}function aH(a8){if(!a8){return 0}var a7=a8.search(/\S/);return a7==-1?a8.length:a7}function an(bg,bc,bq,a8,br){var ba=bg.getCursor();var bj=bg.getLine(ba.line);var bm=ba.ch;var bl=bj.substring(bm);var bn;if(br){bn=bl.search(/\w/)}else{bn=bl.search(/\S/)}if(bn==-1){return null}bm+=bn;bl=bj.substring(bm);var bp=bj.substring(0,bm);var bs;if(a8){bs=/^\S+/}else{if((/\w/).test(bj.charAt(bm))){bs=/^\w+/}else{bs=/^[^\w\s]+/}}var bd=bs.exec(bl);var bk=bm;var a9=bm+bd[0].length;var bb=j(bp);var bh=bs.exec(bb);if(bh){bk-=bh[0].length}if(bc){var bi=bj.substring(a9);var a7=bi.match(/^\s*/)[0].length;if(a7>0){a9+=a7}else{var bf=bb.length-bk;var be=bb.substring(bf);var bo=be.match(/^\s*/)[0].length;bk-=bo}}return{start:c(ba.line,bk),end:c(ba.line,a9)}}function aR(a7,a8,a9){if(!a5(a8,a9)){p.jumpList.add(a7,a8,a9)}}function al(a7,a8){p.lastChararacterSearch.increment=a7;p.lastChararacterSearch.forward=a8.forward;p.lastChararacterSearch.selectedCharacter=a8.selectedCharacter}var H={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"};var aG={bracket:{isComplete:function(a7){if(a7.nextCh===a7.symb){a7.depth++;if(a7.depth>=1){return true}}else{if(a7.nextCh===a7.reverseSymb){a7.depth--}}return false}},section:{init:function(a7){a7.curMoveThrough=true;a7.symb=(a7.forward?"]":"[")===a7.symb?"{":"}"},isComplete:function(a7){return a7.index===0&&a7.nextCh===a7.symb}},comment:{isComplete:function(a8){var a7=a8.lastCh==="*"&&a8.nextCh==="/";a8.lastCh=a8.nextCh;return a7}},method:{init:function(a7){a7.symb=(a7.symb==="m"?"{":"}");a7.reverseSymb=a7.symb==="{"?"}":"{"},isComplete:function(a7){if(a7.nextCh===a7.symb){return true}return false}},preprocess:{init:function(a7){a7.index=0},isComplete:function(a8){if(a8.nextCh==="#"){var a7=a8.lineText.match(/#(\w+)/)[1];if(a7==="endif"){if(a8.forward&&a8.depth===0){return true}a8.depth++}else{if(a7==="if"){if(!a8.forward&&a8.depth===0){return true}a8.depth--}}if(a7==="else"&&a8.depth===0){return true}}return false}}};function a1(bg,a8,bb,a9){var bj=v(bg.getCursor());var bh=bb?1:-1;var ba=bb?bg.lineCount():-1;var bf=bj.ch;var bl=bj.line;var be=bg.getLine(bl);var a7={lineText:be,nextCh:be.charAt(bf),lastCh:null,index:bf,symb:a9,reverseSymb:(bb?{")":"(","}":"{"}:{"(":")","{":"}"})[a9],forward:bb,depth:0,curMoveThrough:false};var bc=H[a9];if(!bc){return bj}var bk=aG[bc].init;var bi=aG[bc].isComplete;if(bk){bk(a7)}while(bl!==ba&&a8){a7.index+=bh;a7.nextCh=a7.lineText.charAt(a7.index);if(!a7.nextCh){bl+=bh;a7.lineText=bg.getLine(bl)||"";if(bh>0){a7.index=0}else{var bd=a7.lineText.length;a7.index=(bd>0)?(bd-1):0}a7.nextCh=a7.lineText.charAt(a7.index)}if(bi(a7)){bj.line=bl;bj.ch=a7.index;a8--}}if(a7.nextCh||a7.curMoveThrough){return c(bl,a7.index)}return bj}function a3(bh,bi,ba,bf,bg){var bb=bi.line;var be=bi.ch;var bl=bh.getLine(bb);var a8=ba?1:-1;var bc=bf?aX:ad;if(bg&&bl==""){bb+=a8;bl=bh.getLine(bb);if(!e(bh,bb)){return null}be=(ba)?0:bl.length}while(true){if(bg&&bl==""){return{from:0,to:0,line:bb}}var bd=(a8>0)?bl.length:-1;var bk=bd,bj=bd;while(be!=bd){var a7=false;for(var a9=0;a9<bc.length&&!a7;++a9){if(bc[a9].test(bl.charAt(be))){bk=be;while(be!=bd&&bc[a9].test(bl.charAt(be))){be+=a8}bj=be;a7=bk!=bj;if(bk==bi.ch&&bb==bi.line&&bj==bk+a8){continue}else{return{from:Math.min(bk,bj+1),to:Math.max(bk,bj),line:bb}}}}if(!a7){be+=a8}}bb+=a8;if(!e(bh,bb)){return null}bl=bh.getLine(bb);be=(a8>0)?0:bl.length}throw new Error("The impossible happened.")}function ak(bh,a8,bc,bl,bf){var bj=bh.getCursor();var bd=v(bj);var be=[];if(bc&&!bl||!bc&&bl){a8++}var bg=!(bc&&bl);for(var ba=0;ba<a8;ba++){var a7=a3(bh,bj,bc,bf,bg);if(!a7){var a9=aE(bh,bh.lastLine());be.push(bc?{line:bh.lastLine(),from:a9,to:a9}:{line:0,from:0,to:0});break}be.push(a7);bj=c(a7.line,bc?(a7.to-1):a7.from)}var bb=be.length!=a8;var bi=be[0];var bk=be.pop();if(bc&&!bl){if(!bb&&(bi.from!=bd.ch||bi.line!=bd.line)){bk=be.pop()}return c(bk.line,bk.from)}else{if(bc&&bl){return c(bk.line,bk.to-1)}else{if(!bc&&bl){if(!bb&&(bi.to!=bd.ch||bi.line!=bd.line)){bk=be.pop()}return c(bk.line,bk.to)}else{return c(bk.line,bk.from)}}}}function a0(bc,a8,ba,bb){var be=bc.getCursor();var a7=be.ch;var bd;for(var a9=0;a9<a8;a9++){var bf=bc.getLine(be.line);bd=aO(a7,bf,bb,ba,true);if(bd==-1){return null}a7=bd}return c(bc.getCursor().line,bd)}function W(a7,a9){var a8=a7.getCursor().line;return M(a7,c(a8,a9-1))}function aA(a7,a8,a9,ba){if(!B(a9,ao)){return}if(a8.marks[a9]){a8.marks[a9].clear()}a8.marks[a9]=a7.setBookmark(ba)}function aO(bc,a8,bb,a9,ba){var a7;if(a9){a7=a8.indexOf(bb,bc+1);if(a7!=-1&&!ba){a7-=1}}else{a7=a8.lastIndexOf(bb,bc-1);if(a7!=-1&&!ba){a7+=1}}return a7}function m(bg,a9,bf){var bh=bg.getCursor(),a8,bb;var be=({"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/})[a9];var ba=({"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"})[a9];var a7=bg.getLine(bh.line).charAt(bh.ch);var bc=a7===ba?1:0;a8=bg.scanForBracket(c(bh.line,bh.ch+bc),-1,null,{bracketRegex:be});bb=bg.scanForBracket(c(bh.line,bh.ch+bc),1,null,{bracketRegex:be});if(!a8||!bb){return{start:bh,end:bh}}a8=a8.pos;bb=bb.pos;if((a8.line==bb.line&&a8.ch>bb.ch)||(a8.line>bb.line)){var bd=a8;a8=bb;bb=bd}if(bf){bb.ch+=1}else{a8.ch+=1}return{start:a8,end:bb}}function az(bf,a9,be){var bg=v(bf.getCursor());var bh=bf.getLine(bg.line);var bd=bh.split("");var a8,ba,bb,bc;var a7=bd.indexOf(a9);if(bg.ch<a7){bg.ch=a7}else{if(a7<bg.ch&&bd[bg.ch]==a9){ba=bg.ch;--bg.ch}}if(bd[bg.ch]==a9&&!ba){a8=bg.ch+1}else{for(bb=bg.ch;bb>-1&&!a8;bb--){if(bd[bb]==a9){a8=bb+1}}}if(a8&&!ba){for(bb=a8,bc=bd.length;bb<bc&&!ba;bb++){if(bd[bb]==a9){ba=bb}}}if(!a8||!ba){return{start:bg,end:bg}}if(be){--a8;++ba}return{start:c(bg.line,a8),end:c(bg.line,ba)}}au("pcre",true,"boolean");function P(){}P.prototype={getQuery:function(){return p.query},setQuery:function(a7){p.query=a7},getOverlay:function(){return this.searchOverlay},setOverlay:function(a7){this.searchOverlay=a7},isReversed:function(){return p.isReversed},setReversed:function(a7){p.isReversed=a7}};function aq(a7){var a8=a7.state.vim;return a8.searchState_||(a8.searchState_=new P())}function O(a7,ba,bb,a8,a9){if(a7.openDialog){a7.openDialog(ba,a8,{bottom:true,value:a9.value,onKeyDown:a9.onKeyDown,onKeyUp:a9.onKeyUp})}else{a8(prompt(bb,""))}}function X(ba){var a8=false;var a9=[];for(var a7=0;a7<ba.length;a7++){var bb=ba.charAt(a7);if(!a8&&bb=="/"){a9.push(a7)}a8=!a8&&(bb=="\\")}return a9}function aZ(be){var bf=["|","(",")","{"];var bb=["}"];var bc=false;var a8=[];for(var a9=-1;a9<be.length;a9++){var bd=be.charAt(a9)||"";var a7=be.charAt(a9+1)||"";var ba=(bf.indexOf(a7)!=-1);if(bc){if(bd!=="\\"||!ba){a8.push(bd)}bc=false}else{if(bd==="\\"){bc=true;if(bb.indexOf(a7)!=-1){ba=true}if(!ba||a7==="\\"){a8.push(bd)}}else{a8.push(bd);if(ba&&a7!=="\\"){a8.push("\\")}}}}return a8.join("")}function a2(ba){var a9=false;var a7=[];for(var a8=-1;a8<ba.length;a8++){var bc=ba.charAt(a8)||"";var bb=ba.charAt(a8+1)||"";if(a9){a7.push(bc);a9=false}else{if(bc==="\\"){a9=true;if((S(bb)||bb==="$")){a7.push("$")}else{if(bb!=="/"&&bb!=="\\"){a7.push("\\")}}}else{if(bc==="$"){a7.push("$")}a7.push(bc);if(bb==="/"){a7.push("\\")}}}}return a7.join("")}function R(a9){var a8=new b.StringStream(a9);var a7=[];while(!a8.eol()){while(a8.peek()&&a8.peek()!="\\"){a7.push(a8.next())}if(a8.match("\\/",true)){a7.push("/")}else{if(a8.match("\\\\",true)){a7.push("\\")}else{a7.push(a8.next())}}}return a7.join("")}function ai(be,a8,ba){if(be instanceof RegExp){return be}var bc=X(be);var a9;var a7;if(!bc.length){a9=be}else{a9=be.substring(0,bc[0]);var bb=be.substring(bc[0]);a7=(bb.indexOf("i")!=-1)}if(!a9){return null}if(!n("pcre")){a9=aZ(a9)}if(ba){a8=(/^[^A-Z]*$/).test(a9)}var bd=new RegExp(a9,(a8||a7)?"i":undefined);return bd}function aV(a7,a8){if(a7.openNotification){a7.openNotification('<span style="color: red">'+a8+"</span>",{bottom:true,duration:5000})}else{alert(a8)}}function ap(a8,a9){var a7="";if(a8){a7+='<span style="font-family: monospace">'+a8+"</span>"}a7+='<input type="text"/> <span style="color: #888">';if(a9){a7+='<span style="color: #888">';a7+=a9;a7+="</span>"}return a7}var F="(Javascript regexp)";function aI(a8,a9){var ba=(a9.prefix||"")+" "+(a9.desc||"");var a7=ap(a9.prefix,a9.desc);O(a8,a7,ba,a9.onClose,a9)}function L(a8,a7){if(a8 instanceof RegExp&&a7 instanceof RegExp){var ba=["global","multiline","ignoreCase","source"];for(var a9=0;a9<ba.length;a9++){var bb=ba[a9];if(a8[bb]!==a7[bb]){return false}}return true}return false}function a4(a7,bc,a8,a9){if(!bc){return}var bb=aq(a7);var ba=ai(bc,!!a8,!!a9);if(!ba){return}at(a7,ba);if(L(ba,bb.getQuery())){return ba}bb.setQuery(ba);return ba}function aw(a8){if(a8.source.charAt(0)=="^"){var a7=true}return{token:function(ba){if(a7&&!ba.sol()){ba.skipToEnd();return}var a9=ba.match(a8,false);if(a9){if(a9[0].length==0){ba.next();return"searching"}if(!ba.sol()){ba.backUp(1);if(!a8.exec(ba.next()+a9[0])){ba.next();return null}}ba.match(a8);return"searching"}while(!ba.eol()){ba.next();if(ba.match(a8,false)){break}}},query:a8}}function at(a7,a9){var a8=aq(a7).getOverlay();if(!a8||a9!=a8.query){if(a8){a7.removeOverlay(a8)}a8=aw(a9);a7.addOverlay(a8);aq(a7).setOverlay(a8)}}function a6(a7,a8,ba,a9){if(a9===undefined){a9=1}return a7.operation(function(){var be=a7.getCursor();var bd=a7.getSearchCursor(ba,be);for(var bb=0;bb<a9;bb++){var bc=bd.find(a8);if(bb==0&&bc&&a5(bd.from(),be)){bc=bd.find(a8)}if(!bc){bd=a7.getSearchCursor(ba,(a8)?c(a7.lastLine()):c(a7.firstLine(),0));if(!bd.find(a8)){return}}}return bd.from()})}function av(a7){a7.removeOverlay(aq(a7).getOverlay());aq(a7).setOverlay(null)}function Q(a9,a8,a7){if(typeof a9!="number"){a9=a9.line}if(a8 instanceof Array){return B(a9,a8)}else{if(a7){return(a9>=a8&&a9<=a7)}else{return a9==a8}}}function aP(a7){var ba=a7.getScrollInfo();var a9=6;var bd=10;var bc=a7.coordsChar({left:0,top:a9+ba.top},"local");var a8=ba.clientHeight-bd+ba.top;var bb=a7.coordsChar({left:0,top:a8},"local");return{top:bc.line,bottom:bb.line}}var u=[{name:"map"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"set"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s"},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:true}];d.ExCommandDispatcher=function(){this.buildCommandMap_()};d.ExCommandDispatcher.prototype={processCommand:function(bh,bg){var bb=bh.state.vim;var a8=p.registerController.getRegister(":");var be=a8.toString();if(bb.visualMode){aB(bh)}var a7=new b.StringStream(bg);a8.setText(bg);var ba={};ba.input=bg;try{this.parseInput_(bh,a7,ba)}catch(bf){aV(bh,bf);throw bf}var bd;if(!ba.commandName){if(ba.line!==undefined){bd="move"}}else{var a9=this.matchCommand_(ba.commandName);if(a9){bd=a9.name;if(a9.excludeFromCommandHistory){a8.setText(be)}this.parseCommandArgs_(a7,ba,a9);if(a9.type=="exToKey"){for(var bc=0;bc<a9.toKeys.length;bc++){b.Vim.handleKey(bh,a9.toKeys[bc])}return}else{if(a9.type=="exToEx"){this.processCommand(bh,a9.toInput);return}}}}if(!bd){aV(bh,'Not an editor command ":'+bg+'"');return}try{aK[bd](bh,ba)}catch(bf){aV(bh,bf);throw bf}},parseInput_:function(a8,a9,a7){a9.eatWhile(":");if(a9.eat("%")){a7.line=a8.firstLine();a7.lineEnd=a8.lastLine()}else{a7.line=this.parseLineSpec_(a8,a9);if(a7.line!==undefined&&a9.eat(",")){a7.lineEnd=this.parseLineSpec_(a8,a9)}}var ba=a9.match(/^(\w+)/);if(ba){a7.commandName=ba[1]}else{a7.commandName=a9.match(/.*/)[0]}return a7},parseLineSpec_:function(a7,a8){var a9=a8.match(/^(\d+)/);if(a9){return parseInt(a9[1],10)-1}switch(a8.next()){case".":return a7.getCursor().line;case"$":return a7.lastLine();case"'":var ba=a7.state.vim.marks[a8.next()];if(ba&&ba.find()){return ba.find().line}throw new Error("Mark not set");default:a8.backUp(1);return undefined}},parseCommandArgs_:function(a8,bb,ba){if(a8.eol()){return}bb.argString=a8.match(/.*/)[0];var a9=ba.argDelimiter||/\s+/;var a7=aM(bb.argString).split(a9);if(a7.length&&a7[0]){bb.args=a7}},matchCommand_:function(a8){for(var a7=a8.length;a7>0;a7--){var a9=a8.substring(0,a7);if(this.commandMap_[a9]){var ba=this.commandMap_[a9];if(ba.name.indexOf(a8)===0){return ba}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a8=0;a8<u.length;a8++){var a9=u[a8];var a7=a9.shortName||a9.name;this.commandMap_[a7]=a9}},map:function(a8,bb,a7){if(a8!=":"&&a8.charAt(0)==":"){if(a7){throw Error("Mode not supported for ex mappings")}var ba=a8.substring(1);if(bb!=":"&&bb.charAt(0)==":"){this.commandMap_[ba]={name:ba,type:"exToEx",toInput:bb.substring(1),user:true}}else{this.commandMap_[ba]={name:ba,type:"exToKey",toKeys:V(bb),user:true}}}else{if(bb!=":"&&bb.charAt(0)==":"){var a9={keys:V(a8),type:"keyToEx",exArgs:{input:bb.substring(1)},user:true};if(a7){a9.context=a7}a.unshift(a9)}else{var a9={keys:V(a8),type:"keyToKey",toKeys:V(bb),user:true};if(a7){a9.context=a7}a.unshift(a9)}}},unmap:function(a8,a7){var bc=function(be,bd){if(be===bd){return true}if(be==null||bd==null){return true}if(be.length!=bd.length){return false}for(var bf=0;bf<be.length;bf++){if(be[bf]!==bd[bf]){return false}}return true};if(a8!=":"&&a8.charAt(0)==":"){if(a7){throw Error("Mode not supported for ex mappings")}var ba=a8.substring(1);if(this.commandMap_[ba]&&this.commandMap_[ba].user){delete this.commandMap_[ba];return}}else{var bb=V(a8);for(var a9=0;a9<a.length;a9++){if(bc(bb,a[a9].keys)&&a[a9].context===a7&&a[a9].user){a.splice(a9,1);return}}}throw Error("No such mapping.")}};function V(ba){var a8,a7;var a9=[];while(ba){a7=(/<\w+-.+?>|<\w+>|./).exec(ba);if(a7===null){break}a8=a7[0];ba=ba.substring(a7.index+a8.length);a9.push(a8)}return a9}var aK={map:function(a7,ba,a8){var a9=ba.args;if(!a9||a9.length<2){if(a7){aV(a7,"Invalid mapping: "+ba.input)}return}l.map(a9[0],a9[1],a8)},nmap:function(a7,a8){this.map(a7,a8,"normal")},vmap:function(a7,a8){this.map(a7,a8,"visual")},unmap:function(a7,ba,a8){var a9=ba.args;if(!a9||a9.length<1){if(a7){aV(a7,"No such mapping: "+ba.input)}return}l.unmap(a9[0],a8)},move:function(a7,a8){aN.processCommand(a7,a7.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:a8.line+1})},set:function(bf,bc){var a9=bc.args;if(!a9||a9.length<1){if(bf){aV(bf,"Invalid mapping: "+bc.input)}return}var bd=a9[0].split("=");var a8=bd[0];var be=bd[1];var bb=false;if(a8.charAt(a8.length-1)=="?"){if(be){throw Error("Trailing characters: "+bc.argString)}a8=a8.substring(0,a8.length-1);bb=true}if(be===undefined&&a8.substring(0,2)=="no"){a8=a8.substring(2);be=false}var ba=af[a8]&&af[a8].type=="boolean";if(ba&&be==undefined){be=true}if(!ba&&!be||bb){var a7=n(a8);if(a7===true||a7===false){aV(bf," "+(a7?"":"no")+a8)}else{aV(bf,"  "+a8+"="+a7)}}else{ar(a8,be)}},registers:function(bc,a8){var be=a8.args;var bb=p.registerController.registers;var a9="----------Registers----------<br><br>";if(!be){for(var a7 in bb){var bf=bb[a7].toString();if(bf.length){a9+='"'+a7+"    "+bf+"<br>"}}}else{var a7;be=be.join("");for(var ba=0;ba<be.length;ba++){a7=be.charAt(ba);if(!p.registerController.isValidRegister(a7)){continue}var bd=bb[a7]||new aY();a9+='"'+a7+"    "+bd.toString()+"<br>"}}aV(bc,a9)},sort:function(bg,bq){var bh,ba,a8,a9;function bb(){if(bq.argString){var bu=new b.StringStream(bq.argString);if(bu.eat("!")){bh=true}if(bu.eol()){return}if(!bu.eatSpace()){return"Invalid arguments"}var bw=bu.match(/[a-z]+/);if(bw){bw=bw[0];ba=bw.indexOf("i")!=-1;a8=bw.indexOf("u")!=-1;var bt=bw.indexOf("d")!=-1&&1;var bv=bw.indexOf("x")!=-1&&1;var bs=bw.indexOf("o")!=-1&&1;if(bt+bv+bs>1){return"Invalid arguments"}a9=bt&&"decimal"||bv&&"hex"||bs&&"octal"}if(bu.eatSpace()&&bu.match(/\/.*\//)){"patterns not supported"}}}var bc=bb();if(bc){aV(bg,bc+": "+bq.argString);return}var bl=bq.line||bg.firstLine();var bp=bq.lineEnd||bq.line||bg.lastLine();if(bl==bp){return}var bf=c(bl,0);var bn=c(bp,aE(bg,bp));var bk=bg.getRange(bf,bn).split("\n");var bd=(a9=="decimal")?/(-?)([\d]+)/:(a9=="hex")?/(-?)(?:0x)?([0-9a-f]+)/i:(a9=="octal")?/([0-7]+)/:null;var be=(a9=="decimal")?10:(a9=="hex")?16:(a9=="octal")?8:null;var bi=[],bm=[];if(a9){for(var bo=0;bo<bk.length;bo++){if(bd.exec(bk[bo])){bi.push(bk[bo])}else{bm.push(bk[bo])}}}else{bm=bk}function br(bt,bs){if(bh){var bu;bu=bt;bt=bs;bs=bu}if(ba){bt=bt.toLowerCase();bs=bs.toLowerCase()}var bw=a9&&bd.exec(bt);var bv=a9&&bd.exec(bs);if(!bw){return bt<bs?-1:1}bw=parseInt((bw[1]+bw[2]).toLowerCase(),be);bv=parseInt((bv[1]+bv[2]).toLowerCase(),be);return bw-bv}bi.sort(br);bm.sort(br);bk=(!bh)?bm.concat(bi):bi.concat(bm);if(a8){var bj=bk;var a7;bk=[];for(var bo=0;bo<bj.length;bo++){if(bj[bo]!=a7){bk.push(bj[bo])}a7=bj[bo]}}bg.replaceRange(bk.join("\n"),bf,bn)},substitute:function(bl,ba){if(!bl.getSearchCursor){throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.")}var a8=ba.argString;var bk=a8?X(a8):[];var be="";if(bk.length){if(bk[0]!==0){aV(bl,"Substitutions should be of the form :s/pattern/replace/");return}var bn=a8.substring(bk[0]+1,bk[1]);var bf;var bg;var a7=false;if(bk[1]){be=a8.substring(bk[1]+1,bk[2]);if(n("pcre")){be=R(be)}else{be=a2(be)}p.lastSubstituteReplacePart=be}if(bk[2]){var bd=a8.substring(bk[2]+1).split(" ");bf=bd[0];bg=parseInt(bd[1])}if(bf){if(bf.indexOf("c")!=-1){a7=true;bf.replace("c","")}bn=bn+"/"+bf}}if(bn){try{a4(bl,bn,true,true)}catch(bi){aV(bl,"Invalid regex: "+bn);return}}be=be||p.lastSubstituteReplacePart;if(be===undefined){aV(bl,"No previous substitute regular expression");return}var a9=aq(bl);var bj=a9.getQuery();var bc=(ba.line!==undefined)?ba.line:bl.getCursor().line;var bb=ba.lineEnd||bc;if(bg){bc=bb;bb=bc+bg-1}var bh=M(bl,c(bc,0));var bm=bl.getSearchCursor(bj,bh);aL(bl,a7,bc,bb,bm,bj,be)},redo:b.commands.redo,undo:b.commands.undo,write:function(a7){if(b.commands.save){b.commands.save(a7)}else{a7.save()}},nohlsearch:function(a7){av(a7)},delmarks:function(bh,bc){if(!bc.argString||!aM(bc.argString)){aV(bh,"Argument required");return}var a7=bh.state.vim;var bi=new b.StringStream(aM(bc.argString));while(!bi.eol()){bi.eatSpace();var bf=bi.pos;if(!bi.match(/[a-zA-Z]/,false)){aV(bh,"Invalid argument: "+bc.argString.substring(bf));return}var a9=bi.next();if(bi.match("-",true)){if(!bi.match(/[a-zA-Z]/,false)){aV(bh,"Invalid argument: "+bc.argString.substring(bf));return}var ba=a9;var be=bi.next();if(x(ba)&&x(be)||t(ba)&&t(be)){var a8=ba.charCodeAt(0);var bg=be.charCodeAt(0);if(a8>=bg){aV(bh,"Invalid argument: "+bc.argString.substring(bf));return}for(var bd=0;bd<=bg-a8;bd++){var bb=String.fromCharCode(a8+bd);delete a7.marks[bb]}}else{aV(bh,"Invalid argument: "+ba+"-");return}}else{delete a7.marks[a9]}}}};var l=new d.ExCommandDispatcher();function aL(bk,a8,bf,bc,a9,bh,bb){bk.state.vim.exMode=true;var bd=false;var bj=a9.from();function bg(){bk.operation(function(){while(!bd){ba();be()}bi()})}function ba(){var bm=bk.getRange(a9.from(),a9.to());var bl=bm.replace(bh,bb);a9.replace(bl)}function be(){var bl=a9.findNext();if(!bl){bd=true}else{if(Q(a9.from(),bf,bc)){bk.scrollIntoView(a9.from(),30);bk.setSelection(a9.from(),a9.to());bj=a9.from();bd=false}else{bd=true}}}function bi(bm){if(bm){bm()}bk.focus();if(bj){bk.setCursor(bj);var bl=bk.state.vim;bl.exMode=false;bl.lastHPos=bl.lastHSPos=bj.ch}}function a7(bn,bl,bo){b.e_stop(bn);var bm=b.keyName(bn);switch(bm){case"Y":ba();be();break;case"N":be();break;case"A":bk.operation(bg);break;case"L":ba();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":bi(bo);break}if(bd){bi(bo)}}be();if(bd){aV(bk,"No matches for "+bh.source);return}if(!a8){bg();return}aI(bk,{prefix:"replace with <strong>"+bb+"</strong> (y/n/a/q/l)",onKeyDown:a7})}function am(){function a9(bd,bc){var bb=bd;if(t(bb)&&bc=="Ctrl"){bb=bb.toLowerCase()}if(bc){bb=bc.charAt(0)+"-"+bb}var be=({Enter:"CR",Backspace:"BS",Delete:"Del"})[bb];bb=be?be:bb;bb=bb.length>1?"<"+bb+">":bb;return bb}function a8(bb){return function(bc){b.Vim.handleKey(bc,bb)}}var a7={nofallthrough:true,style:"fat-cursor"};function ba(bg,bc){for(var bf=0;bf<bg.length;bf++){var be=bg[bf];if(!bc&&be.length==1){be="'"+be+"'"}var bb=a9(bg[bf],bc);var bd=bc?bc+"-"+be:be;a7[bd]=a8(bb)}}ba(T);ba(Z);ba(T,"Ctrl");ba(h);ba(h,"Ctrl");ba(J);ba(J,"Ctrl");ba(aD);ba(aD,"Ctrl");return a7}b.keyMap.vim=am();function q(a7){var a9=a7.state.vim;var bb=p.macroModeState;var a8=p.registerController.getRegister(".");var ba=bb.isPlaying;if(!ba){a7.off("change",aS);b.off(a7.getInputField(),"keydown",K)}if(!ba&&a9.insertModeRepeat>1){r(a7,a9,a9.insertModeRepeat-1,true);a9.lastEditInputState.repeatOverride=a9.insertModeRepeat}delete a9.insertModeRepeat;a9.insertMode=false;a7.setCursor(a7.getCursor().line,a7.getCursor().ch-1);a7.setOption("keyMap","vim");a7.setOption("disableInput",true);a7.toggleOverwrite(false);a8.setText(bb.lastInsertModeChanges.changes.join(""));b.signal(a7,"vim-mode-change",{mode:"normal"});if(bb.isRecording){aa(bb)}}b.keyMap["vim-insert"]={Esc:q,"Ctrl-[":q,"Ctrl-C":q,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(a7){var a8=b.commands.newlineAndIndentContinueComment||b.commands.newlineAndIndent;a8(a7)},fallthrough:["default"]};b.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]};function z(be,a9,ba,a7){var bg=p.registerController.getRegister(a7);var a8=bg.keyBuffer;var bd=0;ba.isPlaying=true;ba.replaySearchQueries=bg.searchQueries.slice(0);for(var bb=0;bb<a8.length;bb++){var bh=a8[bb];var bc,bf;while(bh){bc=(/<\w+-.+?>|<\w+>|./).exec(bh);bf=bc[0];bh=bh.substring(bc.index+bf.length);b.Vim.handleKey(be,bf);if(a9.insertMode){ae(be,bg.insertModeChanges[bd++].changes,1);q(be)}}}ba.isPlaying=false}function A(ba,a7){if(ba.isPlaying){return}var a9=ba.latestRegister;var a8=p.registerController.getRegister(a9);if(a8){a8.pushText(a7)}}function aa(a9){if(a9.isPlaying){return}var a8=a9.latestRegister;var a7=p.registerController.getRegister(a8);if(a7){a7.pushInsertModeChanges(a9.lastInsertModeChanges)}}function E(ba,a9){if(ba.isPlaying){return}var a8=ba.latestRegister;var a7=p.registerController.getRegister(a8);if(a7){a7.pushSearchQuery(a9)}}function aS(a8,a7){var ba=p.macroModeState;var a9=ba.lastInsertModeChanges;if(!ba.isPlaying){while(a7){a9.expectCursorActivityForChange=true;if(a7.origin=="+input"||a7.origin=="paste"||a7.origin===undefined){var bb=a7.text.join("\n");a9.changes.push(bb)}a7=a7.next}}}function N(a7){var a8=a7.state.vim;if(a8.insertMode){var ba=p.macroModeState;if(ba.isPlaying){return}var a9=ba.lastInsertModeChanges;if(a9.expectCursorActivityForChange){a9.expectCursorActivityForChange=false}else{a9.changes=[]}}else{if(a7.doc.history.lastSelOrigin=="*mouse"){a8.lastHPos=a7.doc.getCursor().ch}}}function aU(a7){this.keyName=a7}function K(bb){var ba=p.macroModeState;var a9=ba.lastInsertModeChanges;var a8=b.keyName(bb);function a7(){a9.changes.push(new aU(a8));return true}if(a8.indexOf("Delete")!=-1||a8.indexOf("Backspace")!=-1){b.lookupKey(a8,["vim-insert"],a7)}}function r(bf,ba,a8,a7){var bc=p.macroModeState;bc.isPlaying=true;var bg=!!ba.lastEditActionCommand;var bd=ba.inputState;function a9(){if(bg){aN.processAction(bf,ba,ba.lastEditActionCommand)}else{aN.evalInput(bf,ba)}}function be(bi){if(bc.lastInsertModeChanges.changes.length>0){bi=!ba.lastEditActionCommand?1:bi;var bh=bc.lastInsertModeChanges;bc.lastInsertModeChanges={};ae(bf,bh.changes,bi);bc.lastInsertModeChanges=bh}}ba.inputState=ba.lastEditInputState;if(bg&&ba.lastEditActionCommand.interlaceInsertRepeat){for(var bb=0;bb<a8;bb++){a9();be(1)}}else{if(!a7){a9()}be(a8)}ba.inputState=bd;if(ba.insertMode&&!a7){q(bf)}bc.isPlaying=false}function ae(a7,ba,bb){function bc(bf){if(typeof bf=="string"){b.commands[bf](a7)}else{bf(a7)}return true}for(var a9=0;a9<bb;a9++){for(var a8=0;a8<ba.length;a8++){var be=ba[a8];if(be instanceof aU){b.lookupKey(be.keyName,["vim-insert"],bc)}else{var bd=a7.getCursor();a7.replaceRange(be,bd,bd)}}}}s();return ay};b.Vim=d()});