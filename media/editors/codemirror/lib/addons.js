(function(){CodeMirror.defineOption("fullScreen",false,function(c,e,d){if(d==CodeMirror.Init){d=false}if(!d==!e){return}if(e){a(c)}else{b(c)}});function a(c){var d=c.getWrapperElement();c.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:d.style.width,height:d.style.height};d.style.width="";d.style.height="auto";d.className+=" CodeMirror-fullscreen";document.documentElement.style.overflow="hidden";c.refresh()}function b(c){var d=c.getWrapperElement();d.className=d.className.replace(/\s*CodeMirror-fullscreen\b/,"");document.documentElement.style.overflow="";var e=c.state.fullScreenRestore;d.style.width=e.width;d.style.height=e.height;window.scrollTo(e.scrollLeft,e.scrollTop);c.refresh()}})();(function(){var f="()[]{}''\"\"";var a="[]{}";var e=/\s/;CodeMirror.defineOption("autoCloseBrackets",false,function(g,l,h){if(h!=CodeMirror.Init&&h){g.removeKeyMap("autoCloseBrackets")}if(!l){return}var j=f,i=a;if(typeof l=="string"){j=l}else{if(typeof l=="object"){if(l.pairs!=null){j=l.pairs}if(l.explode!=null){i=l.explode}}}var k=d(j);if(i){k.Enter=b(i)}g.addKeyMap(k)});function c(g,i){var h=g.getRange(CodeMirror.Pos(i.line,i.ch-1),CodeMirror.Pos(i.line,i.ch+1));return h.length==2?h:null}function d(j){var k={name:"autoCloseBrackets",Backspace:function(i){if(i.somethingSelected()){return CodeMirror.Pass}var m=i.getCursor(),l=c(i,m);if(l&&j.indexOf(l)%2==0){i.replaceRange("",CodeMirror.Pos(m.line,m.ch-1),CodeMirror.Pos(m.line,m.ch+1))}else{return CodeMirror.Pass}}};var h="";for(var g=0;g<j.length;g+=2){(function(n,m){if(n!=m){h+=m}function i(o){var p=o.getSelection();o.replaceSelection(n+p+m)}function l(o){var q=o.getCursor(),p=o.getRange(q,CodeMirror.Pos(q.line,q.ch+1));if(p!=m||o.somethingSelected()){return CodeMirror.Pass}else{o.execCommand("goCharRight")}}k["'"+n+"'"]=function(o){if(n=="'"&&o.getTokenAt(o.getCursor()).type=="comment"){return CodeMirror.Pass}if(o.somethingSelected()){return i(o)}if(n==m&&l(o)!=CodeMirror.Pass){return}var t=o.getCursor(),r=CodeMirror.Pos(t.line,t.ch+1);var p=o.getLine(t.line),s=p.charAt(t.ch),q=t.ch>0?p.charAt(t.ch-1):"";if(n==m&&CodeMirror.isWordChar(q)){return CodeMirror.Pass}if(p.length==t.ch||h.indexOf(s)>=0||e.test(s)){o.replaceSelection(n+m,{head:r,anchor:r})}else{return CodeMirror.Pass}};if(n!=m){k["'"+m+"'"]=l}})(j.charAt(g),j.charAt(g+1))}return k}function b(g){return function(h){var j=h.getCursor(),i=c(h,j);if(!i||g.indexOf(i)%2!=0){return CodeMirror.Pass}h.operation(function(){var k=CodeMirror.Pos(j.line+1,0);h.replaceSelection("\n\n",{anchor:k,head:k},"+input");h.indentLine(j.line+1,null,true);h.indentLine(j.line+2,null,true)})}}})();(function(){CodeMirror.defineOption("autoCloseTags",false,function(f,i,g){if(g!=CodeMirror.Init&&g){f.removeKeyMap("autoCloseTags")}if(!i){return}var h={name:"autoCloseTags"};if(typeof i!="object"||i.whenClosing){h["'/'"]=function(j){return d(j)}}if(typeof i!="object"||i.whenOpening){h["'>'"]=function(j){return a(j)}}f.addKeyMap(h)});var c=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var b=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(p){var o=p.getCursor(),q=p.getTokenAt(o);var r=CodeMirror.innerMode(p.getMode(),q.state),f=r.state;if(r.mode.name!="xml"||!f.tagName){return CodeMirror.Pass}var g=p.getOption("autoCloseTags"),k=r.mode.configuration=="html";var h=(typeof g=="object"&&g.dontCloseTags)||(k&&c);var m=(typeof g=="object"&&g.indentTags)||(k&&b);var i=f.tagName;if(q.end>o.ch){i=i.slice(0,i.length-q.end+o.ch)}var l=i.toLowerCase();if(q.type=="string"&&(q.end!=o.ch||!/[\"\']/.test(q.string.charAt(q.string.length-1))||q.string.length==1)||q.type=="tag"&&f.type=="closeTag"||q.string.indexOf("/")==(q.string.length-1)||h&&e(h,l)>-1){return CodeMirror.Pass}var n=m&&e(m,l)>-1;var j=n?CodeMirror.Pos(o.line+1,0):CodeMirror.Pos(o.line,o.ch+1);p.replaceSelection(">"+(n?"\n\n":"")+"</"+i+">",{head:j,anchor:j});if(n){p.indentLine(o.line+1);p.indentLine(o.line+2)}}function d(f){var k=f.getCursor(),h=f.getTokenAt(k);var g=CodeMirror.innerMode(f.getMode(),h.state),j=g.state;if(h.type=="string"||h.string.charAt(0)!="<"||h.start!=k.ch-1||g.mode.name!="xml"){return CodeMirror.Pass}var i=j.context&&j.context.tagName;if(i){f.replaceSelection("/"+i+">","end")}}function e(j,f){if(j.indexOf){return j.indexOf(f)}for(var g=0,h=j.length;g<h;++g){if(j[g]==f){return g}}return -1}})();(function(){var b=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var d=CodeMirror.Pos;var g={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function c(n,p,A){var j=n.state.matchBrackets;var u=(j&&j.maxScanLineLength)||10000;var z=(j&&j.maxScanLines)||100;var h=p||n.getCursor(),q=n.getLineHandle(h.line),k=h.ch-1;var m=(k>=0&&g[q.text.charAt(k)])||g[q.text.charAt(++k)];if(!m){return null}var o=m.charAt(1)==">",y=o?1:-1;if(A&&o!=(k==h.ch)){return null}var w=n.getTokenTypeAt(d(h.line,k+1));var l=[q.text.charAt(k)],t=/[(){}[\]]/;function s(B,G,F){if(!B.text){return}var E=o?0:B.text.length-1,i=o?B.text.length:-1;if(B.text.length>u){return null}if(F!=null){E=F+y}for(;E!=i;E+=y){var D=B.text.charAt(E);if(t.test(D)&&n.getTokenTypeAt(d(G,E+1))==w){var C=g[D];if(C.charAt(1)==">"==o){l.push(D)}else{if(l.pop()!=C.charAt(0)){return{pos:E,match:false}}else{if(!l.length){return{pos:E,match:true}}}}}}}for(var v=h.line,r,x=o?Math.min(v+z,n.lineCount()):Math.max(-1,v-z);v!=x;v+=y){if(v==h.line){r=s(q,v,k)}else{r=s(n.getLineHandle(v),v)}if(r){break}}return{from:d(h.line,k),to:r&&d(v,r.pos),match:r&&r.match,forward:o}}function a(i,o){var l=i.state.matchBrackets.maxHighlightLineLength||1000;var n=c(i);if(!n||i.getLine(n.from.line).length>l||n.to&&i.getLine(n.to.line).length>l){return}var m=n.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var k=i.markText(n.from,d(n.from.line,n.from.ch+1),{className:m});var j=n.to&&i.markText(n.to,d(n.to.line,n.to.ch+1),{className:m});if(b&&i.state.focused){i.display.input.focus()}var h=function(){i.operation(function(){k.clear();j&&j.clear()})};if(o){setTimeout(h,800)}else{return h}}var e=null;function f(h){h.operation(function(){if(e){e();e=null}if(!h.somethingSelected()){e=a(h,false)}})}CodeMirror.defineOption("matchBrackets",false,function(h,j,i){if(i&&i!=CodeMirror.Init){h.off("cursorActivity",f)}if(j){h.state.matchBrackets=typeof j=="object"?j:{};h.on("cursorActivity",f)}});CodeMirror.defineExtension("matchBrackets",function(){a(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(i,h){return c(this,i,h)})})();(function(){CodeMirror.defineOption("matchTags",false,function(d,f,e){if(e&&e!=CodeMirror.Init){d.off("cursorActivity",b);d.off("viewportChange",c);a(d)}if(f){d.state.matchBothTags=typeof f=="object"&&f.bothTags;d.on("cursorActivity",b);d.on("viewportChange",c);b(d)}});function a(d){if(d.state.tagHit){d.state.tagHit.clear()}if(d.state.tagOther){d.state.tagOther.clear()}d.state.tagHit=d.state.tagOther=null}function b(d){d.state.failedTagMatch=false;d.operation(function(){a(d);if(d.somethingSelected()){return}var i=d.getCursor(),f=d.getViewport();f.from=Math.min(f.from,i.line);f.to=Math.max(i.line+1,f.to);var g=CodeMirror.findMatchingTag(d,i,f);if(!g){return}if(d.state.matchBothTags){var h=g.at=="open"?g.open:g.close;if(h){d.state.tagHit=d.markText(h.from,h.to,{className:"CodeMirror-matchingtag"})}}var e=g.at=="close"?g.open:g.close;if(e){d.state.tagOther=d.markText(e.from,e.to,{className:"CodeMirror-matchingtag"})}else{d.state.failedTagMatch=true}})}function c(d){if(d.state.failedTagMatch){b(d)}}CodeMirror.commands.toMatchingTag=function(e){var f=CodeMirror.findMatchingTag(e,e.getCursor());if(f){var d=f.at=="close"?f.open:f.close;if(d){e.setSelection(d.to,d.from)}}}})();CodeMirror.registerHelper("fold","brace",function(l,g){var n=g.line,f=l.getLine(n);var m,s;function c(t){for(var i=g.ch,u=0;;){var v=i<=0?-1:f.lastIndexOf(t,i-1);if(v==-1){if(u==1){break}u=1;i=f.length;continue}if(u==1&&v<g.ch){break}s=l.getTokenTypeAt(CodeMirror.Pos(n,v+1));if(!/^(comment|string)/.test(s)){return v+1}i=v-1}}var h="{",d="}",m=c("{");if(m==null){h="[",d="]";m=c("[")}if(m==null){return}var k=1,b=l.lastLine(),e,p;outer:for(var r=n;r<=b;++r){var o=l.getLine(r),j=r==n?m:0;for(;;){var a=o.indexOf(h,j),q=o.indexOf(d,j);if(a<0){a=o.length}if(q<0){q=o.length}j=Math.min(a,q);if(j==o.length){break}if(l.getTokenTypeAt(CodeMirror.Pos(r,j+1))==s){if(j==a){++k}else{if(!--k){e=r;p=j;break outer}}}++j}}if(e==null||n==e&&p==m){return}return{from:CodeMirror.Pos(n,m),to:CodeMirror.Pos(e,p)}});CodeMirror.braceRangeFinder=CodeMirror.fold.brace;CodeMirror.registerHelper("fold","import",function(a,g){function f(j){if(j<a.firstLine()||j>a.lastLine()){return null}var n=a.getTokenAt(CodeMirror.Pos(j,1));if(!/\S/.test(n.string)){n=a.getTokenAt(CodeMirror.Pos(j,n.end+1))}if(n.type!="keyword"||n.string!="import"){return null}for(var k=j,l=Math.min(a.lastLine(),j+10);k<=l;++k){var m=a.getLine(k),h=m.indexOf(";");if(h!=-1){return{startCh:n.end,end:CodeMirror.Pos(k,h)}}}}var g=g.line,c=f(g),e;if(!c||f(g-1)||((e=f(g-2))&&e.end.line==g-1)){return null}for(var b=c.end;;){var d=f(b.line+1);if(d==null){break}b=d.end}return{from:a.clipPos(CodeMirror.Pos(g,c.startCh+1)),to:b}});CodeMirror.importRangeFinder=CodeMirror.fold["import"];CodeMirror.registerHelper("fold","include",function(a,f){function e(g){if(g<a.firstLine()||g>a.lastLine()){return null}var h=a.getTokenAt(CodeMirror.Pos(g,1));if(!/\S/.test(h.string)){h=a.getTokenAt(CodeMirror.Pos(g,h.end+1))}if(h.type=="meta"&&h.string.slice(0,8)=="#include"){return h.start+8}}var f=f.line,c=e(f);if(c==null||e(f-1)!=null){return null}for(var b=f;;){var d=e(b+1);if(d==null){break}++b}return{from:CodeMirror.Pos(f,c+1),to:a.clipPos(CodeMirror.Pos(b))}});CodeMirror.includeRangeFinder=CodeMirror.fold.include;(function(){function a(k,j,l,f){var d=l&&(l.call?l:l.rangeFinder);if(!d){d=k.getHelper(j,"fold")}if(!d){return}if(typeof j=="number"){j=CodeMirror.Pos(j,0)}var e=l&&l.minFoldSize||0;function c(m){var n=d(k,j);if(!n||n.to.line-n.from.line<e){return null}var p=k.findMarksAt(n.from);for(var o=0;o<p.length;++o){if(p[o].__isFold&&f!=="fold"){if(!m){return null}n.cleared=true;p[o].clear()}}return n}var h=c(true);if(l&&l.scanUp){while(!h&&j.line>k.firstLine()){j=CodeMirror.Pos(j.line-1,0);h=c(false)}}if(!h||h.cleared||f==="unfold"){return}var i=b(l);CodeMirror.on(i,"mousedown",function(){g.clear()});var g=k.markText(h.from,h.to,{replacedWith:i,clearOnEnter:true,__isFold:true});g.on("clear",function(n,m){CodeMirror.signal(k,"unfold",k,n,m)});CodeMirror.signal(k,"fold",k,h.from,h.to)}function b(c){var d=(c&&c.widget)||"\u2194";if(typeof d=="string"){var e=document.createTextNode(d);d=document.createElement("span");d.appendChild(e);d.className="CodeMirror-foldmarker"}return d}CodeMirror.newFoldFunction=function(d,c){return function(e,f){a(e,f,{rangeFinder:d,widget:c})}};CodeMirror.defineExtension("foldCode",function(e,c,d){a(this,e,c,d)});CodeMirror.registerHelper("fold","combine",function(){var c=Array.prototype.slice.call(arguments,0);return function(d,g){for(var e=0;e<c.length;++e){var f=c[e](d,g);if(f){return f}}}})})();(function(){CodeMirror.defineOption("foldGutter",false,function(l,n,m){if(m&&m!=CodeMirror.Init){l.clearGutter(l.state.foldGutter.options.gutter);l.state.foldGutter=null;l.off("gutterClick",j);l.off("change",f);l.off("viewportChange",k);l.off("fold",d);l.off("unfold",d);l.off("swapDoc",b)}if(n){l.state.foldGutter=new i(h(n));b(l);l.on("gutterClick",j);l.on("change",f);l.on("viewportChange",k);l.on("fold",d);l.on("unfold",d);l.on("swapDoc",b)}});var g=CodeMirror.Pos;function i(l){this.options=l;this.from=this.to=0}function h(l){if(l===true){l={}}if(l.gutter==null){l.gutter="CodeMirror-foldgutter"}if(l.indicatorOpen==null){l.indicatorOpen="CodeMirror-foldgutter-open"}if(l.indicatorFolded==null){l.indicatorFolded="CodeMirror-foldgutter-folded"}return l}function c(l,m){var o=l.findMarksAt(g(m));for(var n=0;n<o.length;++n){if(o[n].__isFold&&o[n].find().from.line==m){return true}}}function e(l){if(typeof l=="string"){var m=document.createElement("div");m.className=l;return m}else{return l.cloneNode(true)}}function a(l,p,o){var m=l.state.foldGutter.options,n=p;l.eachLine(p,o,function(q){var u=null;if(c(l,n)){u=e(m.indicatorFolded)}else{var t=g(n,0),s=m.rangeFinder||l.getHelper(t,"fold");var r=s&&s(l,t);if(r&&r.from.line+1<r.to.line){u=e(m.indicatorOpen)}}l.setGutterMarker(q,m.gutter,u);++n})}function b(l){var m=l.getViewport(),n=l.state.foldGutter;if(!n){return}l.operation(function(){a(l,m.from,m.to)});n.from=m.from;n.to=m.to}function j(l,m,o){var n=l.state.foldGutter.options;if(o!=n.gutter){return}l.foldCode(g(m,0),n.rangeFinder)}function f(l){var n=l.state.foldGutter,m=l.state.foldGutter.options;n.from=n.to=0;clearTimeout(n.changeUpdate);n.changeUpdate=setTimeout(function(){b(l)},m.foldOnChangeTimeSpan||600)}function k(l){var n=l.state.foldGutter,m=l.state.foldGutter.options;clearTimeout(n.changeUpdate);n.changeUpdate=setTimeout(function(){var o=l.getViewport();if(n.from==n.to||o.from-n.to>20||n.from-o.to>20){b(l)}else{l.operation(function(){if(o.from<n.from){a(l,o.from,n.from);n.from=o.from}if(o.to>n.to){a(l,n.to,o.to);n.to=o.to}})}},m.updateViewportTimeSpan||400)}function d(l,o){var n=l.state.foldGutter,m=o.line;if(m>=n.from&&m<n.to){a(l,m,m+1)}}})();(function(){var l=CodeMirror.Pos;function k(q,p){return q.line-p.line||q.ch-p.ch}var i="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var n=i+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var d=new RegExp("<(/?)(["+i+"]["+n+"]*)","g");function a(p,q,s,r){this.line=q;this.ch=s;this.cm=p;this.text=p.getLine(q);this.min=r?r.from:p.firstLine();this.max=r?r.to-1:p.lastLine()}function h(p,r){var q=p.cm.getTokenTypeAt(l(p.line,r));return q&&/\btag\b/.test(q)}function b(p){if(p.line>=p.max){return}p.ch=0;p.text=p.cm.getLine(++p.line);return true}function m(p){if(p.line<=p.min){return}p.text=p.cm.getLine(--p.line);p.ch=p.text.length;return true}function g(r){for(;;){var q=r.text.indexOf(">",r.ch);if(q==-1){if(b(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q+1;continue}var p=r.text.lastIndexOf("/",q);var s=p>-1&&!/\S/.test(r.text.slice(p+1,q));r.ch=q+1;return s?"selfClose":"regular"}}function j(q){for(;;){var p=q.ch?q.text.lastIndexOf("<",q.ch-1):-1;if(p==-1){if(m(q)){continue}else{return}}if(!h(q,p+1)){q.ch=p;continue}d.lastIndex=p;q.ch=p;var r=d.exec(q.text);if(r&&r.index==p){return r}}}function o(p){for(;;){d.lastIndex=p.ch;var q=d.exec(p.text);if(!q){if(b(p)){continue}else{return}}if(!h(p,q.index+1)){p.ch=q.index+1;continue}p.ch=q.index+q[0].length;return q}}function e(r){for(;;){var q=r.ch?r.text.lastIndexOf(">",r.ch-1):-1;if(q==-1){if(m(r)){continue}else{return}}if(!h(r,q+1)){r.ch=q;continue}var p=r.text.lastIndexOf("/",q);var s=p>-1&&!/\S/.test(r.text.slice(p+1,q));r.ch=q+1;return s?"selfClose":"regular"}}function f(s,q){var p=[];for(;;){var u=o(s),r,w=s.line,v=s.ch-(u?u[0].length:0);if(!u||!(r=g(s))){return}if(r=="selfClose"){continue}if(u[1]){for(var t=p.length-1;t>=0;--t){if(p[t]==u[2]){p.length=t;break}}if(t<0&&(!q||q==u[2])){return{tag:u[2],from:l(w,v),to:l(s.line,s.ch)}}}else{p.push(u[2])}}}function c(r,q){var p=[];for(;;){var v=e(r);if(!v){return}if(v=="selfClose"){j(r);continue}var u=r.line,t=r.ch;var w=j(r);if(!w){return}if(w[1]){p.push(w[2])}else{for(var s=p.length-1;s>=0;--s){if(p[s]==w[2]){p.length=s;break}}if(s<0&&(!q||q==w[2])){return{tag:w[2],from:l(r.line,r.ch),to:l(u,t)}}}}}CodeMirror.registerHelper("fold","xml",function(p,u){var r=new a(p,u.line,0);for(;;){var s=o(r),q;if(!s||r.line!=u.line||!(q=g(r))){return}if(!s[1]&&q!="selfClose"){var u=l(r.line,r.ch);var t=f(r,s[2]);return t&&{from:u,to:t.from}}}});CodeMirror.tagRangeFinder=CodeMirror.fold.xml;CodeMirror.findMatchingTag=function(p,w,s){var r=new a(p,w.line,w.ch,s);if(r.text.indexOf(">")==-1&&r.text.indexOf("<")==-1){return}var q=g(r),v=q&&l(r.line,r.ch);var u=q&&j(r);if(!q||q=="selfClose"||!u||k(r,w)>0){return}var t={from:l(r.line,r.ch),to:v,tag:u[2]};if(u[1]){return{open:c(r,u[2]),close:t,at:"close"}}else{r=new a(p,v.line,v.ch,s);return{open:t,close:f(r,u[2]),at:"open"}}};CodeMirror.findEnclosingTag=function(p,v,r){var q=new a(p,v.line,v.ch,r);for(;;){var t=c(q);if(!t){break}var s=new a(p,v.line,v.ch,r);var u=f(s,t.tag);if(u){return{open:t,close:u}}}}})();(function(){if(!CodeMirror.modeURL){CodeMirror.modeURL="../mode/%N/%N.js"}var c={};function b(d,f){var e=f;return function(){if(--e==0){d()}}}function a(j,d){var h=CodeMirror.modes[j].dependencies;if(!h){return d()}var g=[];for(var f=0;f<h.length;++f){if(!CodeMirror.modes.hasOwnProperty(h[f])){g.push(h[f])}}if(!g.length){return d()}var e=b(d,g.length);for(var f=0;f<g.length;++f){CodeMirror.requireMode(g[f],e)}}CodeMirror.requireMode=function(j,d){if(typeof j!="string"){j=j.name}if(CodeMirror.modes.hasOwnProperty(j)){return a(j,d)}if(c.hasOwnProperty(j)){return c[j].push(d)}var e=document.createElement("script");e.src=CodeMirror.modeURL.replace(/%N/g,j);var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f);var h=c[j]=[d];var g=0,i=setInterval(function(){if(++g>100){return clearInterval(i)}if(CodeMirror.modes.hasOwnProperty(j)){clearInterval(i);c[j]=null;a(j,function(){for(var k=0;k<h.length;++k){h[k]()}})}},200)};CodeMirror.autoLoadMode=function(d,e){if(!CodeMirror.modes.hasOwnProperty(e)){CodeMirror.requireMode(e,function(){d.setOption("mode",d.getOption("mode"))})}}}());(function(){var d="CodeMirror-activeline";var c="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",false,function(e,h,f){var g=f&&f!=CodeMirror.Init;if(h&&!g){b(e);e.on("cursorActivity",b)}else{if(!h&&g){e.off("cursorActivity",b);a(e);delete e.state.activeLine}}});function a(e){if("activeLine" in e.state){e.removeLineClass(e.state.activeLine,"wrap",d);e.removeLineClass(e.state.activeLine,"background",c)}}function b(e){var f=e.getLineHandleVisualStart(e.getCursor().line);if(e.state.activeLine==f){return}a(e);e.addLineClass(f,"wrap",d);e.addLineClass(f,"background",c);e.state.activeLine=f}})();(function(){var a=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["C-["],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:true,toJumplist:true}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false,toJumplist:true}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true,toJumplist:true}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:true,explicitRepeat:true}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:false,explicitRepeat:true}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true,toJumplist:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true,toJumplist:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:true}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:true}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:true,toJumplist:true}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:false,toJumplist:true}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false,toJumplist:true}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:true},motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:true}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:false}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:true,interlaceInsertRepeat:true,actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["J"],type:"action",action:"joinLines",isEdit:true},{keys:["p"],type:"action",action:"paste",isEdit:true,actionArgs:{after:true,isEdit:true}},{keys:["P"],type:"action",action:"paste",isEdit:true,actionArgs:{after:false,isEdit:true}},{keys:["r","character"],type:"action",action:"replace",isEdit:true},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:true,actionArgs:{replace:true}},{keys:["u"],type:"action",action:"undo"},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:true,backtrack:false}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:true,actionArgs:{increase:false,backtrack:false}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt",toJumplist:true}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt",toJumplist:true}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor",toJumplist:true}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor",toJumplist:true}},{keys:[":"],type:"ex"}];var b=function(){CodeMirror.defineOption("vimMode",false,function(a0,a1){if(a1){a0.setOption("keyMap","vim");CodeMirror.signal(a0,"vim-mode-change",{mode:"normal"});a0.on("beforeSelectionChange",f);u(a0)}else{if(a0.state.vim){a0.setOption("keyMap","default");a0.off("beforeSelectionChange",f);a0.state.vim=null}}});function f(a0,a3){var a1=a0.state.vim;if(a1.insertMode||a1.exMode){return}var a2=a3.head;if(a2.ch&&a2.ch==a0.doc.getLine(a2.line).length){a2.ch--}}var ax=/[\d]/;var Y=[(/\w/),(/[^\w\s]/)],aQ=[(/\S/)];function X(a3,a1){var a2=[];for(var a0=a3;a0<a3+a1;a0++){a2.push(String.fromCharCode(a0))}return a2}var M=X(65,26);var U=X(97,26);var C=X(48,10);var e="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split("");var av=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var ah=[].concat(M,U,C,["<",">"]);var h=[].concat(M,U,C,["-",'"']);function c(a0,a1){return a1>=a0.firstLine()&&a1<=a0.lastLine()}function t(a0){return(/^[a-z]$/).test(a0)}function y(a0){return"()[]{}".indexOf(a0)!=-1}function L(a0){return ax.test(a0)}function p(a0){return(/^[A-Z]$/).test(a0)}function A(a0){return(/^\s*$/).test(a0)}function w(a2,a0){for(var a1=0;a1<a0.length;a1++){if(a0[a1]==a2){return true}}return false}var W=function(){var a4=100;var a6=-1;var a3=0;var a2=0;var a1=new Array(a4);function a5(a7,a9,ba){var bb=a6%a4;var bc=a1[bb];function a8(bf){var be=++a6%a4;var bg=a1[be];if(bg){bg.clear()}a1[be]=a7.setBookmark(bf)}if(bc){var bd=bc.find();if(bd&&!aY(bd,a9)){a8(a9)}}else{a8(a9)}a8(ba);a3=a6;a2=a6-a4+1;if(a2<0){a2=0}}function a0(a7,bb){a6+=bb;if(a6>a3){a6=a3}else{if(a6<a2){a6=a2}}var bc=a1[(a4+a6)%a4];if(bc&&!bc.find()){var ba=bb>0?1:-1;var a9;var a8=a7.getCursor();do{a6+=ba;bc=a1[(a4+a6)%a4];if(bc&&(a9=bc.find())&&!aY(a8,a9)){break}}while(a6<a3&&a6>a2)}return bc}return{cachedCursor:undefined,add:a5,move:a0}};var aS=function(){return{macroKeyBuffer:[],latestRegister:undefined,inReplay:false,lastInsertModeChanges:{changes:[],expectCursorActivityForChange:false},enteredMacroMode:undefined,isMacroPlaying:false,toggle:function(a0,a1){if(this.enteredMacroMode){this.enteredMacroMode();this.enteredMacroMode=undefined}else{this.latestRegister=a1;this.enteredMacroMode=a0.openDialog("(recording)["+a1+"]",null,{bottom:true})}}}};function u(a0){if(!a0.state.vim){a0.state.vim={inputState:new ac(),lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:false,insertModeRepeat:undefined,visualMode:false,visualLine:false}}return a0.state.vim}var l;function o(){l={searchQuery:null,searchIsReversed:false,jumpList:W(),macroModeState:aS(),lastChararacterSearch:{increment:0,forward:true,selectedCharacter:""},registerController:new N({})}}var ap={buildKeyMap:function(){},getRegisterController:function(){return l.registerController},resetVimGlobalState_:o,getVimGlobalState_:function(){return l},maybeInitVimState_:u,InsertModeKey:aN,map:function(a0,a1){i.map(a0,a1)},defineEx:function(a0,a2,a1){if(a0.indexOf(a2)!==0){throw new Error('(Vim.defineEx) "'+a2+'" is not a prefix of "'+a0+'", command not registered')}aC[a0]=a1;i.commandMap_[a2]={name:a0,shortName:a2,type:"api"}},handleKey:function(a0,a3){var a5;var a1=u(a0);var a4=l.macroModeState;if(a4.enteredMacroMode){if(a3=="q"){k.exitMacroRecordMode();a1.inputState=new ac();return}}if(a3=="<Esc>"){a1.inputState=new ac();if(a1.visualMode){at(a0)}return}if(!a1.visualMode&&!aY(a0.getCursor("head"),a0.getCursor("anchor"))){a1.visualMode=true;a1.visualLine=false;CodeMirror.signal(a0,"vim-mode-change",{mode:"visual"});a0.on("mousedown",at)}if(a3!="0"||(a3=="0"&&a1.inputState.getRepeat()===0)){a5=aF.matchCommand(a3,a,a1)}if(!a5){if(L(a3)){a1.inputState.pushRepeatDigit(a3)}return}if(a5.type=="keyToKey"){for(var a2=0;a2<a5.toKeys.length;a2++){this.handleKey(a0,a5.toKeys[a2])}}else{if(a4.enteredMacroMode){v(a4,a3)}aF.processCommand(a0,a1,a5)}},handleEx:function(a0,a1){i.processCommand(a0,a1)}};function ac(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}ac.prototype.pushRepeatDigit=function(a0){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(a0)}else{this.motionRepeat=this.motionRepeat.concat(a0)}};ac.prototype.getRepeat=function(){var a0=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){a0=1;if(this.prefixRepeat.length>0){a0*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){a0*=parseInt(this.motionRepeat.join(""),10)}}return a0};function aR(a1,a0){this.clear();if(a1){this.set(a1,a0)}}aR.prototype={set:function(a1,a0){this.text=a1;this.linewise=!!a0},append:function(a1,a0){if(a0||this.linewise){this.text+="\n"+a1;this.linewise=true}else{this.text+=a1}},clear:function(){this.text="";this.linewise=false},toString:function(){return this.text}};function N(a0){this.registers=a0;this.unamedRegister=a0['"']=new aR()}N.prototype={pushText:function(a3,a1,a5,a4){if(a4&&a5.charAt(0)=="\n"){a5=a5.slice(1)+"\n"}if(a4&&a5.charAt(a5.length-1)!=="\n"){a5+="\n"}var a2=this.isValidRegister(a3)?this.getRegister(a3):null;if(!a2){switch(a1){case"yank":this.registers["0"]=new aR(a5,a4);break;case"delete":case"change":if(a5.indexOf("\n")==-1){this.registers["-"]=new aR(a5,a4)}else{this.shiftNumericRegisters_();this.registers["1"]=new aR(a5,a4)}break}this.unamedRegister.set(a5,a4);return}var a0=p(a3);if(a0){a2.append(a5,a4);this.unamedRegister.append(a5,a4)}else{a2.set(a5,a4);this.unamedRegister.set(a5,a4)}},setRegisterText:function(a0,a2,a1){this.getRegister(a0).set(a2,a1)},getRegister:function(a0){if(!this.isValidRegister(a0)){return this.unamedRegister}a0=a0.toLowerCase();if(!this.registers[a0]){this.registers[a0]=new aR()}return this.registers[a0]},isValidRegister:function(a0){return a0&&w(a0,h)},shiftNumericRegisters_:function(){for(var a0=9;a0>=2;a0--){this.registers[a0]=this.getRegister(""+(a0-1))}}};var aF={matchCommand:function(ba,a9,a3){var a7=a3.inputState;var bb=a7.keyBuffer.concat(ba);var a6=[];var a0;for(var a4=0;a4<a9.length;a4++){var a2=a9[a4];if(aP(bb,a2.keys)){if(a7.operator&&a2.type=="action"){continue}if(a2.keys[bb.length-1]=="character"){a0=bb[bb.length-1];if(a0.length>1){switch(a0){case"<CR>":a0="\n";break;case"<Space>":a0=" ";break;default:continue}}}a6.push(a2)}}function a8(bc){if(bb.length<bc.keys.length){a7.keyBuffer.push(ba);return null}else{if(bc.keys[bb.length-1]=="character"){a7.selectedCharacter=a0}a7.keyBuffer=[];return bc}}if(!a6.length){a7.keyBuffer=[];return null}else{if(a6.length==1){return a8(a6[0])}else{var a1=a3.visualMode?"visual":"normal";var a5=a6[0];for(var a4=0;a4<a6.length;a4++){if(a6[a4].context==a1){a5=a6[a4];break}}return a8(a5)}}},processCommand:function(a0,a1,a2){a1.inputState.repeatOverride=a2.repeatOverride;switch(a2.type){case"motion":this.processMotion(a0,a1,a2);break;case"operator":this.processOperator(a0,a1,a2);break;case"operatorMotion":this.processOperatorMotion(a0,a1,a2);break;case"action":this.processAction(a0,a1,a2);break;case"search":this.processSearch(a0,a1,a2);break;case"ex":case"keyToEx":this.processEx(a0,a1,a2);break;default:break}},processMotion:function(a0,a1,a2){a1.inputState.motion=a2.motion;a1.inputState.motionArgs=aM(a2.motionArgs);this.evalInput(a0,a1)},processOperator:function(a1,a2,a3){var a0=a2.inputState;if(a0.operator){if(a0.operator==a3.operator){a0.motion="expandToLine";a0.motionArgs={linewise:true};this.evalInput(a1,a2);return}else{a2.inputState=new ac()}}a0.operator=a3.operator;a0.operatorArgs=aM(a3.operatorArgs);if(a2.visualMode){this.evalInput(a1,a2)}},processOperatorMotion:function(a0,a3,a4){var a2=a3.visualMode;var a1=aM(a4.operatorMotionArgs);if(a1){if(a2&&a1.visualLine){a3.visualLine=true}}this.processOperator(a0,a3,a4);if(!a2){this.processMotion(a0,a3,a4)}},processAction:function(a1,a3,a6){var a0=a3.inputState;var a5=a0.getRepeat();var a4=!!a5;var a2=aM(a6.actionArgs)||{};if(a0.selectedCharacter){a2.selectedCharacter=a0.selectedCharacter}if(a6.operator){this.processOperator(a1,a3,a6)}if(a6.motion){this.processMotion(a1,a3,a6)}if(a6.motion||a6.operator){this.evalInput(a1,a3)}a2.repeat=a5||1;a2.repeatIsExplicit=a4;a2.registerName=a0.registerName;a3.inputState=new ac();a3.lastMotion=null;if(a6.isEdit){this.recordLastEdit(a3,a0,a6)}k[a6.action](a1,a2,a3)},processSearch:function(bd,a7,a6){if(!bd.getSearchCursor){return}var a8=a6.searchArgs.forward;aj(bd).setReversed(!a8);var a9=(a8)?"/":"?";var bb=aj(bd).getQuery();var a2=bd.getScrollInfo();function a5(bg,be,bf){try{aX(bd,bg,be,bf)}catch(bh){aO(bd,"Invalid regex: "+bg);return}aF.processMotion(bd,a7,{type:"motion",motion:"findNext",motionArgs:{forward:true,toJumplist:a6.searchArgs.toJumplist}})}function bc(be){bd.scrollTo(a2.left,a2.top);a5(be,true,true)}function a4(be,bg){var bf;try{bf=aX(bd,bg,true,true)}catch(bh){}if(bf){bd.scrollIntoView(aZ(bd,!a8,bf),30)}else{al(bd);bd.scrollTo(a2.left,a2.top)}}function a1(bg,be,bh){var bf=CodeMirror.keyName(bg);if(bf=="Esc"||bf=="Ctrl-C"||bf=="Ctrl-["){aX(bd,bb);al(bd);bd.scrollTo(a2.left,a2.top);CodeMirror.e_stop(bg);bh();bd.focus()}}switch(a6.searchArgs.querySrc){case"prompt":aA(bd,{onClose:bc,prefix:a9,desc:z,onKeyUp:a4,onKeyDown:a1});break;case"wordUnderCursor":var a3=ag(bd,false,true,false,true);var a0=true;if(!a3){a3=ag(bd,false,true,false,false);a0=false}if(!a3){return}var ba=bd.getLine(a3.start.line).substring(a3.start.ch,a3.end.ch);if(a0){ba="\\b"+ba+"\\b"}else{ba=d(ba)}l.jumpList.cachedCursor=bd.getCursor();bd.setCursor(a3.start);a5(ba,true,false);break}},processEx:function(a0,a1,a4){function a3(a5){i.processCommand(a0,a5)}function a2(a7,a6,a8){var a5=CodeMirror.keyName(a7);if(a5=="Esc"||a5=="Ctrl-C"||a5=="Ctrl-["){CodeMirror.e_stop(a7);a8();a0.focus()}}if(a4.type=="keyToEx"){i.processCommand(a0,a4.exArgs.input)}else{if(a1.visualMode){aA(a0,{onClose:a3,prefix:":",value:"'<,'>",onKeyDown:a2})}else{aA(a0,{onClose:a3,prefix:":",onKeyDown:a2})}}},evalInput:function(a4,bg){var a9=bg.inputState;var bd=a9.motion;var ba=a9.motionArgs||{};var a5=a9.operator;var bk=a9.operatorArgs||{};var bb=a9.registerName;var a1=a4.getCursor("head");var be=a4.getCursor("anchor");var a3=r(a1);var a8=r(a3);var bh;var a6;if(a5){this.recordLastEdit(bg,a9)}if(a9.repeatOverride!==undefined){a6=a9.repeatOverride}else{a6=a9.getRepeat()}if(a6>0&&ba.explicitRepeat){ba.repeatIsExplicit=true}else{if(ba.noRepeat||(!ba.explicitRepeat&&a6===0)){a6=1;ba.repeatIsExplicit=false}}if(a9.selectedCharacter){ba.selectedCharacter=bk.selectedCharacter=a9.selectedCharacter}ba.repeat=a6;bg.inputState=new ac();if(bd){var bf=aB[bd](a4,ba,bg);bg.lastMotion=aB[bd];if(!bf){return}if(ba.toJumplist){var bj=l.jumpList;var a7=bj.cachedCursor;if(a7){aK(a4,a7,bf);delete bj.cachedCursor}else{aK(a4,a8,bf)}}if(bf instanceof Array){a3=bf[0];bh=bf[1]}else{bh=bf}if(!bh){bh={ch:a3.ch,line:a3.line}}if(bg.visualMode){if(an(be,a1)&&(aY(be,bh)||an(bh,be))){be.ch+=1}else{if(an(a1,be)&&(aY(be,bh)||an(be,bh))){be.ch-=1}}a1=bh;if(bg.visualLine){if(an(be,a1)){be.ch=0;var a0=a4.lastLine();if(a1.line>a0){a1.line=a0}a1.ch=aw(a4,a1.line)}else{a1.ch=0;be.ch=aw(a4,be.line)}}a4.setSelection(be,a1);ar(a4,bg,"<",an(be,a1)?be:a1);ar(a4,bg,">",an(be,a1)?a1:be)}else{if(!a5){bh=G(a4,bh);a4.setCursor(bh.line,bh.ch)}}}if(a5){var bc=false;bg.lastMotion=null;bk.repeat=a6;if(bg.visualMode){a3=be;bh=a1;ba.inclusive=true}if(an(bh,a3)){var bi=a3;a3=bh;bh=bi;bc=true}if(ba.inclusive&&!(bg.visualMode&&bc)){bh.ch++}var a2=ba.linewise||(bg.visualMode&&bg.visualLine);if(a2){aI(a4,a3,bh)}else{if(ba.forward){T(a4,a3,bh)}}bk.registerName=bb;bk.linewise=a2;x[a5](a4,bk,bg,a3,bh,a8);if(bg.visualMode){at(a4)}}},recordLastEdit:function(a1,a0,a2){var a3=l.macroModeState;if(a3.inReplay){return}a1.lastEditInputState=a0;a1.lastEditActionCommand=a2;a3.lastInsertModeChanges.changes=[];a3.lastInsertModeChanges.expectCursorActivityForChange=false}};var aB={moveToTopLine:function(a0,a2){var a1=aH(a0).top+a2.repeat-1;return{line:a1,ch:az(a0.getLine(a1))}},moveToMiddleLine:function(a0){var a2=aH(a0);var a1=Math.floor((a2.top+a2.bottom)*0.5);return{line:a1,ch:az(a0.getLine(a1))}},moveToBottomLine:function(a0,a2){var a1=aH(a0).bottom-a2.repeat+1;return{line:a1,ch:az(a0.getLine(a1))}},expandToLine:function(a0,a1){var a2=a0.getCursor();return{line:a2.line+a1.repeat-1,ch:Infinity}},findNext:function(a0,a1){var a4=aj(a0);var a3=a4.getQuery();if(!a3){return}var a2=!a1.forward;a2=(a4.isReversed())?!a2:a2;ak(a0,a3);return aZ(a0,a2,a3,a1.repeat)},goToMark:function(a2,a1,a0){var a3=a0.marks[a1.selectedCharacter];if(a3){return a3.find()}return null},jumpToMark:function(a7,a3,a4){var a2=a7.getCursor();for(var a5=0;a5<a3.repeat;a5++){var a9=a2;for(var a8 in a4.marks){if(!t(a8)){continue}var a1=a4.marks[a8].find();var a0=(a3.forward)?an(a1,a9):an(a9,a1);if(a0){continue}if(a3.linewise&&(a1.line==a9.line)){continue}var a6=aY(a9,a2);var ba=(a3.forward)?au(a9,a1,a2):au(a2,a1,a9);if(a6||ba){a2=a1}}}if(a3.linewise){a2.ch=az(a7.getLine(a2.line))}return a2},moveByCharacters:function(a0,a1){var a4=a0.getCursor();var a3=a1.repeat;var a2=a1.forward?a4.ch+a3:a4.ch-a3;return{line:a4.line,ch:a2}},moveByLines:function(a5,a1,a2){var a7=a5.getCursor();var a3=a7.ch;switch(a2.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:a3=a2.lastHPos;break;default:a2.lastHPos=a3}var a0=a1.repeat+(a1.repeatOffset||0);var a8=a1.forward?a7.line+a0:a7.line-a0;var a4=a5.firstLine();var a6=a5.lastLine();if((a8<a4&&a7.line==a4)||(a8>a6&&a7.line==a6)){return}if(a1.toFirstChar){a3=az(a5.getLine(a8));a2.lastHPos=a3}a2.lastHSPos=a5.charCoords({line:a8,ch:a3},"div").left;return{line:a8,ch:a3}},moveByDisplayLines:function(a7,a2,a3){var a8=a7.getCursor();switch(a3.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:a3.lastHSPos=a7.charCoords(a8,"div").left}var a0=a2.repeat;var a6=a7.findPosV(a8,(a2.forward?a0:-a0),"line",a3.lastHSPos);if(a6.hitSide){if(a2.forward){var a1=a7.charCoords(a6,"div");var a4={top:a1.top+8,left:a3.lastHSPos};var a6=a7.coordsChar(a4,"div")}else{var a5=a7.charCoords({line:a7.firstLine(),ch:0},"div");a5.left=a3.lastHSPos;a6=a7.coordsChar(a5,"div")}}a3.lastHPos=a6.ch;return a6},moveByPage:function(a1,a2){var a0=a1.getCursor();var a4=a2.repeat;a1.moveV((a2.forward?a4:-a4),"page");var a3=a1.getCursor();a1.setCursor(a0);return a3},moveByParagraph:function(a0,a2){var a1=a0.getCursor().line;var a4=a2.repeat;var a5=a2.forward?1:-1;for(var a3=0;a3<a4;a3++){if((!a2.forward&&a1===a0.firstLine())||(a2.forward&&a1==a0.lastLine())){break}a1+=a5;while(a1!==a0.firstLine()&&a1!=a0.lastLine()&&a0.getLine(a1)){a1+=a5}}return{line:a1,ch:0}},moveByScroll:function(a0,a3,a1){var a7=a0.getScrollInfo();var a5=null;var a4=a3.repeat;if(!a4){a4=a7.clientHeight/(2*a0.defaultTextHeight())}var a6=a0.charCoords(a0.getCursor(),"local");a3.repeat=a4;var a5=aB.moveByDisplayLines(a0,a3,a1);if(!a5){return null}var a2=a0.charCoords(a5,"local");a0.scrollTo(null,a7.top+a2.top-a6.top);return a5},moveByWords:function(a0,a1){return ad(a0,a1.repeat,!!a1.forward,!!a1.wordEnd,!!a1.bigWord)},moveTillCharacter:function(a1,a2){var a4=a2.repeat;var a3=aT(a1,a4,a2.forward,a2.selectedCharacter);var a0=a2.forward?-1:1;ae(a0,a2);if(!a3){return a1.getCursor()}a3.ch+=a0;return a3},moveToCharacter:function(a0,a1){var a2=a1.repeat;ae(0,a1);return aT(a0,a2,a1.forward,a1.selectedCharacter)||a0.getCursor()},moveToSymbol:function(a0,a1){var a2=a1.repeat;return aU(a0,a2,a1.forward,a1.selectedCharacter)||a0.getCursor()},moveToColumn:function(a0,a2,a1){var a3=a2.repeat;a1.lastHPos=a3-1;a1.lastHSPos=a0.charCoords(a0.getCursor(),"div").left;return R(a0,a3)},moveToEol:function(a0,a4,a3){var a5=a0.getCursor();a3.lastHPos=Infinity;var a2={line:a5.line+a4.repeat-1,ch:Infinity};var a1=a0.clipPos(a2);a1.ch--;a3.lastHSPos=a0.charCoords(a1,"div").left;return a2},moveToFirstNonWhiteSpaceCharacter:function(a0){var a1=a0.getCursor();return{line:a1.line,ch:az(a0.getLine(a1.line))}},moveToMatchedSymbol:function(a6){var a8=a6.getCursor();var a9=a8.line;var a0=a8.ch;var a5=a6.getLine(a9);var a1;var a2=a6.getTokenAt(a8).type;var a4=V(a2);do{a1=a5.charAt(a0++);if(a1&&y(a1)){var a7=a6.getTokenAt({line:a9,ch:a0}).type;var a3=V(a7);if(a4>=a3){break}}}while(a1);if(a1){return Z(a6,{line:a9,ch:a0-1},a1)}else{return a8}},moveToStartOfLine:function(a0){var a1=a0.getCursor();return{line:a1.line,ch:0}},moveToLineOrEdgeOfDocument:function(a0,a1){var a2=a1.forward?a0.lastLine():a0.firstLine();if(a1.repeatIsExplicit){a2=a1.repeat-a0.getOption("firstLineNumber")}return{line:a2,ch:az(a0.getLine(a2))}},textObjectManipulation:function(a1,a3){var a5=a3.selectedCharacter;var a0=!a3.textObjectInner;if(!aV[a5]){return null}var a4=aV[a5](a1,a0);var a6=a4.start;var a2=a4.end;return[a6,a2]},repeatLastCharacterSearch:function(a2,a4){var a1=l.lastChararacterSearch;var a6=a4.repeat;var a3=a4.forward===a1.forward;var a0=(a1.increment?1:0)*(a3?-1:1);a2.moveH(-a0,"char");a4.inclusive=a3?true:false;var a5=aT(a2,a6,a3,a1.selectedCharacter);if(!a5){a2.moveH(a0,"char");return a2.getCursor()}a5.ch+=a0;return a5}};var x={change:function(a1,a5,a3,a0,a6){l.registerController.pushText(a5.registerName,"change",a1.getRange(a0,a6),a5.linewise);if(a5.linewise){var a4=a6.line>a1.lastLine()?"":"\n";a1.replaceRange(a4,a0,a6);a1.indentLine(a0.line,"smart");a0.ch=null}else{var a7=a1.getRange(a0,a6);if(!A(a7)){var a2=(/\s+$/).exec(a7);if(a2){a6=s(a6,0,-a2[0].length)}}a1.replaceRange("",a0,a6)}k.enterInsertMode(a1,{},a1.state.vim);a1.setCursor(a0)},"delete":function(a1,a3,a2,a0,a4){if(a3.linewise&&a4.line>a1.lastLine()&&a0.line>a1.firstLine()){a0.line--;a0.ch=aw(a1,a0.line)}l.registerController.pushText(a3.registerName,"delete",a1.getRange(a0,a4),a3.linewise);a1.replaceRange("",a0,a4);if(a3.linewise){a1.setCursor(aB.moveToFirstNonWhiteSpaceCharacter(a1))}else{a1.setCursor(a0)}},indent:function(a7,a2,a4,a6,a8){var a9=a6.line;var a1=a8.line;var a0=(a4.visualMode)?a2.repeat:1;if(a2.linewise){a1--}for(var a5=a9;a5<=a1;a5++){for(var a3=0;a3<a0;a3++){a7.indentLine(a5,a2.indentRight)}}a7.setCursor(a6);a7.setCursor(aB.moveToFirstNonWhiteSpaceCharacter(a7))},swapcase:function(a8,a1,a6,a7,a9,a5){var a3=a8.getRange(a7,a9);var a0="";for(var a2=0;a2<a3.length;a2++){var a4=a3.charAt(a2);a0+=p(a4)?a4.toLowerCase():a4.toUpperCase()}a8.replaceRange(a0,a7,a9);if(!a1.shouldMoveCursor){a8.setCursor(a5)}},yank:function(a1,a4,a3,a0,a5,a2){l.registerController.pushText(a4.registerName,"yank",a1.getRange(a0,a5),a4.linewise);a1.setCursor(a2)}};var k={jumpListWalk:function(a0,a2,a3){if(a3.visualMode){return}var a5=a2.repeat;var a4=a2.forward;var a1=l.jumpList;var a7=a1.move(a0,a4?a5:-a5);var a6=a7?a7.find():undefined;a6=a6?a6:a0.getCursor();a0.setCursor(a6)},scrollToCursor:function(a1,a2){var a5=a1.getCursor().line;var a3=a1.charCoords({line:a5,ch:0},"local");var a0=a1.getScrollInfo().clientHeight;var a6=a3.top;var a4=a3.bottom-a6;switch(a2.position){case"center":a6=a6-(a0/2)+a4;break;case"bottom":a6=a6-a0+a4*1.4;break;case"top":a6=a6+a4*0.4;break}a1.scrollTo(null,a6)},replayMacro:function(a0,a1){var a2=a1.selectedCharacter;var a3=a1.repeat;var a4=l.macroModeState;if(a2=="@"){a2=a4.latestRegister}var a5=E(a4,a2);while(a3--){Q(a0,a4,a5)}},exitMacroRecordMode:function(){var a0=l.macroModeState;a0.toggle();ao(a0.latestRegister,a0.macroKeyBuffer)},enterMacroRecordMode:function(a0,a1){var a3=l.macroModeState;var a2=a1.selectedCharacter;a3.toggle(a0,a2);aJ(a3)},enterInsertMode:function(a0,a1,a2){if(a0.getOption("readOnly")){return}a2.insertMode=true;a2.insertModeRepeat=a1&&a1.repeat||1;var a3=(a1)?a1.insertAt:null;if(a3=="eol"){var a4=a0.getCursor();a4={line:a4.line,ch:aw(a0,a4.line)};a0.setCursor(a4)}else{if(a3=="charAfter"){a0.setCursor(s(a0.getCursor(),0,1))}else{if(a3=="firstNonBlank"){a0.setCursor(aB.moveToFirstNonWhiteSpaceCharacter(a0))}}}a0.setOption("keyMap","vim-insert");if(a1&&a1.replace){a0.toggleOverwrite(true);a0.setOption("keyMap","vim-replace");CodeMirror.signal(a0,"vim-mode-change",{mode:"replace"})}else{a0.setOption("keyMap","vim-insert");CodeMirror.signal(a0,"vim-mode-change",{mode:"insert"})}if(!l.macroModeState.inReplay){a0.on("change",aL);a0.on("cursorActivity",H);CodeMirror.on(a0.getInputField(),"keydown",D)}},toggleVisualMode:function(a1,a2,a3){var a5=a2.repeat;var a0=a1.getCursor();var a4;if(!a3.visualMode){a1.on("mousedown",at);a3.visualMode=true;a3.visualLine=!!a2.linewise;if(a3.visualLine){a0.ch=0;a4=G(a1,{line:a0.line+a5-1,ch:aw(a1,a0.line)},true)}else{a4=G(a1,{line:a0.line,ch:a0.ch+a5},true)}if(!a2.repeatIsExplicit&&!a3.visualLine){a1.setCursor(a4);a1.setSelection(a4,a0)}else{a1.setSelection(a0,a4)}CodeMirror.signal(a1,"vim-mode-change",{mode:"visual",subMode:a3.visualLine?"linewise":""})}else{a0=a1.getCursor("anchor");a4=a1.getCursor("head");if(!a3.visualLine&&a2.linewise){a3.visualLine=true;a0.ch=an(a0,a4)?0:aw(a1,a0.line);a4.ch=an(a0,a4)?aw(a1,a4.line):0;a1.setSelection(a0,a4);CodeMirror.signal(a1,"vim-mode-change",{mode:"visual",subMode:"linewise"})}else{if(a3.visualLine&&!a2.linewise){a3.visualLine=false;CodeMirror.signal(a1,"vim-mode-change",{mode:"visual"})}else{at(a1)}}}ar(a1,a3,"<",an(a0,a4)?a0:a4);ar(a1,a3,">",an(a0,a4)?a4:a0)},joinLines:function(a1,a2,a3){var a0,a5;if(a3.visualMode){a0=a1.getCursor("anchor");a5=a1.getCursor("head");a5.ch=aw(a1,a5.line)-1}else{var a4=Math.max(a2.repeat,2);a0=a1.getCursor();a5=G(a1,{line:a0.line+a4-1,ch:Infinity})}var a6=0;a1.operation(function(){for(var a9=a0.line;a9<a5.line;a9++){a6=aw(a1,a0.line);var a8={line:a0.line+1,ch:aw(a1,a0.line+1)};var ba=a1.getRange(a0,a8);ba=ba.replace(/\n\s*/g," ");a1.replaceRange(ba,a0,a8)}var a7={line:a0.line,ch:a6};a1.setCursor(a7)})},newLineAndEnterInsertMode:function(a0,a1,a2){a2.insertMode=true;var a3=a0.getCursor();if(a3.line===a0.firstLine()&&!a1.after){a0.replaceRange("\n",{line:a0.firstLine(),ch:0});a0.setCursor(a0.firstLine(),0)}else{a3.line=(a1.after)?a3.line:a3.line-1;a3.ch=aw(a0,a3.line);a0.setCursor(a3);var a4=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;a4(a0)}this.enterInsertMode(a0,{repeat:a1.repeat},a2)},paste:function(a4,a0){var a5=a4.getCursor();var a6=l.registerController.getRegister(a0.registerName);if(!a6.text){return}for(var a7="",a1=0;a1<a0.repeat;a1++){a7+=a6.text}var a8=a6.linewise;if(a8){if(a0.after){a7="\n"+a7.slice(0,a7.length-1);a5.ch=aw(a4,a5.line)}else{a5.ch=0}}else{a5.ch+=a0.after?1:0}a4.replaceRange(a7,a5);var a2;var a3;if(a8&&a0.after){a2={line:a5.line+1,ch:az(a4.getLine(a5.line+1))}}else{if(a8&&!a0.after){a2={line:a5.line,ch:az(a4.getLine(a5.line))}}else{if(!a8&&a0.after){a3=a4.indexFromPos(a5);a2=a4.posFromIndex(a3+a7.length-1)}else{a3=a4.indexFromPos(a5);a2=a4.posFromIndex(a3+a7.length)}}}a4.setCursor(a2)},undo:function(a0,a1){a0.operation(function(){aa(a0,CodeMirror.commands.undo,a1.repeat)();a0.setCursor(a0.getCursor("anchor"))})},redo:function(a0,a1){aa(a0,CodeMirror.commands.redo,a1.repeat)()},setRegister:function(a2,a0,a1){a1.inputState.registerName=a0.selectedCharacter},setMark:function(a0,a1,a2){var a3=a1.selectedCharacter;ar(a0,a2,a3,a0.getCursor())},replace:function(a6,a1,a3){var a2=a1.selectedCharacter;var a5=a6.getCursor();var a4;var a7;if(a3.visualMode){a5=a6.getCursor("start");a7=a6.getCursor("end");a7=a6.clipPos({line:a7.line,ch:a7.ch+1})}else{var a8=a6.getLine(a5.line);a4=a5.ch+a1.repeat;if(a4>a8.length){a4=a8.length}a7={line:a5.line,ch:a4}}if(a2=="\n"){if(!a3.visualMode){a6.replaceRange("",a5,a7)}(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(a6)}else{var a0=a6.getRange(a5,a7);a0=a0.replace(/[^\n]/g,a2);a6.replaceRange(a0,a5,a7);if(a3.visualMode){a6.setCursor(a5);at(a6)}else{a6.setCursor(s(a7,0,-1))}}},incrementNumberToken:function(ba,a1){var bb=ba.getCursor();var a6=ba.getLine(bb.line);var bd=/-?\d+/g;var a5;var a0;var a4;var bc;var a2;while((a5=bd.exec(a6))!==null){a2=a5[0];a0=a5.index;a4=a0+a2.length;if(bb.ch<a4){break}}if(!a1.backtrack&&(a4<=bb.ch)){return}if(a2){var a9=a1.increase?1:-1;var a3=parseInt(a2)+(a9*a1.repeat);var a8={ch:a0,line:bb.line};var a7={ch:a4,line:bb.line};bc=a3.toString();ba.replaceRange(bc,a8,a7)}else{return}ba.setCursor({line:bb.line,ch:a0+bc.length-1})},repeatLastEdit:function(a1,a2,a3){var a0=a3.lastEditInputState;if(!a0){return}var a4=a2.repeat;if(a4&&a2.repeatIsExplicit){a3.lastEditInputState.repeatOverride=a4}else{a4=a3.lastEditInputState.repeatOverride||a4}n(a1,a3,a4,false)}};var aV={w:function(a1,a0){return ag(a1,a0,true,false)},W:function(a1,a0){return ag(a1,a0,true,true)},"{":function(a1,a0){return j(a1,"}",a0)},"(":function(a1,a0){return j(a1,")",a0)},"[":function(a1,a0){return j(a1,"]",a0)},"'":function(a1,a0){return aq(a1,"'",a0)},'"':function(a1,a0){return aq(a1,'"',a0)}};function G(a1,a5,a3){var a2=Math.min(Math.max(a1.firstLine(),a5.line),a1.lastLine());var a0=aw(a1,a2)-1;a0=(a3)?a0+1:a0;var a4=Math.min(Math.max(0,a5.ch),a0);return{line:a2,ch:a4}}function aM(a1){var a0={};for(var a2 in a1){if(a1.hasOwnProperty(a2)){a0[a2]=a1[a2]}}return a0}function s(a1,a0,a2){return{line:a1.line+a0,ch:a1.ch+a2}}function aP(a2,a0){for(var a1=0;a1<a2.length;a1++){if(a2[a1]!=a0[a1]&&a0[a1]!="character"){return false}}return true}function aa(a0,a1,a2){return function(){for(var a3=0;a3<a2;a3++){a1(a0)}}}function r(a0){return{line:a0.line,ch:a0.ch}}function aY(a1,a0){return a1.ch==a0.ch&&a1.line==a0.line}function an(a1,a0){if(a1.line<a0.line){return true}if(a1.line==a0.line&&a1.ch<a0.ch){return true}return false}function au(a3,a2,a1){var a4=an(a3,a2);var a0=an(a2,a1);return a4&&a0}function aw(a0,a1){return a0.getLine(a1).length}function g(a0){return a0.split("").reverse().join("")}function aE(a0){if(a0.trim){return a0.trim()}return a0.replace(/^\s+|\s+$/g,"")}function d(a0){return a0.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function at(a0){a0.off("mousedown",at);var a1=a0.state.vim;a1.visualMode=false;a1.visualLine=false;var a2=a0.getCursor("anchor");var a3=a0.getCursor("head");if(!aY(a2,a3)){a0.setCursor(G(a0,a3))}CodeMirror.signal(a0,"vim-mode-change",{mode:"normal"})}function T(a1,a0,a5){var a4=a1.getRange(a0,a5);if(/\n\s*$/.test(a4)){var a3=a4.split("\n");a3.pop();var a2;for(var a2=a3.pop();a3.length>0&&a2&&A(a2);a2=a3.pop()){a5.line--;a5.ch=0}if(a2){a5.line--;a5.ch=aw(a1,a5.line)}else{a5.ch=0}}}function aI(a1,a0,a2){a0.ch=0;a2.ch=0;a2.line++}function az(a1){if(!a1){return 0}var a0=a1.search(/\S/);return a0==-1?a1.length:a0}function ag(a9,a5,bj,a1,bk){var a3=a9.getCursor();var bc=a9.getLine(a3.line);var bf=a3.ch;var be=bc.substring(bf);var bg;if(bk){bg=be.search(/\w/)}else{bg=be.search(/\S/)}if(bg==-1){return null}bf+=bg;be=bc.substring(bf);var bi=bc.substring(0,bf);var bl;if(a1){bl=/^\S+/}else{if((/\w/).test(bc.charAt(bf))){bl=/^\w+/}else{bl=/^[^\w\s]+/}}var a6=bl.exec(be);var bd=bf;var a2=bf+a6[0].length;var a4=g(bi);var ba=bl.exec(a4);if(ba){bd-=ba[0].length}if(a5){var bb=bc.substring(a2);var a0=bb.match(/^\s*/)[0].length;if(a0>0){a2+=a0}else{var a8=a4.length-bd;var a7=a4.substring(a8);var bh=a7.match(/^\s*/)[0].length;bd-=bh}}return{start:{line:a3.line,ch:bd},end:{line:a3.line,ch:a2}}}function aK(a0,a1,a2){if(!aY(a1,a2)){l.jumpList.add(a0,a1,a2)}}function ae(a0,a1){l.lastChararacterSearch.increment=a0;l.lastChararacterSearch.forward=a1.forward;l.lastChararacterSearch.selectedCharacter=a1.selectedCharacter}var B={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"};var ay={bracket:{isComplete:function(a0){if(a0.nextCh===a0.symb){a0.depth++;if(a0.depth>=1){return true}}else{if(a0.nextCh===a0.reverseSymb){a0.depth--}}return false}},section:{init:function(a0){a0.curMoveThrough=true;a0.symb=(a0.forward?"]":"[")===a0.symb?"{":"}"},isComplete:function(a0){return a0.index===0&&a0.nextCh===a0.symb}},comment:{isComplete:function(a1){var a0=a1.lastCh==="*"&&a1.nextCh==="/";a1.lastCh=a1.nextCh;return a0}},method:{init:function(a0){a0.symb=(a0.symb==="m"?"{":"}");a0.reverseSymb=a0.symb==="{"?"}":"{"},isComplete:function(a0){if(a0.nextCh===a0.symb){return true}return false}},preprocess:{init:function(a0){a0.index=0},isComplete:function(a1){if(a1.nextCh==="#"){var a0=a1.lineText.match(/#(\w+)/)[1];if(a0==="endif"){if(a1.forward&&a1.depth===0){return true}a1.depth++}else{if(a0==="if"){if(!a1.forward&&a1.depth===0){return true}a1.depth--}}if(a0==="else"&&a1.depth===0){return true}}return false}}};function aU(a9,a1,a4,a2){var bc=a9.getCursor();var ba=a4?1:-1;var a3=a4?a9.lineCount():-1;var a8=bc.ch;var be=bc.line;var a7=a9.getLine(be);var a0={lineText:a7,nextCh:a7.charAt(a8),lastCh:null,index:a8,symb:a2,reverseSymb:(a4?{")":"(","}":"{"}:{"(":")","{":"}"})[a2],forward:a4,depth:0,curMoveThrough:false};var a5=B[a2];if(!a5){return bc}var bd=ay[a5].init;var bb=ay[a5].isComplete;if(bd){bd(a0)}while(be!==a3&&a1){a0.index+=ba;a0.nextCh=a0.lineText.charAt(a0.index);if(!a0.nextCh){be+=ba;a0.lineText=a9.getLine(be)||"";if(ba>0){a0.index=0}else{var a6=a0.lineText.length;a0.index=(a6>0)?(a6-1):0}a0.nextCh=a0.lineText.charAt(a0.index)}if(bb(a0)){bc.line=be;bc.ch=a0.index;a1--}}if(a0.nextCh||a0.curMoveThrough){return{line:be,ch:a0.index}}return bc}function aW(ba,bb,a3,a8,a9){var a4=bb.line;var a7=bb.ch;var be=ba.getLine(a4);var a1=a3?1:-1;var a5=a8?aQ:Y;if(a9&&be==""){a4+=a1;be=ba.getLine(a4);if(!c(ba,a4)){return null}a7=(a3)?0:be.length}while(true){if(a9&&be==""){return{from:0,to:0,line:a4}}var a6=(a1>0)?be.length:-1;var bd=a6,bc=a6;while(a7!=a6){var a0=false;for(var a2=0;a2<a5.length&&!a0;++a2){if(a5[a2].test(be.charAt(a7))){bd=a7;while(a7!=a6&&a5[a2].test(be.charAt(a7))){a7+=a1}bc=a7;a0=bd!=bc;if(bd==bb.ch&&a4==bb.line&&bc==bd+a1){continue}else{return{from:Math.min(bd,bc+1),to:Math.max(bd,bc),line:a4}}}}if(!a0){a7+=a1}}a4+=a1;if(!c(ba,a4)){return null}be=ba.getLine(a4);a7=(a1>0)?0:be.length}throw new Error("The impossible happened.")}function ad(ba,a1,a5,be,a8){var bc=ba.getCursor();var a6=r(bc);var a7=[];if(a5&&!be||!a5&&be){a1++}var a9=!(a5&&be);for(var a3=0;a3<a1;a3++){var a0=aW(ba,bc,a5,a8,a9);if(!a0){var a2=aw(ba,ba.lastLine());a7.push(a5?{line:ba.lastLine(),from:a2,to:a2}:{line:0,from:0,to:0});break}a7.push(a0);bc={line:a0.line,ch:a5?(a0.to-1):a0.from}}var a4=a7.length!=a1;var bb=a7[0];var bd=a7.pop();if(a5&&!be){if(!a4&&(bb.from!=a6.ch||bb.line!=a6.line)){bd=a7.pop()}return{line:bd.line,ch:bd.from}}else{if(a5&&be){return{line:bd.line,ch:bd.to-1}}else{if(!a5&&be){if(!a4&&(bb.to!=a6.ch||bb.line!=a6.line)){bd=a7.pop()}return{line:bd.line,ch:bd.to}}else{return{line:bd.line,ch:bd.from}}}}}function aT(a5,a1,a3,a4){var a7=a5.getCursor();var a0=a7.ch;var a6;for(var a2=0;a2<a1;a2++){var a8=a5.getLine(a7.line);a6=aG(a0,a8,a4,a3,true);if(a6==-1){return null}a0=a6}return{line:a5.getCursor().line,ch:a6}}function R(a0,a2){var a1=a0.getCursor().line;return G(a0,{line:a1,ch:a2-1})}function ar(a0,a1,a2,a3){if(!w(a2,ah)){return}if(a1.marks[a2]){a1.marks[a2].clear()}a1.marks[a2]=a0.setBookmark(a3)}function aG(a5,a1,a4,a2,a3){var a0;if(a2){a0=a1.indexOf(a4,a5+1);if(a0!=-1&&!a3){a0-=1}}else{a0=a1.lastIndexOf(a4,a5-1);if(a0!=-1&&!a3){a0+=1}}return a0}function V(a0){return(a0==="string"||a0==="comment")?1:0}function Z(bc,bd,a2){var bf=bd.line;var a1=bd.ch;a2=a2?a2:bc.getLine(bf).charAt(a1);var be=bc.getTokenAt({line:bf,ch:a1+1}).type;var bg=V(be);var a4=({"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"})[a2];if(!a4){return bd}var bb=({"(":1,"{":1,"[":1})[a2]||-1;var a3=bb===1?bc.lineCount():-1;var a6=1,a0=a2,a8=a1,ba=bc.getLine(bf);while(bf!==a3&&a6>0){a8+=bb;a0=ba.charAt(a8);if(!a0){bf+=bb;ba=bc.getLine(bf)||"";if(bb>0){a8=0}else{var a9=ba.length;a8=(a9>0)?(a9-1):0}a0=ba.charAt(a8)}var a7=bc.getTokenAt({line:bf,ch:a8+1}).type;var a5=V(a7);if(bg>=a5){if(a0===a2){a6++}else{if(a0===a4){a6--}}}}if(a0){return{line:bf,ch:a8}}return bd}function j(a1,a4,a0){var a3=a1.getCursor();var a2=Z(a1,a3,a4);var a5=Z(a1,a2);a5.ch+=a0?1:0;a2.ch+=a0?0:1;return{start:a5,end:a2}}function aq(a8,a2,a7){var a9=a8.getCursor();var ba=a8.getLine(a9.line);var a6=ba.split("");var a1,a3,a4,a5;var a0=a6.indexOf(a2);if(a9.ch<a0){a9.ch=a0}else{if(a0<a9.ch&&a6[a9.ch]==a2){a3=a9.ch;--a9.ch}}if(a6[a9.ch]==a2&&!a3){a1=a9.ch+1}else{for(a4=a9.ch;a4>-1&&!a1;a4--){if(a6[a4]==a2){a1=a4+1}}}if(a1&&!a3){for(a4=a1,a5=a6.length;a4<a5&&!a3;a4++){if(a6[a4]==a2){a3=a4}}}if(!a1||!a3){return{start:a9,end:a9}}if(a7){--a1;++a3}return{start:{line:a9.line,ch:a1},end:{line:a9.line,ch:a3}}}function J(){}J.prototype={getQuery:function(){return l.query},setQuery:function(a0){l.query=a0},getOverlay:function(){return this.searchOverlay},setOverlay:function(a0){this.searchOverlay=a0},isReversed:function(){return l.isReversed},setReversed:function(a0){l.isReversed=a0}};function aj(a0){var a1=a0.state.vim;return a1.searchState_||(a1.searchState_=new J())}function I(a0,a3,a4,a1,a2){if(a0.openDialog){a0.openDialog(a3,a1,{bottom:true,value:a2.value,onKeyDown:a2.onKeyDown,onKeyUp:a2.onKeyUp})}else{a1(prompt(a4,""))}}function S(a3){var a1=false;var a2=[];for(var a0=0;a0<a3.length;a0++){var a4=a3.charAt(a0);if(!a1&&a4=="/"){a2.push(a0)}a1=(a4=="\\")}return a2}function ab(a7,a1,a3){if(a7 instanceof RegExp){return a7}var a5=S(a7);var a2;var a0;if(!a5.length){a2=a7}else{a2=a7.substring(0,a5[0]);var a4=a7.substring(a5[0]);a0=(a4.indexOf("i")!=-1)}if(!a2){return null}if(a3){a1=(/^[^A-Z]*$/).test(a2)}var a6=new RegExp(a2,(a1||a0)?"i":undefined);return a6}function aO(a0,a1){if(a0.openNotification){a0.openNotification('<span style="color: red">'+a1+"</span>",{bottom:true,duration:5000})}else{alert(a1)}}function ai(a1,a2){var a0="";if(a1){a0+='<span style="font-family: monospace">'+a1+"</span>"}a0+='<input type="text"/> <span style="color: #888">';if(a2){a0+='<span style="color: #888">';a0+=a2;a0+="</span>"}return a0}var z="(Javascript regexp)";function aA(a1,a2){var a3=(a2.prefix||"")+" "+(a2.desc||"");var a0=ai(a2.prefix,a2.desc);I(a1,a0,a3,a2.onClose,a2)}function F(a1,a0){if(a1 instanceof RegExp&&a0 instanceof RegExp){var a3=["global","multiline","ignoreCase","source"];for(var a2=0;a2<a3.length;a2++){var a4=a3[a2];if(a1[a4]!==a0[a4]){return false}}return true}return false}function aX(a0,a5,a1,a2){if(!a5){return}var a4=aj(a0);var a3=ab(a5,!!a1,!!a2);if(!a3){return}ak(a0,a3);if(F(a3,a4.getQuery())){return a3}a4.setQuery(a3);return a3}function am(a1){if(a1.source.charAt(0)=="^"){var a0=true}return{token:function(a3){if(a0&&!a3.sol()){a3.skipToEnd();return}var a2=a3.match(a1,false);if(a2){if(a2[0].length==0){a3.next();return"searching"}if(!a3.sol()){a3.backUp(1);if(!a1.exec(a3.next()+a2[0])){a3.next();return null}}a3.match(a1);return"searching"}while(!a3.eol()){a3.next();if(a3.match(a1,false)){break}}},query:a1}}function ak(a0,a2){var a1=aj(a0).getOverlay();if(!a1||a2!=a1.query){if(a1){a0.removeOverlay(a1)}a1=am(a2);a0.addOverlay(a1);aj(a0).setOverlay(a1)}}function aZ(a0,a1,a3,a2){if(a2===undefined){a2=1}return a0.operation(function(){var a7=a0.getCursor();var a6=a0.getSearchCursor(a3,a7);for(var a4=0;a4<a2;a4++){var a5=a6.find(a1);if(a4==0&&a5&&aY(a6.from(),a7)){a5=a6.find(a1)}if(!a5){a6=a0.getSearchCursor(a3,(a1)?{line:a0.lastLine()}:{line:a0.firstLine(),ch:0});if(!a6.find(a1)){return}}}return a6.from()})}function al(a0){a0.removeOverlay(aj(a0).getOverlay());aj(a0).setOverlay(null)}function K(a2,a1,a0){if(typeof a2!="number"){a2=a2.line}if(a1 instanceof Array){return w(a2,a1)}else{if(a0){return(a2>=a1&&a2<=a0)}else{return a2==a1}}}function aH(a0){var a3=a0.getScrollInfo();var a2=6;var a6=10;var a5=a0.coordsChar({left:0,top:a2+a3.top},"local");var a1=a3.clientHeight-a6+a3.top;var a4=a0.coordsChar({left:0,top:a1},"local");return{top:a5.line,bottom:a4.line}}var q=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"sort",shortName:"sor",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"},{name:"nohlsearch",shortName:"noh",type:"builtIn"},{name:"delmarks",shortName:"delm",type:"builtin"}];b.ExCommandDispatcher=function(){this.buildCommandMap_()};b.ExCommandDispatcher.prototype={processCommand:function(a8,a7){var a3=a8.state.vim;if(a3.visualMode){at(a8)}var a0=new CodeMirror.StringStream(a7);var a1={};a1.input=a7;try{this.parseInput_(a8,a0,a1)}catch(a6){aO(a8,a6);return}var a5;if(!a1.commandName){if(a1.line!==undefined){a5="move"}}else{var a2=this.matchCommand_(a1.commandName);if(a2){a5=a2.name;this.parseCommandArgs_(a0,a1,a2);if(a2.type=="exToKey"){for(var a4=0;a4<a2.toKeys.length;a4++){CodeMirror.Vim.handleKey(a8,a2.toKeys[a4])}return}else{if(a2.type=="exToEx"){this.processCommand(a8,a2.toInput);return}}}}if(!a5){aO(a8,'Not an editor command ":'+a7+'"');return}try{aC[a5](a8,a1)}catch(a6){aO(a8,a6)}},parseInput_:function(a1,a2,a0){a2.eatWhile(":");if(a2.eat("%")){a0.line=a1.firstLine();a0.lineEnd=a1.lastLine()}else{a0.line=this.parseLineSpec_(a1,a2);if(a0.line!==undefined&&a2.eat(",")){a0.lineEnd=this.parseLineSpec_(a1,a2)}}var a3=a2.match(/^(\w+)/);if(a3){a0.commandName=a3[1]}else{a0.commandName=a2.match(/.*/)[0]}return a0},parseLineSpec_:function(a0,a1){var a2=a1.match(/^(\d+)/);if(a2){return parseInt(a2[1],10)-1}switch(a1.next()){case".":return a0.getCursor().line;case"$":return a0.lastLine();case"'":var a3=a0.state.vim.marks[a1.next()];if(a3&&a3.find()){return a3.find().line}throw new Error("Mark not set");default:a1.backUp(1);return undefined}},parseCommandArgs_:function(a1,a4,a3){if(a1.eol()){return}a4.argString=a1.match(/.*/)[0];var a2=a3.argDelimiter||/\s+/;var a0=aE(a4.argString).split(a2);if(a0.length&&a0[0]){a4.args=a0}},matchCommand_:function(a1){for(var a0=a1.length;a0>0;a0--){var a2=a1.substring(0,a0);if(this.commandMap_[a2]){var a3=this.commandMap_[a2];if(a3.name.indexOf(a1)===0){return a3}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var a1=0;a1<q.length;a1++){var a2=q[a1];var a0=a2.shortName||a2.name;this.commandMap_[a0]=a2}},map:function(a0,a2){if(a0!=":"&&a0.charAt(0)==":"){var a1=a0.substring(1);if(a2!=":"&&a2.charAt(0)==":"){this.commandMap_[a1]={name:a1,type:"exToEx",toInput:a2.substring(1)}}else{this.commandMap_[a1]={name:a1,type:"exToKey",toKeys:P(a2)}}}else{if(a2!=":"&&a2.charAt(0)==":"){a.unshift({keys:P(a0),type:"keyToEx",exArgs:{input:a2.substring(1)}})}else{a.unshift({keys:P(a0),type:"keyToKey",toKeys:P(a2)})}}}};function P(a3){var a1,a0;var a2=[];while(a3){a0=(/<\w+-.+?>|<\w+>|./).exec(a3);if(a0===null){break}a1=a0[0];a3=a3.substring(a0.index+a1.length);a2.push(a1)}return a2}var aC={map:function(a0,a2){var a1=a2.args;if(!a1||a1.length<2){if(a0){aO(a0,"Invalid mapping: "+a2.input)}return}i.map(a1[0],a1[1],a0)},move:function(a0,a1){aF.processCommand(a0,a0.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:a1.line+1})},sort:function(a8,bi){var a9,a3,a1,a2;function a4(){if(bi.argString){var bm=new CodeMirror.StringStream(bi.argString);if(bm.eat("!")){a9=true}if(bm.eol()){return}if(!bm.eatSpace()){throw new Error("invalid arguments "+bm.match(/.*/)[0])}var bo=bm.match(/[a-z]+/);if(bo){bo=bo[0];a3=bo.indexOf("i")!=-1;a1=bo.indexOf("u")!=-1;var bl=bo.indexOf("d")!=-1&&1;var bn=bo.indexOf("x")!=-1&&1;var bk=bo.indexOf("o")!=-1&&1;if(bl+bn+bk>1){throw new Error("invalid arguments")}a2=bl&&"decimal"||bn&&"hex"||bk&&"octal"}if(bm.eatSpace()&&bm.match(/\/.*\//)){throw new Error("patterns not supported")}}}a4();var bd=bi.line||a8.firstLine();var bh=bi.lineEnd||bi.line||a8.lastLine();if(bd==bh){return}var a7={line:bd,ch:0};var bf={line:bh,ch:aw(a8,bh)};var bc=a8.getRange(a7,bf).split("\n");var a5=(a2=="decimal")?/(-?)([\d]+)/:(a2=="hex")?/(-?)(?:0x)?([0-9a-f]+)/i:(a2=="octal")?/([0-7]+)/:null;var a6=(a2=="decimal")?10:(a2=="hex")?16:(a2=="octal")?8:null;var ba=[],be=[];if(a2){for(var bg=0;bg<bc.length;bg++){if(a5.exec(bc[bg])){ba.push(bc[bg])}else{be.push(bc[bg])}}}else{be=bc}function bj(bl,bk){if(a9){var bm;bm=bl;bl=bk;bk=bm}if(a3){bl=bl.toLowerCase();bk=bk.toLowerCase()}var bo=a2&&a5.exec(bl);var bn=a2&&a5.exec(bk);if(!bo){return bl<bk?-1:1}bo=parseInt((bo[1]+bo[2]).toLowerCase(),a6);bn=parseInt((bn[1]+bn[2]).toLowerCase(),a6);return bo-bn}ba.sort(bj);be.sort(bj);bc=(!a9)?be.concat(ba):ba.concat(be);if(a1){var bb=bc;var a0;bc=[];for(var bg=0;bg<bb.length;bg++){if(bb[bg]!=a0){bc.push(bb[bg])}a0=bb[bg]}}a8.replaceRange(bc.join("\n"),a7,bf)},substitute:function(be,a3){if(!be.getSearchCursor){throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.")}var a1=a3.argString;var bd=S(a1);if(bd[0]!==0){aO(be,"Substitutions should be of the form :s/pattern/replace/");return}var bg=a1.substring(bd[0]+1,bd[1]);var a7="";var a8;var a9;var a0=false;if(bd[1]){a7=a1.substring(bd[1]+1,bd[2])}if(bd[2]){var a6=a1.substring(bd[2]+1).split(" ");a8=a6[0];a9=parseInt(a6[1])}if(a8){if(a8.indexOf("c")!=-1){a0=true;a8.replace("c","")}bg=bg+"/"+a8}if(bg){try{aX(be,bg,true,true)}catch(bb){aO(be,"Invalid regex: "+bg);return}}var a2=aj(be);var bc=a2.getQuery();var a5=(a3.line!==undefined)?a3.line:be.getCursor().line;var a4=a3.lineEnd||a5;if(a9){a5=a4;a4=a5+a9-1}var ba=G(be,{line:a5,ch:0});var bf=be.getSearchCursor(bc,ba);aD(be,a0,a5,a4,bf,bc,a7)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(a0){if(CodeMirror.commands.save){CodeMirror.commands.save(a0)}else{a0.save()}},nohlsearch:function(a0){al(a0)},delmarks:function(ba,a5){if(!a5.argString||!a5.argString.trim()){aO(ba,"Argument required");return}var a0=ba.state.vim;var bb=new CodeMirror.StringStream(a5.argString.trim());while(!bb.eol()){bb.eatSpace();var a8=bb.pos;if(!bb.match(/[a-zA-Z]/,false)){aO(ba,"Invalid argument: "+a5.argString.substring(a8));return}var a2=bb.next();if(bb.match("-",true)){if(!bb.match(/[a-zA-Z]/,false)){aO(ba,"Invalid argument: "+a5.argString.substring(a8));return}var a3=a2;var a7=bb.next();if(t(a3)&&t(a7)||p(a3)&&p(a7)){var a1=a3.charCodeAt(0);var a9=a7.charCodeAt(0);if(a1>=a9){aO(ba,"Invalid argument: "+a5.argString.substring(a8));return}for(var a6=0;a6<=a9-a1;a6++){var a4=String.fromCharCode(a1+a6);delete a0.marks[a4]}}else{aO(ba,"Invalid argument: "+a3+"-");return}}else{delete a0.marks[a2]}}}};var i=new b.ExCommandDispatcher();function aD(bd,a1,a8,a5,a2,ba,a4){bd.state.vim.exMode=true;var a6=false;var bc=a2.from();function a9(){bd.operation(function(){while(!a6){a3();a7()}bb()})}function a3(){var bf=bd.getRange(a2.from(),a2.to());var be=bf.replace(ba,a4);a2.replace(be)}function a7(){var be=a2.findNext();if(!be){a6=true}else{if(K(a2.from(),a8,a5)){bd.scrollIntoView(a2.from(),30);bd.setSelection(a2.from(),a2.to());bc=a2.from();a6=false}else{a6=true}}}function bb(bf){if(bf){bf()}bd.focus();if(bc){bd.setCursor(bc);var be=bd.state.vim;be.exMode=false;be.lastHPos=be.lastHSPos=bc.ch}}function a0(bg,be,bh){CodeMirror.e_stop(bg);var bf=CodeMirror.keyName(bg);switch(bf){case"Y":a3();a7();break;case"N":a7();break;case"A":bd.operation(a9);break;case"L":a3();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":bb(bh);break}if(a6){bb(bh)}}a7();if(a6){throw new Error("No matches for "+ba.source)}if(!a1){a9();return}aA(bd,{prefix:"replace with <strong>"+a4+"</strong> (y/n/a/q/l)",onKeyDown:a0})}function af(){function a2(a6,a5){var a4=a6;if(p(a4)){if(a5=="Shift"){a5=null}else{a4=a4.toLowerCase()}}if(a5){a4=a5.charAt(0)+"-"+a4}var a7=({Enter:"CR",Backspace:"BS",Delete:"Del"})[a4];a4=a7?a7:a4;a4=a4.length>1?"<"+a4+">":a4;return a4}function a1(a4){return function(a5){CodeMirror.Vim.handleKey(a5,a4)}}var a0={nofallthrough:true,disableInput:true,style:"fat-cursor"};function a3(a9,a5){for(var a8=0;a8<a9.length;a8++){var a7=a9[a8];if(!a5&&w(a7,e)){a7="'"+a7+"'"}var a4=a2(a9[a8],a5);var a6=a5?a5+"-"+a7:a7;a0[a6]=a1(a4)}}a3(M);a3(M,"Shift");a3(M,"Ctrl");a3(e);a3(e,"Ctrl");a3(C);a3(C,"Ctrl");a3(av);a3(av,"Ctrl");return a0}CodeMirror.keyMap.vim=af();function m(a0){var a2=a0.state.vim;var a1=l.macroModeState.inReplay;if(!a1){a0.off("change",aL);a0.off("cursorActivity",H);CodeMirror.off(a0.getInputField(),"keydown",D)}if(!a1&&a2.insertModeRepeat>1){n(a0,a2,a2.insertModeRepeat-1,true);a2.lastEditInputState.repeatOverride=a2.insertModeRepeat}delete a2.insertModeRepeat;a0.setCursor(a0.getCursor().line,a0.getCursor().ch-1,true);a2.insertMode=false;a0.setOption("keyMap","vim");a0.toggleOverwrite(false);CodeMirror.signal(a0,"vim-mode-change",{mode:"normal"})}CodeMirror.keyMap["vim-insert"]={Esc:m,"Ctrl-[":m,"Ctrl-C":m,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(a0){var a1=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;a1(a0)},fallthrough:["default"]};CodeMirror.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]};function E(a5,a4){var a0,a2;var a3=l.registerController.getRegister(a4);var a6=a3.toString();var a1=a5.macroKeyBuffer;aJ(a5);do{a0=(/<\w+-.+?>|<\w+>|./).exec(a6);if(a0===null){break}a2=a0[0];a6=a6.substring(a0.index+a2.length);a1.push(a2)}while(a6);return a1}function ao(a0,a2){var a1=a2.join("");l.registerController.setRegisterText(a0,a1)}function aJ(a1){if(a1.isMacroPlaying){return}var a0=a1.macroKeyBuffer;a0.length=0}function Q(a1,a3,a4){a3.isMacroPlaying=true;for(var a2=0,a0=a4.length;a2<a0;a2++){CodeMirror.Vim.handleKey(a1,a4[a2])}a3.isMacroPlaying=false}function v(a2,a1){if(a2.isMacroPlaying){return}var a0=a2.macroKeyBuffer;a0.push(a1)}function aL(a1,a0){var a3=l.macroModeState;var a2=a3.lastInsertModeChanges;while(a0){a2.expectCursorActivityForChange=true;if(a0.origin=="+input"||a0.origin=="paste"||a0.origin===undefined){var a4=a0.text.join("\n");a2.changes.push(a4)}a0=a0.next}}function H(){var a1=l.macroModeState;var a0=a1.lastInsertModeChanges;if(a0.expectCursorActivityForChange){a0.expectCursorActivityForChange=false}else{a0.changes=[]}}function aN(a0){this.keyName=a0}function D(a4){var a3=l.macroModeState;var a2=a3.lastInsertModeChanges;var a1=CodeMirror.keyName(a4);function a0(){a2.changes.push(new aN(a1));return true}if(a1.indexOf("Delete")!=-1||a1.indexOf("Backspace")!=-1){CodeMirror.lookupKey(a1,["vim-insert"],a0)}}function n(a8,a3,a1,a0){var a5=l.macroModeState;a5.inReplay=true;var a9=!!a3.lastEditActionCommand;var a6=a3.inputState;function a2(){if(a9){aF.processAction(a8,a3,a3.lastEditActionCommand)}else{aF.evalInput(a8,a3)}}function a7(ba){if(a5.lastInsertModeChanges.changes.length>0){ba=!a3.lastEditActionCommand?1:ba;O(a8,ba,a5)}}a3.inputState=a3.lastEditInputState;if(a9&&a3.lastEditActionCommand.interlaceInsertRepeat){for(var a4=0;a4<a1;a4++){a2();a7(1)}}else{if(!a0){a2()}a7(a1)}a3.inputState=a6;if(a3.insertMode&&!a0){m(a8)}a5.inReplay=false}function O(a7,a0,a2){var a3=a2.lastInsertModeChanges;function a5(a9){if(typeof a9=="string"){CodeMirror.commands[a9](a7)}else{a9(a7)}return true}for(var a4=0;a4<a0;a4++){for(var a1=0;a1<a3.changes.length;a1++){var a6=a3.changes[a1];if(a6 instanceof aN){CodeMirror.lookupKey(a6.keyName,["vim-insert"],a5)}else{var a8=a7.getCursor();a7.replaceRange(a6,a8,a8)}}}}o();return ap};CodeMirror.Vim=b()})();