window.CodeMirror=(function(){var bJ=/gecko\/\d/i.test(navigator.userAgent);var cg=/MSIE \d/.test(navigator.userAgent);var bG=cg&&(document.documentMode==null||document.documentMode<8);var bF=cg&&(document.documentMode==null||document.documentMode<9);var cx=cg&&(document.documentMode==null||document.documentMode<10);var dF=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent);var cC=cg||dF;var b9=/WebKit\//.test(navigator.userAgent);var cF=b9&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var ch=/Chrome\//.test(navigator.userAgent);var d4=/Opera\//.test(navigator.userAgent);var ah=/Apple Computer/.test(navigator.vendor);var aH=/KHTML\//.test(navigator.userAgent);var bU=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var cd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var d1=/PhantomJS/.test(navigator.userAgent);var dA=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var cX=dA||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var br=dA||/Mac/.test(navigator.platform);var ap=/win/i.test(navigator.platform);var da=d4&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(da){da=Number(da[1])}if(da&&da>=15){d4=false;b9=true}var bf=br&&(cF||d4&&(da==null||da<12.11));var bY=bJ||(cC&&!bF);var et=false,aD=false;function C(ez,eA){if(!(this instanceof C)){return new C(ez,eA)}this.options=eA=eA||{};for(var eB in dC){if(!eA.hasOwnProperty(eB)&&dC.hasOwnProperty(eB)){eA[eB]=dC[eB]}}bz(eA);var eF=typeof eA.value=="string"?0:eA.value.first;var eE=this.display=f(ez,eF);eE.wrapper.CodeMirror=this;cT(this);if(eA.autofocus&&!cX){dd(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new ey()};b3(this);if(eA.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}var eD=eA.value;if(typeof eD=="string"){eD=new ab(eA.value,eA.mode)}ca(this,cS)(this,eD);if(cg){setTimeout(bP(dX,this,true),20)}eh(this);var eG;try{eG=(document.activeElement==eE.input)}catch(eC){}if(eG||(eA.autofocus&&!cX)){setTimeout(bP(bT,this),20)}else{av(this)}ca(this,function(){for(var eI in aK){if(aK.propertyIsEnumerable(eI)){aK[eI](this,eA[eI],bx)}}for(var eH=0;eH<aE.length;++eH){aE[eH](this)}})()}function f(ez,eB){var eC={};var eA=eC.input=em("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(b9){eA.style.width="1000px"}else{eA.setAttribute("wrap","off")}if(dA){eA.style.border="1px solid black"}eA.setAttribute("autocorrect","off");eA.setAttribute("autocapitalize","off");eA.setAttribute("spellcheck","false");eC.inputDiv=em("div",[eA],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");eC.scrollbarH=em("div",[em("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");eC.scrollbarV=em("div",[em("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");eC.scrollbarFiller=em("div",null,"CodeMirror-scrollbar-filler");eC.gutterFiller=em("div",null,"CodeMirror-gutter-filler");eC.lineDiv=em("div",null,"CodeMirror-code");eC.selectionDiv=em("div",null,null,"position: relative; z-index: 1");eC.cursor=em("div","\u00a0","CodeMirror-cursor");eC.otherCursor=em("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");eC.measure=em("div",null,"CodeMirror-measure");eC.lineSpace=em("div",[eC.measure,eC.selectionDiv,eC.lineDiv,eC.cursor,eC.otherCursor],null,"position: relative; outline: none");eC.mover=em("div",[em("div",[eC.lineSpace],"CodeMirror-lines")],null,"position: relative");eC.sizer=em("div",[eC.mover],"CodeMirror-sizer");eC.heightForcer=em("div",null,null,"position: absolute; height: "+aP+"px; width: 1px;");eC.gutters=em("div",null,"CodeMirror-gutters");eC.lineGutter=null;eC.scroller=em("div",[eC.sizer,eC.heightForcer,eC.gutters],"CodeMirror-scroll");eC.scroller.setAttribute("tabIndex","-1");eC.wrapper=em("div",[eC.inputDiv,eC.scrollbarH,eC.scrollbarV,eC.scrollbarFiller,eC.gutterFiller,eC.scroller],"CodeMirror");if(bG){eC.gutters.style.zIndex=-1;eC.scroller.style.paddingRight=0}if(ez.appendChild){ez.appendChild(eC.wrapper)}else{ez(eC.wrapper)}if(dA){eA.style.width="0px"}if(!b9){eC.scroller.draggable=true}if(aH){eC.inputDiv.style.height="1px";eC.inputDiv.style.position="absolute"}else{if(bG){eC.scrollbarH.style.minWidth=eC.scrollbarV.style.minWidth="18px"}}eC.viewOffset=eC.lastSizeC=0;eC.showingFrom=eC.showingTo=eB;eC.lineNumWidth=eC.lineNumInnerWidth=eC.lineNumChars=null;eC.prevInput="";eC.alignWidgets=false;eC.pollingFast=false;eC.poll=new ey();eC.cachedCharWidth=eC.cachedTextHeight=eC.cachedPaddingH=null;eC.measureLineCache=[];eC.measureLineCachePos=0;eC.inaccurateSelection=false;eC.maxLine=null;eC.maxLineLength=0;eC.maxLineChanged=false;eC.wheelDX=eC.wheelDY=eC.wheelStartX=eC.wheelStartY=null;return eC}function aX(ez){ez.doc.mode=C.getMode(ez.options,ez.doc.modeOption);c1(ez)}function c1(ez){ez.doc.iter(function(eA){if(eA.stateAfter){eA.stateAfter=null}if(eA.styles){eA.styles=null}});ez.doc.frontier=ez.doc.first;cW(ez,100);ez.state.modeGen++;if(ez.curOp){R(ez)}}function dl(ez){if(ez.options.lineWrapping){ez.display.wrapper.className+=" CodeMirror-wrap";ez.display.sizer.style.minWidth=""}else{ez.display.wrapper.className=ez.display.wrapper.className.replace(" CodeMirror-wrap","");ep(ez)}M(ez);R(ez);U(ez);setTimeout(function(){dy(ez)},100)}function aJ(ez){var eB=aw(ez.display),eA=ez.options.lineWrapping;var eC=eA&&Math.max(5,ez.display.scroller.clientWidth/cA(ez.display)-3);return function(eD){if(d2(ez.doc,eD)){return 0}else{if(eA){return(Math.ceil(eD.text.length/eC)||1)*eB}else{return eB}}}}function M(ez){var eB=ez.doc,eA=aJ(ez);eB.iter(function(eC){var eD=eA(eC);if(eD!=eC.height){er(eC,eD)}})}function ew(ez){var eB=dI[ez.options.keyMap],eA=eB.style;ez.display.wrapper.className=ez.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(eA?" cm-keymap-"+eA:"")}function b3(ez){ez.display.wrapper.className=ez.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+ez.options.theme.replace(/(^|\s)\s*/g," cm-s-");U(ez)}function cu(ez){cT(ez);R(ez);setTimeout(function(){dh(ez)},20)}function cT(ez){var eA=ez.display.gutters,eE=ez.options.gutters;cM(eA);for(var eB=0;eB<eE.length;++eB){var eC=eE[eB];var eD=eA.appendChild(em("div",null,"CodeMirror-gutter "+eC));if(eC=="CodeMirror-linenumbers"){ez.display.lineGutter=eD;eD.style.width=(ez.display.lineNumWidth||1)+"px"}}eA.style.display=eB?"":"none"}function c2(eD,eB){if(eB.height==0){return 0}var eA=eB.text.length,ez,eE=eB;while(ez=dq(eE)){var eC=ez.find();eE=dM(eD,eC.from.line);eA+=eC.from.ch-eC.to.ch}eE=eB;while(ez=c7(eE)){var eC=ez.find();eA-=eE.text.length-eC.from.ch;eE=dM(eD,eC.to.line);eA+=eE.text.length-eC.to.ch}return eA}function ep(ez){var eB=ez.display,eA=ez.doc;eB.maxLine=dM(eA,eA.first);eB.maxLineLength=c2(eA,eB.maxLine);eB.maxLineChanged=true;eA.iter(function(eD){var eC=c2(eA,eD);if(eC>eB.maxLineLength){eB.maxLineLength=eC;eB.maxLine=eD}})}function bz(ez){var eA=cm(ez.gutters,"CodeMirror-linenumbers");if(eA==-1&&ez.lineNumbers){ez.gutters=ez.gutters.concat(["CodeMirror-linenumbers"])}else{if(eA>-1&&!ez.lineNumbers){ez.gutters=ez.gutters.slice(0);ez.gutters.splice(eA,1)}}}function dy(ez){var eF=ez.display,eA=ez.doc.height;var eC=eA+a8(eF);eF.sizer.style.minHeight=eF.heightForcer.style.top=eC+"px";eF.gutters.style.height=Math.max(eC,eF.scroller.clientHeight-aP)+"px";var eD=Math.max(eC,eF.scroller.scrollHeight);var eE=eF.scroller.scrollWidth>(eF.scroller.clientWidth+1);var eB=eD>(eF.scroller.clientHeight+1);if(eB){eF.scrollbarV.style.display="block";eF.scrollbarV.style.bottom=eE?i(eF.measure)+"px":"0";eF.scrollbarV.firstChild.style.height=Math.max(0,eD-eF.scroller.clientHeight+eF.scrollbarV.clientHeight)+"px"}else{eF.scrollbarV.style.display="";eF.scrollbarV.firstChild.style.height="0"}if(eE){eF.scrollbarH.style.display="block";eF.scrollbarH.style.right=eB?i(eF.measure)+"px":"0";eF.scrollbarH.firstChild.style.width=(eF.scroller.scrollWidth-eF.scroller.clientWidth+eF.scrollbarH.clientWidth)+"px"}else{eF.scrollbarH.style.display="";eF.scrollbarH.firstChild.style.width="0"}if(eE&&eB){eF.scrollbarFiller.style.display="block";eF.scrollbarFiller.style.height=eF.scrollbarFiller.style.width=i(eF.measure)+"px"}else{eF.scrollbarFiller.style.display=""}if(eE&&ez.options.coverGutterNextToScrollbar&&ez.options.fixedGutter){eF.gutterFiller.style.display="block";eF.gutterFiller.style.height=i(eF.measure)+"px";eF.gutterFiller.style.width=eF.gutters.offsetWidth+"px"}else{eF.gutterFiller.style.display=""}if(bU&&i(eF.measure)===0){eF.scrollbarV.style.minWidth=eF.scrollbarH.style.minHeight=cd?"18px":"12px";eF.scrollbarV.style.pointerEvents=eF.scrollbarH.style.pointerEvents="none"}}function bq(eE,eD,eC){var eB=eE.scroller.scrollTop,ez=eE.wrapper.clientHeight;if(typeof eC=="number"){eB=eC}else{if(eC){eB=eC.top;ez=eC.bottom-eC.top}}eB=Math.floor(eB-dG(eE));var eA=Math.ceil(eB+ez);return{from:a6(eD,eB),to:a6(eD,eA)}}function dh(ez){var eF=ez.display;if(!eF.alignWidgets&&(!eF.gutters.firstChild||!ez.options.fixedGutter)){return}var eC=cL(eF)-eF.scroller.scrollLeft+ez.doc.scrollLeft;var eE=eF.gutters.offsetWidth,eB=eC+"px";for(var eG=eF.lineDiv.firstChild;eG;eG=eG.nextSibling){if(eG.alignable){for(var eD=0,eA=eG.alignable;eD<eA.length;++eD){eA[eD].style.left=eB}}}if(ez.options.fixedGutter){eF.gutters.style.left=(eC+eE)+"px"}}function cO(ez){if(!ez.options.lineNumbers){return false}var eE=ez.doc,eA=c5(ez.options,eE.first+eE.size-1),eD=ez.display;if(eA.length!=eD.lineNumChars){var eF=eD.measure.appendChild(em("div",[em("div",eA)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var eB=eF.firstChild.offsetWidth,eC=eF.offsetWidth-eB;eD.lineGutter.style.width="";eD.lineNumInnerWidth=Math.max(eB,eD.lineGutter.offsetWidth-eC);eD.lineNumWidth=eD.lineNumInnerWidth+eC;eD.lineNumChars=eD.lineNumInnerWidth?eA.length:-1;eD.lineGutter.style.width=eD.lineNumWidth+"px";return true}return false}function c5(ez,eA){return String(ez.lineNumberFormatter(eA+ez.firstLineNumber))}function cL(ez){return ao(ez.scroller).left-ao(ez.sizer).left}function cD(eE,eD,eH,eI){var eG=eE.display.showingFrom,eF=eE.display.showingTo,eC;var ez=bq(eE.display,eE.doc,eH);for(var eB=true;;eB=false){var eA=eE.display.scroller.clientWidth;if(!ck(eE,eD,ez,eI)){break}eC=true;eD=[];a3(eE);dy(eE);if(eB&&eE.options.lineWrapping&&eA!=eE.display.scroller.clientWidth){eI=true;continue}eI=false;if(eH){eH=Math.min(eE.display.scroller.scrollHeight-eE.display.scroller.clientHeight,typeof eH=="number"?eH:eH.top)}ez=bq(eE.display,eE.doc,eH);if(ez.from>=eE.display.showingFrom&&ez.to<=eE.display.showingTo){break}}if(eC){P(eE,"update",eE);if(eE.display.showingFrom!=eG||eE.display.showingTo!=eF){P(eE,"viewportChange",eE,eE.display.showingFrom,eE.display.showingTo)}}return eC}function ck(eD,eR,eA,eP){var eJ=eD.display,eS=eD.doc;if(!eJ.wrapper.offsetWidth){eJ.showingFrom=eJ.showingTo=eS.first;eJ.viewOffset=0;return}if(!eP&&eR.length==0&&eA.from>eJ.showingFrom&&eA.to<eJ.showingTo){return}if(cO(eD)){eR=[{from:eS.first,to:eS.first+eS.size}]}var eO=eJ.sizer.style.marginLeft=eJ.gutters.offsetWidth+"px";eJ.scrollbarH.style.left=eD.options.fixedGutter?eO:"0";var eB=Infinity;if(eD.options.lineNumbers){for(var eK=0;eK<eR.length;++eK){if(eR[eK].diff&&eR[eK].from<eB){eB=eR[eK].from}}}var eC=eS.first+eS.size;var eI=Math.max(eA.from-eD.options.viewportMargin,eS.first);var ez=Math.min(eC,eA.to+eD.options.viewportMargin);if(eJ.showingFrom<eI&&eI-eJ.showingFrom<20){eI=Math.max(eS.first,eJ.showingFrom)}if(eJ.showingTo>ez&&eJ.showingTo-ez<20){ez=Math.min(eC,eJ.showingTo)}if(aD){eI=bd(v(eS,dM(eS,eI)));while(ez<eC&&d2(eS,dM(eS,ez))){++ez}}var eM=[{from:Math.max(eJ.showingFrom,eS.first),to:Math.min(eJ.showingTo,eC)}];if(eM[0].from>=eM[0].to){eM=[]}else{eM=dW(eM,eR)}if(aD){for(var eK=0;eK<eM.length;++eK){var eF=eM[eK],eN;while(eN=c7(dM(eS,eF.to-1))){var eQ=eN.find().from.line;if(eQ>eF.from){eF.to=eQ}else{eM.splice(eK--,1);break}}}}var eH=0;for(var eK=0;eK<eM.length;++eK){var eF=eM[eK];if(eF.from<eI){eF.from=eI}if(eF.to>ez){eF.to=ez}if(eF.from>=eF.to){eM.splice(eK--,1)}else{eH+=eF.to-eF.from}}if(!eP&&eH==ez-eI&&eI==eJ.showingFrom&&ez==eJ.showingTo){h(eD);return}eM.sort(function(eU,eT){return eU.from-eT.from});try{var eE=document.activeElement}catch(eL){}if(eH<(ez-eI)*0.7){eJ.lineDiv.style.display="none"}bH(eD,eI,ez,eM,eB);eJ.lineDiv.style.display="";if(eE&&document.activeElement!=eE&&eE.offsetHeight){eE.focus()}var eG=eI!=eJ.showingFrom||ez!=eJ.showingTo||eJ.lastSizeC!=eJ.wrapper.clientHeight;if(eG){eJ.lastSizeC=eJ.wrapper.clientHeight;cW(eD,400)}eJ.showingFrom=eI;eJ.showingTo=ez;eJ.gutters.style.height="";aF(eD);h(eD);return true}function aF(eH){var eE=eH.display;var eA=eE.lineDiv.offsetTop;for(var ez=eE.lineDiv.firstChild,eI;ez;ez=ez.nextSibling){if(ez.lineObj){if(bG){var eD=ez.offsetTop+ez.offsetHeight;eI=eD-eA;eA=eD}else{var eC=ao(ez);eI=eC.bottom-eC.top}var eG=ez.lineObj.height-eI;if(eI<2){eI=aw(eE)}if(eG>0.001||eG<-0.001){er(ez.lineObj,eI);var eF=ez.lineObj.widgets;if(eF){for(var eB=0;eB<eF.length;++eB){eF[eB].height=eF[eB].node.offsetHeight}}}}}}function h(ez){var eA=ez.display.viewOffset=bc(ez,dM(ez.doc,ez.display.showingFrom));ez.display.mover.style.top=eA+"px"}function dW(eI,eG){for(var eD=0,eB=eG.length||0;eD<eB;++eD){var eF=eG[eD],ez=[],eH=eF.diff||0;for(var eC=0,eA=eI.length;eC<eA;++eC){var eE=eI[eC];if(eF.to<=eE.from&&eF.diff){ez.push({from:eE.from+eH,to:eE.to+eH})}else{if(eF.to<=eE.from||eF.from>=eE.to){ez.push(eE)}else{if(eF.from>eE.from){ez.push({from:eE.from,to:eF.from})}if(eF.to<eE.to){ez.push({from:eF.to+eH,to:eE.to+eH})}}}}eI=ez}return eI}function dJ(ez){var eD=ez.display,eC={},eB={};for(var eE=eD.gutters.firstChild,eA=0;eE;eE=eE.nextSibling,++eA){eC[ez.options.gutters[eA]]=eE.offsetLeft;eB[ez.options.gutters[eA]]=eE.offsetWidth}return{fixedPos:cL(eD),gutterTotalWidth:eD.gutters.offsetWidth,gutterLeft:eC,gutterWidth:eB,wrapperWidth:eD.wrapper.clientWidth}}function bH(eI,eF,eG,eL,eA){var eH=dJ(eI);var eE=eI.display,eK=eI.options.lineNumbers;if(!eL.length&&(!b9||!eI.display.currentWheelTarget)){cM(eE.lineDiv)}var ez=eE.lineDiv,eJ=ez.firstChild;function eD(eN){var eM=eN.nextSibling;if(b9&&br&&eI.display.currentWheelTarget==eN){eN.style.display="none";eN.lineObj=null}else{eN.parentNode.removeChild(eN)}return eM}var eB=eL.shift(),eC=eF;eI.doc.iter(eF,eG,function(eV){if(eB&&eB.to==eC){eB=eL.shift()}if(d2(eI.doc,eV)){if(eV.height!=0){er(eV,0)}if(eV.widgets&&eJ&&eJ.previousSibling){for(var eQ=0;eQ<eV.widgets.length;++eQ){var eS=eV.widgets[eQ];if(eS.showIfHidden){var eO=eJ.previousSibling;if(/pre/i.test(eO.nodeName)){var eN=em("div",null,null,"position: relative");eO.parentNode.replaceChild(eN,eO);eN.appendChild(eO);eO=eN}var eT=eO.appendChild(em("div",[eS.node],"CodeMirror-linewidget"));if(!eS.handleMouseEvents){eT.ignoreEvents=true}a5(eS,eT,eO,eH)}}}}else{if(eB&&eB.from<=eC&&eB.to>eC){while(eJ.lineObj!=eV){eJ=eD(eJ)}if(eK&&eA<=eC&&eJ.lineNumber){l(eJ.lineNumber,c5(eI.options,eC))}eJ=eJ.nextSibling}else{if(eV.widgets){for(var eP=0,eU=eJ,eR;eU&&eP<20;++eP,eU=eU.nextSibling){if(eU.lineObj==eV&&/div/i.test(eU.nodeName)){eR=eU;break}}}var eM=aj(eI,eV,eC,eH,eR);if(eM!=eR){ez.insertBefore(eM,eJ)}else{while(eJ!=eR){eJ=eD(eJ)}eJ=eJ.nextSibling}eM.lineObj=eV}}++eC});while(eJ){eJ=eD(eJ)}}function aj(eG,eI,eJ,eM,eB){var eF=ds(eG,eI),eS=eF.pre;var eV=eI.gutterMarkers,eT=eG.display,eH;var eA=eF.bgClass?eF.bgClass+" "+(eI.bgClass||""):eI.bgClass;if(!eG.options.lineNumbers&&!eV&&!eA&&!eI.wrapClass&&!eI.widgets){return eS}if(eB){eB.alignable=null;var eW=true,eE=0,eC=null;for(var eO=eB.firstChild,eN;eO;eO=eN){eN=eO.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(eO.className)){eB.removeChild(eO)}else{for(var eU=0;eU<eI.widgets.length;++eU){var eD=eI.widgets[eU];if(eD.node==eO.firstChild){if(!eD.above&&!eC){eC=eO}a5(eD,eO,eB,eM);++eE;break}}if(eU==eI.widgets.length){eW=false;break}}}eB.insertBefore(eS,eC);if(eW&&eE==eI.widgets.length){eH=eB;eB.className=eI.wrapClass||""}}if(!eH){eH=em("div",null,eI.wrapClass,"position: relative");eH.appendChild(eS)}if(eA){eH.insertBefore(em("div",null,eA+" CodeMirror-linebackground"),eH.firstChild)}if(eG.options.lineNumbers||eV){var eQ=eH.insertBefore(em("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(eG.options.fixedGutter?eM.fixedPos:-eM.gutterTotalWidth)+"px"),eS);if(eG.options.fixedGutter){(eH.alignable||(eH.alignable=[])).push(eQ)}if(eG.options.lineNumbers&&(!eV||!eV["CodeMirror-linenumbers"])){eH.lineNumber=eQ.appendChild(em("div",c5(eG.options,eJ),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+eM.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+eT.lineNumInnerWidth+"px"))}if(eV){for(var eR=0;eR<eG.options.gutters.length;++eR){var eL=eG.options.gutters[eR],eK=eV.hasOwnProperty(eL)&&eV[eL];if(eK){eQ.appendChild(em("div",[eK],"CodeMirror-gutter-elt","left: "+eM.gutterLeft[eL]+"px; width: "+eM.gutterWidth[eL]+"px"))}}}}if(bG){eH.style.zIndex=2}if(eI.widgets&&eH!=eB){for(var eU=0,ez=eI.widgets;eU<ez.length;++eU){var eD=ez[eU],eP=em("div",[eD.node],"CodeMirror-linewidget");if(!eD.handleMouseEvents){eP.ignoreEvents=true}a5(eD,eP,eH,eM);if(eD.above){eH.insertBefore(eP,eG.options.lineNumbers&&eI.height!=0?eQ:eS)}else{eH.appendChild(eP)}P(eD,"redraw")}}return eH}function a5(eC,eB,eA,eD){if(eC.noHScroll){(eA.alignable||(eA.alignable=[])).push(eB);var ez=eD.wrapperWidth;eB.style.left=eD.fixedPos+"px";if(!eC.coverGutter){ez-=eD.gutterTotalWidth;eB.style.paddingLeft=eD.gutterTotalWidth+"px"}eB.style.width=ez+"px"}if(eC.coverGutter){eB.style.zIndex=5;eB.style.position="relative";if(!eC.noHScroll){eB.style.marginLeft=-eD.gutterTotalWidth+"px"}}}function a3(ez){var eC=ez.display;var eD=eb(ez.doc.sel.from,ez.doc.sel.to);if(eD||ez.options.showCursorWhenSelecting){D(ez)}else{eC.cursor.style.display=eC.otherCursor.style.display="none"}if(!eD){W(ez)}else{eC.selectionDiv.style.display="none"}if(ez.options.moveInputWithCursor){var eE=cJ(ez,ez.doc.sel.head,"div");var eA=ao(eC.wrapper),eB=ao(eC.lineDiv);eC.inputDiv.style.top=Math.max(0,Math.min(eC.wrapper.clientHeight-10,eE.top+eB.top-eA.top))+"px";eC.inputDiv.style.left=Math.max(0,Math.min(eC.wrapper.clientWidth-10,eE.left+eB.left-eA.left))+"px"}}function D(ez){var eA=ez.display,eB=cJ(ez,ez.doc.sel.head,"div");eA.cursor.style.left=eB.left+"px";eA.cursor.style.top=eB.top+"px";eA.cursor.style.height=Math.max(0,eB.bottom-eB.top)*ez.options.cursorHeight+"px";eA.cursor.style.display="";if(eB.other){eA.otherCursor.style.display="";eA.otherCursor.style.left=eB.other.left+"px";eA.otherCursor.style.top=eB.other.top+"px";eA.otherCursor.style.height=(eB.other.bottom-eB.other.top)*0.85+"px"}else{eA.otherCursor.style.display="none"}}function W(eL){var eG=eL.display,eK=eL.doc,ez=eL.doc.sel;var eE=document.createDocumentFragment();var eJ=dE(eL.display),eD=eJ.left,eA=eG.lineSpace.offsetWidth-eJ.right;function eN(eR,eQ,eP,eO){if(eQ<0){eQ=0}eE.appendChild(em("div",null,"CodeMirror-selected","position: absolute; left: "+eR+"px; top: "+eQ+"px; width: "+(eP==null?eA-eR:eP)+"px; height: "+(eO-eQ)+"px"))}function eI(eP,eR,eU){var eQ=dM(eK,eP);var eS=eQ.text.length;var eV,eO;function eT(eX,eW){return b0(eL,L(eP,eX),"div",eQ,eW)}cN(a(eQ),eR||0,eU==null?eS:eU,function(e3,e2,eW){var eZ=eT(e3,"left"),e0,e1,eY;if(e3==e2){e0=eZ;e1=eY=eZ.left}else{e0=eT(e2-1,"right");if(eW=="rtl"){var eX=eZ;eZ=e0;e0=eX}e1=eZ.left;eY=e0.right}if(eR==null&&e3==0){e1=eD}if(e0.top-eZ.top>3){eN(e1,eZ.top,null,eZ.bottom);e1=eD;if(eZ.bottom<e0.top){eN(e1,eZ.bottom,null,e0.top)}}if(eU==null&&e2==eS){eY=eA}if(!eV||eZ.top<eV.top||eZ.top==eV.top&&eZ.left<eV.left){eV=eZ}if(!eO||e0.bottom>eO.bottom||e0.bottom==eO.bottom&&e0.right>eO.right){eO=e0}if(e1<eD+1){e1=eD}eN(e1,e0.top,eY-e1,e0.bottom)});return{start:eV,end:eO}}if(ez.from.line==ez.to.line){eI(ez.from.line,ez.from.ch,ez.to.ch)}else{var eC=dM(eK,ez.from.line),eB=dM(eK,ez.to.line);var eF=v(eK,eC)==v(eK,eB);var eM=eI(ez.from.line,ez.from.ch,eF?eC.text.length:null).end;var eH=eI(ez.to.line,eF?0:null,ez.to.ch).start;if(eF){if(eM.top<eH.top-2){eN(eM.right,eM.top,null,eM.bottom);eN(eD,eH.top,eH.left,eH.bottom)}else{eN(eM.right,eM.top,eH.left-eM.right,eM.bottom)}}if(eM.bottom<eH.top){eN(eD,eM.bottom,null,eH.top)}}bg(eG.selectionDiv,eE);eG.selectionDiv.style.display=""}function k(ez){if(!ez.state.focused){return}var eB=ez.display;clearInterval(eB.blinker);var eA=true;eB.cursor.style.visibility=eB.otherCursor.style.visibility="";if(ez.options.cursorBlinkRate>0){eB.blinker=setInterval(function(){eB.cursor.style.visibility=eB.otherCursor.style.visibility=(eA=!eA)?"":"hidden"},ez.options.cursorBlinkRate)}}function cW(ez,eA){if(ez.doc.mode.startState&&ez.doc.frontier<ez.display.showingTo){ez.state.highlight.set(eA,bP(b4,ez))}}function b4(ez){var eC=ez.doc;if(eC.frontier<eC.first){eC.frontier=eC.first}if(eC.frontier>=ez.display.showingTo){return}var eA=+new Date+ez.options.workTime;var eB=bp(eC.mode,cy(ez,eC.frontier));var eE=[],eD;eC.iter(eC.frontier,Math.min(eC.first+eC.size,ez.display.showingTo+500),function(eF){if(eC.frontier>=ez.display.showingFrom){var eH=eF.styles;eF.styles=d7(ez,eF,eB,true);var eI=!eH||eH.length!=eF.styles.length;for(var eG=0;!eI&&eG<eH.length;++eG){eI=eH[eG]!=eF.styles[eG]}if(eI){if(eD&&eD.end==eC.frontier){eD.end++}else{eE.push(eD={start:eC.frontier,end:eC.frontier+1})}}eF.stateAfter=bp(eC.mode,eB)}else{cv(ez,eF.text,eB);eF.stateAfter=eC.frontier%5==0?bp(eC.mode,eB):null}++eC.frontier;if(+new Date>eA){cW(ez,ez.options.workDelay);return true}});if(eE.length){ca(ez,function(){for(var eF=0;eF<eE.length;++eF){R(this,eE[eF].start,eE[eF].end)}})()}}function bR(eF,ez,eC){var eA,eD,eE=eF.doc;var eB=eC?-1:ez-(eF.doc.mode.innerMode?1000:100);for(var eI=ez;eI>eB;--eI){if(eI<=eE.first){return eE.first}var eH=dM(eE,eI-1);if(eH.stateAfter&&(!eC||eI<=eE.frontier)){return eI}var eG=bh(eH.text,null,eF.options.tabSize);if(eD==null||eA>eG){eD=eI-1;eA=eG}}return eD}function cy(ez,eF,eA){var eD=ez.doc,eC=ez.display;if(!eD.mode.startState){return true}var eE=bR(ez,eF,eA),eB=eE>eD.first&&dM(eD,eE-1).stateAfter;if(!eB){eB=bn(eD.mode)}else{eB=bp(eD.mode,eB)}eD.iter(eE,eF,function(eG){cv(ez,eG.text,eB);var eH=eE==eF-1||eE%5==0||eE>=eC.showingFrom&&eE<eC.showingTo;eG.stateAfter=eH?bp(eD.mode,eB):null;++eE});if(eA){eD.frontier=eE}return eB}function dG(ez){return ez.lineSpace.offsetTop}function a8(ez){return ez.mover.offsetHeight-ez.lineSpace.offsetHeight}function dE(eB){if(eB.cachedPaddingH){return eB.cachedPaddingH}var eA=bg(eB.measure,em("pre","x"));var ez=window.getComputedStyle?window.getComputedStyle(eA):eA.currentStyle;return eB.cachedPaddingH={left:parseInt(ez.paddingLeft),right:parseInt(ez.paddingRight)}}function cY(eG,eH,eA,eD,eE){var eC=-1;eD=eD||a9(eG,eH);if(eD.crude){var eB=eD.left+eA*eD.width;return{left:eB,right:eB+eD.width,top:eD.top,bottom:eD.bottom}}for(var eF=eA;;eF+=eC){var ez=eD[eF];if(ez){break}if(eC<0&&eF==0){eC=1}}eE=eF>eA?"left":eF<eA?"right":eE;if(eE=="left"&&ez.leftSide){ez=ez.leftSide}else{if(eE=="right"&&ez.rightSide){ez=ez.rightSide}}return{left:eF<eA?ez.right:ez.left,right:eF>eA?ez.left:ez.right,top:ez.top,bottom:ez.bottom}}function dD(ez,eA){var eC=ez.display.measureLineCache;for(var eD=0;eD<eC.length;++eD){var eB=eC[eD];if(eB.text==eA.text&&eB.markedSpans==eA.markedSpans&&ez.display.scroller.clientWidth==eB.width&&eB.classes==eA.textClass+"|"+eA.wrapClass){return eB}}}function ef(ez,eA){var eB=dD(ez,eA);if(eB){eB.text=eB.measure=eB.markedSpans=null}}function a9(ez,eA){var eE=dD(ez,eA);if(eE){return eE.measure}var eD=cj(ez,eA);var eC=ez.display.measureLineCache;var eB={text:eA.text,width:ez.display.scroller.clientWidth,markedSpans:eA.markedSpans,measure:eD,classes:eA.textClass+"|"+eA.wrapClass};if(eC.length==16){eC[++ez.display.measureLineCachePos%16]=eB}else{eC.push(eB)}return eD}function cj(eG,eI){if(!eG.options.lineWrapping&&eI.text.length>=eG.options.crudeMeasuringFrom){return en(eG,eI)}var eO=eG.display,eE=V(eI.text.length);var eL=ds(eG,eI,eE,true).pre;if(cg&&!bG&&!eG.options.lineWrapping&&eL.childNodes.length>100){var eB=document.createDocumentFragment();var eJ=10,eM=eL.childNodes.length;for(var eQ=0,eK=Math.ceil(eM/eJ);eQ<eK;++eQ){var eH=em("div",null,null,"display: inline-block");for(var eP=0;eP<eJ&&eM;++eP){eH.appendChild(eL.firstChild);--eM}eB.appendChild(eH)}eL.appendChild(eB)}bg(eO.measure,eL);var eA=ao(eO.lineDiv);var ez=[],eT=V(eI.text.length),eS=eL.offsetHeight;if(bF&&eO.measure.first!=eL){bg(eO.measure,eL)}function eR(eW){var eY=eW.top-eA.top,e0=eW.bottom-eA.top;if(e0>eS){e0=eS}if(eY<0){eY=0}for(var eV=ez.length-2;eV>=0;eV-=2){var eX=ez[eV],eZ=ez[eV+1];if(eX>e0||eZ<eY){continue}if(eX<=eY&&eZ>=e0||eY<=eX&&e0>=eZ||Math.min(e0,eZ)-Math.max(eY,eX)>=(e0-eY)>>1){ez[eV]=Math.min(eY,eX);ez[eV+1]=Math.max(e0,eZ);break}}if(eV<0){eV=ez.length;ez.push(eY,e0)}return{left:eW.left-eA.left,right:eW.right-eA.left,top:eV,bottom:null}}function eU(eV){eV.bottom=ez[eV.top+1];eV.top=ez[eV.top]}for(var eQ=0,eD;eQ<eE.length;++eQ){if(eD=eE[eQ]){var eN=eD,eC=null;if(/\bCodeMirror-widget\b/.test(eD.className)&&eD.getClientRects){if(eD.firstChild.nodeType==1){eN=eD.firstChild}var eF=eN.getClientRects();if(eF.length>1){eC=eT[eQ]=eR(eF[0]);eC.rightSide=eR(eF[eF.length-1])}}if(!eC){eC=eT[eQ]=eR(ao(eN))}if(eD.measureRight){eC.right=ao(eD.measureRight).left-eA.left}if(eD.leftSide){eC.leftSide=eR(ao(eD.leftSide))}}}cM(eG.display.measure);for(var eQ=0,eD;eQ<eT.length;++eQ){if(eD=eT[eQ]){eU(eD);if(eD.leftSide){eU(eD.leftSide)}if(eD.rightSide){eU(eD.rightSide)}}}return eT}function en(ez,eA){var eE=new eq(eA.text.slice(0,100),null);if(eA.textClass){eE.textClass=eA.textClass}var eC=cj(ez,eE);var eD=cY(ez,eE,0,eC,"left");var eB=cY(ez,eE,99,eC,"right");return{crude:true,top:eD.top,left:eD.left,bottom:eD.bottom,width:(eB.right-eD.left)/100}}function di(ez,eB){var eG=false;if(eB.markedSpans){for(var eC=0;eC<eB.markedSpans;++eC){var eE=eB.markedSpans[eC];if(eE.collapsed&&(eE.to==null||eE.to==eB.text.length)){eG=true}}}var eD=!eG&&dD(ez,eB);if(eD||eB.text.length>=ez.options.crudeMeasuringFrom){return cY(ez,eB,eB.text.length,eD&&eD.measure,"right").right}var eF=ds(ez,eB,null,true).pre;var eA=eF.appendChild(aT(ez.display.measure));bg(ez.display.measure,eF);return ao(eA).right-ao(ez.display.lineDiv).left}function U(ez){ez.display.measureLineCache.length=ez.display.measureLineCachePos=0;ez.display.cachedCharWidth=ez.display.cachedTextHeight=ez.display.cachedPaddingH=null;if(!ez.options.lineWrapping){ez.display.maxLineChanged=true}ez.display.lineNumChars=null}function bO(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function bN(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function dr(eF,eC,eE,eA){if(eC.widgets){for(var eB=0;eB<eC.widgets.length;++eB){if(eC.widgets[eB].above){var eH=b7(eC.widgets[eB]);eE.top+=eH;eE.bottom+=eH}}}if(eA=="line"){return eE}if(!eA){eA="local"}var eD=bc(eF,eC);if(eA=="local"){eD+=dG(eF.display)}else{eD-=eF.display.viewOffset}if(eA=="page"||eA=="window"){var ez=ao(eF.display.lineSpace);eD+=ez.top+(eA=="window"?0:bN());var eG=ez.left+(eA=="window"?0:bO());eE.left+=eG;eE.right+=eG}eE.top+=eD;eE.bottom+=eD;return eE}function ev(eA,eD,eB){if(eB=="div"){return eD}var eF=eD.left,eE=eD.top;if(eB=="page"){eF-=bO();eE-=bN()}else{if(eB=="local"||!eB){var eC=ao(eA.display.sizer);eF+=eC.left;eE+=eC.top}}var ez=ao(eA.display.lineSpace);return{left:eF-ez.left,top:eE-ez.top}}function b0(ez,eD,eC,eB,eA){if(!eB){eB=dM(ez.doc,eD.line)}return dr(ez,eB,cY(ez,eB,eD.ch,null,eA),eC)}function cJ(eI,eH,eB,eG,eE){eG=eG||dM(eI.doc,eH.line);if(!eE){eE=a9(eI,eG)}function eD(eM,eL){var eK=cY(eI,eG,eM,eE,eL?"right":"left");if(eL){eK.left=eK.right}else{eK.right=eK.left}return dr(eI,eG,eK,eB)}function eJ(eN,eK){var eL=eF[eK],eM=eL.level%2;if(eN==cw(eL)&&eK&&eL.level<eF[eK-1].level){eL=eF[--eK];eN=eu(eL)-(eL.level%2?0:1);eM=true}else{if(eN==eu(eL)&&eK<eF.length-1&&eL.level<eF[eK+1].level){eL=eF[++eK];eN=cw(eL)-eL.level%2;eM=false}}if(eM&&eN==eL.to&&eN>eL.from){return eD(eN-1)}return eD(eN,eM)}var eF=a(eG),ez=eH.ch;if(!eF){return eD(ez)}var eA=ak(eF,ez);var eC=eJ(ez,eA);if(dB!=null){eC.other=eJ(ez,dB)}return eC}function el(ez,eA,eB,eD){var eC=new L(ez,eA);eC.xRel=eD;if(eB){eC.outside=true}return eC}function eg(eG,eD,eC){var eF=eG.doc;eC+=eG.display.viewOffset;if(eC<0){return el(eF.first,0,true,-1)}var eA=a6(eF,eC),eH=eF.first+eF.size-1;if(eA>eH){return el(eF.first+eF.size-1,dM(eF,eH).text.length,true,1)}if(eD<0){eD=0}for(;;){var eB=dM(eF,eA);var eI=b8(eG,eB,eA,eD,eC);var eE=c7(eB);var ez=eE&&eE.find();if(eE&&(eI.ch>ez.from.ch||eI.ch==ez.from.ch&&eI.xRel>0)){eA=ez.to.line}else{return eI}}}function b8(eJ,eB,eM,eL,eK){var eI=eK-bc(eJ,eB);var eF=false,eS=2*eJ.display.wrapper.clientWidth;var eR=a9(eJ,eB);function eW(eY){var eZ=cJ(eJ,L(eM,eY),"line",eB,eR);eF=true;if(eI>eZ.bottom){return eZ.left-eS}else{if(eI<eZ.top){return eZ.left+eS}else{eF=false}}return eZ.left}var eO=a(eB),eQ=eB.text.length;var eT=bV(eB),eC=b5(eB);var eP=eW(eT),ez=eF,eA=eW(eC),eE=eF;if(eL>eA){return el(eM,eC,eE,1)}for(;;){if(eO?eC==eT||eC==r(eB,eT,1):eC-eT<=1){var eN=eL<eP||eL-eP<=eA-eL?eT:eC;var eV=eL-(eN==eT?eP:eA);while(dY(eB.text.charAt(eN))){++eN}var eH=el(eM,eN,eN==eT?ez:eE,eV<0?-1:eV?1:0);return eH}var eG=Math.ceil(eQ/2),eX=eT+eG;if(eO){eX=eT;for(var eU=0;eU<eG;++eU){eX=r(eB,eX,1)}}var eD=eW(eX);if(eD>eL){eC=eX;eA=eD;if(eE=eF){eA+=1000}eQ=eG}else{eT=eX;eP=eD;ez=eF;eQ-=eG}}}var al;function aw(eB){if(eB.cachedTextHeight!=null){return eB.cachedTextHeight}if(al==null){al=em("pre");for(var eA=0;eA<49;++eA){al.appendChild(document.createTextNode("x"));al.appendChild(em("br"))}al.appendChild(document.createTextNode("x"))}bg(eB.measure,al);var ez=al.offsetHeight/50;if(ez>3){eB.cachedTextHeight=ez}cM(eB.measure);return ez||1}function cA(eC){if(eC.cachedCharWidth!=null){return eC.cachedCharWidth}var ez=em("span","x");var eB=em("pre",[ez]);bg(eC.measure,eB);var eA=ez.offsetWidth;if(eA>2){eC.cachedCharWidth=eA}return eA||10}var cQ=0;function bZ(ez){ez.curOp={changes:[],forceUpdate:false,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,cursorActivity:false,updateMaxLine:false,updateScrollPos:false,id:++cQ};if(!bM++){aU=[]}}function X(eN){var eH=eN.curOp,eM=eN.doc,eI=eN.display;eN.curOp=null;if(eH.updateMaxLine){ep(eN)}if(eI.maxLineChanged&&!eN.options.lineWrapping&&eI.maxLine){var eA=di(eN,eI.maxLine);eI.sizer.style.minWidth=Math.max(0,eA+3)+"px";eI.maxLineChanged=false;var eK=Math.max(0,eI.sizer.offsetLeft+eI.sizer.offsetWidth-eI.scroller.clientWidth);if(eK<eM.scrollLeft&&!eH.updateScrollPos){a4(eN,Math.min(eI.scroller.scrollLeft,eK),true)}}var eB,eF;if(eH.updateScrollPos){eB=eH.updateScrollPos}else{if(eH.selectionChanged&&eI.scroller.clientHeight){var eL=cJ(eN,eM.sel.head);eB=B(eN,eL.left,eL.top,eL.left,eL.bottom)}}if(eH.changes.length||eH.forceUpdate||eB&&eB.scrollTop!=null){eF=cD(eN,eH.changes,eB&&eB.scrollTop,eH.forceUpdate);if(eN.display.scroller.offsetHeight){eN.doc.scrollTop=eN.display.scroller.scrollTop}}if(!eF&&eH.selectionChanged){a3(eN)}if(eH.updateScrollPos){var eJ=Math.max(0,Math.min(eI.scroller.scrollHeight-eI.scroller.clientHeight,eB.scrollTop));var eC=Math.max(0,Math.min(eI.scroller.scrollWidth-eI.scroller.clientWidth,eB.scrollLeft));eI.scroller.scrollTop=eI.scrollbarV.scrollTop=eM.scrollTop=eJ;eI.scroller.scrollLeft=eI.scrollbarH.scrollLeft=eM.scrollLeft=eC;dh(eN);if(eH.scrollToPos){y(eN,ec(eN.doc,eH.scrollToPos.from),ec(eN.doc,eH.scrollToPos.to),eH.scrollToPos.margin)}}else{if(eB){af(eN)}}if(eH.selectionChanged){k(eN)}if(eN.state.focused&&eH.updateInput){dX(eN,eH.userSelChange)}var eG=eH.maybeHiddenMarkers,ez=eH.maybeUnhiddenMarkers;if(eG){for(var eE=0;eE<eG.length;++eE){if(!eG[eE].lines.length){ai(eG[eE],"hide")}}}if(ez){for(var eE=0;eE<ez.length;++eE){if(ez[eE].lines.length){ai(ez[eE],"unhide")}}}var eD;if(!--bM){eD=aU;aU=null}if(eH.textChanged){ai(eN,"change",eN,eH.textChanged)}if(eH.cursorActivity){ai(eN,"cursorActivity",eN)}if(eD){for(var eE=0;eE<eD.length;++eE){eD[eE]()}}}function ca(ez,eA){return function(){var eC=ez||this,eD=!eC.curOp;if(eD){bZ(eC)}try{var eB=eA.apply(eC,arguments)}finally{if(eD){X(eC)}}return eB}}function d6(ez){return function(){var eB=this.cm&&!this.cm.curOp,eA;if(eB){bZ(this.cm)}try{eA=ez.apply(this,arguments)}finally{if(eB){X(this.cm)}}return eA}}function b2(eA,eC){var eB=!eA.curOp,ez;if(eB){bZ(eA)}try{ez=eC()}finally{if(eB){X(eA)}}return ez}function R(ez,eC,eB,eA){if(eC==null){eC=ez.doc.first}if(eB==null){eB=ez.doc.first+ez.doc.size}ez.curOp.changes.push({from:eC,to:eB,diff:eA})}function aS(ez){if(ez.display.pollingFast){return}ez.display.poll.set(ez.options.pollInterval,function(){bC(ez);if(ez.state.focused){aS(ez)}})}function x(ez){var eA=false;ez.display.pollingFast=true;function eB(){var eC=bC(ez);if(!eC&&!eA){eA=true;ez.display.poll.set(60,eB)}else{ez.display.pollingFast=false;aS(ez)}}ez.display.poll.set(20,eB)}function bC(eN){var eI=eN.display.input,eF=eN.display.prevInput,eM=eN.doc,ez=eM.sel;if(!eN.state.focused||aY(eI)||T(eN)||eN.options.disableInput){return false}if(eN.state.pasteIncoming&&eN.state.fakedLastChar){eI.value=eI.value.substring(0,eI.value.length-1);eN.state.fakedLastChar=false}var eO=eI.value;if(eO==eF&&eb(ez.from,ez.to)){return false}if(cC&&!bF&&eN.display.inputHasSelection===eO){dX(eN,true);return false}var eB=!eN.curOp;if(eB){bZ(eN)}ez.shift=false;var eH=0,eA=Math.min(eF.length,eO.length);while(eH<eA&&eF.charCodeAt(eH)==eO.charCodeAt(eH)){++eH}var eL=ez.from,eK=ez.to;var eD=eO.slice(eH);if(eH<eF.length){eL=L(eL.line,eL.ch-(eF.length-eH))}else{if(eN.state.overwrite&&eb(eL,eK)&&!eN.state.pasteIncoming){eK=L(eK.line,Math.min(dM(eM,eK.line).text.length,eK.ch+eD.length))}}var eG=eN.curOp.updateInput;var eJ={from:eL,to:eK,text:ay(eD),origin:eN.state.pasteIncoming?"paste":eN.state.cutIncoming?"cut":"+input"};aL(eN.doc,eJ,"end");eN.curOp.updateInput=eG;P(eN,"inputRead",eN,eJ);if(eD&&!eN.state.pasteIncoming&&eN.options.electricChars&&eN.options.smartIndent&&ez.head.ch<100){var eC=eN.getModeAt(ez.head).electricChars;if(eC){for(var eE=0;eE<eC.length;eE++){if(eD.indexOf(eC.charAt(eE))>-1){O(eN,ez.head.line,"smart");break}}}}if(eO.length>1000||eO.indexOf("\n")>-1){eI.value=eN.display.prevInput=""}else{eN.display.prevInput=eO}if(eB){X(eN)}eN.state.pasteIncoming=eN.state.cutIncoming=false;return true}function dX(ez,eB){var eA,eC,eE=ez.doc;if(!eb(eE.sel.from,eE.sel.to)){ez.display.prevInput="";eA=cf&&(eE.sel.to.line-eE.sel.from.line>100||(eC=ez.getSelection()).length>1000);var eD=eA?"-":eC||ez.getSelection();ez.display.input.value=eD;if(ez.state.focused){cE(ez.display.input)}if(cC&&!bF){ez.display.inputHasSelection=eD}}else{if(eB){ez.display.prevInput=ez.display.input.value="";if(cC&&!bF){ez.display.inputHasSelection=null}}}ez.display.inaccurateSelection=eA}function dd(ez){if(ez.options.readOnly!="nocursor"&&(!cX||document.activeElement!=ez.display.input)){ez.display.input.focus()}}function o(ez){if(!ez.state.focused){dd(ez);bT(ez)}}function T(ez){return ez.options.readOnly||ez.doc.cantEdit}function eh(eA){var eF=eA.display;bl(eF.scroller,"mousedown",ca(eA,c6));if(cg){bl(eF.scroller,"dblclick",ca(eA,function(eI){if(at(eA,eI)){return}var eJ=bI(eA,eI);if(!eJ||j(eA,eI)||aG(eA.display,eI)){return}bW(eI);var eH=ac(dM(eA.doc,eJ.line).text,eJ);ej(eA.doc,eH.from,eH.to)}))}else{bl(eF.scroller,"dblclick",function(eH){at(eA,eH)||bW(eH)})}bl(eF.lineSpace,"selectstart",function(eH){if(!aG(eF,eH)){bW(eH)}});if(!bY){bl(eF.scroller,"contextmenu",function(eH){ae(eA,eH)})}bl(eF.scroller,"scroll",function(){if(eF.scroller.clientHeight){G(eA,eF.scroller.scrollTop);a4(eA,eF.scroller.scrollLeft,true);ai(eA,"scroll",eA)}});bl(eF.scrollbarV,"scroll",function(){if(eF.scroller.clientHeight){G(eA,eF.scrollbarV.scrollTop)}});bl(eF.scrollbarH,"scroll",function(){if(eF.scroller.clientHeight){a4(eA,eF.scrollbarH.scrollLeft)}});bl(eF.scroller,"mousewheel",function(eH){b(eA,eH)});bl(eF.scroller,"DOMMouseScroll",function(eH){b(eA,eH)});function eG(){if(eA.state.focused){setTimeout(bP(dd,eA),0)}}bl(eF.scrollbarH,"mousedown",eG);bl(eF.scrollbarV,"mousedown",eG);bl(eF.wrapper,"scroll",function(){eF.wrapper.scrollTop=eF.wrapper.scrollLeft=0});var ez;function eD(){if(ez==null){ez=setTimeout(function(){ez=null;eF.cachedCharWidth=eF.cachedTextHeight=eF.cachedPaddingH=c8=null;U(eA);b2(eA,bP(R,eA))},100)}}bl(window,"resize",eD);function eC(){for(var eH=eF.wrapper.parentNode;eH&&eH!=document.body;eH=eH.parentNode){}if(eH){setTimeout(eC,5000)}else{cV(window,"resize",eD)}}setTimeout(eC,5000);bl(eF.input,"keyup",ca(eA,aN));bl(eF.input,"input",function(){if(cC&&!bF&&eA.display.inputHasSelection){eA.display.inputHasSelection=null}x(eA)});bl(eF.input,"keydown",ca(eA,m));bl(eF.input,"keypress",ca(eA,bQ));bl(eF.input,"focus",bP(bT,eA));bl(eF.input,"blur",bP(av,eA));function eB(eH){if(at(eA,eH)||eA.options.onDragEvent&&eA.options.onDragEvent(eA,Z(eH))){return}c4(eH)}if(eA.options.dragDrop){bl(eF.scroller,"dragstart",function(eH){J(eA,eH)});bl(eF.scroller,"dragenter",eB);bl(eF.scroller,"dragover",eB);bl(eF.scroller,"drop",ca(eA,aO))}bl(eF.scroller,"paste",function(eH){if(aG(eF,eH)){return}dd(eA);x(eA)});bl(eF.input,"paste",function(){if(b9&&!eA.state.fakedLastChar&&!(new Date-eA.state.lastMiddleDown<200)){var eI=eF.input.selectionStart,eH=eF.input.selectionEnd;eF.input.value+="$";eF.input.selectionStart=eI;eF.input.selectionEnd=eH;eA.state.fakedLastChar=true}eA.state.pasteIncoming=true;x(eA)});function eE(eH){if(eF.inaccurateSelection){eF.prevInput="";eF.inaccurateSelection=false;eF.input.value=eA.getSelection();cE(eF.input)}if(eH.type=="cut"){eA.state.cutIncoming=true}}bl(eF.input,"cut",eE);bl(eF.input,"copy",eE);if(aH){bl(eF.sizer,"mouseup",function(){if(document.activeElement==eF.input){eF.input.blur()}dd(eA)})}}function aG(eA,ez){for(var eB=E(ez);eB!=eA.wrapper;eB=eB.parentNode){if(!eB||eB.ignoreEvents||eB.parentNode==eA.sizer&&eB!=eA.mover){return true}}}function bI(eA,eF,eC){var eE=eA.display;if(!eC){var eD=E(eF);if(eD==eE.scrollbarH||eD==eE.scrollbarH.firstChild||eD==eE.scrollbarV||eD==eE.scrollbarV.firstChild||eD==eE.scrollbarFiller||eD==eE.gutterFiller){return null}}var ez,eG,eB=ao(eE.lineSpace);try{ez=eF.clientX;eG=eF.clientY}catch(eF){return null}return eg(eA,ez-eB.left,eG-eB.top)}var co,ci;function c6(eR){if(at(this,eR)){return}var eC=this,eM=eC.display,eT=eC.doc,eK=eT.sel;eK.shift=eR.shiftKey;if(aG(eM,eR)){if(!b9){eM.scroller.draggable=false;setTimeout(function(){eM.scroller.draggable=true},100)}return}if(j(eC,eR)){return}var eB=bI(eC,eR);window.focus();switch(ee(eR)){case 3:if(bY){ae.call(eC,eC,eR)}return;case 2:if(b9){eC.state.lastMiddleDown=+new Date}if(eB){ej(eC.doc,eB)}setTimeout(bP(dd,eC),20);bW(eR);return}if(!eB){if(E(eR)==eM.scroller){bW(eR)}return}setTimeout(bP(o,eC),0);var ez=+new Date,eA="single";if(ci&&ci.time>ez-400&&eb(ci.pos,eB)){eA="triple";bW(eR);setTimeout(bP(dd,eC),20);aR(eC,eB.line)}else{if(co&&co.time>ez-400&&eb(co.pos,eB)){eA="double";ci={time:ez,pos:eB};bW(eR);var eO=ac(dM(eT,eB.line).text,eB);ej(eC.doc,eO.from,eO.to)}else{co={time:ez,pos:eB}}}var eD=eB;if(eC.options.dragDrop&&dp&&!T(eC)&&!eb(eK.from,eK.to)&&!dN(eB,eK.from)&&!dN(eK.to,eB)&&eA=="single"){var eN=ca(eC,function(eU){if(b9){eM.scroller.draggable=false}eC.state.draggingText=false;cV(document,"mouseup",eN);cV(eM.scroller,"drop",eN);if(Math.abs(eR.clientX-eU.clientX)+Math.abs(eR.clientY-eU.clientY)<10){bW(eU);ej(eC.doc,eB);dd(eC);if(cg&&!bF){setTimeout(function(){document.body.focus();dd(eC)},20)}}});if(b9){eM.scroller.draggable=true}eC.state.draggingText=eN;if(eM.scroller.dragDrop){eM.scroller.dragDrop()}bl(document,"mouseup",eN);bl(eM.scroller,"drop",eN);return}bW(eR);if(eA=="single"){ej(eC.doc,ec(eT,eB))}var eS=eK.from,eH=eK.to,eL=eB;function eP(eV){if(eb(eL,eV)){return}eL=eV;if(eA=="single"){ej(eC.doc,ec(eT,eB),eV);return}eS=ec(eT,eS);eH=ec(eT,eH);if(eA=="double"){var eU=ac(dM(eT,eV.line).text,eV);if(dN(eV,eS)){ej(eC.doc,eU.from,eH)}else{ej(eC.doc,eS,eU.to)}}else{if(eA=="triple"){if(dN(eV,eS)){ej(eC.doc,eH,ec(eT,L(eV.line,0)))}else{ej(eC.doc,eS,ec(eT,L(eV.line+1,0)))}}}}var eI=ao(eM.wrapper);var eE=0;function eQ(eW){var eU=++eE;var eY=bI(eC,eW,true);if(!eY){return}if(!eb(eY,eD)){o(eC);eD=eY;eP(eY);var eX=bq(eM,eT);if(eY.line>=eX.to||eY.line<eX.from){setTimeout(ca(eC,function(){if(eE==eU){eQ(eW)}}),150)}}else{var eV=eW.clientY<eI.top?-20:eW.clientY>eI.bottom?20:0;if(eV){setTimeout(ca(eC,function(){if(eE!=eU){return}eM.scroller.scrollTop+=eV;eQ(eW)}),50)}}}function eG(eU){eE=Infinity;bW(eU);dd(eC);cV(document,"mousemove",eJ);cV(document,"mouseup",eF)}var eJ=ca(eC,function(eU){if((cC&&!cx)?!eU.buttons:!ee(eU)){eG(eU)}else{eQ(eU)}});var eF=ca(eC,eG);bl(document,"mousemove",eJ);bl(document,"mouseup",eF)}function ex(eK,eG,eI,eJ,eC){try{var eA=eG.clientX,ez=eG.clientY}catch(eG){return false}if(eA>=Math.floor(ao(eK.display.gutters).right)){return false}if(eJ){bW(eG)}var eH=eK.display;var eF=ao(eH.lineDiv);if(ez>eF.bottom||!dS(eK,eI)){return bb(eG)}ez-=eF.top-eH.viewOffset;for(var eD=0;eD<eK.options.gutters.length;++eD){var eE=eH.gutters.childNodes[eD];if(eE&&ao(eE).right>=eA){var eL=a6(eK.doc,ez);var eB=eK.options.gutters[eD];eC(eK,eI,eK,eL,eB,eG);return bb(eG)}}}function cl(ez,eA){if(!dS(ez,"gutterContextMenu")){return false}return ex(ez,eA,"gutterContextMenu",false,ai)}function j(ez,eA){return ex(ez,eA,"gutterClick",true,P)}var Q=0;function aO(eF){var eH=this;if(at(eH,eF)||aG(eH.display,eF)||(eH.options.onDragEvent&&eH.options.onDragEvent(eH,Z(eF)))){return}bW(eF);if(cC){Q=+new Date}var eG=bI(eH,eF,true),ez=eF.dataTransfer.files;if(!eG||T(eH)){return}if(ez&&ez.length&&window.FileReader&&window.File){var eB=ez.length,eJ=Array(eB),eA=0;var eC=function(eM,eL){var eK=new FileReader;eK.onload=function(){eJ[eL]=eK.result;if(++eA==eB){eG=ec(eH.doc,eG);aL(eH.doc,{from:eG,to:eG,text:ay(eJ.join("\n")),origin:"paste"},"around")}};eK.readAsText(eM)};for(var eD=0;eD<eB;++eD){eC(ez[eD],eD)}}else{if(eH.state.draggingText&&!(dN(eG,eH.doc.sel.from)||dN(eH.doc.sel.to,eG))){eH.state.draggingText(eF);setTimeout(bP(dd,eH),20);return}try{var eJ=eF.dataTransfer.getData("Text");if(eJ){var eI=eH.doc.sel.from,eE=eH.doc.sel.to;bi(eH.doc,eG,eG);if(eH.state.draggingText){az(eH.doc,"",eI,eE,"paste")}eH.replaceSelection(eJ,null,"paste");dd(eH)}}catch(eF){}}}function J(eA,eC){if(cC&&(!eA.state.draggingText||+new Date-Q<100)){c4(eC);return}if(at(eA,eC)||aG(eA.display,eC)){return}var ez=eA.getSelection();eC.dataTransfer.setData("Text",ez);if(eC.dataTransfer.setDragImage&&!ah){var eB=em("img",null,null,"position: fixed; left: 0; top: 0;");eB.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d4){eB.width=eB.height=1;eA.display.wrapper.appendChild(eB);eB._top=eB.offsetTop}eC.dataTransfer.setDragImage(eB,0,0);if(d4){eB.parentNode.removeChild(eB)}}}function G(ez,eA){if(Math.abs(ez.doc.scrollTop-eA)<2){return}ez.doc.scrollTop=eA;if(!bJ){cD(ez,[],eA)}if(ez.display.scroller.scrollTop!=eA){ez.display.scroller.scrollTop=eA}if(ez.display.scrollbarV.scrollTop!=eA){ez.display.scrollbarV.scrollTop=eA}if(bJ){cD(ez,[])}cW(ez,100)}function a4(ez,eB,eA){if(eA?eB==ez.doc.scrollLeft:Math.abs(ez.doc.scrollLeft-eB)<2){return}eB=Math.min(eB,ez.display.scroller.scrollWidth-ez.display.scroller.clientWidth);ez.doc.scrollLeft=eB;dh(ez);if(ez.display.scroller.scrollLeft!=eB){ez.display.scroller.scrollLeft=eB}if(ez.display.scrollbarH.scrollLeft!=eB){ez.display.scrollbarH.scrollLeft=eB}}var dT=0,bB=null;if(cC){bB=-0.53}else{if(bJ){bB=15}else{if(ch){bB=-0.7}else{if(ah){bB=-1/3}}}}function b(eF,eA){var eI=eA.wheelDeltaX,eH=eA.wheelDeltaY;if(eI==null&&eA.detail&&eA.axis==eA.HORIZONTAL_AXIS){eI=eA.detail}if(eH==null&&eA.detail&&eA.axis==eA.VERTICAL_AXIS){eH=eA.detail}else{if(eH==null){eH=eA.wheelDelta}}var eC=eF.display,eE=eC.scroller;if(!(eI&&eE.scrollWidth>eE.clientWidth||eH&&eE.scrollHeight>eE.clientHeight)){return}if(eH&&br&&b9){for(var eG=eA.target;eG!=eE;eG=eG.parentNode){if(eG.lineObj){eF.display.currentWheelTarget=eG;break}}}if(eI&&!bJ&&!d4&&bB!=null){if(eH){G(eF,Math.max(0,Math.min(eE.scrollTop+eH*bB,eE.scrollHeight-eE.clientHeight)))}a4(eF,Math.max(0,Math.min(eE.scrollLeft+eI*bB,eE.scrollWidth-eE.clientWidth)));bW(eA);eC.wheelStartX=null;return}if(eH&&bB!=null){var ez=eH*bB;var eD=eF.doc.scrollTop,eB=eD+eC.wrapper.clientHeight;if(ez<0){eD=Math.max(0,eD+ez-50)}else{eB=Math.min(eF.doc.height,eB+ez+50)}cD(eF,[],{top:eD,bottom:eB})}if(dT<20){if(eC.wheelStartX==null){eC.wheelStartX=eE.scrollLeft;eC.wheelStartY=eE.scrollTop;eC.wheelDX=eI;eC.wheelDY=eH;setTimeout(function(){if(eC.wheelStartX==null){return}var eJ=eE.scrollLeft-eC.wheelStartX;var eL=eE.scrollTop-eC.wheelStartY;var eK=(eL&&eC.wheelDY&&eL/eC.wheelDY)||(eJ&&eC.wheelDX&&eJ/eC.wheelDX);eC.wheelStartX=eC.wheelStartY=null;if(!eK){return}bB=(bB*dT+eK)/(dT+1);++dT},200)}else{eC.wheelDX+=eI;eC.wheelDY+=eH}}}function ei(eA,eD,ez){if(typeof eD=="string"){eD=df[eD];if(!eD){return false}}if(eA.display.pollingFast&&bC(eA)){eA.display.pollingFast=false}var eE=eA.doc,eC=eE.sel.shift,eB=false;try{if(T(eA)){eA.state.suppressEdits=true}if(ez){eE.sel.shift=false}eB=eD(eA)!=bw}finally{eE.sel.shift=eC;eA.state.suppressEdits=false}return eB}function cs(ez){var eA=ez.state.keyMaps.slice(0);if(ez.options.extraKeys){eA.push(ez.options.extraKeys)}eA.push(ez.options.keyMap);return eA}var aa;function dQ(ez,eF){var eA=ek(ez.options.keyMap),eD=eA.auto;clearTimeout(aa);if(eD&&!de(eF)){aa=setTimeout(function(){if(ek(ez.options.keyMap)==eA){ez.options.keyMap=(eD.call?eD.call(null,ez):eD);ew(ez)}},50)}var eC=dZ(eF,true),eE=false;if(!eC){return false}var eB=cs(ez);if(eF.shiftKey){eE=g("Shift-"+eC,eB,function(eG){return ei(ez,eG,true)})||g(eC,eB,function(eG){if(typeof eG=="string"?/^go[A-Z]/.test(eG):eG.motion){return ei(ez,eG)}})}else{eE=g(eC,eB,function(eG){return ei(ez,eG)})}if(eE){bW(eF);k(ez);if(bF){eF.oldKeyCode=eF.keyCode;eF.keyCode=0}P(ez,"keyHandled",ez,eC,eF)}return eE}function cZ(ez,eC,eA){var eB=g("'"+eA+"'",cs(ez),function(eD){return ei(ez,eD,true)});if(eB){bW(eC);k(ez);P(ez,"keyHandled",ez,"'"+eA+"'",eC)}return eB}function aN(eA){var ez=this;if(at(ez,eA)||ez.options.onKeyEvent&&ez.options.onKeyEvent(ez,Z(eA))){return}if(eA.keyCode==16){ez.doc.sel.shift=false}}var cn=null;function m(eC){var ez=this;o(ez);if(at(ez,eC)||ez.options.onKeyEvent&&ez.options.onKeyEvent(ez,Z(eC))){return}if(cg&&eC.keyCode==27){eC.returnValue=false}var eA=eC.keyCode;ez.doc.sel.shift=eA==16||eC.shiftKey;var eB=dQ(ez,eC);if(d4){cn=eB?eA:null;if(!eB&&eA==88&&!cf&&(br?eC.metaKey:eC.ctrlKey)){ez.replaceSelection("")}}}function bQ(eD){var ez=this;if(at(ez,eD)||ez.options.onKeyEvent&&ez.options.onKeyEvent(ez,Z(eD))){return}var eC=eD.keyCode,eA=eD.charCode;if(d4&&eC==cn){cn=null;bW(eD);return}if(((d4&&(!eD.which||eD.which<10))||aH)&&dQ(ez,eD)){return}var eB=String.fromCharCode(eA==null?eC:eA);if(cZ(ez,eD,eB)){return}if(cC&&!bF){ez.display.inputHasSelection=null}x(ez)}function bT(ez){if(ez.options.readOnly=="nocursor"){return}if(!ez.state.focused){ai(ez,"focus",ez);ez.state.focused=true;if(ez.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1){ez.display.wrapper.className+=" CodeMirror-focused"}if(!ez.curOp){dX(ez,true);if(b9){setTimeout(bP(dX,ez,true),0)}}}aS(ez);k(ez)}function av(ez){if(ez.state.focused){ai(ez,"blur",ez);ez.state.focused=false;ez.display.wrapper.className=ez.display.wrapper.className.replace(" CodeMirror-focused","")}clearInterval(ez.display.blinker);setTimeout(function(){if(!ez.state.focused){ez.doc.sel.shift=false}},150)}var d8;function ae(eJ,eE){if(at(eJ,eE,"contextmenu")){return}var eG=eJ.display,eA=eJ.doc.sel;if(aG(eG,eE)||cl(eJ,eE)){return}var eI=bI(eJ,eE),ez=eG.scroller.scrollTop;if(!eI||d4){return}var eD=eJ.options.resetSelectionOnContextMenu;if(eD&&(eb(eA.from,eA.to)||dN(eI,eA.from)||!dN(eI,eA.to))){ca(eJ,bi)(eJ.doc,eI,eI)}var eF=eG.input.style.cssText;eG.inputDiv.style.position="absolute";eG.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(eE.clientY-5)+"px; left: "+(eE.clientX-5)+"px; z-index: 1000; background: transparent; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";dd(eJ);dX(eJ,true);if(eb(eA.from,eA.to)){eG.input.value=eG.prevInput=" "}function eC(){if(eG.input.selectionStart!=null){var eK=eG.input.value="\u200b"+(eb(eA.from,eA.to)?"":eG.input.value);eG.prevInput="\u200b";eG.input.selectionStart=1;eG.input.selectionEnd=eK.length}}function eH(){eG.inputDiv.style.position="relative";eG.input.style.cssText=eF;if(bF){eG.scrollbarV.scrollTop=eG.scroller.scrollTop=ez}aS(eJ);if(eG.input.selectionStart!=null){if(!cC||bF){eC()}clearTimeout(d8);var eK=0,eL=function(){if(eG.prevInput=="\u200b"&&eG.input.selectionStart==0){ca(eJ,df.selectAll)(eJ)}else{if(eK++<10){d8=setTimeout(eL,500)}else{dX(eJ)}}};d8=setTimeout(eL,200)}}if(cC&&!bF){eC()}if(bY){c4(eE);var eB=function(){cV(window,"mouseup",eB);setTimeout(eH,20)};bl(window,"mouseup",eB)}else{setTimeout(eH,50)}}var b6=C.changeEnd=function(ez){if(!ez.text){return ez.to}return L(ez.from.line+ez.text.length-1,ea(ez.text).length+(ez.text.length==1?ez.from.ch:0))};function dg(eD,eF,eE){if(!dN(eF.from,eE)){return ec(eD,eE)}var eC=(eF.text.length-1)-(eF.to.line-eF.from.line);if(eE.line>eF.to.line+eC){var eB=eE.line-eC,eA=eD.first+eD.size-1;if(eB>eA){return L(eA,dM(eD,eA).text.length)}return d0(eE,dM(eD,eB).text.length)}if(eE.line==eF.to.line+eC){return d0(eE,ea(eF.text).length+(eF.text.length==1?eF.from.ch:0)+dM(eD,eF.to.line).text.length-eF.to.ch)}var ez=eE.line-eF.from.line;return d0(eE,eF.text[ez].length+(ez?0:eF.from.ch))}function dR(eA,eD,eB){if(eB&&typeof eB=="object"){return{anchor:dg(eA,eD,eB.anchor),head:dg(eA,eD,eB.head)}}if(eB=="start"){return{anchor:eD.from,head:eD.from}}var ez=b6(eD);if(eB=="around"){return{anchor:eD.from,head:ez}}if(eB=="end"){return{anchor:ez,head:ez}}var eC=function(eG){if(dN(eG,eD.from)){return eG}if(!dN(eD.to,eG)){return ez}var eE=eG.line+eD.text.length-(eD.to.line-eD.from.line)-1,eF=eG.ch;if(eG.line==eD.to.line){eF+=ez.ch-eD.to.ch}return L(eE,eF)};return{anchor:eC(eA.sel.anchor),head:eC(eA.sel.head)}}function cI(eA,eC,eB){var ez={canceled:false,from:eC.from,to:eC.to,text:eC.text,origin:eC.origin,cancel:function(){this.canceled=true}};if(eB){ez.update=function(eG,eF,eE,eD){if(eG){this.from=ec(eA,eG)}if(eF){this.to=ec(eA,eF)}if(eE){this.text=eE}if(eD!==undefined){this.origin=eD}}}ai(eA,"beforeChange",eA,ez);if(eA.cm){ai(eA.cm,"beforeChange",eA.cm,ez)}if(ez.canceled){return null}return{from:ez.from,to:ez.to,text:ez.text,origin:ez.origin}}function aL(eC,eE,eD,eB){if(eC.cm){if(!eC.cm.curOp){return ca(eC.cm,aL)(eC,eE,eD,eB)}if(eC.cm.state.suppressEdits){return}}if(dS(eC,"beforeChange")||eC.cm&&dS(eC.cm,"beforeChange")){eE=cI(eC,eE,true);if(!eE){return}}var eA=et&&!eB&&bX(eC,eE.from,eE.to);if(eA){for(var ez=eA.length-1;ez>=1;--ez){aq(eC,{from:eA[ez].from,to:eA[ez].to,text:[""]})}if(eA.length){aq(eC,{from:eA[0].from,to:eA[0].to,text:eE.text},eD)}}else{aq(eC,eE,eD)}}function aq(eB,eD,eC){if(eD.text.length==1&&eD.text[0]==""&&eb(eD.from,eD.to)){return}var eA=dR(eB,eD,eC);dk(eB,eD,eA,eB.cm?eB.cm.curOp.id:NaN);cU(eB,eD,eA,c0(eB,eD));var ez=[];cP(eB,function(eF,eE){if(!eE&&cm(ez,eF.history)==-1){cB(eF.history,eD);ez.push(eF.history)}cU(eF,eD,null,c0(eF,eD))})}function bt(eI,eF){if(eI.cm&&eI.cm.state.suppressEdits){return}var eE=eI.history;var eA=(eF=="undo"?eE.done:eE.undone).pop();if(!eA){return}var eG={changes:[],anchorBefore:eA.anchorAfter,headBefore:eA.headAfter,anchorAfter:eA.anchorBefore,headAfter:eA.headBefore,generation:eE.generation};(eF=="undo"?eE.undone:eE.done).push(eG);eE.generation=eA.generation||++eE.maxGeneration;var eB=dS(eI,"beforeChange")||eI.cm&&dS(eI.cm,"beforeChange");for(var eC=eA.changes.length-1;eC>=0;--eC){var eH=eA.changes[eC];eH.origin=eF;if(eB&&!cI(eI,eH,false)){(eF=="undo"?eE.done:eE.undone).length=0;return}eG.changes.push(ct(eI,eH));var ez=eC?dR(eI,eH,null):{anchor:eA.anchorBefore,head:eA.headBefore};cU(eI,eH,ez,cR(eI,eH));var eD=[];cP(eI,function(eK,eJ){if(!eJ&&cm(eD,eK.history)==-1){cB(eK.history,eH);eD.push(eK.history)}cU(eK,eH,null,cR(eK,eH))})}}function dU(ez,eB){function eA(eC){return L(eC.line+eB,eC.ch)}ez.first+=eB;if(ez.cm){R(ez.cm,ez.first,ez.first,eB)}ez.sel.head=eA(ez.sel.head);ez.sel.anchor=eA(ez.sel.anchor);ez.sel.from=eA(ez.sel.from);ez.sel.to=eA(ez.sel.to)}function cU(eD,eE,eC,eA){if(eD.cm&&!eD.cm.curOp){return ca(eD.cm,cU)(eD,eE,eC,eA)}if(eE.to.line<eD.first){dU(eD,eE.text.length-1-(eE.to.line-eE.from.line));return}if(eE.from.line>eD.lastLine()){return}if(eE.from.line<eD.first){var ez=eE.text.length-1-(eD.first-eE.from.line);dU(eD,ez);eE={from:L(eD.first,0),to:L(eE.to.line+ez,eE.to.ch),text:[ea(eE.text)],origin:eE.origin}}var eB=eD.lastLine();if(eE.to.line>eB){eE={from:eE.from,to:L(eB,dM(eD,eB).text.length),text:[eE.text[0]],origin:eE.origin}}eE.removed=eo(eD,eE.from,eE.to);if(!eC){eC=dR(eD,eE,null)}if(eD.cm){am(eD.cm,eE,eA,eC)}else{d5(eD,eE,eA,eC)}}function am(eJ,eF,eC,ez){var eI=eJ.doc,eE=eJ.display,eG=eF.from,eH=eF.to;var eA=false,eB=eG.line;if(!eJ.options.lineWrapping){eB=bd(v(eI,dM(eI,eG.line)));eI.iter(eB,eH.line+1,function(eM){if(eM==eE.maxLine){eA=true;return true}})}if(!dN(eI.sel.head,eF.from)&&!dN(eF.to,eI.sel.head)){eJ.curOp.cursorActivity=true}d5(eI,eF,eC,ez,aJ(eJ));if(!eJ.options.lineWrapping){eI.iter(eB,eG.line+eF.text.length,function(eN){var eM=c2(eI,eN);if(eM>eE.maxLineLength){eE.maxLine=eN;eE.maxLineLength=eM;eE.maxLineChanged=true;eA=false}});if(eA){eJ.curOp.updateMaxLine=true}}eI.frontier=Math.min(eI.frontier,eG.line);cW(eJ,400);var eL=eF.text.length-(eH.line-eG.line)-1;R(eJ,eG.line,eH.line+1,eL);if(dS(eJ,"change")){var eD={from:eG,to:eH,text:eF.text,removed:eF.removed,origin:eF.origin};if(eJ.curOp.textChanged){for(var eK=eJ.curOp.textChanged;eK.next;eK=eK.next){}eK.next=eD}else{eJ.curOp.textChanged=eD}}}function az(eC,eB,eE,eD,ez){if(!eD){eD=eE}if(dN(eD,eE)){var eA=eD;eD=eE;eE=eA}if(typeof eB=="string"){eB=ay(eB)}aL(eC,{from:eE,to:eD,text:eB,origin:ez},null)}function L(ez,eA){if(!(this instanceof L)){return new L(ez,eA)}this.line=ez;this.ch=eA}C.Pos=L;function eb(eA,ez){return eA.line==ez.line&&eA.ch==ez.ch}function dN(eA,ez){return eA.line<ez.line||(eA.line==ez.line&&eA.ch<ez.ch)}function bA(eA,ez){return eA.line-ez.line||eA.ch-ez.ch}function bD(ez){return L(ez.line,ez.ch)}function cc(ez,eA){return Math.max(ez.first,Math.min(eA,ez.first+ez.size-1))}function ec(eA,eB){if(eB.line<eA.first){return L(eA.first,0)}var ez=eA.first+eA.size-1;if(eB.line>ez){return L(ez,dM(eA,ez).text.length)}return d0(eB,dM(eA,eB.line).text.length)}function d0(eB,eA){var ez=eB.ch;if(ez==null||ez>eA){return L(eB.line,eA)}else{if(ez<0){return L(eB.line,0)}else{return eB}}}function bu(eA,ez){return ez>=eA.first&&ez<eA.first+eA.size}function ej(eD,eE,ez,eA){if(eD.sel.shift||eD.sel.extend){var eC=eD.sel.anchor;if(ez){var eB=dN(eE,eC);if(eB!=dN(ez,eC)){eC=eE;eE=ez}else{if(eB!=dN(eE,ez)){eE=ez}}}bi(eD,eC,eE,eA)}else{bi(eD,eE,ez||eE,eA)}if(eD.cm){eD.cm.curOp.userSelChange=true}}function c(eC,ez,eA){var eB={anchor:ez,head:eA};ai(eC,"beforeSelectionChange",eC,eB);if(eC.cm){ai(eC.cm,"beforeSelectionChange",eC.cm,eB)}eB.anchor=ec(eC,eB.anchor);eB.head=ec(eC,eB.head);return eB}function bi(eG,eD,eE,eB,eA){if(!eA&&dS(eG,"beforeSelectionChange")||eG.cm&&dS(eG.cm,"beforeSelectionChange")){var eC=c(eG,eD,eE);eE=eC.head;eD=eC.anchor}var eF=eG.sel;eF.goalColumn=null;if(eB==null){eB=dN(eE,eF.head)?-1:1}if(eA||!eb(eD,eF.anchor)){eD=bj(eG,eD,eB,eA!="push")}if(eA||!eb(eE,eF.head)){eE=bj(eG,eE,eB,eA!="push")}if(eb(eF.anchor,eD)&&eb(eF.head,eE)){return}eF.anchor=eD;eF.head=eE;var ez=dN(eE,eD);eF.from=ez?eE:eD;eF.to=ez?eD:eE;if(eG.cm){eG.cm.curOp.updateInput=eG.cm.curOp.selectionChanged=eG.cm.curOp.cursorActivity=true}P(eG,"cursorActivity",eG)}function c9(ez){bi(ez.doc,ez.doc.sel.from,ez.doc.sel.to,null,"push")}function bj(eI,eH,eE,eF){var eJ=false,eB=eH;var eC=eE||1;eI.cantEdit=false;search:for(;;){var eK=dM(eI,eB.line);if(eK.markedSpans){for(var eD=0;eD<eK.markedSpans.length;++eD){var ez=eK.markedSpans[eD],eA=ez.marker;if((ez.from==null||(eA.inclusiveLeft?ez.from<=eB.ch:ez.from<eB.ch))&&(ez.to==null||(eA.inclusiveRight?ez.to>=eB.ch:ez.to>eB.ch))){if(eF){ai(eA,"beforeCursorEnter");if(eA.explicitlyCleared){if(!eK.markedSpans){break}else{--eD;continue}}}if(!eA.atomic){continue}var eG=eA.find()[eC<0?"from":"to"];if(eb(eG,eB)){eG.ch+=eC;if(eG.ch<0){if(eG.line>eI.first){eG=ec(eI,L(eG.line-1))}else{eG=null}}else{if(eG.ch>eK.text.length){if(eG.line<eI.first+eI.size-1){eG=L(eG.line+1,0)}else{eG=null}}}if(!eG){if(eJ){if(!eF){return bj(eI,eH,eE,true)}eI.cantEdit=true;return L(eI.first,0)}eJ=true;eG=eH;eC=-eC}}eB=eG;continue search}}}return eB}}function af(eA){var eD=y(eA,eA.doc.sel.head,null,eA.options.cursorScrollMargin);if(!eA.state.focused){return}var eE=eA.display,eB=ao(eE.sizer),ez=null;if(eD.top+eB.top<0){ez=true}else{if(eD.bottom+eB.top>(window.innerHeight||document.documentElement.clientHeight)){ez=false}}if(ez!=null&&!d1){var eC=em("div","\u200b",null,"position: absolute; top: "+(eD.top-eE.viewOffset)+"px; height: "+(eD.bottom-eD.top+aP)+"px; left: "+eD.left+"px; width: 2px;");eA.display.lineSpace.appendChild(eC);eC.scrollIntoView(ez);eA.display.lineSpace.removeChild(eC)}}function y(eI,eG,eD,eC){if(eC==null){eC=0}for(;;){var eE=false,eH=cJ(eI,eG);var ez=!eD||eD==eG?eH:cJ(eI,eD);var eB=B(eI,Math.min(eH.left,ez.left),Math.min(eH.top,ez.top)-eC,Math.max(eH.left,ez.left),Math.max(eH.bottom,ez.bottom)+eC);var eF=eI.doc.scrollTop,eA=eI.doc.scrollLeft;if(eB.scrollTop!=null){G(eI,eB.scrollTop);if(Math.abs(eI.doc.scrollTop-eF)>1){eE=true}}if(eB.scrollLeft!=null){a4(eI,eB.scrollLeft);if(Math.abs(eI.doc.scrollLeft-eA)>1){eE=true}}if(!eE){return eH}}}function A(ez,eB,eD,eA,eC){var eE=B(ez,eB,eD,eA,eC);if(eE.scrollTop!=null){G(ez,eE.scrollTop)}if(eE.scrollLeft!=null){a4(ez,eE.scrollLeft)}}function B(eF,eN,eC,eM,eB){var eK=eF.display,eJ=aw(eF.display);if(eC<0){eC=0}var eA=eK.scroller.clientHeight-aP,eI=eK.scroller.scrollTop,eH={};var eP=eF.doc.height+a8(eK);var eQ=eC<eJ,eL=eB>eP-eJ;if(eC<eI){eH.scrollTop=eQ?0:eC}else{if(eB>eI+eA){var eG=Math.min(eC,(eL?eP:eB)-eA);if(eG!=eI){eH.scrollTop=eG}}}var eE=eK.scroller.clientWidth-aP,ez=eK.scroller.scrollLeft;eN+=eK.gutters.offsetWidth;eM+=eK.gutters.offsetWidth;var eD=eK.gutters.offsetWidth;var eO=eN<eD+10;if(eN<ez+eD||eO){if(eO){eN=0}eH.scrollLeft=Math.max(0,eN-10-eD)}else{if(eM>eE+ez-3){eH.scrollLeft=eM+10-eE}}return eH}function z(ez,eB,eA){ez.curOp.updateScrollPos={scrollLeft:eB==null?ez.doc.scrollLeft:eB,scrollTop:eA==null?ez.doc.scrollTop:eA}}function b1(eA,eC,eB){var eD=eA.curOp.updateScrollPos||(eA.curOp.updateScrollPos={scrollLeft:eA.doc.scrollLeft,scrollTop:eA.doc.scrollTop});var ez=eA.display.scroller;eD.scrollTop=Math.max(0,Math.min(ez.scrollHeight-ez.clientHeight,eD.scrollTop+eB));eD.scrollLeft=Math.max(0,Math.min(ez.scrollWidth-ez.clientWidth,eD.scrollLeft+eC))}function O(eL,eC,eK,eB){var eJ=eL.doc,eA;if(eK==null){eK="add"}if(eK=="smart"){if(!eL.doc.mode.indent){eK="prev"}else{eA=cy(eL,eC)}}var eF=eL.options.tabSize;var eM=dM(eJ,eC),eE=bh(eM.text,null,eF);if(eM.stateAfter){eM.stateAfter=null}var ez=eM.text.match(/^\s*/)[0],eH;if(!eB&&!/\S/.test(eM.text)){eH=0;eK="not"}else{if(eK=="smart"){eH=eL.doc.mode.indent(eA,eM.text.slice(ez.length),eM.text);if(eH==bw){if(!eB){return}eK="prev"}}}if(eK=="prev"){if(eC>eJ.first){eH=bh(dM(eJ,eC-1).text,null,eF)}else{eH=0}}else{if(eK=="add"){eH=eE+eL.options.indentUnit}else{if(eK=="subtract"){eH=eE-eL.options.indentUnit}else{if(typeof eK=="number"){eH=eE+eK}}}}eH=Math.max(0,eH);var eI="",eG=0;if(eL.options.indentWithTabs){for(var eD=Math.floor(eH/eF);eD;--eD){eG+=eF;eI+="\t"}}if(eG<eH){eI+=bK(eH-eG)}if(eI!=ez){az(eL.doc,eI,L(eC,0),L(eC,ez.length),"+input")}else{if(eJ.sel.head.line==eC&&eJ.sel.head.ch<ez.length){bi(eJ,L(eC,ez.length),L(eC,ez.length),1)}}eM.stateAfter=null}function db(ez,eB,eE){var eD=eB,eA=eB,eC=ez.doc;if(typeof eB=="number"){eA=dM(eC,cc(eC,eB))}else{eD=bd(eB)}if(eD==null){return null}if(eE(eA,eD)){R(ez,eD,eD+1)}else{return null}return eA}function a0(eQ,eC,eK,eJ,eE){var eH=eC.line,eI=eC.ch,eP=eK;var ez=dM(eQ,eH);var eN=true;function eO(){var eR=eH+eK;if(eR<eQ.first||eR>=eQ.first+eQ.size){return(eN=false)}eH=eR;return ez=dM(eQ,eR)}function eM(eS){var eR=(eE?r:S)(ez,eI,eK,true);if(eR==null){if(!eS&&eO()){if(eE){eI=(eK<0?b5:bV)(ez)}else{eI=eK<0?ez.text.length:0}}else{return(eN=false)}}else{eI=eR}return true}if(eJ=="char"){eM()}else{if(eJ=="column"){eM(true)}else{if(eJ=="word"||eJ=="group"){var eL=null,eF=eJ=="group";for(var eD=true;;eD=false){if(eK<0&&!eM(!eD)){break}var eA=ez.text.charAt(eI)||"\n";var eB=bS(eA)?"w":eF&&eA=="\n"?"n":!eF||/\s/.test(eA)?null:"p";if(eF&&!eD&&!eB){eB="s"}if(eL&&eL!=eB){if(eK<0){eK=1;eM()}break}if(eB){eL=eB}if(eK>0&&!eM(!eD)){break}}}}}var eG=bj(eQ,L(eH,eI),eP,true);if(!eN){eG.hitSide=true}return eG}function aW(eH,eC,ez,eG){var eF=eH.doc,eE=eC.left,eD;if(eG=="page"){var eB=Math.min(eH.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);eD=eC.top+ez*(eB-(ez<0?1.5:0.5)*aw(eH.display))}else{if(eG=="line"){eD=ez>0?eC.bottom+3:eC.top-3}}for(;;){var eA=eg(eH,eE,eD);if(!eA.outside){break}if(ez<0?eD<=0:eD>=eF.height){eA.hitSide=true;break}eD+=ez*5}return eA}function ac(eC,eE){var eD=eE.ch,eB=eE.ch;if(eC){if((eE.xRel<0||eB==eC.length)&&eD){--eD}else{++eB}var eA=eC.charAt(eD);var ez=bS(eA)?bS:/\s/.test(eA)?function(eF){return/\s/.test(eF)}:function(eF){return !/\s/.test(eF)&&!bS(eF)};while(eD>0&&ez(eC.charAt(eD-1))){--eD}while(eB<eC.length&&ez(eC.charAt(eB))){++eB}}return{from:L(eE.line,eD),to:L(eE.line,eB)}}function aR(ez,eA){ej(ez.doc,L(eA,0),ec(ez.doc,L(eA+1,0)))}C.prototype={constructor:C,focus:function(){window.focus();dd(this);x(this)},setOption:function(eB,eC){var eA=this.options,ez=eA[eB];if(eA[eB]==eC&&eB!="mode"){return}eA[eB]=eC;if(aK.hasOwnProperty(eB)){ca(this,aK[eB])(this,eC,ez)}},getOption:function(ez){return this.options[ez]},getDoc:function(){return this.doc},addKeyMap:function(eA,ez){this.state.keyMaps[ez?"push":"unshift"](eA)},removeKeyMap:function(eA){var eB=this.state.keyMaps;for(var ez=0;ez<eB.length;++ez){if(eB[ez]==eA||(typeof eB[ez]!="string"&&eB[ez].name==eA)){eB.splice(ez,1);return true}}},addOverlay:ca(null,function(ez,eA){var eB=ez.token?ez:C.getMode(this.options,ez);if(eB.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:eB,modeSpec:ez,opaque:eA&&eA.opaque});this.state.modeGen++;R(this)}),removeOverlay:ca(null,function(ez){var eB=this.state.overlays;for(var eA=0;eA<eB.length;++eA){var eC=eB[eA].modeSpec;if(eC==ez||typeof ez=="string"&&eC.name==ez){eB.splice(eA,1);this.state.modeGen++;R(this);return}}}),indentLine:ca(null,function(eB,ez,eA){if(typeof ez!="string"&&typeof ez!="number"){if(ez==null){ez=this.options.smartIndent?"smart":"prev"}else{ez=ez?"add":"subtract"}}if(bu(this.doc,eB)){O(this,eB,ez,eA)}}),indentSelection:ca(null,function(eA){var eB=this.doc.sel;if(eb(eB.from,eB.to)){return O(this,eB.from.line,eA,true)}var eC=eB.to.line-(eB.to.ch?0:1);for(var ez=eB.from.line;ez<=eC;++ez){O(this,ez,eA)}}),getTokenAt:function(eG,eA){var eD=this.doc;eG=ec(eD,eG);var eC=cy(this,eG.line,eA),eF=this.doc.mode;var ez=dM(eD,eG.line);var eE=new du(ez.text,this.options.tabSize);while(eE.pos<eG.ch&&!eE.eol()){eE.start=eE.pos;var eB=eF.token(eE,eC)}return{start:eE.start,end:eE.pos,string:eE.current(),className:eB||null,type:eB||null,state:eC}},getTokenTypeAt:function(eE){eE=ec(this.doc,eE);var eB=ce(this,dM(this.doc,eE.line));var eC=0,eD=(eB.length-1)/2,eA=eE.ch;if(eA==0){return eB[2]}for(;;){var ez=(eC+eD)>>1;if((ez?eB[ez*2-1]:0)>=eA){eD=ez}else{if(eB[ez*2+1]<eA){eC=ez+1}else{return eB[ez*2+2]}}}},getModeAt:function(eA){var ez=this.doc.mode;if(!ez.innerMode){return ez}return C.innerMode(ez,this.getTokenAt(eA).state).mode},getHelper:function(eA,ez){return this.getHelpers(eA,ez)[0]},getHelpers:function(eG,eB){var eC=[];if(!dV.hasOwnProperty(eB)){return dV}var ez=dV[eB],eF=this.getModeAt(eG);if(typeof eF[eB]=="string"){if(ez[eF[eB]]){eC.push(ez[eF[eB]])}}else{if(eF[eB]){for(var eA=0;eA<eF[eB].length;eA++){var eE=ez[eF[eB][eA]];if(eE){eC.push(eE)}}}else{if(eF.helperType&&ez[eF.helperType]){eC.push(ez[eF.helperType])}else{if(ez[eF.name]){eC.push(ez[eF.name])}}}}for(var eA=0;eA<ez._global.length;eA++){var eD=ez._global[eA];if(eD.pred(eF,this)&&cm(eC,eD.val)==-1){eC.push(eD.val)}}return eC},getStateAfter:function(eA,ez){var eB=this.doc;eA=cc(eB,eA==null?eB.first+eB.size-1:eA);return cy(this,eA+1,ez)},cursorCoords:function(eC,eA){var eB,ez=this.doc.sel;if(eC==null){eB=ez.head}else{if(typeof eC=="object"){eB=ec(this.doc,eC)}else{eB=eC?ez.from:ez.to}}return cJ(this,eB,eA||"page")},charCoords:function(eA,ez){return b0(this,ec(this.doc,eA),ez||"page")},coordsChar:function(ez,eA){ez=ev(this,ez,eA||"page");return eg(this,ez.left,ez.top)},lineAtHeight:function(ez,eA){ez=ev(this,{top:ez,left:0},eA||"page").top;return a6(this.doc,ez+this.display.viewOffset)},heightAtLine:function(eA,eD){var ez=false,eC=this.doc.first+this.doc.size-1;if(eA<this.doc.first){eA=this.doc.first}else{if(eA>eC){eA=eC;ez=true}}var eB=dM(this.doc,eA);return dr(this,dM(this.doc,eA),{top:0,left:0},eD||"page").top+(ez?eB.height:0)},defaultTextHeight:function(){return aw(this.display)},defaultCharWidth:function(){return cA(this.display)},setGutterMarker:ca(null,function(ez,eA,eB){return db(this,ez,function(eC){var eD=eC.gutterMarkers||(eC.gutterMarkers={});eD[eA]=eB;if(!eB&&dv(eD)){eC.gutterMarkers=null}return true})}),clearGutter:ca(null,function(eB){var ez=this,eC=ez.doc,eA=eC.first;eC.iter(function(eD){if(eD.gutterMarkers&&eD.gutterMarkers[eB]){eD.gutterMarkers[eB]=null;R(ez,eA,eA+1);if(dv(eD.gutterMarkers)){eD.gutterMarkers=null}}++eA})}),addLineClass:ca(null,function(eB,eA,ez){return db(this,eB,function(eC){var eD=eA=="text"?"textClass":eA=="background"?"bgClass":"wrapClass";if(!eC[eD]){eC[eD]=ez}else{if(new RegExp("(?:^|\\s)"+ez+"(?:$|\\s)").test(eC[eD])){return false}else{eC[eD]+=" "+ez}}return true})}),removeLineClass:ca(null,function(eB,eA,ez){return db(this,eB,function(eD){var eG=eA=="text"?"textClass":eA=="background"?"bgClass":"wrapClass";var eF=eD[eG];if(!eF){return false}else{if(ez==null){eD[eG]=null}else{var eE=eF.match(new RegExp("(?:^|\\s+)"+ez+"(?:$|\\s+)"));if(!eE){return false}var eC=eE.index+eE[0].length;eD[eG]=eF.slice(0,eE.index)+(!eE.index||eC==eF.length?"":" ")+eF.slice(eC)||null}}return true})}),addLineWidget:ca(null,function(eB,eA,ez){return a7(this,eB,eA,ez)}),removeLineWidget:function(ez){ez.clear()},lineInfo:function(ez){if(typeof ez=="number"){if(!bu(this.doc,ez)){return null}var eA=ez;ez=dM(this.doc,ez);if(!ez){return null}}else{var eA=bd(ez);if(eA==null){return null}}return{line:eA,handle:ez,text:ez.text,gutterMarkers:ez.gutterMarkers,textClass:ez.textClass,bgClass:ez.bgClass,wrapClass:ez.wrapClass,widgets:ez.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(eE,eB,eG,eC,eI){var eD=this.display;eE=cJ(this,ec(this.doc,eE));var eF=eE.bottom,eA=eE.left;eB.style.position="absolute";eD.sizer.appendChild(eB);if(eC=="over"){eF=eE.top}else{if(eC=="above"||eC=="near"){var ez=Math.max(eD.wrapper.clientHeight,this.doc.height),eH=Math.max(eD.sizer.clientWidth,eD.lineSpace.clientWidth);if((eC=="above"||eE.bottom+eB.offsetHeight>ez)&&eE.top>eB.offsetHeight){eF=eE.top-eB.offsetHeight}else{if(eE.bottom+eB.offsetHeight<=ez){eF=eE.bottom}}if(eA+eB.offsetWidth>eH){eA=eH-eB.offsetWidth}}}eB.style.top=eF+"px";eB.style.left=eB.style.right="";if(eI=="right"){eA=eD.sizer.clientWidth-eB.offsetWidth;eB.style.right="0px"}else{if(eI=="left"){eA=0}else{if(eI=="middle"){eA=(eD.sizer.clientWidth-eB.offsetWidth)/2}}eB.style.left=eA+"px"}if(eG){A(this,eA,eF,eA+eB.offsetWidth,eF+eB.offsetHeight)}},triggerOnKeyDown:ca(null,m),triggerOnKeyPress:ca(null,bQ),triggerOnKeyUp:ca(null,aN),execCommand:function(ez){if(df.hasOwnProperty(ez)){return df[ez](this)}},findPosH:function(eF,eC,eD,eA){var ez=1;if(eC<0){ez=-1;eC=-eC}for(var eB=0,eE=ec(this.doc,eF);eB<eC;++eB){eE=a0(this.doc,eE,ez,eD,eA);if(eE.hitSide){break}}return eE},moveH:ca(null,function(ez,eA){var eB=this.doc.sel,eC;if(eB.shift||eB.extend||eb(eB.from,eB.to)){eC=a0(this.doc,eB.head,ez,eA,this.options.rtlMoveVisually)}else{eC=ez<0?eB.from:eB.to}ej(this.doc,eC,eC,ez)}),deleteH:ca(null,function(ez,eA){var eB=this.doc.sel;if(!eb(eB.from,eB.to)){az(this.doc,"",eB.from,eB.to,"+delete")}else{az(this.doc,"",eB.from,a0(this.doc,eB.head,ez,eA,false),"+delete")}this.curOp.userSelChange=true}),findPosV:function(eE,eB,eF,eH){var ez=1,eD=eH;if(eB<0){ez=-1;eB=-eB}for(var eA=0,eG=ec(this.doc,eE);eA<eB;++eA){var eC=cJ(this,eG,"div");if(eD==null){eD=eC.left}else{eC.left=eD}eG=aW(this,eC,ez,eF);if(eG.hitSide){break}}return eG},moveV:ca(null,function(eA,eB){var eC=this.doc.sel,eD,ez;if(eC.shift||eC.extend||eb(eC.from,eC.to)){var eE=cJ(this,eC.head,"div");if(eC.goalColumn!=null){eE.left=eC.goalColumn}eD=aW(this,eE,eA,eB);if(eB=="page"){b1(this,0,b0(this,eD,"div").top-eE.top)}ez=eE.left}else{eD=eA<0?eC.from:eC.to}ej(this.doc,eD,eD,eA);if(ez!=null){eC.goalColumn=ez}}),toggleOverwrite:function(ez){if(ez!=null&&ez==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){this.display.cursor.className+=" CodeMirror-overwrite"}else{this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")}ai(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return document.activeElement==this.display.input},scrollTo:ca(null,function(ez,eA){z(this,ez,eA)}),getScrollInfo:function(){var ez=this.display.scroller,eA=aP;return{left:ez.scrollLeft,top:ez.scrollTop,height:ez.scrollHeight-eA,width:ez.scrollWidth-eA,clientHeight:ez.clientHeight-eA,clientWidth:ez.clientWidth-eA}},scrollIntoView:ca(null,function(eA,eC){if(eA==null){eA={from:this.doc.sel.head,to:null}}else{if(typeof eA=="number"){eA={from:L(eA,0),to:null}}else{if(eA.from==null){eA={from:eA,to:null}}}}if(!eA.to){eA.to=eA.from}if(!eC){eC=0}var eB=eA;if(eA.from.line!=null){this.curOp.scrollToPos={from:eA.from,to:eA.to,margin:eC};eB={from:cJ(this,eA.from),to:cJ(this,eA.to)}}var ez=B(this,Math.min(eB.from.left,eB.to.left),Math.min(eB.from.top,eB.to.top)-eC,Math.max(eB.from.right,eB.to.right),Math.max(eB.from.bottom,eB.to.bottom)+eC);z(this,ez.scrollLeft,ez.scrollTop)}),setSize:ca(null,function(eB,ez){function eA(eC){return typeof eC=="number"||/^\d+$/.test(String(eC))?eC+"px":eC}if(eB!=null){this.display.wrapper.style.width=eA(eB)}if(ez!=null){this.display.wrapper.style.height=eA(ez)}if(this.options.lineWrapping){this.display.measureLineCache.length=this.display.measureLineCachePos=0}this.curOp.forceUpdate=true;ai(this,"refresh",this)}),operation:function(ez){return b2(this,ez)},refresh:ca(null,function(){var ez=this.display.cachedTextHeight;U(this);z(this,this.doc.scrollLeft,this.doc.scrollTop);R(this);if(ez==null||Math.abs(ez-aw(this.display))>0.5){M(this)}ai(this,"refresh",this)}),swapDoc:ca(null,function(eA){var ez=this.doc;ez.cm=null;cS(this,eA);U(this);dX(this,true);z(this,eA.scrollLeft,eA.scrollTop);P(this,"swapDoc",this,ez);return ez}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};a1(C);var aK=C.optionHandlers={};var dC=C.defaults={};function p(ez,eC,eB,eA){C.defaults[ez]=eC;if(eB){aK[ez]=eA?function(eD,eF,eE){if(eE!=bx){eB(eD,eF,eE)}}:eB}}var bx=C.Init={toString:function(){return"CodeMirror.Init"}};p("value","",function(ez,eA){ez.setValue(eA)},true);p("mode",null,function(ez,eA){ez.doc.modeOption=eA;aX(ez)},true);p("indentUnit",2,aX,true);p("indentWithTabs",false);p("smartIndent",true);p("tabSize",4,function(ez){c1(ez);U(ez);R(ez)},true);p("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(ez,eA){ez.options.specialChars=new RegExp(eA.source+(eA.test("\t")?"":"|\t"),"g");ez.refresh()},true);p("specialCharPlaceholder",dK,function(ez){ez.refresh()},true);p("electricChars",true);p("rtlMoveVisually",!ap);p("wholeLineUpdateBefore",true);p("theme","default",function(ez){b3(ez);cu(ez)},true);p("keyMap","default",ew);p("extraKeys",null);p("onKeyEvent",null);p("onDragEvent",null);p("lineWrapping",false,dl,true);p("gutters",[],function(ez){bz(ez.options);cu(ez)},true);p("fixedGutter",true,function(ez,eA){ez.display.gutters.style.left=eA?cL(ez.display)+"px":"0";ez.refresh()},true);p("coverGutterNextToScrollbar",false,dy,true);p("lineNumbers",false,function(ez){bz(ez.options);cu(ez)},true);p("firstLineNumber",1,cu,true);p("lineNumberFormatter",function(ez){return ez},cu,true);p("showCursorWhenSelecting",false,a3,true);p("resetSelectionOnContextMenu",true);p("readOnly",false,function(ez,eA){if(eA=="nocursor"){av(ez);ez.display.input.blur();ez.display.disabled=true}else{ez.display.disabled=false;if(!eA){dX(ez,true)}}});p("disableInput",false,function(ez,eA){if(!eA){dX(ez,true)}},true);p("dragDrop",true);p("cursorBlinkRate",530);p("cursorScrollMargin",0);p("cursorHeight",1);p("workTime",100);p("workDelay",100);p("flattenSpans",true,c1,true);p("addModeClass",false,c1,true);p("pollInterval",100);p("undoDepth",40,function(ez,eA){ez.doc.history.undoDepth=eA});p("historyEventDelay",500);p("viewportMargin",10,function(ez){ez.refresh()},true);p("maxHighlightLength",10000,c1,true);p("crudeMeasuringFrom",10000);p("moveInputWithCursor",true,function(ez,eA){if(!eA){ez.display.inputDiv.style.top=ez.display.inputDiv.style.left=0}});p("tabindex",null,function(ez,eA){ez.display.input.tabIndex=eA||""});p("autofocus",null);var cr=C.modes={},au=C.mimeModes={};C.defineMode=function(ez,eB){if(!C.defaults.mode&&ez!="null"){C.defaults.mode=ez}if(arguments.length>2){eB.dependencies=[];for(var eA=2;eA<arguments.length;++eA){eB.dependencies.push(arguments[eA])}}cr[ez]=eB};C.defineMIME=function(eA,ez){au[eA]=ez};C.resolveMode=function(ez){if(typeof ez=="string"&&au.hasOwnProperty(ez)){ez=au[ez]}else{if(ez&&typeof ez.name=="string"&&au.hasOwnProperty(ez.name)){var eA=au[ez.name];if(typeof eA=="string"){eA={name:eA}}ez=bE(eA,ez);ez.name=eA.name}else{if(typeof ez=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ez)){return C.resolveMode("application/xml")}}}if(typeof ez=="string"){return{name:ez}}else{return ez||{name:"null"}}};C.getMode=function(eA,ez){var ez=C.resolveMode(ez);var eC=cr[ez.name];if(!eC){return C.getMode(eA,"text/plain")}var eD=eC(eA,ez);if(cp.hasOwnProperty(ez.name)){var eB=cp[ez.name];for(var eE in eB){if(!eB.hasOwnProperty(eE)){continue}if(eD.hasOwnProperty(eE)){eD["_"+eE]=eD[eE]}eD[eE]=eB[eE]}}eD.name=ez.name;if(ez.helperType){eD.helperType=ez.helperType}if(ez.modeProps){for(var eE in ez.modeProps){eD[eE]=ez.modeProps[eE]}}return eD};C.defineMode("null",function(){return{token:function(ez){ez.skipToEnd()}}});C.defineMIME("text/plain","null");var cp=C.modeExtensions={};C.extendMode=function(eB,eA){var ez=cp.hasOwnProperty(eB)?cp[eB]:(cp[eB]={});an(eA,ez)};C.defineExtension=function(ez,eA){C.prototype[ez]=eA};C.defineDocExtension=function(ez,eA){ab.prototype[ez]=eA};C.defineOption=p;var aE=[];C.defineInitHook=function(ez){aE.push(ez)};var dV=C.helpers={};C.registerHelper=function(eA,ez,eB){if(!dV.hasOwnProperty(eA)){dV[eA]=C[eA]={_global:[]}}dV[eA][ez]=eB};C.registerGlobalHelper=function(eB,eA,ez,eC){C.registerHelper(eB,eA,eC);dV[eB]._global.push({pred:ez,val:eC})};C.isWordChar=bS;function bp(eC,ez){if(ez===true){return ez}if(eC.copyState){return eC.copyState(ez)}var eB={};for(var eD in ez){var eA=ez[eD];if(eA instanceof Array){eA=eA.concat([])}eB[eD]=eA}return eB}C.copyState=bp;function bn(eB,eA,ez){return eB.startState?eB.startState(eA,ez):true}C.startState=bn;C.innerMode=function(eB,ez){while(eB.innerMode){var eA=eB.innerMode(ez);if(!eA||eA.mode==eB){break}ez=eA.state;eB=eA.mode}return eA||{mode:eB,state:ez}};var df=C.commands={selectAll:function(ez){ez.setSelection(L(ez.firstLine(),0),L(ez.lastLine()))},killLine:function(ez){var eC=ez.getCursor(true),eB=ez.getCursor(false),eA=!eb(eC,eB);if(!eA&&ez.getLine(eC.line).length==eC.ch){ez.replaceRange("",eC,L(eC.line+1,0),"+delete")}else{ez.replaceRange("",eC,eA?eB:L(eC.line),"+delete")}},deleteLine:function(ez){var eA=ez.getCursor().line;ez.replaceRange("",L(eA,0),L(eA+1,0),"+delete")},delLineLeft:function(ez){var eA=ez.getCursor();ez.replaceRange("",L(eA.line,0),eA,"+delete")},undo:function(ez){ez.undo()},redo:function(ez){ez.redo()},goDocStart:function(ez){ez.extendSelection(L(ez.firstLine(),0))},goDocEnd:function(ez){ez.extendSelection(L(ez.lastLine()))},goLineStart:function(ez){ez.extendSelection(aZ(ez,ez.getCursor().line))},goLineStartSmart:function(eA){var eE=eA.getCursor(),eF=aZ(eA,eE.line);var eB=eA.getLineHandle(eF.line);var ez=a(eB);if(!ez||ez[0].level==0){var eD=Math.max(0,eB.text.search(/\S/));var eC=eE.line==eF.line&&eE.ch<=eD&&eE.ch;eA.extendSelection(L(eF.line,eC?0:eD))}else{eA.extendSelection(eF)}},goLineEnd:function(ez){ez.extendSelection(cG(ez,ez.getCursor().line))},goLineRight:function(ez){var eA=ez.charCoords(ez.getCursor(),"div").top+5;ez.extendSelection(ez.coordsChar({left:ez.display.lineDiv.offsetWidth+100,top:eA},"div"))},goLineLeft:function(ez){var eA=ez.charCoords(ez.getCursor(),"div").top+5;ez.extendSelection(ez.coordsChar({left:0,top:eA},"div"))},goLineUp:function(ez){ez.moveV(-1,"line")},goLineDown:function(ez){ez.moveV(1,"line")},goPageUp:function(ez){ez.moveV(-1,"page")},goPageDown:function(ez){ez.moveV(1,"page")},goCharLeft:function(ez){ez.moveH(-1,"char")},goCharRight:function(ez){ez.moveH(1,"char")},goColumnLeft:function(ez){ez.moveH(-1,"column")},goColumnRight:function(ez){ez.moveH(1,"column")},goWordLeft:function(ez){ez.moveH(-1,"word")},goGroupRight:function(ez){ez.moveH(1,"group")},goGroupLeft:function(ez){ez.moveH(-1,"group")},goWordRight:function(ez){ez.moveH(1,"word")},delCharBefore:function(ez){ez.deleteH(-1,"char")},delCharAfter:function(ez){ez.deleteH(1,"char")},delWordBefore:function(ez){ez.deleteH(-1,"word")},delWordAfter:function(ez){ez.deleteH(1,"word")},delGroupBefore:function(ez){ez.deleteH(-1,"group")},delGroupAfter:function(ez){ez.deleteH(1,"group")},indentAuto:function(ez){ez.indentSelection("smart")},indentMore:function(ez){ez.indentSelection("add")},indentLess:function(ez){ez.indentSelection("subtract")},insertTab:function(ez){ez.replaceSelection("\t","end","+input")},defaultTab:function(ez){if(ez.somethingSelected()){ez.indentSelection("add")}else{ez.replaceSelection("\t","end","+input")}},transposeChars:function(ez){var eB=ez.getCursor(),eA=ez.getLine(eB.line);if(eB.ch>0&&eB.ch<eA.length-1){ez.replaceRange(eA.charAt(eB.ch)+eA.charAt(eB.ch-1),L(eB.line,eB.ch-1),L(eB.line,eB.ch+1))}},newlineAndIndent:function(ez){ca(ez,function(){ez.replaceSelection("\n","end","+input");ez.indentLine(ez.getCursor().line,null,true)})()},toggleOverwrite:function(ez){ez.toggleOverwrite()}};var dI=C.keyMap={};dI.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};dI.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};dI.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};dI["default"]=br?dI.macDefault:dI.pcDefault;dI.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function ek(ez){if(typeof ez=="string"){return dI[ez]}else{return ez}}function g(eA,eE,eC){function eD(eK){eK=ek(eK);var eI=eK[eA];if(eI===false){return"stop"}if(eI!=null&&eC(eI)){return true}if(eK.nofallthrough){return"stop"}var eH=eK.fallthrough;if(eH==null){return false}if(Object.prototype.toString.call(eH)!="[object Array]"){return eD(eH)}for(var eG=0,eJ=eH.length;eG<eJ;++eG){var eF=eD(eH[eG]);if(eF){return eF}}return false}for(var eB=0;eB<eE.length;++eB){var ez=eD(eE[eB]);if(ez){return ez!="stop"}}}function de(eA){var ez=dO[eA.keyCode];return ez=="Ctrl"||ez=="Alt"||ez=="Shift"||ez=="Mod"}function dZ(eA,eB){if(d4&&eA.keyCode==34&&eA["char"]){return false}var ez=dO[eA.keyCode];if(ez==null||eA.altGraphKey){return false}if(eA.altKey){ez="Alt-"+ez}if(bf?eA.metaKey:eA.ctrlKey){ez="Ctrl-"+ez}if(bf?eA.ctrlKey:eA.metaKey){ez="Cmd-"+ez}if(!eB&&eA.shiftKey){ez="Shift-"+ez}return ez}C.lookupKey=g;C.isModifierKey=de;C.keyName=dZ;C.fromTextArea=function(eG,eH){if(!eH){eH={}}eH.value=eG.value;if(!eH.tabindex&&eG.tabindex){eH.tabindex=eG.tabindex}if(!eH.placeholder&&eG.placeholder){eH.placeholder=eG.placeholder}if(eH.autofocus==null){var ez=document.body;try{ez=document.activeElement}catch(eB){}eH.autofocus=ez==eG||eG.getAttribute("autofocus")!=null&&ez==document.body}function eD(){eG.value=eF.getValue()}if(eG.form){bl(eG.form,"submit",eD);if(!eH.leaveSubmitMethodAlone){var eA=eG.form,eE=eA.submit;try{var eC=eA.submit=function(){eD();eA.submit=eE;eA.submit();eA.submit=eC}}catch(eB){}}}eG.style.display="none";var eF=C(function(eI){eG.parentNode.insertBefore(eI,eG.nextSibling)},eH);eF.save=eD;eF.getTextArea=function(){return eG};eF.toTextArea=function(){eD();eG.parentNode.removeChild(eF.getWrapperElement());eG.style.display="";if(eG.form){cV(eG.form,"submit",eD);if(typeof eG.form.submit=="function"){eG.form.submit=eE}}};return eF};function du(ez,eA){this.pos=this.start=0;this.string=ez;this.tabSize=eA||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0}du.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(ez){var eB=this.string.charAt(this.pos);if(typeof ez=="string"){var eA=eB==ez}else{var eA=eB&&(ez.test?ez.test(eB):ez(eB))}if(eA){++this.pos;return eB}},eatWhile:function(ez){var eA=this.pos;while(this.eat(ez)){}return this.pos>eA},eatSpace:function(){var ez=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>ez},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ez){var eA=this.string.indexOf(ez,this.pos);if(eA>-1){this.pos=eA;return true}},backUp:function(ez){this.pos-=ez},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bh(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bh(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bh(this.string,null,this.tabSize)-(this.lineStart?bh(this.string,this.lineStart,this.tabSize):0)},match:function(eD,eA,ez){if(typeof eD=="string"){var eE=function(eF){return ez?eF.toLowerCase():eF};var eC=this.string.substr(this.pos,eD.length);if(eE(eC)==eE(eD)){if(eA!==false){this.pos+=eD.length}return true}}else{var eB=this.string.slice(this.pos).match(eD);if(eB&&eB.index>0){return null}if(eB&&eA!==false){this.pos+=eB[0].length}return eB}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(eA,ez){this.lineStart+=eA;try{return ez()}finally{this.lineStart-=eA}}};C.StringStream=du;function I(eA,ez){this.lines=[];this.type=ez;this.doc=eA}C.TextMarker=I;a1(I);I.prototype.clear=function(){if(this.explicitlyCleared){return}var eG=this.doc.cm,eA=eG&&!eG.curOp;if(eA){bZ(eG)}if(dS(this,"clear")){var eH=this.find();if(eH){P(this,"clear",eH.from,eH.to)}}var eB=null,eE=null;for(var eC=0;eC<this.lines.length;++eC){var eI=this.lines[eC];var eF=dH(eI.markedSpans,this);if(eF.to!=null){eE=bd(eI)}eI.markedSpans=dm(eI.markedSpans,eF);if(eF.from!=null){eB=bd(eI)}else{if(this.collapsed&&!d2(this.doc,eI)&&eG){er(eI,aw(eG.display))}}}if(eG&&this.collapsed&&!eG.options.lineWrapping){for(var eC=0;eC<this.lines.length;++eC){var ez=v(eG.doc,this.lines[eC]),eD=c2(eG.doc,ez);if(eD>eG.display.maxLineLength){eG.display.maxLine=ez;eG.display.maxLineLength=eD;eG.display.maxLineChanged=true}}}if(eB!=null&&eG){R(eG,eB,eE+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(eG){c9(eG)}}if(eA){X(eG)}};I.prototype.find=function(eD){var eF,eE;for(var eA=0;eA<this.lines.length;++eA){var ez=this.lines[eA];var eB=dH(ez.markedSpans,this);if(eB.from!=null||eB.to!=null){var eC=bd(ez);if(eB.from!=null){eF=L(eC,eB.from)}if(eB.to!=null){eE=L(eC,eB.to)}}}if(this.type=="bookmark"&&!eD){return eF}return eF&&{from:eF,to:eE}};I.prototype.changed=function(){var eC=this.find(),ez=this.doc.cm;if(!eC||!ez){return}if(this.type!="bookmark"){eC=eC.from}var eA=dM(this.doc,eC.line);ef(ez,eA);if(eC.line>=ez.display.showingFrom&&eC.line<ez.display.showingTo){for(var eB=ez.display.lineDiv.firstChild;eB;eB=eB.nextSibling){if(eB.lineObj==eA){if(eB.offsetHeight!=eA.height){er(eA,eB.offsetHeight)}break}}b2(ez,function(){ez.curOp.selectionChanged=ez.curOp.forceUpdate=ez.curOp.updateMaxLine=true})}};I.prototype.attachLine=function(ez){if(!this.lines.length&&this.doc.cm){var eA=this.doc.cm.curOp;if(!eA.maybeHiddenMarkers||cm(eA.maybeHiddenMarkers,this)==-1){(eA.maybeUnhiddenMarkers||(eA.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(ez)};I.prototype.detachLine=function(ez){this.lines.splice(cm(this.lines,ez),1);if(!this.lines.length&&this.doc.cm){var eA=this.doc.cm.curOp;(eA.maybeHiddenMarkers||(eA.maybeHiddenMarkers=[])).push(this)}};var aB=0;function dj(eF,eD,eE,eH,eC){if(eH&&eH.shared){return H(eF,eD,eE,eH,eC)}if(eF.cm&&!eF.cm.curOp){return ca(eF.cm,dj)(eF,eD,eE,eH,eC)}var eB=new I(eF,eC);if(eH){an(eH,eB)}if(dN(eE,eD)||eb(eD,eE)&&eB.clearWhenEmpty!==false){return eB}if(eB.replacedWith){eB.collapsed=true;eB.replacedWith=em("span",[eB.replacedWith],"CodeMirror-widget");if(!eH.handleMouseEvents){eB.replacedWith.ignoreEvents=true}}if(eB.collapsed){if(w(eF,eD.line,eD,eE,eB)||eD.line!=eE.line&&w(eF,eE.line,eD,eE,eB)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}aD=true}if(eB.addToHistory){dk(eF,{from:eD,to:eE,origin:"markText"},{head:eF.sel.head,anchor:eF.sel.anchor},NaN)}var eA=eD.line,eG=eF.cm,ez;eF.iter(eA,eE.line+1,function(eI){if(eG&&eB.collapsed&&!eG.options.lineWrapping&&v(eF,eI)==eG.display.maxLine){ez=true}var eJ={from:null,to:null,marker:eB};if(eA==eD.line){eJ.from=eD.ch}if(eA==eE.line){eJ.to=eE.ch}if(eB.collapsed&&eA!=eD.line){er(eI,0)}by(eI,eJ);++eA});if(eB.collapsed){eF.iter(eD.line,eE.line+1,function(eI){if(d2(eF,eI)){er(eI,0)}})}if(eB.clearOnEnter){bl(eB,"beforeCursorEnter",function(){eB.clear()})}if(eB.readOnly){et=true;if(eF.history.done.length||eF.history.undone.length){eF.clearHistory()}}if(eB.collapsed){eB.id=++aB;eB.atomic=true}if(eG){if(ez){eG.curOp.updateMaxLine=true}if(eB.className||eB.title||eB.startStyle||eB.endStyle||eB.collapsed){R(eG,eD.line,eE.line+1)}if(eB.atomic){c9(eG)}}return eB}function u(eC,eA){this.markers=eC;this.primary=eA;for(var ez=0,eB=this;ez<eC.length;++ez){eC[ez].parent=this;bl(eC[ez],"clear",function(){eB.clear()})}}C.SharedTextMarker=u;a1(u);u.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var ez=0;ez<this.markers.length;++ez){this.markers[ez].clear()}P(this,"clear")};u.prototype.find=function(){return this.primary.find()};function H(eD,eG,eF,ez,eB){ez=an(ez);ez.shared=false;var eE=[dj(eD,eG,eF,ez,eB)],eA=eE[0];var eC=ez.replacedWith;cP(eD,function(eI){if(eC){ez.replacedWith=eC.cloneNode(true)}eE.push(dj(eI,ec(eI,eG),ec(eI,eF),ez,eB));for(var eH=0;eH<eI.linked.length;++eH){if(eI.linked[eH].isParent){return}}eA=ea(eE)});return new u(eE,eA)}function dH(eB,ez){if(eB){for(var eA=0;eA<eB.length;++eA){var eC=eB[eA];if(eC.marker==ez){return eC}}}}function dm(eA,eB){for(var eC,ez=0;ez<eA.length;++ez){if(eA[ez]!=eB){(eC||(eC=[])).push(eA[ez])}}return eC}function by(ez,eA){ez.markedSpans=ez.markedSpans?ez.markedSpans.concat([eA]):[eA];eA.marker.attachLine(ez)}function ar(eA,eB,eF){if(eA){for(var eD=0,eG;eD<eA.length;++eD){var eH=eA[eD],eE=eH.marker;var ez=eH.from==null||(eE.inclusiveLeft?eH.from<=eB:eH.from<eB);if(ez||eH.from==eB&&eE.type=="bookmark"&&(!eF||!eH.marker.insertLeft)){var eC=eH.to==null||(eE.inclusiveRight?eH.to>=eB:eH.to>eB);(eG||(eG=[])).push({from:eH.from,to:eC?null:eH.to,marker:eE})}}}return eG}function ag(eA,eC,eF){if(eA){for(var eD=0,eG;eD<eA.length;++eD){var eH=eA[eD],eE=eH.marker;var eB=eH.to==null||(eE.inclusiveRight?eH.to>=eC:eH.to>eC);if(eB||eH.from==eC&&eE.type=="bookmark"&&(!eF||eH.marker.insertLeft)){var ez=eH.from==null||(eE.inclusiveLeft?eH.from<=eC:eH.from<eC);(eG||(eG=[])).push({from:ez?null:eH.from-eC,to:eH.to==null?null:eH.to-eC,marker:eE})}}}return eG}function c0(eL,eI){var eH=bu(eL,eI.from.line)&&dM(eL,eI.from.line).markedSpans;var eO=bu(eL,eI.to.line)&&dM(eL,eI.to.line).markedSpans;if(!eH&&!eO){return null}var eA=eI.from.ch,eD=eI.to.ch,eG=eb(eI.from,eI.to);var eF=ar(eH,eA,eG);var eN=ag(eO,eD,eG);var eM=eI.text.length==1,eB=ea(eI.text).length+(eM?eA:0);if(eF){for(var eC=0;eC<eF.length;++eC){var eK=eF[eC];if(eK.to==null){var eP=dH(eN,eK.marker);if(!eP){eK.to=eA}else{if(eM){eK.to=eP.to==null?null:eP.to+eB}}}}}if(eN){for(var eC=0;eC<eN.length;++eC){var eK=eN[eC];if(eK.to!=null){eK.to+=eB}if(eK.from==null){var eP=dH(eF,eK.marker);if(!eP){eK.from=eB;if(eM){(eF||(eF=[])).push(eK)}}}else{eK.from+=eB;if(eM){(eF||(eF=[])).push(eK)}}}}if(eF){eF=n(eF)}if(eN&&eN!=eF){eN=n(eN)}var eE=[eF];if(!eM){var eJ=eI.text.length-2,ez;if(eJ>0&&eF){for(var eC=0;eC<eF.length;++eC){if(eF[eC].to==null){(ez||(ez=[])).push({from:null,to:null,marker:eF[eC].marker})}}}for(var eC=0;eC<eJ;++eC){eE.push(ez)}eE.push(eN)}return eE}function n(eA){for(var ez=0;ez<eA.length;++ez){var eB=eA[ez];if(eB.from!=null&&eB.from==eB.to&&eB.marker.clearWhenEmpty!==false){eA.splice(ez--,1)}}if(!eA.length){return null}return eA}function cR(eH,eF){var ez=bs(eH,eF);var eI=c0(eH,eF);if(!ez){return eI}if(!eI){return ez}for(var eC=0;eC<ez.length;++eC){var eD=ez[eC],eE=eI[eC];if(eD&&eE){spans:for(var eB=0;eB<eE.length;++eB){var eG=eE[eB];for(var eA=0;eA<eD.length;++eA){if(eD[eA].marker==eG.marker){continue spans}}eD.push(eG)}}else{if(eE){ez[eC]=eE}}}return ez}function bX(eJ,eH,eI){var eC=null;eJ.iter(eH.line,eI.line+1,function(eK){if(eK.markedSpans){for(var eL=0;eL<eK.markedSpans.length;++eL){var eM=eK.markedSpans[eL].marker;if(eM.readOnly&&(!eC||cm(eC,eM)==-1)){(eC||(eC=[])).push(eM)}}}});if(!eC){return null}var eD=[{from:eH,to:eI}];for(var eE=0;eE<eC.length;++eE){var eF=eC[eE],eA=eF.find();for(var eB=0;eB<eD.length;++eB){var ez=eD[eB];if(dN(ez.to,eA.from)||dN(eA.to,ez.from)){continue}var eG=[eB,1];if(dN(ez.from,eA.from)||!eF.inclusiveLeft&&eb(ez.from,eA.from)){eG.push({from:ez.from,to:eA.from})}if(dN(eA.to,ez.to)||!eF.inclusiveRight&&eb(ez.to,eA.to)){eG.push({from:eA.to,to:ez.to})}eD.splice.apply(eD,eG);eB+=eG.length-1}}return eD}function s(ez){return ez.inclusiveLeft?-1:0}function bk(ez){return ez.inclusiveRight?1:0}function cH(eC,eA){var eE=eC.lines.length-eA.lines.length;if(eE!=0){return eE}var eB=eC.find(),eF=eA.find();var ez=bA(eB.from,eF.from)||s(eC)-s(eA);if(ez){return -ez}var eD=bA(eB.to,eF.to)||bk(eC)-bk(eA);if(eD){return eD}return eA.id-eC.id}function aC(eA,eE){var ez=aD&&eA.markedSpans,eD;if(ez){for(var eC,eB=0;eB<ez.length;++eB){eC=ez[eB];if(eC.marker.collapsed&&(eE?eC.from:eC.to)==null&&(!eD||cH(eD,eC.marker)<0)){eD=eC.marker}}}return eD}function dq(ez){return aC(ez,true)}function c7(ez){return aC(ez,false)}function w(eH,eB,eF,eG,eD){var eK=dM(eH,eB);var ez=aD&&eK.markedSpans;if(ez){for(var eC=0;eC<ez.length;++eC){var eA=ez[eC];if(!eA.marker.collapsed){continue}var eJ=eA.marker.find(true);var eI=bA(eJ.from,eF)||s(eA.marker)-s(eD);var eE=bA(eJ.to,eG)||bk(eA.marker)-bk(eD);if(eI>=0&&eE<=0||eI<=0&&eE>=0){continue}if(eI<=0&&(bA(eJ.to,eF)||bk(eA.marker)-s(eD))>0||eI>=0&&(bA(eJ.from,eG)||s(eA.marker)-bk(eD))<0){return true}}}}function v(eB,eA){var ez;while(ez=dq(eA)){eA=dM(eB,ez.find().from.line)}return eA}function d2(eD,eA){var ez=aD&&eA.markedSpans;if(ez){for(var eC,eB=0;eB<ez.length;++eB){eC=ez[eB];if(!eC.marker.collapsed){continue}if(eC.from==null){return true}if(eC.marker.replacedWith){continue}if(eC.from==0&&eC.marker.inclusiveLeft&&K(eD,eA,eC)){return true}}}}function K(eF,eA,eC){if(eC.to==null){var ez=eC.marker.find().to,eD=dM(eF,ez.line);return K(eF,eD,dH(eD.markedSpans,eC.marker))}if(eC.marker.inclusiveRight&&eC.to==eA.text.length){return true}for(var eE,eB=0;eB<eA.markedSpans.length;++eB){eE=eA.markedSpans[eB];if(eE.marker.collapsed&&!eE.marker.replacedWith&&eE.from==eC.to&&(eE.to==null||eE.to!=eC.from)&&(eE.marker.inclusiveLeft||eC.marker.inclusiveRight)&&K(eF,eA,eE)){return true}}}function es(ez){var eB=ez.markedSpans;if(!eB){return}for(var eA=0;eA<eB.length;++eA){eB[eA].marker.detachLine(ez)}ez.markedSpans=null}function cb(ez,eB){if(!eB){return}for(var eA=0;eA<eB.length;++eA){eB[eA].marker.attachLine(ez)}ez.markedSpans=eB}var cz=C.LineWidget=function(ez,eC,eA){if(eA){for(var eB in eA){if(eA.hasOwnProperty(eB)){this[eB]=eA[eB]}}}this.cm=ez;this.node=eC};a1(cz);function F(ez){return function(){var eB=!this.cm.curOp;if(eB){bZ(this.cm)}try{var eA=ez.apply(this,arguments)}finally{if(eB){X(this.cm)}}return eA}}cz.prototype.clear=F(function(){var eA=this.line.widgets,eC=bd(this.line);if(eC==null||!eA){return}for(var eB=0;eB<eA.length;++eB){if(eA[eB]==this){eA.splice(eB--,1)}}if(!eA.length){this.line.widgets=null}var ez=bc(this.cm,this.line)<this.cm.doc.scrollTop;er(this.line,Math.max(0,this.line.height-b7(this)));if(ez){b1(this.cm,0,-this.height)}R(this.cm,eC,eC+1)});cz.prototype.changed=F(function(){var ez=this.height;this.height=null;var eA=b7(this)-ez;if(!eA){return}er(this.line,this.line.height+eA);var eB=bd(this.line);R(this.cm,eB,eB+1)});function b7(ez){if(ez.height!=null){return ez.height}if(!ez.node.parentNode||ez.node.parentNode.nodeType!=1){bg(ez.cm.display.measure,em("div",[ez.node],null,"position: relative"))}return ez.height=ez.node.offsetHeight}function a7(ez,eD,eB,eA){var eC=new cz(ez,eB,eA);if(eC.noHScroll){ez.display.alignWidgets=true}db(ez,eD,function(eF){var eG=eF.widgets||(eF.widgets=[]);if(eC.insertAt==null){eG.push(eC)}else{eG.splice(Math.min(eG.length-1,Math.max(0,eC.insertAt)),0,eC)}eC.line=eF;if(!d2(ez.doc,eF)||eC.showIfHidden){var eE=bc(ez,eF)<ez.doc.scrollTop;er(eF,eF.height+b7(eC));if(eE){b1(ez,0,eC.height)}ez.curOp.forceUpdate=true}return true});return eC}var eq=C.Line=function(eB,eA,ez){this.text=eB;cb(this,eA);this.height=ez?ez(this):1};a1(eq);eq.prototype.lineNo=function(){return bd(this)};function c3(eA,eD,eB,ez){eA.text=eD;if(eA.stateAfter){eA.stateAfter=null}if(eA.styles){eA.styles=null}if(eA.order!=null){eA.order=null}es(eA);cb(eA,eB);var eC=ez?ez(eA):1;if(eC!=eA.height){er(eA,eC)}}function a2(ez){ez.parent=null;es(ez)}function t(eI,eK,eD,eA,eE,eC){var eB=eD.flattenSpans;if(eB==null){eB=eI.options.flattenSpans}var eG=0,eF=null;var eJ=new du(eK,eI.options.tabSize),ez;if(eK==""&&eD.blankLine){eD.blankLine(eA)}while(!eJ.eol()){if(eJ.pos>eI.options.maxHighlightLength){eB=false;if(eC){cv(eI,eK,eA,eJ.pos)}eJ.pos=eK.length;ez=null}else{ez=eD.token(eJ,eA)}if(eI.options.addModeClass){var eL=C.innerMode(eD,eA).mode.name;if(eL){ez="m-"+(ez?eL+" "+ez:eL)}}if(!eB||eF!=ez){if(eG<eJ.start){eE(eJ.start,eF)}eG=eJ.start;eF=ez}eJ.start=eJ.pos}while(eG<eJ.pos){var eH=Math.min(eJ.pos,eG+50000);eE(eH,eF);eG=eH}}function d7(eF,eH,ez,eC){var eG=[eF.state.modeGen];t(eF,eH.text,eF.doc.mode,ez,function(eI,eJ){eG.push(eI,eJ)},eC);for(var eA=0;eA<eF.state.overlays.length;++eA){var eD=eF.state.overlays[eA],eE=1,eB=0;t(eF,eH.text,eD.mode,true,function(eI,eK){var eM=eE;while(eB<eI){var eJ=eG[eE];if(eJ>eI){eG.splice(eE,1,eI,eG[eE+1],eJ)}eE+=2;eB=Math.min(eI,eJ)}if(!eK){return}if(eD.opaque){eG.splice(eM,eE-eM,eI,eK);eE=eM+2}else{for(;eM<eE;eM+=2){var eL=eG[eM+1];eG[eM+1]=eL?eL+" "+eK:eK}}})}return eG}function ce(ez,eA){if(!eA.styles||eA.styles[0]!=ez.state.modeGen){eA.styles=d7(ez,eA,eA.stateAfter=cy(ez,bd(eA)))}return eA.styles}function cv(ez,eE,eB,eA){var eD=ez.doc.mode;var eC=new du(eE,ez.options.tabSize);eC.start=eC.pos=eA||0;if(eE==""&&eD.blankLine){eD.blankLine(eB)}while(!eC.eol()&&eC.pos<=ez.options.maxHighlightLength){eD.token(eC,eB);eC.start=eC.pos}}var cK={},bo={};function dw(eC,eB){if(!eC){return null}for(;;){var eA=eC.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!eA){break}eC=eC.slice(0,eA.index)+eC.slice(eA.index+eA[0].length);var eD=eA[1]?"bgClass":"textClass";if(eB[eD]==null){eB[eD]=eA[2]}else{if(!(new RegExp("(?:^|s)"+eA[2]+"(?:$|s)")).test(eB[eD])){eB[eD]+=" "+eA[2]}}}if(/^\s*$/.test(eC)){return null}var ez=eB.cm.options.addModeClass?bo:cK;return ez[eC]||(ez[eC]=eC.replace(/\S+/g,"cm-$&"))}function ds(eI,eM,ez,eL){var eJ,eN=eM,eE=true;while(eJ=dq(eN)){eN=dM(eI.doc,eJ.find().from.line)}var eF={pre:em("pre"),col:0,pos:0,measure:null,measuredSomething:false,cm:eI,copyWidgets:eL};do{if(eN.text){eE=false}eF.measure=eN==eM&&ez;eF.pos=0;eF.addToken=eF.measure?e:q;if((cC||b9)&&eI.getOption("lineWrapping")){eF.addToken=d9(eF.addToken)}var eD=aV(eN,eF,ce(eI,eN));if(ez&&eN==eM&&!eF.measuredSomething){ez[0]=eF.pre.appendChild(aT(eI.display.measure));eF.measuredSomething=true}if(eD){eN=dM(eI.doc,eD.to.line)}}while(eD);if(ez&&!eF.measuredSomething&&!ez[0]){ez[0]=eF.pre.appendChild(eE?em("span","\u00a0"):aT(eI.display.measure))}if(!eF.pre.firstChild&&!d2(eI.doc,eM)){eF.pre.appendChild(document.createTextNode("\u00a0"))}var eA;if(ez&&cC&&(eA=a(eN))){var eC=eA.length-1;if(eA[eC].from==eA[eC].to){--eC}var eK=eA[eC],eB=eA[eC-1];if(eK.from+1==eK.to&&eB&&eK.level<eB.level){var eH=ez[eF.pos-1];if(eH){eH.parentNode.insertBefore(eH.measureRight=aT(eI.display.measure),eH.nextSibling)}}}var eG=eF.textClass?eF.textClass+" "+(eM.textClass||""):eM.textClass;if(eG){eF.pre.className=eG}ai(eI,"renderLine",eI,eM,eF.pre);return eF}function dK(eA){var ez=em("span","\u2022","cm-invalidchar");ez.title="\\u"+eA.charCodeAt(0).toString(16);return ez}function q(eD,eM,ez,eC,eN,eL){if(!eM){return}var eH=eD.cm.options.specialChars;if(!eH.test(eM)){eD.col+=eM.length;var eG=document.createTextNode(eM)}else{var eG=document.createDocumentFragment(),eJ=0;while(true){eH.lastIndex=eJ;var eA=eH.exec(eM);var eF=eA?eA.index-eJ:eM.length-eJ;if(eF){eG.appendChild(document.createTextNode(eM.slice(eJ,eJ+eF)));eD.col+=eF}if(!eA){break}eJ+=eF+1;if(eA[0]=="\t"){var eE=eD.cm.options.tabSize,eI=eE-eD.col%eE;eG.appendChild(em("span",bK(eI),"cm-tab"));eD.col+=eI}else{var eB=eD.cm.options.specialCharPlaceholder(eA[0]);eG.appendChild(eB);eD.col+=1}}}if(ez||eC||eN||eD.measure){var eK=ez||"";if(eC){eK+=eC}if(eN){eK+=eN}var eB=em("span",[eG],eK);if(eL){eB.title=eL}return eD.pre.appendChild(eB)}eD.pre.appendChild(eG)}function e(eG,eJ,eA,eD,eK){var eF=eG.cm.options.lineWrapping;for(var eE=0;eE<eJ.length;++eE){var eB=eE==0,eI=eE+1;while(eI<eJ.length&&dY(eJ.charAt(eI))){++eI}var ez=eJ.slice(eE,eI);eE=eI-1;if(eE&&eF&&bv(eJ,eE)){eG.pre.appendChild(em("wbr"))}var eC=eG.measure[eG.pos];var eH=eG.measure[eG.pos]=q(eG,ez,eA,eB&&eD,eE==eJ.length-1&&eK);if(eC){eH.leftSide=eC.leftSide||eC}if(cg&&eF&&ez==" "&&eE&&!/\s/.test(eJ.charAt(eE-1))&&eE<eJ.length-1&&!/\s/.test(eJ.charAt(eE+1))){eH.style.whiteSpace="normal"}eG.pos+=ez.length}if(eJ.length){eG.measuredSomething=true}}function d9(ez){function eA(eB){var eC=" ";for(var eD=0;eD<eB.length-2;++eD){eC+=eD%2?" ":"\u00a0"}eC+=" ";return eC}return function(eC,eG,eD,eB,eF,eE){return ez(eC,eG.replace(/ {3,}/g,eA),eD,eB,eF,eE)}}function N(eA,eD,ez,eC){var eE=!eC&&ez.replacedWith;if(eE){if(eA.copyWidgets){eE=eE.cloneNode(true)}eA.pre.appendChild(eE);if(eA.measure){if(eD){eA.measure[eA.pos]=eE}else{var eB=aT(eA.cm.display.measure);if(ez.type=="bookmark"&&!ez.insertLeft){eA.measure[eA.pos]=eA.pre.appendChild(eB)}else{if(eA.measure[eA.pos]){return}else{eA.measure[eA.pos]=eA.pre.insertBefore(eB,eE)}}}eA.measuredSomething=true}}eA.pos+=eD}function aV(eI,eO,eH){var eE=eI.markedSpans,eG=eI.text,eM=0;if(!eE){for(var eR=1;eR<eH.length;eR+=2){eO.addToken(eO,eG.slice(eM,eM=eH[eR]),dw(eH[eR+1],eO))}return}var eS=eG.length,eD=0,eR=1,eK="",eT;var eV=0,ez,eU,eL,eW,eB;for(;;){if(eV==eD){ez=eU=eL=eW="";eB=null;eV=Infinity;var eF=[];for(var eP=0;eP<eE.length;++eP){var eQ=eE[eP],eN=eQ.marker;if(eQ.from<=eD&&(eQ.to==null||eQ.to>eD)){if(eQ.to!=null&&eV>eQ.to){eV=eQ.to;eU=""}if(eN.className){ez+=" "+eN.className}if(eN.startStyle&&eQ.from==eD){eL+=" "+eN.startStyle}if(eN.endStyle&&eQ.to==eV){eU+=" "+eN.endStyle}if(eN.title&&!eW){eW=eN.title}if(eN.collapsed&&(!eB||cH(eB.marker,eN)<0)){eB=eQ}}else{if(eQ.from>eD&&eV>eQ.from){eV=eQ.from}}if(eN.type=="bookmark"&&eQ.from==eD&&eN.replacedWith){eF.push(eN)}}if(eB&&(eB.from||0)==eD){N(eO,(eB.to==null?eS:eB.to)-eD,eB.marker,eB.from==null);if(eB.to==null){return eB.marker.find()}}if(!eB&&eF.length){for(var eP=0;eP<eF.length;++eP){N(eO,0,eF[eP])}}}if(eD>=eS){break}var eJ=Math.min(eS,eV);while(true){if(eK){var eA=eD+eK.length;if(!eB){var eC=eA>eJ?eK.slice(0,eJ-eD):eK;eO.addToken(eO,eC,eT?eT+ez:ez,eL,eD+eC.length==eV?eU:"",eW)}if(eA>=eJ){eK=eK.slice(eJ-eD);eD=eJ;break}eD=eA;eL=""}eK=eG.slice(eM,eM=eH[eR++]);eT=dw(eH[eR++],eO)}}}function d5(eQ,eH,eD,eL,eF){function eC(eR){return eD?eD[eR]:null}function eG(eR,eT,eS){c3(eR,eT,eS,eF);P(eR,"change",eR,eH)}var eM=eH.from,eA=eH.to,eJ=eH.text;var eI=dM(eQ,eM.line),ez=dM(eQ,eA.line);var eB=ea(eJ),eO=eC(eJ.length-1),eK=eA.line-eM.line;if(eM.ch==0&&eA.ch==0&&eB==""&&(!eQ.cm||eQ.cm.options.wholeLineUpdateBefore)){for(var eN=0,eP=eJ.length-1,eE=[];eN<eP;++eN){eE.push(new eq(eJ[eN],eC(eN),eF))}eG(ez,ez.text,eO);if(eK){eQ.remove(eM.line,eK)}if(eE.length){eQ.insert(eM.line,eE)}}else{if(eI==ez){if(eJ.length==1){eG(eI,eI.text.slice(0,eM.ch)+eB+eI.text.slice(eA.ch),eO)}else{for(var eE=[],eN=1,eP=eJ.length-1;eN<eP;++eN){eE.push(new eq(eJ[eN],eC(eN),eF))}eE.push(new eq(eB+eI.text.slice(eA.ch),eO,eF));eG(eI,eI.text.slice(0,eM.ch)+eJ[0],eC(0));eQ.insert(eM.line+1,eE)}}else{if(eJ.length==1){eG(eI,eI.text.slice(0,eM.ch)+eJ[0]+ez.text.slice(eA.ch),eC(0));eQ.remove(eM.line+1,eK)}else{eG(eI,eI.text.slice(0,eM.ch)+eJ[0],eC(0));eG(ez,eB+ez.text.slice(eA.ch),eO);for(var eN=1,eP=eJ.length-1,eE=[];eN<eP;++eN){eE.push(new eq(eJ[eN],eC(eN),eF))}if(eK>1){eQ.remove(eM.line+1,eK-1)}eQ.insert(eM.line+1,eE)}}}P(eQ,"change",eQ,eH);bi(eQ,eL.anchor,eL.head,null,true)}function dz(eA){this.lines=eA;this.parent=null;for(var eB=0,eC=eA.length,ez=0;eB<eC;++eB){eA[eB].parent=this;ez+=eA[eB].height}this.height=ez}dz.prototype={chunkSize:function(){return this.lines.length},removeInner:function(ez,eD){for(var eB=ez,eC=ez+eD;eB<eC;++eB){var eA=this.lines[eB];this.height-=eA.height;a2(eA);P(eA,"delete")}this.lines.splice(ez,eD)},collapse:function(ez){ez.splice.apply(ez,[ez.length,0].concat(this.lines))},insertInner:function(eA,eB,ez){this.height+=ez;this.lines=this.lines.slice(0,eA).concat(eB).concat(this.lines.slice(eA));for(var eC=0,eD=eB.length;eC<eD;++eC){eB[eC].parent=this}},iterN:function(ez,eC,eB){for(var eA=ez+eC;ez<eA;++ez){if(eB(this.lines[ez])){return true}}}};function d3(eC){this.children=eC;var eB=0,ez=0;for(var eA=0,eE=eC.length;eA<eE;++eA){var eD=eC[eA];eB+=eD.chunkSize();ez+=eD.height;eD.parent=this}this.size=eB;this.height=ez;this.parent=null}d3.prototype={chunkSize:function(){return this.size},removeInner:function(ez,eG){this.size-=eG;for(var eB=0;eB<this.children.length;++eB){var eF=this.children[eB],eD=eF.chunkSize();if(ez<eD){var eC=Math.min(eG,eD-ez),eE=eF.height;eF.removeInner(ez,eC);this.height-=eE-eF.height;if(eD==eC){this.children.splice(eB--,1);eF.parent=null}if((eG-=eC)==0){break}ez=0}else{ez-=eD}}if(this.size-eG<25){var eA=[];this.collapse(eA);this.children=[new dz(eA)];this.children[0].parent=this}},collapse:function(ez){for(var eA=0,eB=this.children.length;eA<eB;++eA){this.children[eA].collapse(ez)}},insertInner:function(eA,eH,eG){this.size+=eH.length;this.height+=eG;for(var eB=0,eD=this.children.length;eB<eD;++eB){var ez=this.children[eB],eE=ez.chunkSize();if(eA<=eE){ez.insertInner(eA,eH,eG);if(ez.lines&&ez.lines.length>50){while(ez.lines.length>50){var eC=ez.lines.splice(ez.lines.length-25,25);var eF=new dz(eC);ez.height-=eF.height;this.children.splice(eB+1,0,eF);eF.parent=this}this.maybeSpill()}break}eA-=eE}},maybeSpill:function(){if(this.children.length<=10){return}var eC=this;do{var eA=eC.children.splice(eC.children.length-5,5);var eB=new d3(eA);if(!eC.parent){var eD=new d3(eC.children);eD.parent=eC;eC.children=[eD,eB];eC=eD}else{eC.size-=eB.size;eC.height-=eB.height;var ez=cm(eC.parent.children,eC);eC.parent.children.splice(ez+1,0,eB)}eB.parent=eC.parent}while(eC.children.length>10);eC.parent.maybeSpill()},iterN:function(ez,eG,eF){for(var eA=0,eD=this.children.length;eA<eD;++eA){var eE=this.children[eA],eC=eE.chunkSize();if(ez<eC){var eB=Math.min(eG,eC-ez);if(eE.iterN(ez,eB,eF)){return true}if((eG-=eB)==0){break}ez=0}else{ez-=eC}}}};var bL=0;var ab=C.Doc=function(eB,eA,ez){if(!(this instanceof ab)){return new ab(eB,eA,ez)}if(ez==null){ez=0}d3.call(this,[new dz([new eq("",null)])]);this.first=ez;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.history=ad();this.cleanGeneration=1;this.frontier=ez;var eC=L(ez,0);this.sel={from:eC,to:eC,head:eC,anchor:eC,shift:false,extend:false,goalColumn:null};this.id=++bL;this.modeOption=eA;if(typeof eB=="string"){eB=ay(eB)}d5(this,{from:eC,to:eC,text:eB},null,{head:eC,anchor:eC})};ab.prototype=bE(d3.prototype,{constructor:ab,iter:function(eB,eA,ez){if(ez){this.iterN(eB-this.first,eA-eB,ez)}else{this.iterN(this.first,this.first+this.size,eB)}},insert:function(eA,eB){var ez=0;for(var eC=0,eD=eB.length;eC<eD;++eC){ez+=eB[eC].height}this.insertInner(eA-this.first,eB,ez)},remove:function(ez,eA){this.removeInner(ez-this.first,eA)},getValue:function(eA){var ez=aA(this,this.first,this.first+this.size);if(eA===false){return ez}return ez.join(eA||"\n")},setValue:function(eA){var eB=L(this.first,0),ez=this.first+this.size-1;aL(this,{from:eB,to:L(ez,dM(this,ez).text.length),text:ay(eA),origin:"setValue"},{head:eB,anchor:eB},true)},replaceRange:function(eA,eC,eB,ez){eC=ec(this,eC);eB=eB?ec(this,eB):eC;az(this,eA,eC,eB,ez)},getRange:function(eC,eB,eA){var ez=eo(this,ec(this,eC),ec(this,eB));if(eA===false){return ez}return ez.join(eA||"\n")},getLine:function(eA){var ez=this.getLineHandle(eA);return ez&&ez.text},setLine:function(ez,eA){if(bu(this,ez)){az(this,eA,L(ez,0),ec(this,L(ez)))}},removeLine:function(ez){if(ez){az(this,"",ec(this,L(ez-1)),ec(this,L(ez)))}else{az(this,"",L(0,0),ec(this,L(1,0)))}},getLineHandle:function(ez){if(bu(this,ez)){return dM(this,ez)}},getLineNumber:function(ez){return bd(ez)},getLineHandleVisualStart:function(ez){if(typeof ez=="number"){ez=dM(this,ez)}return v(this,ez)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(ez){return ec(this,ez)},getCursor:function(eB){var ez=this.sel,eA;if(eB==null||eB=="head"){eA=ez.head}else{if(eB=="anchor"){eA=ez.anchor}else{if(eB=="end"||eB===false){eA=ez.to}else{eA=ez.from}}}return bD(eA)},somethingSelected:function(){return !eb(this.sel.head,this.sel.anchor)},setCursor:d6(function(ez,eA,eC){var eB=ec(this,typeof ez=="number"?L(ez,eA||0):ez);if(eC){ej(this,eB)}else{bi(this,eB,eB)}}),setSelection:d6(function(eA,eB,ez){bi(this,ec(this,eA),ec(this,eB||eA),ez)}),extendSelection:d6(function(eB,eA,ez){ej(this,ec(this,eB),eA&&ec(this,eA),ez)}),getSelection:function(ez){return this.getRange(this.sel.from,this.sel.to,ez)},replaceSelection:function(eA,eB,ez){aL(this,{from:this.sel.from,to:this.sel.to,text:ay(eA),origin:ez},eB||"around")},undo:d6(function(){bt(this,"undo")}),redo:d6(function(){bt(this,"redo")}),setExtending:function(ez){this.sel.extend=ez},historySize:function(){var ez=this.history;return{undo:ez.done.length,redo:ez.undone.length}},clearHistory:function(){this.history=ad(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(ez){if(ez){this.history.lastOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(ez){return this.history.generation==(ez||this.cleanGeneration)},getHistory:function(){return{done:be(this.history.done),undone:be(this.history.undone)}},setHistory:function(eA){var ez=this.history=ad(this.history.maxGeneration);ez.done=eA.done.slice(0);ez.undone=eA.undone.slice(0)},markText:function(eB,eA,ez){return dj(this,ec(this,eB),ec(this,eA),ez,"range")},setBookmark:function(eB,ez){var eA={replacedWith:ez&&(ez.nodeType==null?ez.widget:ez),insertLeft:ez&&ez.insertLeft,clearWhenEmpty:false};eB=ec(this,eB);return dj(this,eB,eB,eA,"bookmark")},findMarksAt:function(eD){eD=ec(this,eD);var eC=[],eA=dM(this,eD.line).markedSpans;if(eA){for(var ez=0;ez<eA.length;++ez){var eB=eA[ez];if((eB.from==null||eB.from<=eD.ch)&&(eB.to==null||eB.to>=eD.ch)){eC.push(eB.marker.parent||eB.marker)}}}return eC},findMarks:function(eC,eB){eC=ec(this,eC);eB=ec(this,eB);var ez=[],eA=eC.line;this.iter(eC.line,eB.line+1,function(eD){var eF=eD.markedSpans;if(eF){for(var eE=0;eE<eF.length;eE++){var eG=eF[eE];if(!(eA==eC.line&&eC.ch>eG.to||eG.from==null&&eA!=eC.line||eA==eB.line&&eG.from>eB.ch)){ez.push(eG.marker.parent||eG.marker)}}}++eA});return ez},getAllMarks:function(){var ez=[];this.iter(function(eB){var eA=eB.markedSpans;if(eA){for(var eC=0;eC<eA.length;++eC){if(eA[eC].from!=null){ez.push(eA[eC].marker)}}}});return ez},posFromIndex:function(eA){var ez,eB=this.first;this.iter(function(eC){var eD=eC.text.length+1;if(eD>eA){ez=eA;return true}eA-=eD;++eB});return ec(this,L(eB,ez))},indexFromPos:function(eA){eA=ec(this,eA);var ez=eA.ch;if(eA.line<this.first||eA.ch<0){return 0}this.iter(this.first,eA.line,function(eB){ez+=eB.text.length+1});return ez},copy:function(ez){var eA=new ab(aA(this,this.first,this.first+this.size),this.modeOption,this.first);eA.scrollTop=this.scrollTop;eA.scrollLeft=this.scrollLeft;eA.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:false,goalColumn:this.sel.goalColumn};if(ez){eA.history.undoDepth=this.history.undoDepth;eA.setHistory(this.getHistory())}return eA},linkedDoc:function(ez){if(!ez){ez={}}var eC=this.first,eB=this.first+this.size;if(ez.from!=null&&ez.from>eC){eC=ez.from}if(ez.to!=null&&ez.to<eB){eB=ez.to}var eA=new ab(aA(this,eC,eB),ez.mode||this.modeOption,eC);if(ez.sharedHist){eA.history=this.history}(this.linked||(this.linked=[])).push({doc:eA,sharedHist:ez.sharedHist});eA.linked=[{doc:this,isParent:true,sharedHist:ez.sharedHist}];return eA},unlinkDoc:function(eA){if(eA instanceof C){eA=eA.doc}if(this.linked){for(var eB=0;eB<this.linked.length;++eB){var eC=this.linked[eB];if(eC.doc!=eA){continue}this.linked.splice(eB,1);eA.unlinkDoc(this);break}}if(eA.history==this.history){var ez=[eA.id];cP(eA,function(eD){ez.push(eD.id)},true);eA.history=ad();eA.history.done=be(this.history.done,ez);eA.history.undone=be(this.history.undone,ez)}},iterLinkedDocs:function(ez){cP(this,ez)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});ab.prototype.eachLine=ab.prototype.iter;var d="iter insert remove copy getEditor".split(" ");for(var ba in ab.prototype){if(ab.prototype.hasOwnProperty(ba)&&cm(d,ba)<0){C.prototype[ba]=(function(ez){return function(){return ez.apply(this.doc,arguments)}})(ab.prototype[ba])}}a1(ab);function cP(eC,eB,eA){function ez(eI,eG,eE){if(eI.linked){for(var eF=0;eF<eI.linked.length;++eF){var eD=eI.linked[eF];if(eD.doc==eG){continue}var eH=eE&&eD.sharedHist;if(eA&&!eH){continue}eB(eD.doc,eH);ez(eD.doc,eI,eH)}}}ez(eC,null,true)}function cS(ez,eA){if(eA.cm){throw new Error("This document is already in use.")}ez.doc=eA;eA.cm=ez;M(ez);aX(ez);if(!ez.options.lineWrapping){ep(ez)}ez.options.mode=eA.modeOption;R(ez)}function dM(ez,eD){eD-=ez.first;while(!ez.lines){for(var eA=0;;++eA){var eC=ez.children[eA],eB=eC.chunkSize();if(eD<eB){ez=eC;break}eD-=eB}}return ez.lines[eD]}function eo(eB,eD,ez){var eA=[],eC=eD.line;eB.iter(eD.line,ez.line+1,function(eE){var eF=eE.text;if(eC==ez.line){eF=eF.slice(0,ez.ch)}if(eC==eD.line){eF=eF.slice(eD.ch)}eA.push(eF);++eC});return eA}function aA(eA,eC,eB){var ez=[];eA.iter(eC,eB,function(eD){ez.push(eD.text)});return ez}function er(eA,ez){var eB=ez-eA.height;for(var eC=eA;eC;eC=eC.parent){eC.height+=eB}}function bd(ez){if(ez.parent==null){return null}var eD=ez.parent,eC=cm(eD.lines,ez);for(var eA=eD.parent;eA;eD=eA,eA=eA.parent){for(var eB=0;;++eB){if(eA.children[eB]==eD){break}eC+=eA.children[eB].chunkSize()}}return eC+eD.first}function a6(eF,eD){var eB=eF.first;outer:do{for(var eC=0,eE=eF.children.length;eC<eE;++eC){var eA=eF.children[eC],ez=eA.height;if(eD<ez){eF=eA;continue outer}eD-=ez;eB+=eA.chunkSize()}return eB}while(!eF.lines);for(var eC=0,eE=eF.lines.length;eC<eE;++eC){var eH=eF.lines[eC],eG=eH.height;if(eD<eG){break}eD-=eG}return eB+eC}function bc(ez,eC){eC=v(ez.doc,eC);var eE=0,eB=eC.parent;for(var eD=0;eD<eB.lines.length;++eD){var eA=eB.lines[eD];if(eA==eC){break}else{eE+=eA.height}}for(var eF=eB.parent;eF;eB=eF,eF=eB.parent){for(var eD=0;eD<eF.children.length;++eD){var eG=eF.children[eD];if(eG==eB){break}else{eE+=eG.height}}}return eE}function a(eA){var ez=eA.order;if(ez==null){ez=eA.order=aM(eA.text)}return ez}function ad(ez){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:ez||1,maxGeneration:ez||1}}function bm(eA,eE,eD,eC){var ez=eE["spans_"+eA.id],eB=0;eA.iter(Math.max(eA.first,eD),Math.min(eA.first+eA.size,eC),function(eF){if(eF.markedSpans){(ez||(ez=eE["spans_"+eA.id]={}))[eB]=eF.markedSpans}++eB})}function ct(ez,eC){var eB={line:eC.from.line,ch:eC.from.ch};var eA={from:eB,to:b6(eC),text:eo(ez,eC.from,eC.to)};bm(ez,eA,eC.from.line,eC.to.line+1);cP(ez,function(eD){bm(eD,eA,eC.from.line,eC.to.line+1)},true);return eA}function dk(eE,eG,eD,ez){var eC=eE.history;eC.undone.length=0;var eB=+new Date,eF=ea(eC.done);if(eF&&(eC.lastOp==ez||eC.lastOrigin==eG.origin&&eG.origin&&((eG.origin.charAt(0)=="+"&&eE.cm&&eC.lastTime>eB-eE.cm.options.historyEventDelay)||eG.origin.charAt(0)=="*"))){var eA=ea(eF.changes);if(eb(eG.from,eG.to)&&eb(eG.from,eA.to)){eA.to=b6(eG)}else{eF.changes.push(ct(eE,eG))}eF.anchorAfter=eD.anchor;eF.headAfter=eD.head}else{eF={changes:[ct(eE,eG)],generation:eC.generation,anchorBefore:eE.sel.anchor,headBefore:eE.sel.head,anchorAfter:eD.anchor,headAfter:eD.head};eC.done.push(eF);while(eC.done.length>eC.undoDepth){eC.done.shift()}}eC.generation=++eC.maxGeneration;eC.lastTime=eB;eC.lastOp=ez;eC.lastOrigin=eG.origin;if(!eA){ai(eE,"historyAdded")}}function aQ(eB){if(!eB){return null}for(var eA=0,ez;eA<eB.length;++eA){if(eB[eA].marker.explicitlyCleared){if(!ez){ez=eB.slice(0,eA)}}else{if(ez){ez.push(eB[eA])}}}return !ez?eB:ez.length?ez:null}function bs(eC,eD){var eB=eD["spans_"+eC.id];if(!eB){return null}for(var eA=0,ez=[];eA<eD.text.length;++eA){ez.push(aQ(eB[eA]))}return ez}function be(eJ,eC){for(var eF=0,eA=[];eF<eJ.length;++eF){var eB=eJ[eF],eH=eB.changes,eI=[];eA.push({changes:eI,anchorBefore:eB.anchorBefore,headBefore:eB.headBefore,anchorAfter:eB.anchorAfter,headAfter:eB.headAfter});for(var eE=0;eE<eH.length;++eE){var eG=eH[eE],eD;eI.push({from:eG.from,to:eG.to,text:eG.text});if(eC){for(var ez in eG){if(eD=ez.match(/^spans_(\d+)$/)){if(cm(eC,Number(eD[1]))>-1){ea(eI)[ez]=eG[ez];delete eG[ez]}}}}}}return eA}function dx(eC,eB,eA,ez){if(eA<eC.line){eC.line+=ez}else{if(eB<eC.line){eC.line=eB;eC.ch=0}}}function dP(eC,eE,eF,eG){for(var eB=0;eB<eC.length;++eB){var ez=eC[eB],eD=true;for(var eA=0;eA<ez.changes.length;++eA){var eH=ez.changes[eA];if(!ez.copied){eH.from=bD(eH.from);eH.to=bD(eH.to)}if(eF<eH.from.line){eH.from.line+=eG;eH.to.line+=eG}else{if(eE<=eH.to.line){eD=false;break}}}if(!ez.copied){ez.anchorBefore=bD(ez.anchorBefore);ez.headBefore=bD(ez.headBefore);ez.anchorAfter=bD(ez.anchorAfter);ez.readAfter=bD(ez.headAfter);ez.copied=true}if(!eD){eC.splice(0,eB+1);eB=0}else{dx(ez.anchorBefore);dx(ez.headBefore);dx(ez.anchorAfter);dx(ez.headAfter)}}}function cB(eA,eD){var eC=eD.from.line,eB=eD.to.line,ez=eD.text.length-(eB-eC)-1;dP(eA.done,eC,eB,ez);dP(eA.undone,eC,eB,ez)}function dt(){c4(this)}function Z(ez){if(!ez.stop){ez.stop=dt}return ez}function bW(ez){if(ez.preventDefault){ez.preventDefault()}else{ez.returnValue=false}}function cq(ez){if(ez.stopPropagation){ez.stopPropagation()}else{ez.cancelBubble=true}}function bb(ez){return ez.defaultPrevented!=null?ez.defaultPrevented:ez.returnValue==false}function c4(ez){bW(ez);cq(ez)}C.e_stop=c4;C.e_preventDefault=bW;C.e_stopPropagation=cq;function E(ez){return ez.target||ez.srcElement}function ee(eA){var ez=eA.which;if(ez==null){if(eA.button&1){ez=1}else{if(eA.button&2){ez=3}else{if(eA.button&4){ez=2}}}}if(br&&eA.ctrlKey&&ez==1){ez=3}return ez}function bl(eC,eA,eB){if(eC.addEventListener){eC.addEventListener(eA,eB,false)}else{if(eC.attachEvent){eC.attachEvent("on"+eA,eB)}else{var eD=eC._handlers||(eC._handlers={});var ez=eD[eA]||(eD[eA]=[]);ez.push(eB)}}}function cV(eD,eB,eC){if(eD.removeEventListener){eD.removeEventListener(eB,eC,false)}else{if(eD.detachEvent){eD.detachEvent("on"+eB,eC)}else{var ez=eD._handlers&&eD._handlers[eB];if(!ez){return}for(var eA=0;eA<ez.length;++eA){if(ez[eA]==eC){ez.splice(eA,1);break}}}}}function ai(eD,eC){var ez=eD._handlers&&eD._handlers[eC];if(!ez){return}var eA=Array.prototype.slice.call(arguments,2);for(var eB=0;eB<ez.length;++eB){ez[eB].apply(null,eA)}}var aU,bM=0;function P(eE,eD){var ez=eE._handlers&&eE._handlers[eD];if(!ez){return}var eB=Array.prototype.slice.call(arguments,2);if(!aU){++bM;aU=[];setTimeout(dc,0)}function eA(eF){return function(){eF.apply(null,eB)}}for(var eC=0;eC<ez.length;++eC){aU.push(eA(ez[eC]))}}function at(ez,eB,eA){ai(ez,eA||eB.type,ez,eB);return bb(eB)||eB.codemirrorIgnore}function dc(){--bM;var ez=aU;aU=null;for(var eA=0;eA<ez.length;++eA){ez[eA]()}}function dS(eB,eA){var ez=eB._handlers&&eB._handlers[eA];return ez&&ez.length>0}C.on=bl;C.off=cV;C.signal=ai;function a1(ez){ez.prototype.on=function(eA,eB){bl(this,eA,eB)};ez.prototype.off=function(eA,eB){cV(this,eA,eB)}}var aP=30;var bw=C.Pass={toString:function(){return"CodeMirror.Pass"}};function ey(){this.id=null}ey.prototype={set:function(ez,eA){clearTimeout(this.id);this.id=setTimeout(eA,ez)}};function bh(eB,ez,eD,eE,eA){if(ez==null){ez=eB.search(/[^\s\u00a0]/);if(ez==-1){ez=eB.length}}for(var eC=eE||0,eF=eA||0;eC<ez;++eC){if(eB.charAt(eC)=="\t"){eF+=eD-(eF%eD)}else{++eF}}return eF}C.countColumn=bh;var ax=[""];function bK(ez){while(ax.length<=ez){ax.push(ea(ax)+" ")}return ax[ez]}function ea(ez){return ez[ez.length-1]}function cE(eA){if(dA){eA.selectionStart=0;eA.selectionEnd=eA.value.length}else{try{eA.select()}catch(ez){}}}function cm(eC,ez){if(eC.indexOf){return eC.indexOf(ez)}for(var eA=0,eB=eC.length;eA<eB;++eA){if(eC[eA]==ez){return eA}}return -1}function bE(eC,eA){function ez(){}ez.prototype=eC;var eB=new ez();if(eA){an(eA,eB)}return eB}function an(eA,ez){if(!ez){ez={}}for(var eB in eA){if(eA.hasOwnProperty(eB)){ez[eB]=eA[eB]}}return ez}function V(eB){for(var ez=[],eA=0;eA<eB;++eA){ez.push(undefined)}return ez}function bP(eA){var ez=Array.prototype.slice.call(arguments,1);return function(){return eA.apply(null,ez)}}var aI=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function bS(ez){return/\w/.test(ez)||ez>"\x80"&&(ez.toUpperCase()!=ez.toLowerCase()||aI.test(ez))}function dv(ez){for(var eA in ez){if(ez.hasOwnProperty(eA)&&ez[eA]){return false}}return true}var dn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function dY(ez){return ez.charCodeAt(0)>=768&&dn.test(ez)}function em(ez,eD,eC,eB){var eE=document.createElement(ez);if(eC){eE.className=eC}if(eB){eE.style.cssText=eB}if(typeof eD=="string"){l(eE,eD)}else{if(eD){for(var eA=0;eA<eD.length;++eA){eE.appendChild(eD[eA])}}}return eE}function cM(eA){for(var ez=eA.childNodes.length;ez>0;--ez){eA.removeChild(eA.firstChild)}return eA}function bg(ez,eA){return cM(ez).appendChild(eA)}function l(ez,eA){if(bF){ez.innerHTML="";ez.appendChild(document.createTextNode(eA))}else{ez.textContent=eA}}function ao(ez){return ez.getBoundingClientRect()}C.replaceGetRect=function(ez){ao=ez};var dp=function(){if(bF){return false}var ez=em("div");return"draggable" in ez||"dragDrop" in ez}();function bv(){return false}if(bJ){bv=function(eA,ez){return eA.charCodeAt(ez-1)==36&&eA.charCodeAt(ez)==39}}else{if(ah&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)){bv=function(eA,ez){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(eA.slice(ez-1,ez+1))}}else{if(b9&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)){bv=function(eB,ez){var eA=eB.charCodeAt(ez-1);return eA>=8208&&eA<=8212}}else{if(b9){bv=function(eA,ez){if(ez>1&&eA.charCodeAt(ez-1)==45){if(/\w/.test(eA.charAt(ez-2))&&/[^\-?\.]/.test(eA.charAt(ez))){return true}if(ez>2&&/[\d\.,]/.test(eA.charAt(ez-2))&&/[\d\.,]/.test(eA.charAt(ez))){return false}}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(eA.slice(ez-1,ez+1))}}}}}var c8;function i(ez){if(c8!=null){return c8}var eA=em("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");bg(ez,eA);if(eA.offsetWidth){c8=eA.offsetHeight-eA.clientHeight}return c8||0}var ed;function aT(ez){if(ed==null){var eA=em("span","\u200b");bg(ez,em("span",[eA,document.createTextNode("x")]));if(ez.firstChild.offsetHeight!=0){ed=eA.offsetWidth<=1&&eA.offsetHeight>2&&!bG}}if(ed){return em("span","\u200b")}else{return em("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var ay="\n\nb".split(/\n/).length!=3?function(eE){var eF=0,ez=[],eD=eE.length;while(eF<=eD){var eC=eE.indexOf("\n",eF);if(eC==-1){eC=eE.length}var eB=eE.slice(eF,eE.charAt(eC-1)=="\r"?eC-1:eC);var eA=eB.indexOf("\r");if(eA!=-1){ez.push(eB.slice(0,eA));eF+=eA+1}else{ez.push(eB);eF=eC+1}}return ez}:function(ez){return ez.split(/\r\n?|\n/)};C.splitLines=ay;var aY=window.getSelection?function(eA){try{return eA.selectionStart!=eA.selectionEnd}catch(ez){return false}}:function(eB){try{var ez=eB.ownerDocument.selection.createRange()}catch(eA){}if(!ez||ez.parentElement()!=eB){return false}return ez.compareEndPoints("StartToEnd",ez)!=0};var cf=(function(){var ez=em("div");if("oncopy" in ez){return true}ez.setAttribute("oncopy","return;");return typeof ez.oncopy=="function"})();var dO={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};C.keyNames=dO;(function(){for(var ez=0;ez<10;ez++){dO[ez+48]=dO[ez+96]=String(ez)}for(var ez=65;ez<=90;ez++){dO[ez]=String.fromCharCode(ez)}for(var ez=1;ez<=12;ez++){dO[ez+111]=dO[ez+63235]="F"+ez}})();function cN(ez,eF,eE,eD){if(!ez){return eD(eF,eE,"ltr")}var eC=false;for(var eB=0;eB<ez.length;++eB){var eA=ez[eB];if(eA.from<eE&&eA.to>eF||eF==eE&&eA.to==eF){eD(Math.max(eA.from,eF),Math.min(eA.to,eE),eA.level==1?"rtl":"ltr");eC=true}}if(!eC){eD(eF,eE,"ltr")}}function cw(ez){return ez.level%2?ez.to:ez.from}function eu(ez){return ez.level%2?ez.from:ez.to}function bV(eA){var ez=a(eA);return ez?cw(ez[0]):0}function b5(eA){var ez=a(eA);if(!ez){return eA.text.length}return eu(ea(ez))}function aZ(eA,eD){var eB=dM(eA.doc,eD);var eE=v(eA.doc,eB);if(eE!=eB){eD=bd(eE)}var ez=a(eE);var eC=!ez?0:ez[0].level%2?b5(eE):bV(eE);return L(eD,eC)}function cG(eB,eE){var eA,eC;while(eA=c7(eC=dM(eB.doc,eE))){eE=eA.find().to.line}var ez=a(eC);var eD=!ez?eC.text.length:ez[0].level%2?bV(eC):b5(eC);return L(eE,eD)}function Y(eA,eB,ez){var eC=eA[0].level;if(eB==eC){return true}if(ez==eC){return false}return eB<ez}var dB;function ak(ez,eD){dB=null;for(var eA=0,eB;eA<ez.length;++eA){var eC=ez[eA];if(eC.from<eD&&eC.to>eD){return eA}if((eC.from==eD||eC.to==eD)){if(eB==null){eB=eA}else{if(Y(ez,eC.level,ez[eB].level)){if(eC.from!=eC.to){dB=eB}return eA}else{if(eC.from!=eC.to){dB=eA}return eB}}}}return eB}function dL(ez,eC,eA,eB){if(!eB){return eC+eA}do{eC+=eA}while(eC>0&&dY(ez.text.charAt(eC)));return eC}function r(ez,eG,eB,eC){var eD=a(ez);if(!eD){return S(ez,eG,eB,eC)}var eF=ak(eD,eG),eA=eD[eF];var eE=dL(ez,eG,eA.level%2?-eB:eB,eC);for(;;){if(eE>eA.from&&eE<eA.to){return eE}if(eE==eA.from||eE==eA.to){if(ak(eD,eE)==eF){return eE}eA=eD[eF+=eB];return(eB>0)==eA.level%2?eA.to:eA.from}else{eA=eD[eF+=eB];if(!eA){return null}if((eB>0)==eA.level%2){eE=dL(ez,eA.to,-1,eC)}else{eE=dL(ez,eA.from,1,eC)}}}}function S(ez,eD,eA,eB){var eC=eD+eA;if(eB){while(eC>0&&dY(ez.text.charAt(eC))){eC+=eA}}return eC<0||eC>ez.text.length?null:eC}var aM=(function(){var eF="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";var eD="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function eC(eI){if(eI<=255){return eF.charAt(eI)}else{if(1424<=eI&&eI<=1524){return"R"}else{if(1536<=eI&&eI<=1791){return eD.charAt(eI-1536)}else{if(1792<=eI&&eI<=2220){return"r"}else{return"L"}}}}}var ez=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var eH=/[stwN]/,eB=/[LRr]/,eA=/[Lb1n]/,eE=/[1n]/;var eG="L";return function(eS){if(!ez.test(eS)){return false}var eY=eS.length,eO=[];for(var eX=0,eK;eX<eY;++eX){eO.push(eK=eC(eS.charCodeAt(eX)))}for(var eX=0,eR=eG;eX<eY;++eX){var eK=eO[eX];if(eK=="m"){eO[eX]=eR}else{eR=eK}}for(var eX=0,eI=eG;eX<eY;++eX){var eK=eO[eX];if(eK=="1"&&eI=="r"){eO[eX]="n"}else{if(eB.test(eK)){eI=eK;if(eK=="r"){eO[eX]="R"}}}}for(var eX=1,eR=eO[0];eX<eY-1;++eX){var eK=eO[eX];if(eK=="+"&&eR=="1"&&eO[eX+1]=="1"){eO[eX]="1"}else{if(eK==","&&eR==eO[eX+1]&&(eR=="1"||eR=="n")){eO[eX]=eR}}eR=eK}for(var eX=0;eX<eY;++eX){var eK=eO[eX];if(eK==","){eO[eX]="N"}else{if(eK=="%"){for(var eL=eX+1;eL<eY&&eO[eL]=="%";++eL){}var eZ=(eX&&eO[eX-1]=="!")||(eL<eY&&eO[eL]=="1")?"1":"N";for(var eV=eX;eV<eL;++eV){eO[eV]=eZ}eX=eL-1}}}for(var eX=0,eI=eG;eX<eY;++eX){var eK=eO[eX];if(eI=="L"&&eK=="1"){eO[eX]="L"}else{if(eB.test(eK)){eI=eK}}}for(var eX=0;eX<eY;++eX){if(eH.test(eO[eX])){for(var eL=eX+1;eL<eY&&eH.test(eO[eL]);++eL){}var eP=(eX?eO[eX-1]:eG)=="L";var eJ=(eL<eY?eO[eL]:eG)=="L";var eZ=eP||eJ?"L":"R";for(var eV=eX;eV<eL;++eV){eO[eV]=eZ}eX=eL-1}}var eW=[],eT;for(var eX=0;eX<eY;){if(eA.test(eO[eX])){var eM=eX;for(++eX;eX<eY&&eA.test(eO[eX]);++eX){}eW.push({from:eM,to:eX,level:0})}else{var eN=eX,eQ=eW.length;for(++eX;eX<eY&&eO[eX]!="L";++eX){}for(var eV=eN;eV<eX;){if(eE.test(eO[eV])){if(eN<eV){eW.splice(eQ,0,{from:eN,to:eV,level:1})}var eU=eV;for(++eV;eV<eX&&eE.test(eO[eV]);++eV){}eW.splice(eQ,0,{from:eU,to:eV,level:2});eN=eV}else{++eV}}if(eN<eX){eW.splice(eQ,0,{from:eN,to:eX,level:1})}}}if(eW[0].level==1&&(eT=eS.match(/^\s+/))){eW[0].from=eT[0].length;eW.unshift({from:0,to:eT[0].length,level:0})}if(ea(eW).level==1&&(eT=eS.match(/\s+$/))){ea(eW).to-=eT[0].length;eW.push({from:eY-eT[0].length,to:eY,level:0})}if(eW[0].level!=ea(eW).level){eW.push({from:eY,to:eY,level:eW[0].level})}return eW}})();C.version="3.22.0";return C})();