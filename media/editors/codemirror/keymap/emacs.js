(function(){var k=CodeMirror.Pos;function H(L,i){return L.line==i.line&&L.ch==i.ch;}var n=[];function I(i){n.push(i);if(n.length>50){n.shift();}}function A(i){if(!n.length){return I(i);
}n[n.length-1]+=i;}function e(i){return n[n.length-(i?Math.min(i,1):1)]||"";}function s(){if(n.length>1){n.pop();}return e();}var w=null;function q(i,O,N,M,L){if(L==null){L=i.getRange(O,N);
}if(M&&w&&w.cm==i&&H(O,w.pos)&&i.isClean(w.gen)){A(L);}else{I(L);}i.replaceRange("",O,N,"+delete");if(M){w={cm:i,pos:O,gen:i.changeGeneration()};}else{w=null;
}}function c(i,M,L){return i.findPosH(M,L,"char",true);}function d(i,M,L){return i.findPosH(M,L,"word",true);}function v(i,M,L){return i.findPosV(M,L,"line",i.doc.sel.goalColumn);
}function r(i,M,L){return i.findPosV(M,L,"page",i.doc.sel.goalColumn);}function z(P,O,L){var Q=O.line,S=P.getLine(Q);var R=/\S/.test(L<0?S.slice(0,O.ch):S.slice(O.ch));
var i=P.firstLine(),M=P.lastLine();for(;;){Q+=L;if(Q<i||Q>M){return P.clipPos(k(Q-L,L<0?0:null));}S=P.getLine(Q);var N=/\S/.test(S);if(N){R=true;}else{if(R){return k(Q,0);
}}}}function b(i,R,N){var L=R.line,P=R.ch;var Q=i.getLine(R.line),M=false;for(;;){var O=Q.charAt(P+(N<0?-1:0));if(!O){if(L==(N<0?i.firstLine():i.lastLine())){return k(L,P);
}Q=i.getLine(L+N);if(!/\S/.test(Q)){return k(L,P);}L+=N;P=N<0?Q.length:0;continue;}if(M&&/[!?.]/.test(O)){return k(L,P+(N>0?1:0));}if(!M){M=/\w/.test(O);
}P+=N;}}function f(i,R,L){var O;if(i.findMatchingBracket&&(O=i.findMatchingBracket(R,true))&&O.match&&(O.forward?1:-1)==L){return L>0?k(O.to.line,O.to.ch+1):O.to;
}for(var Q=true;;Q=false){var N=i.getTokenAt(R);var P=k(R.line,L<0?N.start:N.end);if(Q&&L>0&&N.end==R.ch||!/\w/.test(N.string)){var M=i.findPosH(P,L,"char");
if(H(P,M)){return R;}else{R=M;}}else{return P;}}}function j(i,L){var M=i.state.emacsPrefix;if(!M){return L?null:1;}E(i);return M=="-"?-1:Number(M);}function C(L){var i=typeof L=="string"?function(M){M.execCommand(L);
}:L;return function(M){var O=j(M);i(M);for(var N=1;N<O;++N){i(M);}};}function t(L,Q,M){var R=L.getCursor(),P=j(L);if(P<0){M=-M;P=-P;}for(var O=0;O<P;++O){var N=Q(L,R,M);
if(H(N,R)){break;}R=N;}return R;}function m(M,i){var L=function(N){N.extendSelection(t(N,M,i));};L.motion=true;return L;}function D(i,M,L){q(i,i.getCursor(),t(i,M,L),true);
}function x(i,L){if(i.state.emacsPrefix){if(L!="-"){i.state.emacsPrefix+=L;}return;}i.state.emacsPrefix=L;i.on("keyHandled",h);i.on("inputRead",y);}var g={"Alt-G":true,"Ctrl-X":true,"Ctrl-Q":true,"Ctrl-U":true};
function h(L,i){if(!L.state.emacsPrefixMap&&!g.hasOwnProperty(i)){E(L);}}function E(i){i.state.emacsPrefix=null;i.off("keyHandled",h);i.off("inputRead",y);
}function y(M,P){var Q=j(M);if(Q>1&&P.origin=="+input"){var O=P.text.join("\n"),L="";for(var N=1;N<Q;++N){L+=O;}M.replaceSelection(L,"end","+input");}}function p(i){i.state.emacsPrefixMap=true;
i.addKeyMap(l);i.on("keyHandled",o);i.on("inputRead",o);}function o(L,i){if(typeof i=="string"&&(/^\d$/.test(i)||i=="Ctrl-U")){return;}L.removeKeyMap(l);
L.state.emacsPrefixMap=false;L.off("keyHandled",o);L.off("inputRead",o);}function B(i){i.setCursor(i.getCursor());i.setExtending(true);i.on("change",function(){i.setExtending(false);
});}function K(i,M,L){if(i.openDialog){i.openDialog(M+': <input type="text" style="width: 10em"/>',L,{bottom:true});}else{L(prompt(M,""));}}function F(i,N){var M=i.getCursor(),L=i.findPosH(M,1,"word");
i.replaceRange(N(i.getRange(M,L)),M,L);i.setCursor(L);}function a(M){var R=M.getCursor(),N=R.line,P=R.ch;var L=[];while(N>=M.firstLine()){var Q=M.getLine(N);
for(var O=P==null?Q.length:P;O>0;){var P=Q.charAt(--O);if(P==")"){L.push("(");}else{if(P=="]"){L.push("[");}else{if(P=="}"){L.push("{");}else{if(/[\(\{\[]/.test(P)&&(!L.length||L.pop()!=P)){return M.extendSelection(k(N,O));
}}}}}--N;P=null;}}var u=CodeMirror.keyMap.emacs={"Ctrl-W":function(i){q(i,i.getCursor("start"),i.getCursor("end"));},"Ctrl-K":C(function(i){var N=i.getCursor(),L=i.clipPos(k(N.line));
var M=i.getRange(N,L);if(!/\S/.test(M)){M+="\n";L=k(N.line+1,0);}q(i,N,L,true,M);}),"Alt-W":function(i){I(i.getSelection());},"Ctrl-Y":function(i){var L=i.getCursor();
i.replaceRange(e(j(i)),L,L,"paste");i.setSelection(L,i.getCursor());},"Alt-Y":function(i){i.replaceSelection(s());},"Ctrl-Space":B,"Ctrl-Shift-2":B,"Ctrl-F":m(c,1),"Ctrl-B":m(c,-1),Right:m(c,1),Left:m(c,-1),"Ctrl-D":function(i){D(i,c,1);
},Delete:function(i){D(i,c,1);},"Ctrl-H":function(i){D(i,c,-1);},Backspace:function(i){D(i,c,-1);},"Alt-F":m(d,1),"Alt-B":m(d,-1),"Alt-D":function(i){D(i,d,1);
},"Alt-Backspace":function(i){D(i,d,-1);},"Ctrl-N":m(v,1),"Ctrl-P":m(v,-1),Down:m(v,1),Up:m(v,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":m(r,-1),"Ctrl-V":m(r,1),PageUp:m(r,-1),PageDown:m(r,1),"Ctrl-Up":m(z,-1),"Ctrl-Down":m(z,1),"Alt-A":m(b,-1),"Alt-E":m(b,1),"Alt-K":function(i){D(i,b,1);
},"Ctrl-Alt-K":function(i){D(i,f,1);},"Ctrl-Alt-Backspace":function(i){D(i,f,-1);},"Ctrl-Alt-F":m(f,1),"Ctrl-Alt-B":m(f,-1),"Shift-Ctrl-Alt-2":function(i){i.setSelection(t(i,f,1),i.getCursor());
},"Ctrl-Alt-T":function(i){var L=f(i,i.getCursor(),-1),N=f(i,L,1);var O=f(i,N,1),M=f(i,O,-1);i.replaceRange(i.getRange(M,O)+i.getRange(N,M)+i.getRange(L,N),L,O);
},"Ctrl-Alt-U":C(a),"Alt-Space":function(i){var O=i.getCursor(),N=O.ch,M=O.ch,L=i.getLine(O.line);while(N&&/\s/.test(L.charAt(N-1))){--N;}while(M<L.length&&/\s/.test(L.charAt(M))){++M;
}i.replaceRange(" ",k(O.line,N),k(O.line,M));},"Ctrl-O":C(function(i){i.replaceSelection("\n","start");}),"Ctrl-T":C(function(i){var N=i.getCursor();if(N.ch<i.getLine(N.line).length){N=k(N.line,N.ch+1);
}var M=i.findPosH(N,-2,"char");var L=i.getRange(M,N);if(L.length!=2){return;}i.setSelection(M,N);i.replaceSelection(L.charAt(1)+L.charAt(0),"end");}),"Alt-C":C(function(i){F(i,function(L){var M=L.search(/\w/);
if(M==-1){return L;}return L.slice(0,M)+L.charAt(M).toUpperCase()+L.slice(M+1).toLowerCase();});}),"Alt-U":C(function(i){F(i,function(L){return L.toUpperCase();
});}),"Alt-L":C(function(i){F(i,function(L){return L.toLowerCase();});}),"Alt-;":"toggleComment","Ctrl-/":C("undo"),"Shift-Ctrl--":C("undo"),"Ctrl-Z":C("undo"),"Cmd-Z":C("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":"clearSearch","Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:false,Tab:"indentAuto","Alt-G":function(i){i.setOption("keyMap","emacs-Alt-G");
},"Ctrl-X":function(i){i.setOption("keyMap","emacs-Ctrl-X");},"Ctrl-Q":function(i){i.setOption("keyMap","emacs-Ctrl-Q");},"Ctrl-U":p};CodeMirror.keyMap["emacs-Ctrl-X"]={Tab:function(i){i.indentSelection(j(i,true)||i.getOption("indentUnit"));
},"Ctrl-X":function(i){i.setSelection(i.getCursor("head"),i.getCursor("anchor"));},"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:C("undo"),K:"close",Delete:function(i){q(i,i.getCursor(),sentenceEnd(i,1),true);
},auto:"emacs",nofallthrough:true,disableInput:true};CodeMirror.keyMap["emacs-Alt-G"]={G:function(i){var L=j(i,true);if(L!=null&&L>0){return i.setCursor(L-1);
}K(i,"Goto line",function(N){var M;if(N&&!isNaN(M=Number(N))&&M==M|0&&M>0){i.setCursor(M-1);}});},auto:"emacs",nofallthrough:true,disableInput:true};CodeMirror.keyMap["emacs-Ctrl-Q"]={Tab:C("insertTab"),auto:"emacs",nofallthrough:true};
var l={"Ctrl-G":E};function J(i){l[i]=function(L){x(L,i);};u["Ctrl-"+i]=function(L){x(L,i);};g["Ctrl-"+i]=true;}for(var G=0;G<10;++G){J(String(G));}J("-");
})();