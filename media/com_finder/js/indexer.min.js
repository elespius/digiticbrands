Joomla=window.Joomla||{},function(e,r){"use strict";e.finderIndexer=function(){var n=null,t=null,s=null,o=!1,a="&"+r.getElementById("finder-indexer-token").getAttribute("name")+"=1",d=function(r){e.request({url:"index.php?option=com_finder&tmpl=component&format=json&task="+r+a,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:function(e,r){l(JSON.parse(e))},onError:function(e){c(e)}})},i=function(e){var n=r.getElementById(e);if(n)return n.parentNode.removeChild(n)},l=function(s,a){var l=r.getElementById("finder-progress-header"),c=r.getElementById("finder-progress-message");try{if(null===s)throw a;if(s.error)throw s;s.start&&(n=s.totalItems),t+=s.batchOffset,u(s.header,s.message),t<n?d("indexer.batch"):o||(o=!0,d("indexer.optimize"))}catch(r){i("progress");try{s.error&&(l&&(l.innerText=s.header,l.classList.add("finder-error")),c&&(c.innerHTML=s.message,c.classList.add("finder-error")))}catch(n){""===r&&(r=e.JText._("COM_FINDER_NO_ERROR_RETURNED")),l&&(l.innerText=e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),l.classList.add("finder-error")),c&&(c.innerHTML=r,c.classList.add("finder-error"))}}return!0},c=function(n){var t=r.getElementById("finder-progress-header"),s=r.getElementById("finder-progress-message");json="object"==typeof n&&n.responseText?n.responseText:null,json=json?JSON.parse(json):null,i("progress"),json&&(json=null!=json.responseText?Json.evaluate(json.responseText,!0):json);var o=json?json.header:e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),a=json?json.message:e.JText._("COM_FINDER_MESSAGE_RETURNED")+"<br>"+json;t&&(t.innerText=o,t.classList.add("finder-error")),s&&(s.innerHTML=a,s.classList.add("finder-error"))},u=function(o,a){s=t/n*100;var d=r.getElementById("progress-bar"),l=r.getElementById("finder-progress-header"),c=r.getElementById("finder-progress-message");l&&(l.innerText=o),c&&(c.innerHTML=a),d&&(s<100?(d.style.width=s+"%",d.setAttribute("aria-valuenow",s)):(d.classList.remove("bar-success"),d.classList.add("bar-warning"),d.setAttribute("aria-valuemin",100),d.setAttribute("aria-valuemax",200),d.style.width=s+"%",d.setAttribute("aria-valuenow",s)),a===msg&&(i("progress"),window.parent.document.getElementById(e.currentModal.get()).close()))};t=0,s=0,d("indexer.start")}}(Joomla,document),document.addEventListener("DOMContentLoaded",function(){Indexer=Joomla.finderIndexer()});