!function(){var e={},n=function(n,t,r){if("string"!=typeof n)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+n;if(void 0===r)throw"no definition function for "+n;e[n]={deps:t,defn:r,instance:void 0}},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],i=r.deps,a=r.defn,o=i.length,c=new Array(o),l=0;l<o;++l)c[l]=t(i[l]);var d=a.apply(null,c);if(void 0===d)throw"module ["+n+"] returned undefined";r.instance=d}(n),r.instance},r=n;r("ephox.katamari.api.Cell",[],function(){var e=function(n){var t=n,r=function(){return t};return{get:r,set:function(e){t=e},clone:function(){return e(r())}}};return e}),i="global!tinymce.util.Tools.resolve",a=tinymce.util.Tools.resolve,r(i,[],function(){return a});var i,a;r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),r("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}return{findAndReplaceDOMText:function(n,t,r,i,a){var o,c,l,d,s,u,f=[],p=0;l=t.ownerDocument,d=a.getBlockElements(),s=a.getWhiteSpaceElements(),u=a.getShortEndedElements();function g(e,n){if(n=n||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var t=e.index;if(n>0){var r=e[n];if(!r)throw"Invalid capture group";t+=e[0].indexOf(r),e[0]=r}return[t,t+e[0].length,[e[0]]]}if(c=function n(t){var r;if(3===t.nodeType)return t.data;if(s[t.nodeName]&&!d[t.nodeName])return"";if(r="",e(t))return"\n";if((d[t.nodeName]||u[t.nodeName])&&(r+="\n"),t=t.firstChild)do{r+=n(t)}while(t=t.nextSibling);return r}(t)){if(n.global)for(;o=n.exec(c);)f.push(g(o,i));else o=c.match(n),f.push(g(o,i));return f.length&&(p=f.length,function(n,t,r){var i,a,o,c,l=[],f=0,p=n,g=t.shift(),m=0;e:for(;;){if((d[p.nodeName]||u[p.nodeName]||e(p))&&f++,3===p.nodeType&&(!a&&p.length+f>=g[1]?(a=p,c=g[1]-f):i&&l.push(p),!i&&p.length+f>g[0]&&(i=p,o=g[0]-f),f+=p.length),i&&a){if(p=r({startNode:i,startNodeIndex:o,endNode:a,endNodeIndex:c,innerNodes:l,match:g[2],matchIndex:m}),f-=a.length-c,i=null,a=null,l=[],m++,!(g=t.shift()))break}else if(s[p.nodeName]&&!d[p.nodeName]||!p.firstChild){if(p.nextSibling){p=p.nextSibling;continue}}else if(!e(p)){p=p.firstChild;continue}for(;;){if(p.nextSibling){p=p.nextSibling;break}if(p.parentNode===n)break e;p=p.parentNode}}}(t,f,function(e){var n;if("function"!=typeof e){var t=e.nodeType?e:l.createElement(e);n=function(e,n){var r=t.cloneNode(!1);return r.setAttribute("data-mce-index",n),e&&r.appendChild(l.createTextNode(e)),r}}else n=e;return function(e){var t,r,i,a=e.startNode,o=e.endNode,c=e.matchIndex;if(a===o){var d=a;i=d.parentNode,e.startNodeIndex>0&&(t=l.createTextNode(d.data.substring(0,e.startNodeIndex)),i.insertBefore(t,d));var s=n(e.match[0],c);return i.insertBefore(s,d),e.endNodeIndex<d.length&&(r=l.createTextNode(d.data.substring(e.endNodeIndex)),i.insertBefore(r,d)),d.parentNode.removeChild(d),s}t=l.createTextNode(a.data.substring(0,e.startNodeIndex)),r=l.createTextNode(o.data.substring(e.endNodeIndex));for(var u=n(a.data.substring(e.startNodeIndex),c),f=[],p=0,g=e.innerNodes.length;p<g;++p){var m=e.innerNodes[p],h=n(m.data,c);m.parentNode.replaceChild(h,m),f.push(h)}var v=n(o.data.substring(0,e.endNodeIndex),c);return(i=a.parentNode).insertBefore(t,a),i.insertBefore(u,a),i.removeChild(a),(i=o.parentNode).insertBefore(v,o),i.insertBefore(r,o),i.removeChild(o),v}}(r))),p}}}}),r("tinymce.plugins.searchreplace.core.Actions",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],function(e,n){var t=function(e){var n=e.getAttribute("data-mce-index");return"number"==typeof n?""+n:n},r=function(e){var n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},i=function(n,r){var i,a=[];if((i=e.toArray(n.getBody().getElementsByTagName("span"))).length)for(var o=0;o<i.length;o++){var c=t(i[o]);null!==c&&c.length&&(c===r.toString()&&a.push(i[o]))}return a},a=function(e,n,t){var r=n.get(),a=e.dom;(t=!1!==t)?r++:r--,a.removeClass(i(e,n.get()),"mce-match-marker-selected");var o=i(e,r);return o.length?(a.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),r):-1},o=function(e,n){var t=n.parentNode;e.remove(n),e.isEmpty(t)&&e.remove(t)},c=function(e,n){var t=a(e,n,!0);-1!==t&&n.set(t)},l=function(e,n){var t=a(e,n,!1);-1!==t&&n.set(t)},d=function(e){var n=t(e);return null!==n&&n.length>0},s=function(n,i,a){var o,c,l,d;for(c=e.toArray(n.getBody().getElementsByTagName("span")),o=0;o<c.length;o++){var s=t(c[o]);null!==s&&s.length&&(s===i.get().toString()&&(l||(l=c[o].firstChild),d=c[o].firstChild),r(c[o]))}if(l&&d){var u=n.dom.createRng();return u.setStart(l,0),u.setEnd(d,d.data.length),!1!==a&&n.selection.setRng(u),u}},u=function(e,n){return i(e,n.get()+1).length>0},f=function(e,n){return i(e,n.get()-1).length>0};return{done:s,find:function(e,t,r,i,o){r=(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s"),r=o?"\\b"+r+"\\b":r;var c=function(e,t,r){var i,a;return(a=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",i=e.getBody(),s(e,t,!1),n.findAndReplaceDOMText(r,i,a,!1,e.schema)}(e,t,new RegExp(r,i?"g":"gi"));return c&&(t.set(-1),t.set(a(e,t,!0))),c},next:c,prev:l,replace:function(n,i,a,s,p){var g,m,h,v,x,b,y=i.get();for(s=!1!==s,h=n.getBody(),m=e.grep(e.toArray(h.getElementsByTagName("span")),d),g=0;g<m.length;g++){var N=t(m[g]);if(v=x=parseInt(N,10),p||v===i.get()){for(a.length?(m[g].firstChild.nodeValue=a,r(m[g])):o(n.dom,m[g]);m[++g];){if((v=parseInt(t(m[g]),10))!==x){g--;break}o(n.dom,m[g])}s&&y--}else x>i.get()&&m[g].setAttribute("data-mce-index",x-1)}return i.set(y),s?(b=u(n,i),c(n,i)):(b=f(n,i),l(n,i)),!p&&b},hasNext:u,hasPrev:f}}),r("tinymce.plugins.searchreplace.api.Api",["tinymce.plugins.searchreplace.core.Actions"],function(e){return{get:function(n,t){return{done:function(r){return e.done(n,t,r)},find:function(r,i,a){return e.find(n,t,r,i,a)},next:function(){return e.next(n,t)},prev:function(){return e.prev(n,t)},replace:function(r,i,a){return e.replace(n,t,r,i,a)}}}}}),r("tinymce.plugins.searchreplace.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.Actions"],function(e,n){return{open:function(t,r){var i,a={};t.undoManager.add(),i=e.trim(t.selection.getContent({format:"text"}));function o(){l.statusbar.find("#next").disabled(!1===n.hasNext(t,r)),l.statusbar.find("#prev").disabled(!1===n.hasPrev(t,r))}function c(){t.windowManager.alert("Could not find the specified string.",function(){l.find("#find")[0].focus()})}var l=t.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){t.focus(),n.done(t,r),t.undoManager.add()},onSubmit:function(e){var i,d,s,u;return e.preventDefault(),d=l.find("#case").checked(),u=l.find("#words").checked(),(s=l.find("#find").value()).length?a.text===s&&a.caseState===d&&a.wholeWord===u?n.hasNext(t,r)?(n.next(t,r),void o()):void c():((i=n.find(t,r,s,d,u))||c(),l.statusbar.items().slice(1).disabled(0===i),o(),void(a={text:s,caseState:d,wholeWord:u})):(n.done(t,r,!1),void l.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){l.submit()}},{text:"Replace",disabled:!0,onclick:function(){n.replace(t,r,l.find("#replace").value())||(l.statusbar.items().slice(1).disabled(!0),r.set(-1),a={})}},{text:"Replace all",disabled:!0,onclick:function(){n.replace(t,r,l.find("#replace").value(),!0,!0),l.statusbar.items().slice(1).disabled(!0),a={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){n.prev(t,r),o()}},{text:"Next",name:"next",disabled:!0,onclick:function(){n.next(t,r),o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}}}),r("tinymce.plugins.searchreplace.api.Commands",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){return{register:function(n,t){n.addCommand("SearchReplace",function(){e.open(n,t)})}}}),r("tinymce.plugins.searchreplace.ui.Buttons",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){var n=function(n,t){return function(){e.open(n,t)}};return{register:function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:n(e,t)}),e.shortcuts.add("Meta+F","",n(e,t))}}}),r("tinymce.plugins.searchreplace.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.searchreplace.api.Api","tinymce.plugins.searchreplace.api.Commands","tinymce.plugins.searchreplace.ui.Buttons"],function(e,n,t,r,i){return n.add("searchreplace",function(n){var a=e(-1);return r.register(n,a),i.register(n,a),t.get(n,a)}),function(){}}),t("tinymce.plugins.searchreplace.Plugin")()}();