!function(){var e={},n=function(n,t,r){if("string"!=typeof n)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+n;if(void 0===r)throw"no definition function for "+n;e[n]={deps:t,defn:r,instance:void 0}},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],i=r.deps,a=r.defn,o=i.length,c=new Array(o),l=0;l<o;++l)c[l]=t(i[l]);var d=a.apply(null,c);if(void 0===d)throw"module ["+n+"] returned undefined";r.instance=d}(n),r.instance},r=function(e,n){for(var r=e.length,i=new Array(r),a=0;a<r;++a)i[a]=t(e[a]);n.apply(null,i)};({}).bolt={module:{api:{define:n,require:r,demand:t}}};var i=n;i("ephox.katamari.api.Cell",[],function(){var e=function(n){var t=n,r=function(){return t};return{get:r,set:function(e){t=e},clone:function(){return e(r())}}};return e}),function(e,n){i(e,[],function(){return n})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}return{findAndReplaceDOMText:function(n,t,r,i,a){function o(e,n){if(n=n||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var t=e.index;if(n>0){var r=e[n];if(!r)throw"Invalid capture group";t+=e[0].indexOf(r),e[0]=r}return[t,t+e[0].length,[e[0]]]}function c(n){var t;if(3===n.nodeType)return n.data;if(f[n.nodeName]&&!u[n.nodeName])return"";if(t="",e(n))return"\n";if((u[n.nodeName]||p[n.nodeName])&&(t+="\n"),n=n.firstChild)do{t+=c(n)}while(n=n.nextSibling);return t}var l,d,s,u,f,p,g=[],m=0;if(s=t.ownerDocument,u=a.getBlockElements(),f=a.getWhiteSpaceElements(),p=a.getShortEndedElements(),d=c(t)){if(n.global)for(;l=n.exec(d);)g.push(o(l,i));else l=d.match(n),g.push(o(l,i));return g.length&&(m=g.length,function(n,t,r){var i,a,o,c,l=[],d=0,s=n,g=t.shift(),m=0;e:for(;;){if((u[s.nodeName]||p[s.nodeName]||e(s))&&d++,3===s.nodeType&&(!a&&s.length+d>=g[1]?(a=s,c=g[1]-d):i&&l.push(s),!i&&s.length+d>g[0]&&(i=s,o=g[0]-d),d+=s.length),i&&a){if(s=r({startNode:i,startNodeIndex:o,endNode:a,endNodeIndex:c,innerNodes:l,match:g[2],matchIndex:m}),d-=a.length-c,i=null,a=null,l=[],g=t.shift(),m++,!g)break}else if(f[s.nodeName]&&!u[s.nodeName]||!s.firstChild){if(s.nextSibling){s=s.nextSibling;continue}}else if(!e(s)){s=s.firstChild;continue}for(;;){if(s.nextSibling){s=s.nextSibling;break}if(s.parentNode===n)break e;s=s.parentNode}}}(t,g,function(e){var n;if("function"!=typeof e){var t=e.nodeType?e:s.createElement(e);n=function(e,n){var r=t.cloneNode(!1);return r.setAttribute("data-mce-index",n),e&&r.appendChild(s.createTextNode(e)),r}}else n=e;return function(e){var t,r,i,a=e.startNode,o=e.endNode,c=e.matchIndex;if(a===o){var l=a;i=l.parentNode,e.startNodeIndex>0&&(t=s.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(t,l));var d=n(e.match[0],c);return i.insertBefore(d,l),e.endNodeIndex<l.length&&(r=s.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),d}t=s.createTextNode(a.data.substring(0,e.startNodeIndex)),r=s.createTextNode(o.data.substring(e.endNodeIndex));for(var u=n(a.data.substring(e.startNodeIndex),c),f=[],p=0,g=e.innerNodes.length;p<g;++p){var m=e.innerNodes[p],h=n(m.data,c);m.parentNode.replaceChild(h,m),f.push(h)}var v=n(o.data.substring(0,e.endNodeIndex),c);return(i=a.parentNode).insertBefore(t,a),i.insertBefore(u,a),i.removeChild(a),(i=o.parentNode).insertBefore(v,o),i.insertBefore(r,o),i.removeChild(o),v}}(r))),m}}}}),i("tinymce.plugins.searchreplace.core.Actions",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],function(e,n){var t=function(e){var n=e.getAttribute("data-mce-index");return"number"==typeof n?""+n:n},r=function(e){var n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},i=function(n,r){var i,a=[];if((i=e.toArray(n.getBody().getElementsByTagName("span"))).length)for(var o=0;o<i.length;o++){var c=t(i[o]);null!==c&&c.length&&(c===r.toString()&&a.push(i[o]))}return a},a=function(e,n,t){var r=n.get(),a=e.dom;(t=!1!==t)?r++:r--,a.removeClass(i(e,n.get()),"mce-match-marker-selected");var o=i(e,r);return o.length?(a.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),r):-1},o=function(e,n){var t=n.parentNode;e.remove(n),e.isEmpty(t)&&e.remove(t)},c=function(e,n){var t=a(e,n,!0);-1!==t&&n.set(t)},l=function(e,n){var t=a(e,n,!1);-1!==t&&n.set(t)},d=function(e){var n=t(e);return null!==n&&n.length>0},s=function(n,i,a){var o,c,l,d;for(c=e.toArray(n.getBody().getElementsByTagName("span")),o=0;o<c.length;o++){var s=t(c[o]);null!==s&&s.length&&(s===i.get().toString()&&(l||(l=c[o].firstChild),d=c[o].firstChild),r(c[o]))}if(l&&d){var u=n.dom.createRng();return u.setStart(l,0),u.setEnd(d,d.data.length),!1!==a&&n.selection.setRng(u),u}},u=function(e,n){return i(e,n.get()+1).length>0},f=function(e,n){return i(e,n.get()-1).length>0};return{done:s,find:function(e,t,r,i,o){r=(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s"),r=o?"\\b"+r+"\\b":r;var c=function(e,t,r){var i,a;return a=e.dom.create("span",{"data-mce-bogus":1}),a.className="mce-match-marker",i=e.getBody(),s(e,t,!1),n.findAndReplaceDOMText(r,i,a,!1,e.schema)}(e,t,new RegExp(r,i?"g":"gi"));return c&&(t.set(-1),t.set(a(e,t,!0))),c},next:c,prev:l,replace:function(n,i,a,s,p){var g,m,h,v,x,b,y=i.get();for(s=!1!==s,h=n.getBody(),m=e.grep(e.toArray(h.getElementsByTagName("span")),d),g=0;g<m.length;g++){var N=t(m[g]);if(v=x=parseInt(N,10),p||v===i.get()){for(a.length?(m[g].firstChild.nodeValue=a,r(m[g])):o(n.dom,m[g]);m[++g];){if((v=parseInt(t(m[g]),10))!==x){g--;break}o(n.dom,m[g])}s&&y--}else x>i.get()&&m[g].setAttribute("data-mce-index",x-1)}return i.set(y),s?(b=u(n,i),c(n,i)):(b=f(n,i),l(n,i)),!p&&b},hasNext:u,hasPrev:f}}),i("tinymce.plugins.searchreplace.api.Api",["tinymce.plugins.searchreplace.core.Actions"],function(e){return{get:function(n,t){return{done:function(r){return e.done(n,t,r)},find:function(r,i,a){return e.find(n,t,r,i,a)},next:function(){return e.next(n,t)},prev:function(){return e.prev(n,t)},replace:function(r,i,a){return e.replace(n,t,r,i,a)}}}}}),i("tinymce.plugins.searchreplace.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.Actions"],function(e,n){return{open:function(t,r){function i(){l.statusbar.find("#next").disabled(!1===n.hasNext(t,r)),l.statusbar.find("#prev").disabled(!1===n.hasPrev(t,r))}function a(){t.windowManager.alert("Could not find the specified string.",function(){l.find("#find")[0].focus()})}var o,c={};t.undoManager.add(),o=e.trim(t.selection.getContent({format:"text"}));var l=t.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){t.focus(),n.done(t,r),t.undoManager.add()},onSubmit:function(e){var o,d,s,u;return e.preventDefault(),d=l.find("#case").checked(),u=l.find("#words").checked(),(s=l.find("#find").value()).length?c.text===s&&c.caseState===d&&c.wholeWord===u?n.hasNext(t,r)?(n.next(t,r),void i()):void a():((o=n.find(t,r,s,d,u))||a(),l.statusbar.items().slice(1).disabled(0===o),i(),void(c={text:s,caseState:d,wholeWord:u})):(n.done(t,r,!1),void l.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){l.submit()}},{text:"Replace",disabled:!0,onclick:function(){n.replace(t,r,l.find("#replace").value())||(l.statusbar.items().slice(1).disabled(!0),r.set(-1),c={})}},{text:"Replace all",disabled:!0,onclick:function(){n.replace(t,r,l.find("#replace").value(),!0,!0),l.statusbar.items().slice(1).disabled(!0),c={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){n.prev(t,r),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){n.next(t,r),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:o},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}}}),i("tinymce.plugins.searchreplace.api.Commands",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){return{register:function(n,t){n.addCommand("SearchReplace",function(){e.open(n,t)})}}}),i("tinymce.plugins.searchreplace.ui.Buttons",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){var n=function(n,t){return function(){e.open(n,t)}};return{register:function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:n(e,t)}),e.shortcuts.add("Meta+F","",n(e,t))}}}),i("tinymce.plugins.searchreplace.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.searchreplace.api.Api","tinymce.plugins.searchreplace.api.Commands","tinymce.plugins.searchreplace.ui.Buttons"],function(e,n,t,r,i){return n.add("searchreplace",function(n){var a=e(-1);return r.register(n,a),i.register(n,a),t.get(n,a)}),function(){}}),t("tinymce.plugins.searchreplace.Plugin")()}();