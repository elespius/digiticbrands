!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,r=i.length,a=new Array(r),u=0;u<r;++u)a[u]=l(i[u]);var c=o.apply(null,a);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,l){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===l)throw"no definition function for "+t;e[t]={deps:n,defn:l,instance:void 0}},l=function(n){var l=e[n];if(void 0===l)throw"module ["+n+"] was undefined";return void 0===l.instance&&t(n),l.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i[o]=l(e[o]);t.apply(null,i)};({}).bolt={module:{api:{define:n,require:i,demand:l}}};var o=n;o("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,l=function(){return n};return{get:l,set:function(e){n=e},clone:function(){return e(l())}}};return e}),function(e,t){o(e,[],function(){return t})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),o("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),o("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),o("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),o("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),o("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),o("tinymce.plugins.fullpage.api.Settings",[],function(){return{shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}}}),o("tinymce.plugins.fullpage.core.Parser",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.fullpage.api.Settings"],function(e,t,n,l,i){var o=function(t){return new e({validate:!1,root_name:"#document"}).parse(t)};return{parseHeader:o,htmlToData:function(e,t){function n(e,t){return e.attr(t)||""}var r,a,u=o(t),c={};return c.fontface=i.getDefaultFontFamily(e),c.fontsize=i.getDefaultFontSize(e),7===(r=u.firstChild).type&&(c.xml_pi=!0,(a=/encoding="([^"]+)"/.exec(r.value))&&(c.docencoding=a[1])),(r=u.getAll("#doctype")[0])&&(c.doctype="<!DOCTYPE"+r.value+">"),(r=u.getAll("title")[0])&&r.firstChild&&(c.title=r.firstChild.value),l.each(u.getAll("meta"),function(e){var t,n=e.attr("name"),l=e.attr("http-equiv");n?c[n.toLowerCase()]=e.attr("content"):"Content-Type"===l&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(c.docencoding=t[1])}),(r=u.getAll("html")[0])&&(c.langcode=n(r,"lang")||n(r,"xml:lang")),c.stylesheets=[],l.each(u.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&c.stylesheets.push(e.attr("href"))}),(r=u.getAll("body")[0])&&(c.langdir=n(r,"dir"),c.style=n(r,"style"),c.visited_color=n(r,"vlink"),c.link_color=n(r,"link"),c.active_color=n(r,"alink")),c},dataToHtml:function(e,i,r){function a(e,t,n){e.attr(t,n||void 0)}function u(e){s.firstChild?s.insert(e,s.firstChild):s.append(e)}var c,s,f,d,g,m=e.dom;c=o(r),(s=c.getAll("head")[0])||(d=c.getAll("html")[0],s=new t("head",1),d.firstChild?d.insert(s,d.firstChild,!0):d.append(s)),d=c.firstChild,i.xml_pi?(g='version="1.0"',i.docencoding&&(g+=' encoding="'+i.docencoding+'"'),7!==d.type&&(d=new t("xml",7),c.insert(d,c.firstChild,!0)),d.value=g):d&&7===d.type&&d.remove(),d=c.getAll("#doctype")[0],i.doctype?(d||(d=new t("#doctype",10),i.xml_pi?c.insert(d,c.firstChild):u(d)),d.value=i.doctype.substring(9,i.doctype.length-1)):d&&d.remove(),d=null,l.each(c.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(d=e)}),i.docencoding?(d||((d=new t("meta",1)).attr("http-equiv","Content-Type"),d.shortEnded=!0,u(d)),d.attr("content","text/html; charset="+i.docencoding)):d&&d.remove(),d=c.getAll("title")[0],i.title?(d?d.empty():u(d=new t("title",1)),d.append(new t("#text",3)).value=i.title):d&&d.remove(),l.each("keywords,description,author,copyright,robots".split(","),function(e){var n,l,o=c.getAll("meta"),r=i[e];for(n=0;n<o.length;n++)if((l=o[n]).attr("name")===e)return void(r?l.attr("content",r):l.remove());r&&((d=new t("meta",1)).attr("name",e),d.attr("content",r),d.shortEnded=!0,u(d))});var p={};return l.each(c.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(p[e.attr("href")]=e)}),l.each(i.stylesheets,function(e){p[e]||((d=new t("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),d.shortEnded=!0,u(d)),delete p[e]}),l.each(p,function(e){e.remove()}),(d=c.getAll("body")[0])&&(a(d,"dir",i.langdir),a(d,"style",i.style),a(d,"vlink",i.visited_color),a(d,"link",i.link_color),a(d,"alink",i.active_color),m.setAttribs(e.getBody(),{style:i.style,dir:i.dir,vLink:i.visited_color,link:i.link_color,aLink:i.active_color})),(d=c.getAll("html")[0])&&(a(d,"lang",i.langcode),a(d,"xml:lang",i.langcode)),s.firstChild||s.remove(),(f=new n({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(c)).substring(0,f.indexOf("</body>"))}}}),o("tinymce.plugins.fullpage.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.fullpage.core.Parser"],function(e,t){return{open:function(n,l){var i=t.htmlToData(n,l.get());n.windowManager.open({title:"Document properties",data:i,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(o){var r=t.dataToHtml(n,e.extend(i,o.data),l.get());l.set(r)}})}}}),o("tinymce.plugins.fullpage.api.Commands",["tinymce.plugins.fullpage.ui.Dialog"],function(e){return{register:function(t,n){t.addCommand("mceFullPageProperties",function(){e.open(t,n)})}}}),o("tinymce.plugins.fullpage.core.Protect",["tinymce.core.util.Tools"],function(e){return{protectHtml:function(t,n){return e.each(t,function(e){n=n.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})}),n},unprotectHtml:function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})}}}),o("tinymce.plugins.fullpage.core.FilterContent",["tinymce.core.util.Tools","tinymce.plugins.fullpage.api.Settings","tinymce.plugins.fullpage.core.Parser","tinymce.plugins.fullpage.core.Protect"],function(e,t,n,l){var i=e.each,o=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},r=function(r,u,c,s){var f,d,g,m,p,y="",h=r.dom;if(!(s.selection||(g=l.protectHtml(r.settings.protect,s.content),"raw"===s.format&&u.get()||s.source_view&&t.shouldHideInSourceView(r)))){0!==g.length||s.source_view||(g=e.trim(u.get())+"\n"+e.trim(g)+"\n"+e.trim(c.get())),-1!==(f=(g=g.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(f=g.indexOf(">",f),u.set(o(g.substring(0,f+1))),-1===(d=g.indexOf("</body",f))&&(d=g.length),s.content=e.trim(g.substring(f+1,d)),c.set(o(g.substring(d)))):(u.set(a(r)),c.set("\n</body>\n</html>")),m=n.parseHeader(u.get()),i(m.getAll("style"),function(e){e.firstChild&&(y+=e.firstChild.value)}),(p=m.getAll("body")[0])&&h.setAttribs(r.getBody(),{style:p.attr("style")||"",dir:p.attr("dir")||"",vLink:p.attr("vlink")||"",link:p.attr("link")||"",aLink:p.attr("alink")||""}),h.remove("fullpage_styles");var v=r.getDoc().getElementsByTagName("head")[0];y&&(h.add(v,"style",{id:"fullpage_styles"},y),(p=h.get("fullpage_styles")).styleSheet&&(p.styleSheet.cssText=y));var _={};e.each(v.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(_[e.href]=e)}),e.each(m.getAll("link"),function(e){var t=e.attr("href");if(!t)return!0;_[t]||"stylesheet"!==e.attr("rel")||h.add(v,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete _[t]}),e.each(_,function(e){e.parentNode.removeChild(e)})}},a=function(e){var n,l="",i="";if(t.getDefaultXmlPi(e)){var o=t.getDefaultEncoding(e);l+='<?xml version="1.0" encoding="'+(o||"ISO-8859-1")+'" ?>\n'}return l+=t.getDefaultDocType(e),l+="\n<html>\n<head>\n",(n=t.getDefaultTitle(e))&&(l+="<title>"+n+"</title>\n"),(n=t.getDefaultEncoding(e))&&(l+='<meta http-equiv="Content-Type" content="text/html; charset='+n+'" />\n'),(n=t.getDefaultFontFamily(e))&&(i+="font-family: "+n+";"),(n=t.getDefaultFontSize(e))&&(i+="font-size: "+n+";"),(n=t.getDefaultTextColor(e))&&(i+="color: "+n+";"),l+="</head>\n<body"+(i?' style="'+i+'"':"")+">\n"},u=function(n,i,o,r){r.selection||r.source_view&&t.shouldHideInSourceView(n)||(r.content=l.unprotectHtml(e.trim(i)+"\n"+e.trim(r.content)+"\n"+e.trim(o)))};return{setup:function(e,t,n){e.on("BeforeSetContent",function(l){r(e,t,n,l)}),e.on("GetContent",function(l){u(e,t.get(),n.get(),l)})}}}),o("tinymce.plugins.fullpage.ui.Buttons",[],function(){return{register:function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})}}}),o("tinymce.plugins.fullpage.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.fullpage.api.Commands","tinymce.plugins.fullpage.core.FilterContent","tinymce.plugins.fullpage.ui.Buttons"],function(e,t,n,l,i){return t.add("fullpage",function(t){var o=e(""),r=e("");n.register(t,o),i.register(t),l.setup(t,o,r)}),function(){}}),l("tinymce.plugins.fullpage.Plugin")()}();