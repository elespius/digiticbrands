!function(){var e={},t=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},n=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&function(t){for(var r=e[t],o=r.deps,a=r.defn,i=o.length,u=new Array(i),s=0;s<i;++s)u[s]=n(o[s]);var c=a.apply(null,u);if(void 0===c)throw"module ["+t+"] returned undefined";r.instance=c}(t),r.instance},r=t,o=function(e,t){r(e,[],function(){return t})};o("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),o("global!Array",Array),o("global!Error",Error),r("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var a=n.concat(r);return t.apply(null,a)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),o("global!Object",Object),r("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return a},a=function(){var a=function(e){return e.isNone()},i=function(e){return e()},u=function(e){return e},s={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:i,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:i,map:o,ap:o,each:function(){},bind:o,flatten:o,exists:n,forall:r,filter:o,equals:a,equals_:a,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),i=function(e){var t=function(){return e},u=function(){return c},s=function(t){return t(e)},c={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return i(t(e))},ap:function(t){return t.fold(o,function(t){return i(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?c:a},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return c};return{some:i,none:o,from:function(e){return null===e||void 0===e?a:i(e)}}}),o("global!String",String),r("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf;return void 0===e?function(e,t){return p(e,t)}:function(t,n){return e.call(t,n)}}(),a=function(e,t){return o(e,t)>-1},i=function(e,n){for(var r=e.length,o=new t(r),a=0;a<r;a++){var i=e[a];o[a]=n(i,a,e)}return o},u=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},s=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},c=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var a=e[r];t(a,r,e)&&n.push(a)}return n},l=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},p=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},f=t.prototype.push,d=function(e){for(var r=[],o=0,a=e.length;o<a;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);f.apply(r,e[o])}return r},m=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},h=t.prototype.slice;return{map:i,each:u,eachr:s,partition:function(e,t){for(var n=[],r=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o,e)?n:r).push(i)}return{pass:n,fail:r}},filter:c,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],a=0,i=e.length;a<i;a++){var u=e[a],s=t(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r},indexOf:function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},foldr:function(e,t,n){return s(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return u(e,function(e){n=t(n,e)}),n},find:function(t,n){for(var r=0,o=t.length;r<o;r++){var a=t[r];if(n(a,r,t))return e.some(a)}return e.none()},findIndex:l,flatten:d,bind:function(e,t){var n=i(e,t);return d(n)},forall:m,exists:function(e,t){return l(e,t).isSome()},contains:a,equal:function(e,t){return e.length===t.length&&m(e,function(e,n){return e===t[n]})},reverse:function(e){var t=h.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return c(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,a=e.length;o<a;o++){var i=e[o];n[r(i)]=t(i,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=h.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),r("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys;return void 0===e?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:e}(),r=function(e,t){for(var r=n(e),o=0,a=r.length;o<a;o++){var i=r[o];t(e[i],i,e)}},o=function(e,t){var n={};return r(e,function(r,o){var a=t(r,o,e);n[a.k]=a.v}),n},a=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},i=function(e){return a(e,function(e){return e})};return{bifilter:function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},each:r,map:function(e,t){return o(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:a,tupleMap:o,find:function(t,r){for(var o=n(t),a=0,i=o.length;a<i;a++){var u=o[a],s=t[u];if(r(s,u,t))return e.some(s)}return e.none()},keys:n,values:i,size:function(e){return i(e).length}}}),r("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var a=new n(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];if(o.length!==a.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+a.length+" arguments");var u={};return e.each(o,function(e,n){u[e]=t.constant(a[n])}),u}}}),r("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){return function(r){return function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r}(r)===n}};return{isString:n("string"),isObject:n("object"),isArray:n("array"),isNull:n("null"),isBoolean:n("boolean"),isUndefined:n("undefined"),isFunction:n("function"),isNumber:n("number")}}),r("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),r("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,a,i){return function(u,s){var c=u.concat(s);if(0===c.length)throw new a("You must specify at least one required or optional field.");return o.validateStrArr("required",u),o.validateStrArr("optional",s),o.checkDupes(c),function(a){var l=n.keys(a);e.forall(u,function(t){return e.contains(l,t)})||o.reqMessage(u,l);var p=e.filter(l,function(t){return!e.contains(c,t)});p.length>0&&o.unsuppMessage(p);var f={};return e.each(u,function(e){f[e]=t.constant(a[e])}),e.each(s,function(e){f[e]=t.constant(i.prototype.hasOwnProperty.call(a,e)?r.some(a[e]):r.none())}),f}}}),r("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),r("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("width","height"),n=e.immutable("rows","columns"),r=e.immutable("row","column"),o=e.immutable("x","y"),a=e.immutable("element","rowspan","colspan"),i=e.immutable("element","rowspan","colspan","isNew");return{dimensions:t,grid:n,address:r,coords:o,extended:e.immutable("element","rowspan","colspan","row","column"),detail:a,detailnew:i,rowdata:e.immutable("element","cells","section"),elementnew:e.immutable("element","isNew"),rowdatanew:e.immutable("element","cells","section","isNew"),rowcells:e.immutable("cells","section"),rowdetails:e.immutable("details","section"),bounds:e.immutable("startRow","startCol","finishRow","finishCol")}}),r("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),o("global!document",document),r("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,o){var a=function(t){if(null===t||void 0===t)throw new n("Node cannot be null or undefined");return{dom:e.constant(t)}};return{fromHtml:function(e,t){var n=(t||o).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw r.error("HTML does not have a single root node",e),"HTML must have a single root node";return a(n.childNodes[0])},fromTag:function(e,t){var n=(t||o).createElement(e);return a(n)},fromText:function(e,t){var n=(t||o).createTextNode(e);return a(n)},fromDom:a,fromPoint:function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(a)}}}),r("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),r("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,a){var i=r.ELEMENT,u=r.DOCUMENT,s=function(e){return e.nodeType!==i&&e.nodeType!==u||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?a:r.dom();return s(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==i)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},one:function(e,r){var o=void 0===r?a:r.dom();return s(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),r("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),r("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),r("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length;++o)a=r,i=t[o],void 0!==a[i]&&null!==a[i]||(a[i]={}),r=a[i];var a,i;return r};return{path:t,resolve:function(e,n){var r=e.split(".");return t(r,n)},forge:n,namespace:function(e,t){var r=e.split(".");return n(r,t)}}}),r("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){return{getOrDie:function(t,n){var r,o,a=(r=t,o=n,e.resolve(r,o));if(void 0===a)throw t+" not available on this browser";return a}}}),r("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),r("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),o("global!Number",Number),r("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(){return o(0,0)},o=function(e,t){return{major:e,minor:t}};return{nu:o,detect:function(e,a){var i=n(a).toLowerCase();return 0===e.length?r():function(e,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n);if(!r)return{major:0,minor:0};var a=function(e){return t(n.replace(r,"$"+e))};return o(a(1),a(2))}(e,i)},unknown:r}}),r("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isEdge:n("Edge",t),isChrome:n("Chrome",t),isIE:n("IE",t),isOpera:n("Opera",t),isFirefox:n("Firefox",t),isSafari:n("Safari",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,edge:e.constant("Edge"),chrome:e.constant("Chrome"),ie:e.constant("IE"),opera:e.constant("Opera"),firefox:e.constant("Firefox"),safari:e.constant("Safari")}}),r("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isWindows:n("Windows",t),isiOS:n("iOS",t),isAndroid:n("Android",t),isOSX:n("OSX",t),isLinux:n("Linux",t),isSolaris:n("Solaris",t),isFreeBSD:n("FreeBSD",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,windows:e.constant("Windows"),ios:e.constant("iOS"),android:e.constant("Android"),linux:e.constant("Linux"),osx:e.constant("OSX"),solaris:e.constant("Solaris"),freebsd:e.constant("FreeBSD")}}),r("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),a=t.isiOS()&&!o,i=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,s=o||i||u&&!0===/mobile/i.test(r),c=t.isiOS()||t.isAndroid(),l=c&&!s,p=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(a),isTablet:e.constant(s),isPhone:e.constant(l),isTouch:e.constant(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(p)}}}),r("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),r("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),r("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),r("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){if(""===t)return!0;if(e.length<t.length)return!1;return e.substr(n,n+t.length)===t},o=function(e,t){return r(e,t,0)},a=function(e,t){return r(e,t,e.length-t.length)};return{supplant:function(e,t){return e.replace(/\${([^{}]*)}/g,function(e,n){var r=t[n];return function(e){var t=typeof e;return"string"===t||"number"===t}(r)?r:e})},startsWith:o,removeLeading:function(t,n){return o(t,n)?e.removeFromStart(t,n.length):t},removeTrailing:function(t,n){return a(t,n)?e.removeFromEnd(t,n.length):t},ensureLeading:function(t,n){return o(t,n)?t:e.addToStart(t,n)},ensureTrailing:function(t,n){return a(t,n)?t:e.addToEnd(t,n)},endsWith:a,contains:function(e,t){return-1!==e.indexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)}}}),r("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],a=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(a)}}),r("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(a){var i=o.browsers(),u=o.oses(),s=r.detectBrowser(i,a).fold(e.unknown,e.nu),c=r.detectOs(u,a).fold(t.unknown,t.nu);return{browser:s,os:c,deviceType:n(c,s,a)}}}}),o("global!navigator",navigator),r("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){var e=n.userAgent;return t.detect(e)})}}),r("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var a=function(e,t){return e.dom()===t.dom()},i=r.detect().browser.isIE()?function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)};return{eq:a,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(n,r){return e.exists(r,t.curry(a,n))},contains:i,is:o.is}}),r("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,a,i,u){var s=function(e){return u.fromDom(e.dom().ownerDocument)},c=function(e){var t=e.dom();return r.from(t.parentNode).map(u.fromDom)},l=function(e){var t=e.dom();return r.from(t.previousSibling).map(u.fromDom)},p=function(e){var t=e.dom();return r.from(t.nextSibling).map(u.fromDom)},f=function(e){var n=e.dom();return t.map(n.childNodes,u.fromDom)},d=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(u.fromDom)},m=o.immutable("element","offset");return{owner:s,defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return u.fromDom(t)},documentElement:function(e){var t=s(e);return u.fromDom(t.dom().documentElement)},parent:c,findIndex:function(e){return c(e).bind(function(n){var r=f(n);return t.findIndex(r,function(t){return i.eq(e,t)})})},parents:function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),a=t.dom(),i=[];null!==a.parentNode&&void 0!==a.parentNode;){var s=a.parentNode,c=u.fromDom(s);if(i.push(c),!0===o(c))break;a=s}return i},siblings:function(e){return c(e).map(f).map(function(n){return t.filter(n,function(t){return!i.eq(e,t)})}).getOr([])},prevSibling:l,offsetParent:function(e){var t=e.dom();return r.from(t.offsetParent).map(u.fromDom)},prevSiblings:function(e){return t.reverse(a.toArray(e,l))},nextSibling:p,nextSiblings:function(e){return a.toArray(e,p)},children:f,child:d,firstChild:function(e){return d(e,0)},lastChild:function(e){return d(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=f(e);return n.length>0&&t<n.length?m(n[t],0):m(e,t)}}}),r("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(t,a,i){return e.bind(r.children(t),function(e){return n.is(e,a)?i(e)?[e]:[]:o(e,a,i)})};return{firstLayer:function(e,n){return o(e,n,t.constant(!0))},filterFirstLayer:o}}),r("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return function(t){return n(t)===e}},o=r(e.ELEMENT),a=r(e.TEXT),i=r(e.DOCUMENT);return{name:t,type:n,value:function(e){return e.dom().nodeValue},isElement:o,isText:a,isDocument:i,isComment:function(r){return n(r)===e.COMMENT||"#comment"===t(r)}}}),r("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,a){var i=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw a.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},u=function(e,t,n){i(e.dom(),t,n)},s=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},c=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:u,setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){i(r,t,e)})},get:s,has:c,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){o=n,c(r=e,a=t)&&!c(o,a)&&u(o,a,s(r,a));var r,o,a})}}}),r("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=e.cached(function(){return a(t.fromDom(r))}),a=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:o,getBody:a,inBody:function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}}}),r("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t,o){var a=[];return e.each(n.children(t),function(e){o(e)&&(a=a.concat([e])),a=a.concat(r(e,o))}),a};return{all:function(e){return r(t.body(),e)},ancestors:function(t,r,o){return e.filter(n.parents(t,o),r)},siblings:function(t,r){return e.filter(n.siblings(t),r)},children:function(t,r){return e.filter(n.children(t),r)},descendants:r}}),r("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),r("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,a,i){return n(o,a)?t.some(o):e.isFunction(i)&&i(o)?t.none():r(o,a,i)}}),r("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,a,i,u){var s=function(t,o,a){for(var u=t.dom(),s=e.isFunction(a)?a:n.constant(!1);u.parentNode;){u=u.parentNode;var c=i.fromDom(u);if(o(c))return r.some(c);if(s(c))break}return r.none()},c=function(e,r){return t.find(e.dom().childNodes,n.compose(r,i.fromDom)).map(i.fromDom)},l=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(i.fromDom(e.childNodes[o])))return r.some(i.fromDom(e.childNodes[o]));var a=n(e.childNodes[o]);if(a.isSome())return a}return r.none()};return n(e.dom())};return{first:function(e){return l(o.body(),e)},ancestor:s,closest:function(e,t,n){return u(function(e){return t(e)},s,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?c(i.fromDom(n.parentNode),function(n){return!a.eq(e,n)&&t(n)}):r.none()},child:c,descendant:l}}),r("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:function(e){return t.one(e)},ancestor:r,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,o,a){return n(t.is,r,e,o,a)}}}),o("global!parseInt",parseInt),r("ephox.snooker.api.TableLookup",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse","global!parseInt"],function(e,t,n,r,o,a,i,u,s,c,l,p){var f=function(r,o,a){var u=void 0!==a?a:t.constant(!1);if(u(o))return n.none();if(e.contains(r,i.name(o)))return n.some(o);return s.ancestor(o,r.join(","),function(e){return c.is(e,"table")||u(e)})},d=function(e,t){return l.parent(t).map(function(t){return u.children(t,e)})},m=function(e,t){return p(a.get(e,t),10)};return{cell:function(e,t){return f(["td","th"],e,t)},firstCell:function(e){return s.descendant(e,"th,td")},cells:function(e){return o.firstLayer(e,"th,td")},neighbourCells:t.curry(d,"th,td"),table:function(e,t){return s.closest(e,"table",t)},row:function(e,t){return f(["tr"],e,t)},rows:function(e){return o.firstLayer(e,"tr")},notCell:function(e,t){return f(["caption","tr","tbody","tfoot","thead"],e,t)},neighbourRows:t.curry(d,"tr"),attr:m,grid:function(e,t,n){var o=m(e,t),a=m(e,n);return r.grid(o,a)}}}),r("ephox.snooker.model.DetailsList",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a){return{fromTable:function(i){var u=n.rows(i);return e.map(u,function(i){var u=i,s=a.parent(u).bind(function(e){var t=o.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),c=e.map(n.cells(i),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(u,c,s)})},fromPastedRows:function(o,a){return e.map(o,function(o){var i=e.map(n.cells(o),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(o,i,a.section())})}}}),o("global!Math",Math),r("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(e,t,n,r,o){var a=function(e,t){return e+","+t},i=function(t,n){var r=e.bind(t.all(),function(e){return e.cells()});return e.filter(r,n)};return{generate:function(n){var i={},u=[],s=n.length,c=0;e.each(n,function(t,n){var s=[];e.each(t.cells(),function(e,t){for(var u=0;void 0!==i[a(n,u)];)u++;for(var l=r.extended(e.element(),e.rowspan(),e.colspan(),n,u),p=0;p<e.colspan();p++)for(var f=0;f<e.rowspan();f++){var d=u+p,m=a(n+f,d);i[m]=l,c=o.max(c,d+1)}s.push(l)}),u.push(r.rowdata(t.element(),s,t.section()))});var l=r.grid(s,c);return{grid:t.constant(l),access:t.constant(i),all:t.constant(u)}},getAt:function(e,t,r){var o=e.access()[a(t,r)];return void 0!==o?n.some(o):n.none()},findItem:function(e,t,r){var o=i(e,function(e){return r(t,e.element())});return o.length>0?n.some(o[0]):n.none()},filterItems:i,justCells:function(t){var n=e.map(t.all(),function(e){return e.cells()});return e.flatten(n)}}}),r("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return void 0!==e.style}}}),o("global!window",window),r("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,a,i,u,s,c,l,p,f){var d=function(t,n,r){if(!e.isString(r))throw p.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);s.isSupported(t)&&t.style.setProperty(n,r)},m=function(e,t){s.isSupported(e)&&e.style.removeProperty(t)},h=function(e,t,n){var r=e.dom();d(r,t,n)},g=function(e,t){return s.isSupported(e)?e.style.getPropertyValue(t):""},x=function(e,t){var n=e.dom(),o=g(n,t);return r.from(o).filter(function(e){return e.length>0})};return{copy:function(e,t){var n=e.dom(),r=t.dom();s.isSupported(n)&&s.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:h,preserve:function(e,t){var n=o.get(e,"style"),r=t(e);return(void 0===n?o.remove:o.set)(e,"style",n),r},setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){d(r,t,e)})},setOptions:function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){m(r,t)},function(e){d(r,t,e)})})},remove:function(e,t){var n=e.dom();m(n,t),o.has(e,"style")&&""===c.trim(o.get(e,"style"))&&o.remove(e,"style")},get:function(e,t){var n=e.dom(),r=f.getComputedStyle(n).getPropertyValue(t),o=""!==r||a.inBody(e)?r:g(n,t);return null===o?void 0:o},getRaw:x,getAllRaw:function(e){var t={},n=e.dom();if(s.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},isValidValue:function(e,t,n){var r=i.fromTag(e);h(r,t,n);return x(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){u.isElement(e)&&u.isElement(n)&&t.each(r,function(t){r=n,x(e,o=t).each(function(e){x(r,o).isNone()&&h(r,o,e)});var r,o})}}}),r("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:function(r,o){e.nextSibling(r).fold(function(){e.parent(r).each(function(e){n(e,o)})},function(e){t(e,o)})},prepend:function(t,r){e.firstChild(t).fold(function(){n(t,r)},function(e){t.dom().insertBefore(r.dom(),e.dom())})},append:n,appendAt:function(r,o,a){e.child(r,a).fold(function(){n(r,o)},function(e){t(e,o)})},wrap:function(e,r){t(e,r),n(r,e)}}}),r("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){var a=0===o?n:r[o-1];t.after(a,e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),r("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:function(t){t.dom().textContent="",e.each(n.children(t),function(e){r(e)})},remove:r,unwrap:function(e){var o=n.children(e);o.length>0&&t.before(e,o),r(e)}}}),r("ephox.snooker.api.CopySelected",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Struct","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,a,i,u,s,c,l,p){var f=n.immutable("minRow","minCol","maxRow","maxCol"),d=function(e,t,n){var r=e[n].element(),o=s.fromTag("td");c.append(o,s.fromTag("br"));(t?c.append:c.prepend)(r,o)};return{extract:function(n,s){var c=function(e){return p.is(e.element(),s)},m=r.fromTable(n),h=o.generate(m),g=function(e,n){var r=e.grid().columns(),o=e.grid().rows(),a=r,i=0,u=0;return t.each(e.access(),function(e){if(n(e)){var t=e.row(),r=t+e.rowspan()-1,s=e.column(),c=s+e.colspan()-1;t<o?o=t:r>i&&(i=r),s<a?a=s:c>u&&(u=c)}}),f(o,a,i,u)}(h,c),x="th:not("+s+"),td:not("+s+")",v=a.filterFirstLayer(n,"th,td",function(e){return p.is(e,x)});return e.each(v,l.remove),function(e,t,n,r){for(var a=t.grid().columns(),i=t.grid().rows(),u=0;u<i;u++)for(var s=!1,c=0;c<a;c++)u<n.minRow()||u>n.maxRow()||c<n.minCol()||c>n.maxCol()||(o.getAt(t,u,c).filter(r).isNone()?d(e,s,u):s=!0)}(m,h,g,c),function(t,n){var r=e.filter(a.firstLayer(t,"tr"),function(e){return 0===e.dom().childElementCount});e.each(r,l.remove),n.minCol()!==n.maxCol()&&n.minRow()!==n.maxRow()||e.each(a.firstLayer(t,"th,td"),function(e){i.remove(e,"rowspan"),i.remove(e,"colspan")}),i.remove(t,"width"),i.remove(t,"height"),u.remove(t,"width"),u.remove(t,"height")}(n,g),n}}}),r("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a){var i=function(e,n){return t.fromDom(e.dom().cloneNode(n))},u=function(e){return i(e,!0)},s=function(n,r){var o=t.fromTag(r),a=e.clone(n);return e.setAll(o,a),o};return{shallow:function(e){return i(e,!1)},shallowAs:s,deep:u,copy:function(e,t){var n=s(e,t),o=a.children(u(e));return r.append(n,o),n},mutate:function(e,t){var i=s(e,t);n.before(e,i);var u=a.children(e);return r.append(i,u),o.remove(e),i}}}),r("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,o){var a=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},i=e.detect().browser,u=i.isIE()&&10===i.version.major?function(e){try{return a(e)}catch(e){return t.none()}}:a;return{get:function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return u(e).getOr("")},getOption:u,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),r("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),r("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e){return"img"===t.name(e)?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},a=["img","br"];return{getEnd:o,isEnd:function(e,t){return o(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(r){var o;return o=r,n.getOption(o).filter(function(e){return 0!==e.trim().length||e.indexOf(" ")>-1}).isSome()||e.contains(a,t.name(r))}}}),r("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(t,r){var o=function(t){for(var a=n.children(t),i=a.length-1;i>=0;i--){var u=a[i];if(r(u))return e.some(u);var s=o(u);if(s.isSome())return s}return e.none()};return o(t)};return{first:function(e){return t.descendant(e,r.isCursorPosition)},last:function(e){return o(e,r.isCursorPosition)}}}),r("ephox.snooker.api.TableFill",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,a,i,u,s,c,l,p){var f=function(){var e=a.fromTag("td");return r.append(e,a.fromTag("br")),e},d=function(e,n,r){var a=o.copy(e,n);return t.each(r,function(e,t){null===e?u.remove(a,t):u.set(a,t,e)}),a},m=function(e){return e},h=function(e){return function(){return a.fromTag("tr",e.dom())}};return{cellOperations:function(t,u,m){return{row:h(u),cell:function(u){var f,d,h,g=l.owner(u.element()),x=a.fromTag(i.name(u.element()),g.dom()),v=m.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),b=v.length>0?(f=u.element(),d=x,h=v,p.first(f).map(function(t){var a=h.join(","),i=c.ancestors(t,a,function(e){return n.eq(e,f)});return e.foldr(i,function(e,t){var n=o.shallow(t);return r.append(e,n),n},d)}).getOr(d)):x;return r.append(b,a.fromTag("br")),s.copy(u.element(),x),s.remove(x,"height"),1!==u.colspan()&&s.remove(u.element(),"width"),t(u.element(),x),x},replace:d,gap:f}},paste:function(e){return{row:h(e),cell:f,replace:m,gap:f}}}}),r("ephox.sugar.api.node.Elements",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r){return{fromHtml:function(e,o){var a=(o||r).createElement("div");return a.innerHTML=e,n.children(t.fromDom(a))},fromTags:function(n,r){return e.map(n,function(e){return t.fromTag(e,r)})},fromText:function(n,r){return e.map(n,function(e){return t.fromText(e,r)})},fromDom:function(n){return e.map(n,t.fromDom)}}}),r("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]}),r("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.Compare","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m,h,g){return function(){return{up:n.constant({selector:m.ancestor,closest:m.closest,predicate:p.ancestor,all:g.parents}),down:n.constant({selector:d.descendants,predicate:l.descendants}),styles:n.constant({get:a.get,getRaw:a.getRaw,set:a.set,remove:a.remove}),attrs:n.constant({get:r.get,set:r.set,remove:r.remove,copyTo:function(e,t){var n=r.clone(e);r.setAll(t,n)}}),insert:n.constant({before:u.before,after:u.after,afterAll:s.after,append:u.append,appendAll:s.append,prepend:u.prepend,wrap:u.wrap}),remove:n.constant({unwrap:f.unwrap,remove:f.remove}),create:n.constant({nu:i.fromTag,clone:function(e){return i.fromDom(e.dom().cloneNode(!1))},text:i.fromText}),query:n.constant({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:g.prevSibling,nextSibling:g.nextSibling}),property:n.constant({children:g.children,name:c.name,parent:g.parent,isText:c.isText,isComment:c.isComment,isElement:c.isElement,getText:h.get,setText:h.set,isBoundary:function(n){return!!c.isElement(n)&&("body"===c.name(n)||t.contains(e,c.name(n)))},isEmptyTag:function(e){return!!c.isElement(e)&&t.contains(["br","img","hr","input"],c.name(e))}}),eq:o.eq,is:o.is}}}),r("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n,r){var o=r.immutable("left","right"),a=function(n,r,o){var a=n.property().children(r);return e.findIndex(a,t.curry(n.eq,o)).map(function(e){return{before:t.constant(a.slice(0,e)),after:t.constant(a.slice(e+1))}})};return{breakToLeft:function(e,t,n){return a(e,t,n).map(function(r){var a=e.create().clone(t);return e.insert().appendAll(a,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,a),o(a,t)})},breakToRight:function(e,t,n){return a(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),o(t,r)})},breakPath:function(e,t,o,a){var i=r.immutable("first","second","splits"),u=function(t,r,s){var c=i(t,n.none(),s);return o(t)?i(t,r,s):e.property().parent(t).bind(function(r){return a(e,r,t).map(function(e){var t=[{first:e.left,second:e.right}],a=o(r)?r:e.left();return u(a,n.some(e.right()),s.concat(t))}).getOr(c)})};return u(t,n.none(),[])}}}),r("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t,n){var r=function(t,n,r,a){var i=n(t,r);return e.foldr(a,function(e,r){var a=n(t,r);return o(t,e,a)},i)},o=function(e,n,r){return n.bind(function(n){return r.filter(t.curry(e.eq,n))})};return{oneAll:function(e,t,o){return o.length>0?r(e,t,(a=o)[0],a.slice(1)):n.none();var a}}}),r("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(e,t,n,r){var o=function(e,n){return t.curry(e.eq,n)},a=function(n,r,a,i){var u=void 0!==i?i:t.constant(!1),s=[r].concat(n.up().all(r)),c=[a].concat(n.up().all(a)),l=function(t){return e.findIndex(t,u).fold(function(){return t},function(e){return t.slice(0,e+1)})},p=l(s),f=l(c),d=e.find(p,function(t){return e.exists(f,o(n,t))});return{firstpath:t.constant(p),secondpath:t.constant(f),shared:t.constant(d)}};return{subset:function(t,i,u){var s=a(t,i,u);return s.shared().bind(function(a){return function(t,a,i,u){var s=t.property().children(a);if(t.eq(a,i[0]))return n.some([i[0]]);if(t.eq(a,u[0]))return n.some([u[0]]);var c=function(n){var r=e.reverse(n),i=e.findIndex(r,o(t,a)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return e.findIndex(s,o(t,u))},l=c(i),p=c(u);return l.bind(function(e){return p.map(function(t){var n=r.min(e,t),o=r.max(e,t);return s.slice(n,o+1)})})}(t,a,s.firstpath(),s.secondpath())})},ancestors:a}}),r("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(e,t,n){return{sharedOne:function(e,n,r){return t.oneAll(e,n,r)},subset:function(e,t,r){return n.subset(e,t,r)},ancestors:function(e,t,r,o){return n.ancestors(e,t,r,o)},breakToLeft:function(t,n,r){return e.breakToLeft(t,n,r)},breakToRight:function(t,n,r){return e.breakToRight(t,n,r)},breakPath:function(t,n,r,o){return e.breakPath(t,n,r,o)}}}),r("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(e,t){var n=e();return{sharedOne:function(e,r){return t.sharedOne(n,function(t,n){return e(n)},r)},subset:function(e,r){return t.subset(n,e,r)},ancestors:function(e,r,o){return t.ancestors(n,e,r,o)},breakToLeft:function(e,r){return t.breakToLeft(n,e,r)},breakToRight:function(e,r){return t.breakToRight(n,e,r)},breakPath:function(e,r,o){return t.breakPath(n,e,r,function(e,t,n){return o(t,n)})}}}),r("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(e,t,n){var r=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};return{inSelection:function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),a=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&a>=e.startRow()},isWithin:r,isRectangular:function(o,a){for(var i=!0,u=e.curry(r,a),s=a.startRow();s<=a.finishRow();s++)for(var c=a.startCol();c<=a.finishCol();c++)i=i&&n.getAt(o,s,c).exists(u);return i?t.some(a):t.none()}}}),r("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(e,t,n,r,o){var a=function(n,a,i){var u=t.findItem(n,a,r.eq),s=t.findItem(n,i,r.eq);return u.bind(function(t){return s.map(function(n){return r=t,a=n,e.bounds(o.min(r.row(),a.row()),o.min(r.column(),a.column()),o.max(r.row()+r.rowspan()-1,a.row()+a.rowspan()-1),o.max(r.column()+r.colspan()-1,a.column()+a.colspan()-1));var r,a})})};return{getAnyBox:a,getBox:function(e,t,r){return a(e,t,r).bind(function(t){return n.isRectangular(e,t)})}}}),r("ephox.snooker.selection.CellFinder",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,a){return{moveBy:function(e,t,r,o){return n.findItem(e,t,a.eq).bind(function(t){var a=r>0?t.row()+t.rowspan()-1:t.row(),i=o>0?t.column()+t.colspan()-1:t.column();return n.getAt(e,a+r,i+o).map(function(e){return e.element()})})},intercepts:function(a,i,u){return o.getAnyBox(a,i,u).map(function(o){var i=n.filterItems(a,t.curry(r.inSelection,o));return e.map(i,function(e){return e.element()})})},parentCell:function(e,t){return n.findItem(e,t,function(e,t){return a.contains(t,e)}).bind(function(e){return e.element()})}}}),r("ephox.snooker.api.TablePositions",["ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellFinder","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,a){var i=function(e){var r=t.fromTable(e);return n.generate(r)};return{moveBy:function(t,n,o){return e.table(t).bind(function(e){var a=i(e);return r.moveBy(a,t,n,o)})},intercepts:function(e,t,n){var o=i(e);return r.intercepts(o,t,n)},nestedIntercepts:function(e,t,n,o,u){var s=i(e),c=a.eq(e,n)?t:r.parentCell(s,t),l=a.eq(e,u)?o:r.parentCell(s,o);return r.intercepts(s,c,l)},getBox:function(e,t,n){var r=i(e);return o.getBox(r,t,n)}}}),r("ephox.darwin.selection.CellSelection",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.robin.api.dom.DomParent","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,a,i,u,s){var c=function(e,t){return u.ancestor(e,"table")},l=function(e,t,i){return a.eq(e,t)?n.some([e]):c(e).bind(function(n){return c(t).bind(function(s){return a.eq(n,s)?o.intercepts(n,e,t):a.contains(n,s)?o.nestedIntercepts(n,e,n,t,s):a.contains(s,n)?o.nestedIntercepts(s,e,n,t,s):r.ancestors(e,t).shared().bind(function(r){return u.closest(r,"table",i).bind(function(r){return o.nestedIntercepts(r,e,n,t,s)})})})})};return{identify:l,retrieve:function(e,t){var r=i.descendants(e,t);return r.length>0?n.some(r):n.none()},shiftSelection:function(n,r,a,i,c){return(p=n,f=c,e.find(p,function(e){return s.is(e,f)})).bind(function(e){return o.moveBy(e,r,a).bind(function(e){return n=e,r=i,u.ancestor(n,"table").bind(function(e){return u.descendant(e,r).bind(function(e){return l(e,n).map(function(r){return{boxes:t.constant(r),start:t.constant(e),finish:t.constant(n)}})})});var n,r})});var p,f},getEdges:function(e,n,o){return u.descendant(e,n).bind(function(n){return u.descendant(e,o).bind(function(e){return r.sharedOne(c,[n,e]).map(function(r){return{first:t.constant(n),last:t.constant(e),table:t.constant(r)}})})})}}}),r("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o){return{retrieve:function(t,n){return e.retrieve(t,n)},retrieveBox:function(a,i,u){return e.getEdges(a,i,u).bind(function(e){var i=function(e){return r.eq(a,e)},u=o.ancestor(e.first(),"thead,tfoot,tbody,table",i),s=o.ancestor(e.last(),"thead,tfoot,tbody,table",i);return u.bind(function(o){return s.bind(function(a){return r.eq(o,a)?n.getBox(e.table(),e.first(),e.last()):t.none()})})})}}}),r("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(e){var t="data-mce-selected",n="data-mce-first-selected",r="data-mce-last-selected";return{selected:e.constant(t),selectedSelector:e.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:e.constant("[data-mce-selected]"),firstSelected:e.constant(n),firstSelectedSelector:e.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:e.constant(r),lastSelectedSelector:e.constant("td[data-mce-last-selected],th[data-mce-last-selected]")}}),r("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,a){return{generate:function(i){if(!n.isArray(i))throw new o("cases must be an array");if(0===i.length)throw new o("there must be at least one case");var u=[],s={};return e.each(i,function(c,l){var p=t.keys(c);if(1!==p.length)throw new o("one and only one name per case");var f=p[0],d=c[f];if(void 0!==s[f])throw new o("duplicate key detected:"+f);if("cata"===f)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(d))throw new o("case arguments must be an array");u.push(f),s[f]=function(){var n=arguments.length;if(n!==d.length)throw new o("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+n);for(var s=new r(n),c=0;c<s.length;c++)s[c]=arguments[c];return{fold:function(){if(arguments.length!==i.length)throw new o("Wrong number of arguments to fold. Expected "+i.length+", got "+arguments.length);return arguments[l].apply(null,s)},match:function(n){var r=t.keys(n);if(u.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+r.join(","));if(!e.forall(u,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+u.join(", "));return n[f].apply(null,s)},log:function(e){a.log(e,{constructors:u,constructor:f,params:s})}}}}),s}}}),r("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(e,t,n,r){return e.fold(t,n,r)},none:t.none,multiple:t.multiple,single:t.single}}),r("tinymce.plugins.table.queries.CellOperations",["ephox.darwin.api.TableSelection","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,a,i){var u=function(e,t){return i.cata(t.get(),n.constant([]),n.identity,n.constant([e]))};return{mergable:function(t,o){return i.cata(o.get(),r.none,function(o,i){return 0===o.length?r.none():e.retrieveBox(t,a.firstSelectedSelector(),a.lastSelectedSelector()).bind(function(e){return o.length>1?r.some({bounds:n.constant(e),cells:n.constant(o)}):r.none()})},r.none)},unmergable:function(e,n){var a=u(e,n);return a.length>0&&t.forall(a,function(e){return o.has(e,"rowspan")&&parseInt(o.get(e,"rowspan"),10)>1||o.has(e,"colspan")&&parseInt(o.get(e,"colspan"),10)>1})?r.some(a):r.none()},selection:u}}),r("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(e,t,n,r){var o=function(n){return{element:e.constant(n),mergable:t.none,unmergable:t.none,selection:e.constant([n])}},a=n.immutable("element","clipboard","generators");return{noMenu:o,forMenu:function(t,n,o){return{element:e.constant(o),mergable:e.constant(r.mergable(n,t)),unmergable:e.constant(r.unmergable(o,t)),selection:e.constant(r.selection(o,t))}},notCell:function(e){return o(e)},paste:a,pasteRows:function(n,o,a,i,u){return{element:e.constant(a),mergable:t.none,unmergable:t.none,selection:e.constant(r.selection(a,n)),clipboard:e.constant(i),generators:e.constant(u)}}}}),r("tinymce.plugins.table.actions.Clipboard",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopySelected","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.node.Node","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,a,i,u,s,c,l,p,f){return{registerEvents:function(d,m,h,g){d.on("BeforeGetContent",function(n){var o=function(t){n.preventDefault(),(o=t,a.table(o[0]).map(i.deep).map(function(e){return[r.extract(e,p.attributeSelector())]})).each(function(t){n.content=e.map(t,function(e){return t=e,d.selection.serializer.serialize(t.dom(),{});var t}).join("")});var o};!0===n.selection&&f.cata(m.get(),t.noop,o,t.noop)}),d.on("BeforeSetContent",function(t){!0===t.selection&&!0===t.paste&&n.from(d.dom.getParent(d.selection.getStart(),"th,td")).each(function(n){var r=u.fromDom(n);a.table(r).bind(function(n){var a=e.filter(s.fromHtml(t.content),function(e){return"meta"!==c.name(e)});if(1===a.length&&"table"===c.name(a[0])){t.preventDefault();var i=u.fromDom(d.getDoc()),p=o.paste(i),f=l.paste(r,a[0],p);h.pasteCells(n,f).each(function(e){d.selection.setRng(e),d.focus(),g.clear(n)})}})})})}}}),r("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll"],function(e,t,n,r,o){return{render:function(a,i,u,s){var c=n.fromTag("table");t.setAll(c,{"border-collapse":"collapse",width:"100%"}),e.set(c,"border","1");var l=n.fromTag("tbody");r.append(c,l);for(var p=[],f=0;f<a;f++){for(var d=n.fromTag("tr"),m=0;m<i;m++){var h=f<u||m<s?n.fromTag("th"):n.fromTag("td");m<s&&e.set(h,"scope","row"),f<u&&e.set(h,"scope","col"),r.append(h,n.fromTag("br")),t.set(h,"width",100/i+"%"),r.append(d,h)}p.push(d)}return o.append(l,p),c}}}),r("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(e){return{render:e.render}}),r("ephox.sugar.api.properties.Html",["ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a){var i=function(e){return e.dom().innerHTML};return{get:i,set:function(i,u){var s=a.owner(i).dom(),c=e.fromDom(s.createDocumentFragment()),l=t.fromHtml(u,s);r.append(c,l),o.empty(i),n.append(i,c)},getOuter:function(t){var r=e.fromTag("div"),o=e.fromDom(t.dom().cloneNode(!0));return n.append(r,o),i(r)}}}),r("tinymce.plugins.table.actions.InsertTable",["ephox.katamari.api.Fun","ephox.snooker.api.TableRender","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Html","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o,a){var i=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)};return{insert:function(u,s,c){var l,p=t.render(c,s,0,0);r.set(p,"id","__mce");var f=o.getOuter(p);u.insertContent(f),l=u.dom.get("__mce"),u.dom.setAttrib(l,"id",null),u.$("tr",l).each(function(e,t){u.fire("newrow",{node:t}),u.$("th,td",t).each(function(e,t){u.fire("newcell",{node:t})})}),u.dom.setAttribs(l,u.settings.table_default_attributes||{}),u.dom.setStyles(l,u.settings.table_default_styles||{}),d=u,m=n.fromDom(l),a.descendant(m,"td,th").each(e.curry(i,d));var d,m;return l}}}),r("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(e,t,n,r){return function(o,a){var i=function(e){var t=a(e);if(t<=0||null===t){var r=n.get(e,o);return parseFloat(r)||0}return t},u=function(e,r){return t.foldl(r,function(t,r){var o=n.get(e,r),a=void 0===o?0:parseInt(o,10);return isNaN(a)?t:t+a},0)};return{set:function(t,n){if(!e.isNumber(n)&&!n.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+n;var a=t.dom();r.isSupported(a)&&(a.style[o]=n+"px")},get:i,getOuter:i,aggregate:u,max:function(e,t,n){var r=u(e,n);return t>r?t-r:0}}}}),r("ephox.sugar.api.view.Height",["ephox.sugar.api.node.Body","ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t,n){var r=n("height",function(t){return e.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight});return{set:function(e,t){r.set(e,t)},get:function(e){return r.get(e)},getOuter:function(e){return r.getOuter(e)},setMax:function(e,n){var o=r.max(e,n,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);t.set(e,"max-height",o+"px")}}}),r("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t){var n=t("width",function(e){return e.dom().offsetWidth});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=n.max(t,r,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);e.set(t,"max-width",o+"px")}}}),r("ephox.snooker.resize.RuntimeSize",["ephox.sand.api.PlatformDetection","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width"],function(e,t,n,r){var o=e.detect(),a=function(e,n,r){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(t.get(e,n),r)};return{getWidth:function(e){return a(e,"width",r.get(e))},getHeight:function(e){return o.browser.isIE()||o.browser.isEdge()?function(e){var n=a(e,"padding-top",0),r=a(e,"padding-bottom",0),o=a(e,"border-top-width",0),i=a(e,"border-bottom-width",0),u=e.dom().getBoundingClientRect().height;return"border-box"===t.get(e,"box-sizing")?u:u-n-r-(o+i)}(e):a(e,"height",n.get(e))}}}),r("ephox.snooker.resize.Sizes",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.snooker.api.TableLookup","ephox.snooker.resize.RuntimeSize","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width","global!Math","global!parseInt"],function(e,t,n,r,o,a,i,u,s,c,l,p){var f=/(\d+(\.\d+)?)(\w|%)*/,d=/(\d+(\.\d+)?)%/,m=/(\d+(\.\d+)?)px|em/,h=function(e,t){u.set(e,"height",t+"px")},g=function(e,t,o,i){var u=p(e,10);return n.endsWith(e,"%")&&"table"!==a.name(t)?function(e,t,n,o){var a=r.table(e).map(function(e){var r=n(e);return l.floor(t/100*r)}).getOr(t);return o(e,a),a}(t,u,o,i):u},x=function(e){var t,n=(t=e,u.getRaw(t,"height").getOrThunk(function(){return o.getHeight(t)+"px"}));return n?g(n,e,s.get,h):s.get(e)},v=function(e,t){return i.has(e,t)?p(i.get(e,t),10):1},b=function(e){return u.getRaw(e,"width").fold(function(){return t.from(i.get(e,"width"))},function(e){return t.some(e)})},w=function(e,t){return e/t.pixelWidth()*100};return{percentageBasedSizeRegex:e.constant(d),pixelBasedSizeRegex:e.constant(m),setPixelWidth:function(e,t){u.set(e,"width",t+"px")},setPercentageWidth:function(e,t){u.set(e,"width",t+"%")},setHeight:h,getPixelWidth:function(e,t){return b(e).fold(function(){var t=c.get(e);return p(t,10)},function(n){return function(e,t,n){if(m.test(t)){var r=m.exec(t);return p(r[1],10)}if(d.test(t)){var o=d.exec(t),a=parseFloat(o[1],10);return a/100*n.pixelWidth()}var i=c.get(e);return p(i,10)}(e,n,t)})},getPercentageWidth:function(e,t){return b(e).fold(function(){var n=c.get(e),r=p(n,10);return w(r,t)},function(n){return function(e,t,n){if(d.test(t)){var r=d.exec(t);return parseFloat(r[1],10)}var o=c.get(e),a=p(o,10);return w(a,n)}(e,n,t)})},getGenericWidth:function(n){return b(n).bind(function(n){if(f.test(n)){var r=f.exec(n);return t.some({width:e.constant(r[1]),unit:e.constant(r[3])})}return t.none()})},setGenericWidth:function(e,t,n){u.set(e,"width",t+n)},getHeight:function(e){return n="rowspan",x(t=e)/v(t,n);var t,n},getRawWidth:b}}),r("ephox.snooker.api.CellMutations",["ephox.snooker.resize.Sizes"],function(e){return{halve:function(t,n){e.getGenericWidth(t).each(function(r){var o=r.width()/2;e.setGenericWidth(t,o,r.unit()),e.setGenericWidth(n,o,r.unit())})}}}),r("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(e){var t=function(n,r){return{left:e.constant(n),top:e.constant(r),translate:function(e,o){return t(n+e,r+o)}}};return t}),r("ephox.sugar.api.dom.Dom",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!document"],function(e,t,n,r,o,a){return{attached:function(r,i){var u=i||n.fromDom(a.documentElement);return o.ancestor(r,e.curry(t.eq,u)).isSome()},windowOf:function(e){var t=e.dom();return t===t.window?e:r.isDocument(e)?t.defaultView||t.parentWindow:null}}}),r("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(e,t,n){var r=function(e,t){return void 0!==e?e:void 0!==t?t:0},o=function(r){var o=r.dom(),a=o.ownerDocument,i=a.body,u=n.fromDom(a.documentElement);return i===o?e(i.offsetLeft,i.offsetTop):t.attached(r,u)?function(t){var n=t.getBoundingClientRect();return e(n.left,n.top)}(o):e(0,0)};return{absolute:function(e){var a=e.dom().ownerDocument,i=a.body,u=t.windowOf(n.fromDom(a)),s=a.documentElement,c=r(u.pageYOffset,s.scrollTop),l=r(u.pageXOffset,s.scrollLeft),p=r(s.clientTop,i.clientTop),f=r(s.clientLeft,i.clientLeft);return o(e).translate(l-f,c-p)},relative:function(t){var n=t.dom();return e(n.offsetLeft,n.offsetTop)},viewport:o}}),r("ephox.snooker.resize.BarPositions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Struct","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,a){var i=n.immutable("row","y"),u=n.immutable("col","x"),s=function(e){return o.absolute(e).left()+a.getOuter(e)},c=function(e){return o.absolute(e).left()},l=function(e,t){return u(e,c(t))},p=function(e,t){return u(e,s(t))},f=function(e){return o.absolute(e).top()},d=function(t,n,r){if(0===r.length)return[];var o=e.map(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),a=r[r.length-1].map(function(e){return n(r.length-1,e)});return o.concat([a])},m={delta:t.identity,positions:t.curry(d,function(e,t){return i(e,f(t))},function(e,t){return i(e,f(t)+r.getOuter(t))}),edge:f},h={delta:t.identity,edge:c,positions:t.curry(d,l,p)};return{height:m,rtl:{delta:function(e,t){return-e},edge:s,positions:t.curry(d,p,l)},ltr:h}}),r("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(e){return{ltr:e.ltr,rtl:e.rtl}}),r("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(e){return function(t){var n=function(n){return t(n).isRtl()?e.rtl:e.ltr};return{delta:function(e,t){return n(t).delta(e,t)},edge:function(e){return n(e).edge(e)},positions:function(e,t){return n(t).positions(e,t)}}}}),r("ephox.snooker.api.TableGridSize",["ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse"],function(e,t){return{getGridSize:function(n){var r=e.fromTable(n);return t.generate(r).grid()}}}),r("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),r("ephox.katamari.api.Contracts",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Type","ephox.katamari.util.BagUtils","global!Error"],function(e,t,n,r,o,a){var i=function(e,t){return u(e,t,{validate:r.isFunction,label:"function"})},u=function(t,r,i){if(0===r.length)throw new a("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(a){var u=n.keys(a);e.forall(r,function(t){return e.contains(u,t)})||o.reqMessage(r,u),t(r,u);var s=e.filter(r,function(e){return!i.validate(a[e],e)});return s.length>0&&o.invalidTypeMessage(s,i.label),a}},s=t.noop;return{exactly:t.curry(i,function(t,n){var r=e.filter(n,function(n){return!e.contains(t,n)});r.length>0&&o.unsuppMessage(r)}),ensure:t.curry(i,s),ensureWith:t.curry(u,s)}}),r("ephox.snooker.api.Generators",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Cell","ephox.katamari.api.Contracts","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r,o,a,i,u){var s=function(e){var n=a.has(e,"colspan")?u(a.get(e,"colspan"),10):1,r=a.has(e,"rowspan")?u(a.get(e,"rowspan"),10):1;return{element:t.constant(e),colspan:t.constant(n),rowspan:t.constant(r)}},c=o.exactly(["cell","row","replace","gap"]);return{modification:function(e,t){c(e);var o=r(n.none()),a=void 0!==t?t:s,i=function(t){var n=a(t);return r=n,e.cell(r);var r},u=function(e){var t=i(e);return o.get().isNone()&&o.set(n.some(t)),l=n.some({item:e,replacement:t}),t},l=n.none();return{getOrInit:function(e,t){return l.fold(function(){return u(e)},function(n){return t(e,n.item)?n.replacement:u(e)})},cursor:o.get}},transform:function(t,o){return function(a){var i=r(n.none());c(a);var u=[],s=function(e){var r=a.replace(e,o,{scope:t});return u.push({item:e,sub:r}),i.get().isNone()&&i.set(n.some(r)),r};return{replaceOrInit:function(t,n){return(r=t,o=n,e.find(u,function(e){return o(e.item,r)})).fold(function(){return s(t)},function(e){return n(t,e.item)?e.sub:s(t)});var r,o},cursor:i.get}}},merging:function(e){c(e);var o=r(n.none());return{combine:function(r){return o.get().isNone()&&o.set(n.some(r)),function(){var n=e.cell({element:t.constant(r),colspan:t.constant(1),rowspan:t.constant(1)});return i.remove(n,"width"),i.remove(r,"width"),n}},cursor:o.get}}}}),r("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(e){var t=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n=function(n,r){var o=n.property().name(r);return e.contains(t,o)},r=function(t,n){return e.contains(["br","img","hr","input"],t.property().name(n))};return{isBlock:n,isList:function(t,n){var r=t.property().name(n);return e.contains(["ol","ul"],r)},isFormatting:function(t,n){var r=t.property().name(n);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)},isHeading:function(t,n){var r=t.property().name(n);return e.contains(["h1","h2","h3","h4","h5","h6"],r)},isContainer:function(t,n){return e.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(n))},isEmptyTag:r,isFrame:function(e,t){return"iframe"===e.property().name(t)},isInline:function(e,t){return!(n(e,t)||r(e,t))&&"li"!==e.property().name(t)}}}),r("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(e,t){var n=e();return{isBlock:function(e){return t.isBlock(n,e)},isList:function(e){return t.isList(n,e)},isFormatting:function(e){return t.isFormatting(n,e)},isHeading:function(e){return t.isHeading(n,e)},isContainer:function(e){return t.isContainer(n,e)},isEmptyTag:function(e){return t.isEmptyTag(n,e)},isFrame:function(e){return t.isFrame(n,e)},isInline:function(e){return t.isInline(n,e)}}}),r("ephox.snooker.api.TableContent",["ephox.katamari.api.Arr","ephox.robin.api.dom.DomStructure","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,a,i,u,s,c,l){return{merge:function(p){var f=function(e){return"br"===i.name(e)},d=function(e){return l.last(e).bind(function(r){var o,u=(o=r,c.nextSibling(o).map(function(e){return!!t.isBlock(e)||(t.isEmptyTag(e)?"img"!==i.name(e):void 0)}).getOr(!1));return c.parent(r).map(function(o){return!0===u||(c=o,"li"===i.name(c)||s.ancestor(c,t.isList).isSome())||f(r)||t.isBlock(o)&&!n.eq(e,o)?[]:[a.fromTag("br")];var c})}).getOr([])},m=function(){var t=e.bind(p,function(t){var n=c.children(t);return r=n,e.forall(r,function(e){return f(e)||i.isText(e)&&0===u.get(e).trim().length})?[]:n.concat(d(t));var r});return 0===t.length?[a.fromTag("br")]:t}();o.empty(p[0]),r.append(p[0],m)}}}),r("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(e,t){var n=function(e,n){return t.rowcells(n,e.section())},r=function(e,t){return e.cells()[t]};return{addCell:function(e,t,r){var o=e.cells(),a=o.slice(0,t),i=o.slice(t),u=a.concat([r]).concat(i);return n(e,u)},setCells:n,mutateCell:function(e,t,n){e.cells()[t]=n},getCell:r,getCellElement:function(e,t){return r(e,t).element()},mapCells:function(n,r){var o=n.cells(),a=e.map(o,r);return t.rowcells(a,n.section())},cellLength:function(e){return e.cells().length}}}),r("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var a={},i=0;i<r.length;i++){var u=r[i];for(var s in u)u.hasOwnProperty(s)&&(a[s]=e(a[s],u[s]))}return a}},o=r(function(t,n){return e.isObject(t)&&e.isObject(n)?o(t,n):n}),a=r(function(e,t){return t});return{deepMerge:o,merge:a}}),r("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var a=t[o];if(!a.isSome())return e.none();r.push(a.getOrDie())}return e.some(n.apply(null,r))}}}),r("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(t,n){if(0===t.length)return 0;var r=t[0];return e.findIndex(t,function(e){return!n(r.element(),e.element())}).fold(function(){return t.length},function(e){return e})};return{subgrid:function(o,a,i,u){var s,c,l,p,f=(s=o,c=a,s[c]).cells().slice(i),d=r(f,u),m=(l=o,p=i,e.map(l,function(e){return n.getCell(e,p)})).slice(a),h=r(m,u);return{colspan:t.constant(d),rowspan:t.constant(h)}}}}),r("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(e,t,n,r){return{toDetails:function(r,o){var a=e.map(r,function(t,n){return e.map(t.cells(),function(e,t){return!1})});return e.map(r,function(i,u){var s=e.bind(i.cells(),function(e,i){if(!1===a[u][i]){var s=n.subgrid(r,u,i,o);return function(e,t,n,r){for(var o=e;o<e+n;o++)for(var i=t;i<t+r;i++)a[o][i]=!0}(u,i,s.rowspan(),s.colspan()),[t.detailnew(e.element(),s.rowspan(),s.colspan(),e.isNew())]}return[]});return t.rowdetails(s,i.section())})},toGrid:function(e,n,o){for(var a=[],i=0;i<e.grid().rows();i++){for(var u=[],s=0;s<e.grid().columns();s++){var c=r.getAt(e,i,s).map(function(e){return t.elementnew(e.element(),o)}).getOrThunk(function(){return t.elementnew(n.gap(),!0)});u.push(c)}var l=t.rowcells(u,e.all()[i].section());a.push(l)}return a}}}),r("ephox.snooker.operate.Redraw",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a,i,u,s,c){var l=function(e,t,r,o){r===o?n.remove(e,t):n.set(e,t,r)};return{render:function(n,u){var p=[],f=[],d=function(t,u){t.length>0?function(t,u){var d=s.child(n,u).getOrThunk(function(){var e=r.fromTag(u,c.owner(n).dom());return o.append(n,e),e});i.empty(d);var m=e.map(t,function(t){t.isNew()&&p.push(t.element());var n=t.element();return i.empty(n),e.each(t.cells(),function(e){e.isNew()&&f.push(e.element()),l(e.element(),"colspan",e.colspan(),1),l(e.element(),"rowspan",e.rowspan(),1),o.append(n,e.element())}),n});a.append(d,m)}(t,u):(d=u,s.child(n,d).bind(i.remove));var d},m=[],h=[],g=[];return e.each(u,function(e){switch(e.section()){case"thead":m.push(e);break;case"tbody":h.push(e);break;case"tfoot":g.push(e)}}),d(m,"thead"),d(h,"tbody"),d(g,"tfoot"),{newRows:t.constant(p),newCells:t.constant(f)}},copy:function(t){return e.map(t,function(t){var n=u.shallow(t.element());return e.each(t.cells(),function(e){var t=u.deep(e.element());l(t,"colspan",e.colspan(),1),l(t,"rowspan",e.rowspan(),1),o.append(n,t)}),n})}}}),r("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(e,t,n,r){return{repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(t,n){var r=[];return e.each(t,function(e,o){o<t.length-1&&!n(e,t[o+1])?r.push(e):o===t.length-1&&r.push(e)}),r},deduce:function(o,a){if(a<0||a>=o.length-1)return t.none();var i=o[a].fold(function(){var t=e.reverse(o.slice(0,a));return n.findMap(t,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:0})}),u=o[a+1].fold(function(){var e=o.slice(a+1);return n.findMap(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:1})});return i.bind(function(e){return u.map(function(t){var n=t.delta+e.delta;return r.abs(t.value-e.value)/n})})}}}),r("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(e,t,n,r,o){var a=function(t,r,o){var a=t();return e.find(a,r).orThunk(function(){return n.from(a[0]).orThunk(o)}).map(function(e){return e.element()})};return{columns:function(n){var i=n.grid(),u=o.range(0,i.columns()),s=o.range(0,i.rows());return e.map(u,function(o){return a(function(){return e.bind(s,function(e){return r.getAt(n,e,o).filter(function(e){return e.column()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return r.getAt(n,0,o)})})},rows:function(n){var i=n.grid(),u=o.range(0,i.rows()),s=o.range(0,i.columns());return e.map(u,function(o){return a(function(){return e.bind(s,function(e){return r.getAt(n,o,e).filter(function(e){return e.row()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return r.getAt(n,o,0)})})}}}),r("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(e,t,n){return{col:function(r,o,a,i,u){var s=n.fromTag("div");return t.setAll(s,{position:"absolute",left:o-i/2+"px",top:a+"px",height:u+"px",width:i+"px"}),e.set(s,"data-column",r),s},row:function(r,o,a,i,u){var s=n.fromTag("div");return t.setAll(s,{position:"absolute",left:o+"px",top:a-u/2+"px",height:u+"px",width:i+"px"}),e.set(s,"data-row",r),s}}}),r("ephox.katamari.api.Namespace",[],function(){return{css:function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}}}),r("ephox.snooker.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-snooker").resolve}}),r("ephox.sugar.api.properties.Toggler",[],function(){return function(e,t,n){var r=n||!1,o=function(){t(),r=!0},a=function(){e(),r=!1};return{on:o,off:a,toggle:function(){(r?a:o)()},isOn:function(){return r}}}}),r("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(e,t){var n=function(e,n){var r=t.get(e,n);return void 0===r||""===r?[]:r.split(" ")};return{read:n,add:function(e,r,o){var a=n(e,r).concat([o]);t.set(e,r,a.join(" "))},remove:function(r,o,a){var i=e.filter(n(r,o),function(e){return e!==a});i.length>0?t.set(r,o,i.join(" ")):t.remove(r,o)}}}),r("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(e,t){var n=function(e){return t.read(e,"class")},r=function(e,n){return t.add(e,"class",n)},o=function(e,n){return t.remove(e,"class",n)};return{get:n,add:r,remove:o,toggle:function(t,a){e.contains(n(t),a)?o(t,a):r(t,a)},supports:function(e){return void 0!==e.dom().classList}}}),r("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(e,t,n){var r=function(e,t){return n.supports(e)&&e.dom().classList.contains(t)};return{add:function(e,t){n.supports(e)?e.dom().classList.add(t):n.add(e,t)},remove:function(e,r){n.supports(e)?e.dom().classList.remove(r):n.remove(e,r);o=e,0===(n.supports(o)?o.dom().classList:n.get(o)).length&&t.remove(o,"class");var o},toggle:function(e,t){return n.supports(e)?e.dom().classList.toggle(t):n.toggle(e,t)},toggler:function(t,o){var a=n.supports(t),i=t.dom().classList;return e(function(){a?i.remove(o):n.remove(t,o)},function(){a?i.add(o):n.add(t,o)},r(t,o))},has:r}}),r("ephox.snooker.resize.Bars",["ephox.katamari.api.Arr","ephox.snooker.lookup.Blocks","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.Bar","ephox.snooker.style.Styles","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d){var m=a.resolve("resizer-bar"),h=a.resolve("resizer-rows"),g=a.resolve("resizer-cols"),x=function(t){var n=l.descendants(t.parent(),"."+m);e.each(n,u.remove)},v=function(t,n,r){var o=t.origin();e.each(n,function(e,n){e.each(function(e){var n=r(o,e);s.add(n,m),i.append(t.parent(),n)})})},b=function(e,t,n,r,a,i){var u=f.absolute(t),c=n.length>0?a.positions(n,t):[];l=e,m=c,x=u,b=d.getOuter(t),v(l,m,function(e,t){var n=o.row(t.row(),x.left()-e.left(),t.y()-e.top(),b,7);return s.add(n,h),n});var l,m,x,b,w=r.length>0?i.positions(r,t):[];y=e,k=w,S=u,C=p.getOuter(t),v(y,k,function(e,t){var n=o.col(t.col(),t.x()-e.left(),S.top()-e.top(),7,C);return s.add(n,g),n});var y,k,S,C},w=function(t,n){var r=l.descendants(t.parent(),"."+m);e.each(r,n)};return{refresh:function(e,o,a,i){x(e);var u=n.fromTable(o),s=r.generate(u),c=t.rows(s),l=t.columns(s);b(e,o,c,l,a,i)},hide:function(e){w(e,function(e){c.set(e,"display","none")})},show:function(e){w(e,function(e){c.set(e,"display","block")})},destroy:x,isRowBar:function(e){return s.has(e,h)},isColBar:function(e){return s.has(e,g)}}}),r("ephox.snooker.model.RunOperation",["ephox.katamari.api.Arr","ephox.katamari.api.Merger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw","ephox.snooker.resize.BarPositions","ephox.snooker.resize.Bars","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m){var h=function(t,n){return e.map(t,function(e){var t,r=(t=e.details(),o.findMap(t,function(e){return m.parent(e.element()).map(function(e){var t=m.parent(e).isNone();return a.elementnew(e,t)})}).getOrThunk(function(){return a.elementnew(n.row(),!0)}));return a.rowdatanew(r.element(),e.details(),e.section(),r.isNew())})},g=function(e,t){var n=s.toDetails(e,d.eq);return h(n,t)},x=function(t,n){var r=e.flatten(e.map(t.all(),function(e){return e.cells()}));return e.find(r,function(e){return d.eq(n,e.element())})};return{run:function(e,t,o,a,i){return function(m,h,x,v,b){var w=u.fromTable(h),y=c.generate(w);return t(y,x).map(function(t){var r,o,a=(r=y,o=v,s.toGrid(r,o,!1)),u=e(a,t,d.eq,i(v)),c=g(u.grid(),v);return{grid:n.constant(c),cursor:u.cursor}}).fold(function(){return r.none()},function(e){var t=l.render(h,e.grid());return o(h,e.grid(),b),a(h),f.refresh(m,h,p.height,b),r.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},toDetailList:g,onCell:function(e,t){return i.cell(t.element()).bind(function(t){return x(e,t)})},onCells:function(t,n){var a=e.map(n.selection(),function(e){return i.cell(e).bind(function(e){return x(t,e)})}),u=o.cat(a);return u.length>0?r.some(u):r.none()},onPaste:function(e,n){return i.cell(n.element()).bind(function(r){return x(e,r).map(function(e){return t.merge(e,{generators:n.generators,clipboard:n.clipboard})})})},onPasteRows:function(n,a){var u=e.map(a.selection(),function(e){return i.cell(e).bind(function(e){return x(n,e)})}),s=o.cat(u);return s.length>0?r.some(t.merge({cells:s},{generators:a.generators,clipboard:a.clipboard})):r.none()},onMergable:function(e,t){return t.mergable()},onUnmergable:function(e,t){return t.unmergable()}}}),r("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){return{is:function(e){return r===e},isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:function(e){return n(r)},orThunk:function(e){return n(r)},fold:function(e,t){return t(r)},map:function(e){return n(e(r))},each:function(e){e(r)},bind:function(e){return e(r)},exists:function(e){return e(r)},forall:function(e){return e(r)},toOption:function(){return t.some(r)}}},r=function(n){return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:function(e){return e()},getOrDie:function(){return e.die(n)()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return r(n)},each:e.noop,bind:function(e){return r(n)},exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),r("ephox.snooker.model.Fitment",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Result","ephox.snooker.api.Structs","ephox.snooker.model.GridRow","ephox.snooker.util.Util","global!Array","global!Error","global!Math"],function(e,t,n,r,o,a,i,u,s){var c=function(t,n){return e.map(t,function(){return r.elementnew(n.cell(),!0)})},l=function(e,t,n){return e.concat(a.repeat(t,function(t){return o.setCells(e[e.length-1],c(e[e.length-1].cells(),n))}))},p=function(t,n,r){return e.map(t,function(e){return o.setCells(e,e.cells().concat(c(a.range(0,n),r)))})};return{measure:function(e,r,a){if(e.row()>=r.length||e.column()>o.cellLength(r[0]))return n.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var i=r.slice(e.row()),u=i[0].cells().slice(e.column()),s=o.cellLength(a[0]),c=a.length;return n.value({rowDelta:t.constant(i.length-c),colDelta:t.constant(u.length-s)})},measureWidth:function(e,n){var r=o.cellLength(e[0]),a=o.cellLength(n[0]);return{rowDelta:t.constant(0),colDelta:t.constant(r-a)}},tailor:function(e,n,r){var o=n.colDelta()<0?p:t.identity;return(n.rowDelta()<0?l:t.identity)(o(e,s.abs(n.colDelta()),r),s.abs(n.rowDelta()),r)}}}),r("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n,r){return{merge:function(e,t,o,a){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var u=t.startCol();u<=t.finishCol();u++)r.mutateCell(e[i],u,n.elementnew(a(),!1));return e},unmerge:function(e,t,o,a){for(var i=!0,u=0;u<e.length;u++)for(var s=0;s<r.cellLength(e[0]);s++){var c=o(r.getCellElement(e[u],s),t);!0===c&&!1===i?r.mutateCell(e[u],s,n.elementnew(a(),!0)):!0===c&&(i=!1)}return e},splitRows:function(o,a,i,u){if(a>0&&a<o.length){var s=o[a-1].cells(),c=(l=s,p=i,e.foldl(l,function(t,n){return e.exists(t,function(e){return p(e.element(),n.element())})?t:t.concat([n])},[]));e.each(c,function(e){for(var s=t.none(),c=a;c<o.length;c++)for(var l=0;l<r.cellLength(o[0]);l++){var p=o[c].cells()[l];i(p.element(),e.element())&&(s.isNone()&&(s=t.some(u())),s.each(function(e){r.mutateCell(o[c],l,n.elementnew(e,!0))}))}})}var l,p;return o}}}),r("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow","ephox.snooker.operate.MergingOperations"],function(e,t,n,r,o){var a=function(t,n,o,a){var i=r.getCell(t[n],o),u=e.curry(a,i.element()),s=t[n];return t.length>1&&r.cellLength(s)>1&&(o>0&&u(r.getCellElement(s,o-1))||o<s.length-1&&u(r.getCellElement(s,o+1))||n>0&&u(r.getCellElement(t[n-1],o))||n<t.length-1&&u(r.getCellElement(t[n+1],o)))};return{merge:function(e,i,u,s,c){return n.measure(e,i,u).map(function(l){var p=n.tailor(i,l,s);return function(e,n,i,u,s){for(var c=e.row(),l=e.column(),p=c+i.length,f=l+r.cellLength(i[0]),d=c;d<p;d++)for(var m=l;m<f;m++){a(n,d,m,s)&&o.unmerge(n,r.getCellElement(n[d],m),s,u.cell);var h=r.getCellElement(i[d-c],m-l),g=u.replace(h);r.mutateCell(n[d],m,t.elementnew(g,!0))}return n}(e,p,u,s,c)})},insert:function(e,t,r,a,i){o.splitRows(t,e,i,a.cell);var u=n.measureWidth(r,t),s=n.tailor(r,u,a),c=n.measureWidth(t,s),l=n.tailor(t,c,a);return l.slice(0,e).concat(s).concat(l.slice(e,l.length))}}}),r("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){return{insertRowAt:function(e,r,o,a,i){var u=e.slice(0,r),s=e.slice(r),c=n.mapCells(e[o],function(o,u){return r>0&&r<e.length&&a(n.getCellElement(e[r-1],u),n.getCellElement(e[r],u))?n.getCell(e[r],u):t.elementnew(i(o.element(),a),!0)});return u.concat([c]).concat(s)},insertColumnAt:function(r,o,a,i,u){return e.map(r,function(e){var r=o>0&&o<n.cellLength(e)&&i(n.getCellElement(e,o-1),n.getCellElement(e,o))?n.getCell(e,o):t.elementnew(u(n.getCellElement(e,a),i),!0);return n.addCell(e,o,r)})},splitCellIntoColumns:function(r,o,a,i,u){var s=a+1;return e.map(r,function(e,r){var c=r===o?t.elementnew(u(n.getCellElement(e,a),i),!0):n.getCell(e,a);return n.addCell(e,s,c)})},splitCellIntoRows:function(e,r,o,a,i){var u=r+1,s=e.slice(0,u),c=e.slice(u),l=n.mapCells(e[r],function(e,n){return n===o?t.elementnew(i(e.element(),a),!0):e});return s.concat([l]).concat(c)},deleteRowsAt:function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},deleteColumnsAt:function(n,r,o){var a=e.map(n,function(e){var n=e.cells().slice(0,r).concat(e.cells().slice(o+1));return t.rowcells(n,e.section())});return e.filter(a,function(e){return e.cells().length>0})}}}),r("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(r,o,a,i){return e.map(r,function(r){return n.mapCells(r,function(n){return r=n,e.exists(o,function(e){return a(r.element(),e.element())})?t.elementnew(i(n.element(),a),!0):n;var r})})},o=function(e,t,r,o){return void 0!==n.getCellElement(e[t],r)&&t>0&&o(n.getCellElement(e[t-1],r),n.getCellElement(e[t],r))},a=function(e,t,r){return t>0&&r(n.getCellElement(e,t-1),n.getCellElement(e,t))};return{replaceColumn:function(t,i,u,s){var c=e.bind(t,function(e,r){return o(t,r,i,u)||a(e,i,u)?[]:[n.getCell(e,i)]});return r(t,c,u,s)},replaceRow:function(t,n,i,u){var s=t[n],c=e.bind(s.cells(),function(e,r){return o(t,n,r,i)||a(s,r,i)?[]:[e]});return r(t,c,i,u)}}}),r("ephox.snooker.calc.ColumnContext",[],function(){var e=function(e){return{fold:e}};return{none:function(){return e(function(e,t,n,r,o){return e()})},only:function(t){return e(function(e,n,r,o,a){return n(t)})},left:function(t,n){return e(function(e,r,o,a,i){return o(t,n)})},middle:function(t,n,r){return e(function(e,o,a,i,u){return i(t,n,r)})},right:function(t,n){return e(function(e,r,o,a,i){return i(t,n)})}}}),r("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(e,t,n,r){return{determine:function(o,a,i,u){var s,c,l=o.slice(0),p=(s=o,c=a,0===s.length?n.none():1===s.length?n.only(0):0===c?n.left(0,1):c===s.length-1?n.right(c-1,c):c>0&&c<s.length-1?n.middle(c-1,c,c+1):n.none()),f=function(n){return e.map(n,t.constant(0))},d=t.constant(f(l)),m=function(e,t){if(i>=0){var n=r.max(u.minCellWidth(),l[t]-i);return f(l.slice(0,e)).concat([i,n-l[t]]).concat(f(l.slice(t+1)))}var o=r.max(u.minCellWidth(),l[e]+i),a=l[e]-o;return f(l.slice(0,e)).concat([o-l[e],a]).concat(f(l.slice(t+1)))},h=m;return p.fold(d,function(e){return u.singleColumnWidth(l[e],i)},h,function(e,t,n){return m(t,n)},function(e,t){if(i>=0)return f(l.slice(0,t)).concat([i]);var n=r.max(u.minCellWidth(),l[t]+i);return f(l.slice(0,t)).concat([n-l[t]])})}}}),r("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r){var o=function(e,n){return t.has(e,n)&&r(t.get(e,n),10)>1};return{hasColspan:function(e){return o(e,"colspan")},hasRowspan:function(e){return o(e,"rowspan")},minWidth:e.constant(10),minHeight:e.constant(10),getInt:function(e,t){return r(n.get(e,t),10)}}}),r("ephox.snooker.resize.ColumnSizes",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.lookup.Blocks","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.snooker.util.Util","ephox.sugar.api.properties.Css"],function(e,t,n,r,o,a,i){var u=function(e,t,n){return i.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},s=function(e){return u(e,"width",r.getPixelWidth)},c=function(e){return u(e,"height",r.getHeight)},l=function(r,i,u,s,c){var l=n.columns(r),p=e.map(l,function(e){return e.map(i.edge)});return e.map(l,function(e,n){return e.filter(t.not(o.hasColspan)).fold(function(){var e=a.deduce(p,n);return s(e)},function(e){return u(e,c)})})},p=function(e){return e.map(function(e){return e+"px"}).getOr("")},f=function(r,i,u,s){var c=n.rows(r),l=e.map(c,function(e){return e.map(i.edge)});return e.map(c,function(e,n){return e.filter(t.not(o.hasRowspan)).fold(function(){var e=a.deduce(l,n);return s(e)},function(e){return u(e)})})};return{getRawWidths:function(e,t){return l(e,t,s,p)},getPixelWidths:function(e,t,n){return l(e,t,r.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return l(e,t,r.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return f(e,t,r.getHeight,function(e){return e.getOrThunk(o.minHeight)})},getRawHeights:function(e,t){return f(e,t,c,p)}}}),r("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(e,t,n,r){var o=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r};return{recalculateWidth:function(r,a){var i=n.justCells(r);return e.map(i,function(e){var n=o(e.column(),e.column()+e.colspan(),a);return{element:e.element,width:t.constant(n),colspan:e.colspan}})},recalculateHeight:function(r,a){var i=n.justCells(r);return e.map(i,function(e){var n=o(e.row(),e.row()+e.rowspan(),a);return{element:e.element,height:t.constant(n),rowspan:e.rowspan}})},matchRowHeight:function(n,r){return e.map(n.all(),function(e,n){return{element:e.element,height:t.constant(r[n])}})}}}),r("ephox.snooker.resize.TableSize",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.sugar.api.view.Width","global!Math"],function(e,t,n,r,o,a,i){var u=function(a){var u=parseInt(a,10),s=t.identity;return{width:t.constant(u),pixelWidth:t.constant(u),getWidths:n.getPixelWidths,getCellDelta:s,singleColumnWidth:function(e,t){return[i.max(o.minWidth(),e+t)-e]},minCellWidth:o.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:function(t,n,o){var a=e.foldr(n,function(e,t){return e+t},0);r.setPixelWidth(t,a)}}},s=function(e,i){if(r.percentageBasedSizeRegex().test(i)){return function(e,i){var u=parseFloat(e,10),s=a.get(i);return{width:t.constant(u),pixelWidth:t.constant(s),getWidths:n.getPercentageWidths,getCellDelta:function(e){return e/s*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return o.minWidth()/s*100},setElementWidth:r.setPercentageWidth,setTableWidth:function(e,t,n){var o=u+n;r.setPercentageWidth(e,o)}}}(r.percentageBasedSizeRegex().exec(i)[1],e)}if(r.pixelBasedSizeRegex().test(i)){var s=r.pixelBasedSizeRegex().exec(i);return u(s[1])}var c=a.get(e);return u(c)};return{getTableSize:function(e){return r.getRawWidth(e).fold(function(){var t=a.get(e);return u(t)},function(t){return s(e,t)})}}}),r("ephox.snooker.resize.Adjustments",["ephox.katamari.api.Arr","ephox.snooker.calc.Deltas","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Recalculations","ephox.snooker.resize.Sizes","ephox.snooker.resize.TableSize","ephox.snooker.util.CellUtils","global!Math"],function(e,t,n,r,o,a,i,u,s,c){var l=function(e){return r.generate(e)},p=function(e){var t=n.fromTable(e);return l(t)};return{adjustWidth:function(n,r,o,i){var s=u.getTableSize(n),c=s.getCellDelta(r),l=p(n),f=s.getWidths(l,i,s),d=t.determine(f,o,c,s),m=e.map(d,function(e,t){return e+f[t]}),h=a.recalculateWidth(l,m);e.each(h,function(e){s.setElementWidth(e.element(),e.width())}),o===l.grid().columns()-1&&s.setTableWidth(n,m,c)},adjustHeight:function(t,n,r,u){var l=p(t),f=o.getPixelHeights(l,u),d=e.map(f,function(e,t){return r===t?c.max(n+e,s.minHeight()):e}),m=a.recalculateHeight(l,d),h=a.matchRowHeight(l,d);e.each(h,function(e){i.setHeight(e.element(),e.height())}),e.each(m,function(e){i.setHeight(e.element(),e.height())});var g,x=(g=d,e.foldr(g,function(e,t){return e+t},0));i.setHeight(t,x)},adjustWidthTo:function(t,n,r){var o=u.getTableSize(t),i=l(n),s=o.getWidths(i,r,o),c=a.recalculateWidth(i,s);e.each(c,function(e){o.setElementWidth(e.element(),e.width())});var p=e.foldr(s,function(e,t){return t+e},0);c.length>0&&o.setElementWidth(t,p)}}}),r("ephox.snooker.api.TableOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.Generators","ephox.snooker.api.Structs","ephox.snooker.api.TableContent","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.GridRow","ephox.snooker.model.RunOperation","ephox.snooker.model.TableMerge","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.MergingOperations","ephox.snooker.operate.ModificationOperations","ephox.snooker.operate.TransformOperations","ephox.snooker.resize.Adjustments","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x,v){var b=function(e){0===u.cells(e).length&&v.remove(e)},w=r.immutable("grid","cursor"),y=function(e,t,n){return k(e,t,n).orThunk(function(){return k(e,0,0)})},k=function(e,t,r){return n.from(e[t]).bind(function(e){return n.from(e.cells()[r]).bind(function(e){return n.from(e.element())})})},S=function(e,t,n){return w(e,k(e,t,n))},C=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.row()===n.row()})?t:t.concat([n])},[]).sort(function(e,t){return e.row()-t.row()})},T=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.column()===n.column()})?t:t.concat([n])},[]).sort(function(e,t){return e.column()-t.column()})},R=function(e,t,n){var r=s.fromPastedRows(e,n),o=d.generate(r);return f.toGrid(o,t,!0)},A=x.adjustWidthTo;return{insertRowBefore:l.run(function(e,t,n,r){var o=t.row(),a=t.row(),i=h.insertRowAt(e,a,o,n,r.getOrInit);return S(i,a,t.column())},l.onCell,t.noop,t.noop,o.modification),insertRowsBefore:l.run(function(t,n,r,o){var a=n[0].row(),i=n[0].row(),u=C(n),s=e.foldl(u,function(e,t){return h.insertRowAt(e,i,a,r,o.getOrInit)},t);return S(s,i,n[0].column())},l.onCells,t.noop,t.noop,o.modification),insertRowAfter:l.run(function(e,t,n,r){var o=t.row(),a=t.row()+t.rowspan(),i=h.insertRowAt(e,a,o,n,r.getOrInit);return S(i,a,t.column())},l.onCell,t.noop,t.noop,o.modification),insertRowsAfter:l.run(function(t,n,r,o){var a=C(n),i=a[a.length-1].row(),u=a[a.length-1].row()+a[a.length-1].rowspan(),s=e.foldl(a,function(e,t){return h.insertRowAt(e,u,i,r,o.getOrInit)},t);return S(s,u,n[0].column())},l.onCells,t.noop,t.noop,o.modification),insertColumnBefore:l.run(function(e,t,n,r){var o=t.column(),a=t.column(),i=h.insertColumnAt(e,a,o,n,r.getOrInit);return S(i,t.row(),a)},l.onCell,A,t.noop,o.modification),insertColumnsBefore:l.run(function(t,n,r,o){var a=T(n),i=a[0].column(),u=a[0].column(),s=e.foldl(a,function(e,t){return h.insertColumnAt(e,u,i,r,o.getOrInit)},t);return S(s,n[0].row(),u)},l.onCells,A,t.noop,o.modification),insertColumnAfter:l.run(function(e,t,n,r){var o=t.column(),a=t.column()+t.colspan(),i=h.insertColumnAt(e,a,o,n,r.getOrInit);return S(i,t.row(),a)},l.onCell,A,t.noop,o.modification),insertColumnsAfter:l.run(function(t,n,r,o){var a=n[n.length-1].column(),i=n[n.length-1].column()+n[n.length-1].colspan(),u=T(n),s=e.foldl(u,function(e,t){return h.insertColumnAt(e,i,a,r,o.getOrInit)},t);return S(s,n[0].row(),i)},l.onCells,A,t.noop,o.modification),splitCellIntoColumns:l.run(function(e,t,n,r){var o=h.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return S(o,t.row(),t.column())},l.onCell,A,t.noop,o.modification),splitCellIntoRows:l.run(function(e,t,n,r){var o=h.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return S(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.modification),eraseColumns:l.run(function(e,t,n,r){var o=T(t),a=h.deleteColumnsAt(e,o[0].column(),o[o.length-1].column()),i=y(a,t[0].row(),t[0].column());return w(a,i)},l.onCells,A,b,o.modification),eraseRows:l.run(function(e,t,n,r){var o=C(t),a=h.deleteRowsAt(e,o[0].row(),o[o.length-1].row()),i=y(a,t[0].row(),t[0].column());return w(a,i)},l.onCells,t.noop,b,o.modification),makeColumnHeader:l.run(function(e,t,n,r){var o=g.replaceColumn(e,t.column(),n,r.replaceOrInit);return S(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform("row","th")),unmakeColumnHeader:l.run(function(e,t,n,r){var o=g.replaceColumn(e,t.column(),n,r.replaceOrInit);return S(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform(null,"td")),makeRowHeader:l.run(function(e,t,n,r){var o=g.replaceRow(e,t.row(),n,r.replaceOrInit);return S(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform("col","th")),unmakeRowHeader:l.run(function(e,t,n,r){var o=g.replaceRow(e,t.row(),n,r.replaceOrInit);return S(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform(null,"td")),mergeCells:l.run(function(e,r,o,a){var u=r.cells();i.merge(u);var s=m.merge(e,r.bounds(),o,t.constant(u[0]));return w(s,n.from(u[0]))},l.onMergable,t.noop,t.noop,o.merging),unmergeCells:l.run(function(t,r,o,a){var i=e.foldr(r,function(e,t){return m.unmerge(e,t,o,a.combine(t))},t);return w(i,n.from(r[0]))},l.onUnmergable,A,t.noop,o.merging),pasteCells:l.run(function(e,t,r,o){var i=function(e,t){var n=s.fromTable(e),r=d.generate(n);return f.toGrid(r,t,!0)}(t.clipboard(),t.generators()),u=a.address(t.row(),t.column());return p.merge(u,e,i,t.generators(),r).fold(function(){return w(e,n.some(t.element()))},function(e){var n=y(e,t.row(),t.column());return w(e,n)})},l.onPaste,A,t.noop,o.modification),pasteRowsBefore:l.run(function(e,t,n,r){var o=e[t.cells[0].row()],a=t.cells[0].row(),i=R(t.clipboard(),t.generators(),o),u=p.insert(a,e,i,t.generators(),n),s=y(u,t.cells[0].row(),t.cells[0].column());return w(u,s)},l.onPasteRows,t.noop,t.noop,o.modification),pasteRowsAfter:l.run(function(e,t,n,r){var o=e[t.cells[0].row()],a=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),i=R(t.clipboard(),t.generators(),o),u=p.insert(a,e,i,t.generators(),n),s=y(u,t.cells[0].row(),t.cells[0].column());return w(u,s)},l.onPasteRows,t.noop,t.noop,o.modification)}}),r("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t){var n=function(e){return t.fromDom(e.getBody())};return{getBody:n,getIsRoot:function(t){return function(r){return e.eq(r,n(t))}},addSizeSuffix:function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},removePxSuffix:function(e){return e?e.replace(/px$/,""):""}}}),r("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(e){var t=function(t){return"rtl"===e.get(t,"direction")?"rtl":"ltr"};return{onDirection:function(e,n){return function(r){return"rtl"===t(r)?n:e}},getDirection:t}}),r("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(e,t){var n={isRtl:e.constant(!1)},r={isRtl:e.constant(!0)};return{directionAt:function(e){return"rtl"===t.getDirection(e)?r:n}}}),r("tinymce.plugins.table.actions.TableActions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CellMutations","ephox.snooker.api.TableDirection","ephox.snooker.api.TableFill","ephox.snooker.api.TableGridSize","ephox.snooker.api.TableOperations","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d){return function(m,h){var g,x=function(e){return"table"===c.name(f.getBody(e))};!1!==m.settings.table_clone_elements&&("string"==typeof m.settings.table_clone_elements?g=m.settings.table_clone_elements.split(/[ ,]/):Array.isArray(m.settings.table_clone_elements)&&(g=m.settings.table_clone_elements));var v=n.from(g),b=function(t,r,i,u){return function(c,f){var h=p.descendants(c,"td[data-mce-style],th[data-mce-style]");e.each(h,function(e){l.remove(e,"data-mce-style")});var g=u(),x=s.fromDom(m.getDoc()),b=o(d.directionAt),w=a.cellOperations(i,x,v);return r(c)?t(g,c,f,w,b).bind(function(t){return e.each(t.newRows(),function(e){t=e,m.fire("newrow",{node:t.dom()}),t.dom();var t}),e.each(t.newCells(),function(e){t=e,m.fire("newcell",{node:t.dom()}),t.dom();var t}),t.cursor().map(function(e){var t=m.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})}):n.none()}};return{deleteRow:b(u.eraseRows,function(e){var t=i.getGridSize(e);return!1===x(m)||t.rows()>1},t.noop,h),deleteColumn:b(u.eraseColumns,function(e){var t=i.getGridSize(e);return!1===x(m)||t.columns()>1},t.noop,h),insertRowsBefore:b(u.insertRowsBefore,t.always,t.noop,h),insertRowsAfter:b(u.insertRowsAfter,t.always,t.noop,h),insertColumnsBefore:b(u.insertColumnsBefore,t.always,r.halve,h),insertColumnsAfter:b(u.insertColumnsAfter,t.always,r.halve,h),mergeCells:b(u.mergeCells,t.always,t.noop,h),unmergeCells:b(u.unmergeCells,t.always,t.noop,h),pasteRowsBefore:b(u.pasteRowsBefore,t.always,t.noop,h),pasteRowsAfter:b(u.pasteRowsAfter,t.always,t.noop,h),pasteCells:b(u.pasteCells,t.always,t.noop,h)}}}),r("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(e,t,n,r,o){return{copyRows:function(a,i,u){var s=e.fromTable(a),c=r.generate(s);return t.onCells(c,i).map(function(e){var r=n.toGrid(c,u,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),a=t.toDetailList(r,u);return o.copy(a)})}}}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),r("tinymce.plugins.table.actions.Styles",["tinymce.core.util.Tools"],function(e){return{applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(t,n){e.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},unApplyVAlign:function(t,n){e.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},getTDTHOverallStyle:function(e,t,n){var r;return r=function(t,r){for(var o=0;o<r.length;o++){var a=e.getStyle(r[o],n);if(void 0===t&&(t=a),t!=a)return""}return t}(r,e.select("td,th",t))}}}),r("tinymce.plugins.table.ui.Helpers",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util"],function(e,t,n){var r=function(e,t){var r=e.dom,o=t.control.rootControl,a=o.toJSON(),i=r.parseStyle(a.style);"style"===t.control.name()?(o.find("#borderStyle").value(i["border-style"]||"")[0].fire("select"),o.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),o.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),o.find("#width").value(i.width||"").fire("change"),o.find("#height").value(i.height||"").fire("change")):(i["border-style"]=a.borderStyle,i["border-color"]=a.borderColor,i["background-color"]=a.backgroundColor,i.width=a.width?n.addSizeSuffix(a.width):"",i.height=a.height?n.addSizeSuffix(a.height):""),o.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(i))))};return{createStyleForm:function(t){var n=function(){var e=t.settings.color_picker_callback;if(e)return function(n){return e.call(t,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:e.curry(r,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:e.curry(r,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:n()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n()}]}]}},buildListItems:function(e,n,r){var o=function(e,r){return r=r||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r};return o(e,r||[])},updateStyleField:r,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r}}}),r("tinymce.plugins.table.ui.TableDialog",["ephox.katamari.api.Fun","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o,a,i){function u(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)u(e,t.children[o],n,r)}var s=function(e,s,c){var l,p,f=e.dom;i.updateStyleField(e,c),!1===(p=c.control.rootControl.toJSON()).class&&delete p.class,e.undoManager.transact(function(){s||(s=r.insert(e,p.cols||1,p.rows||1)),function(e,t,r){var o=e.dom,i={},s={};if(i.class=r.class,s.height=a.addSizeSuffix(r.height),o.getAttrib(t,"width")&&!e.settings.table_style_by_css?i.width=a.removePxSuffix(r.width):s.width=a.addSizeSuffix(r.width),e.settings.table_style_by_css?(s["border-width"]=a.addSizeSuffix(r.border),s["border-spacing"]=a.addSizeSuffix(r.cellspacing),n.extend(i,{"data-mce-border-color":r.borderColor,"data-mce-cell-padding":r.cellpadding,"data-mce-border":r.border})):n.extend(i,{border:r.border,cellpadding:r.cellpadding,cellspacing:r.cellspacing}),e.settings.table_style_by_css&&t.children)for(var c=0;c<t.children.length;c++)u(o,t.children[c],{"border-width":a.addSizeSuffix(r.border),"border-color":r.borderColor,padding:a.addSizeSuffix(r.cellpadding)});r.style?n.extend(s,o.parseStyle(r.style)):s=n.extend({},o.parseStyle(o.getAttrib(t,"style")),s),i.style=o.serializeStyle(s),o.setAttribs(t,i)}(e,s,p),(l=f.select("caption",s)[0])&&!p.caption&&f.remove(l),!l&&p.caption&&((l=f.create("caption")).innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',s.insertBefore(l,s.firstChild)),o.unApplyAlign(e,s),p.align&&o.applyAlign(e,s,p.align),e.focus(),e.addVisual()})};return{open:function(t,r){var a,u,c,l,p,f=t.dom,d={};!0===r?(a=f.getParent(t.selection.getStart(),"table"))&&(d=function(e,t){var r=e.dom,a={width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"),cellpadding:r.getAttrib(t,"data-mce-cell-padding")||r.getAttrib(t,"cellpadding")||o.getTDTHOverallStyle(e.dom,t,"padding"),border:r.getAttrib(t,"data-mce-border")||r.getAttrib(t,"border")||o.getTDTHOverallStyle(e.dom,t,"border"),borderColor:r.getAttrib(t,"data-mce-border-color"),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class")};return n.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(a.align=n)}),!1!==e.settings.table_advtab&&n.extend(a,i.extractAdvancedStyles(r,t)),a}(t,a)):(u={label:"Cols",name:"cols"},c={label:"Rows",name:"rows"}),t.settings.table_class_list&&(d.class&&(d.class=d.class.replace(/\s*mce\-item\-table\s*/g,"")),l={name:"class",type:"listbox",label:"Class",values:i.buildListItems(t.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==t.settings.table_appearance_options?[u,c,{label:"Width",name:"width",onchange:e.curry(i.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(i.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[u,c,{label:"Width",name:"width",onchange:e.curry(i.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(i.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},l]},!1!==t.settings.table_advtab?t.windowManager.open({title:"Table properties",data:d,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},i.createStyleForm(t)],onsubmit:e.curry(s,t,a)}):t.windowManager.open({title:"Table properties",data:d,body:p,onsubmit:e.curry(s,t,a)})}}}),r("tinymce.plugins.table.ui.RowDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o){var a=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,a=e.select(n,r)[0];a||(a=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(a,r.firstChild):r.insertBefore(a,r.firstChild):r.appendChild(a)),a.appendChild(t),o.hasChildNodes()||e.remove(o)};function i(e,i,u){var s,c=e.dom;function l(e,t,n){n&&c.setAttrib(e,t,n)}o.updateStyleField(e,u),s=u.control.rootControl.toJSON(),e.undoManager.transact(function(){t.each(i,function(t){l(t,"scope",s.scope),l(t,"style",s.style),l(t,"class",s.class),o=t,u="height",(p=r.addSizeSuffix(s.height))&&c.setStyle(o,u,p);var o,u,p;s.type!==t.parentNode.nodeName.toLowerCase()&&a(e.dom,t,s.type),1===i.length&&n.unApplyAlign(e,t),s.align&&n.applyAlign(e,t,s.align)}),e.focus()})}return{open:function(n){var r,a,u,s,c,l,p=n.dom,f=[];r=n.dom.getParent(n.selection.getStart(),"table"),a=n.dom.getParent(n.selection.getStart(),"td,th"),t.each(r.rows,function(e){t.each(e.cells,function(t){if(p.getAttrib(t,"data-mce-selected")||t==a)return f.push(e),!1})}),(u=f[0])&&(c=f.length>1?{height:"",scope:"",class:"",align:"",type:u.parentNode.nodeName.toLowerCase()}:function(e,n){var r=e.dom,a={height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),class:r.getAttrib(n,"class")};return a.type=n.parentNode.nodeName.toLowerCase(),t.each("left center right".split(" "),function(t){e.formatter.matchNode(n,"align"+t)&&(a.align=t)}),!1!==e.settings.table_row_advtab&&t.extend(a,o.extractAdvancedStyles(r,n)),a}(n,u),n.settings.table_row_class_list&&(s={name:"class",type:"listbox",label:"Class",values:o.buildListItems(n.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[e.value]})})})}),l={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},s]},!1!==n.settings.table_row_advtab?n.windowManager.open({title:"Row properties",data:c,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},o.createStyleForm(p)],onsubmit:e.curry(i,n,f)}):n.windowManager.open({title:"Row properties",data:c,body:l,onsubmit:e.curry(i,n,f)}))}}}),r("tinymce.plugins.table.ui.CellDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o){var a=function(e,a,i){var u,s=e.dom;function c(e,t,n){n&&s.setAttrib(e,t,n)}function l(e,t,n){n&&s.setStyle(e,t,n)}o.updateStyleField(e,i),u=i.control.rootControl.toJSON(),e.undoManager.transact(function(){t.each(a,function(t){c(t,"scope",u.scope),1===a.length?c(t,"style",u.style):(o=t,i=u.style,o.style.cssText+=";"+i);var o,i;c(t,"class",u.class),l(t,"width",r.addSizeSuffix(u.width)),l(t,"height",r.addSizeSuffix(u.height)),u.type&&t.nodeName.toLowerCase()!==u.type&&(t=s.rename(t,u.type)),1===a.length&&(n.unApplyAlign(e,t),n.unApplyVAlign(e,t)),u.align&&n.applyAlign(e,t,u.align),u.valign&&n.applyVAlign(e,t,u.valign)}),e.focus()})};return{open:function(n){var r,i,u,s=[];if(s=n.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=n.dom.getParent(n.selection.getStart(),"td,th"),!s.length&&r&&s.push(r),r=r||s[0]){i=s.length>1?{width:"",height:"",scope:"",class:"",align:"",style:"",type:r.nodeName.toLowerCase()}:function(e,n){var r=e.dom,a={width:r.getStyle(n,"width")||r.getAttrib(n,"width"),height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),class:r.getAttrib(n,"class")};return a.type=n.nodeName.toLowerCase(),t.each("left center right".split(" "),function(t){e.formatter.matchNode(n,"align"+t)&&(a.align=t)}),t.each("top middle bottom".split(" "),function(t){e.formatter.matchNode(n,"valign"+t)&&(a.valign=t)}),!1!==e.settings.table_cell_advtab&&t.extend(a,o.extractAdvancedStyles(r,n)),a}(n,r),n.settings.table_cell_class_list&&(u={name:"class",type:"listbox",label:"Class",values:o.buildListItems(n.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return n.formatter.getCssText({block:"td",classes:[e.value]})})})});var c={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:e.curry(o.updateStyleField,n)},{label:"Height",name:"height",onchange:e.curry(o.updateStyleField,n)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},u]};!1!==n.settings.table_cell_advtab?n.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:i,body:[{title:"General",type:"form",items:c},o.createStyleForm(n)],onsubmit:e.curry(a,n,s)}):n.windowManager.open({title:"Cell properties",data:i,body:c,onsubmit:e.curry(a,n,s)})}}}}),r("tinymce.plugins.table.actions.TableCommands",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopyRows","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog","tinymce.plugins.table.ui.RowDialog","tinymce.plugins.table.ui.CellDialog"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m,h){var g=l.each,x=n.none();return{registerCommands:function(l,v,b,w){var y=p.getIsRoot(l),k=function(){return c.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"))},S=function(e){return a.table(e,y)},C=function(e){var t=k();S(t).each(function(n){var r=f.forMenu(w,n,t);e(n,r).each(function(e){l.selection.setRng(e),l.focus(),b.clear(n)})})},T=function(e){var a=k();return S(a).bind(function(e){var i=c.fromDom(l.getDoc()),u=f.forMenu(w,e,a),s=o.cellOperations(t.noop,i,n.none());return r.copyRows(e,u,s)})},R=function(t){x.each(function(n){var r=e.map(n,function(e){return s.deep(e)}),a=k();S(a).bind(function(e){var n=c.fromDom(l.getDoc()),i=o.paste(n),u=f.pasteRows(w,e,a,r,i);t(e,u).each(function(t){l.selection.setRng(t),l.focus(),b.clear(e)})})})};g({mceTableSplitCells:function(){C(v.unmergeCells)},mceTableMergeCells:function(){C(v.mergeCells)},mceTableInsertRowBefore:function(){C(v.insertRowsBefore)},mceTableInsertRowAfter:function(){C(v.insertRowsAfter)},mceTableInsertColBefore:function(){C(v.insertColumnsBefore)},mceTableInsertColAfter:function(){C(v.insertColumnsAfter)},mceTableDeleteCol:function(){C(v.deleteColumn)},mceTableDeleteRow:function(){C(v.deleteRow)},mceTableCutRow:function(e){x=T(),C(v.deleteRow)},mceTableCopyRow:function(e){x=T()},mceTablePasteRowBefore:function(e){R(v.pasteRowsBefore)},mceTablePasteRowAfter:function(e){R(v.pasteRowsAfter)},mceTableDelete:function(){var e=c.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"));a.table(e,y).filter(t.not(y)).each(function(e){var t=c.fromText("");i.after(e,t),u.remove(e);var n=l.dom.createRng();n.setStart(t.dom(),0),n.setEnd(t.dom(),0),l.selection.setRng(n)})}},function(e,t){l.addCommand(t,e)}),g({mceInsertTable:t.curry(d.open,l),mceTableProps:t.curry(d.open,l,!0),mceTableRowProps:t.curry(m.open,l),mceTableCellProps:t.curry(h.open,l)},function(e,t){l.addCommand(t,function(t,n){e(n)})})},getClipboardRows:function(){return x.fold(function(){},function(t){return e.map(t,function(e){return e.dom()})})},setClipboardRows:function(t){var r=e.map(t,c.fromDom);x=n.from(r)}}}),r("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(e,t,n,r,o){return{only:function(r){var a=t.from(r.dom().documentElement).map(n.fromDom).getOr(r);return{parent:e.constant(a),view:e.constant(r),origin:e.constant(o(0,0))}},detached:function(t,n){var o=e.curry(r.absolute,n);return{parent:e.constant(n),view:e.constant(t),origin:o}},body:function(t,n){return{parent:e.constant(n),view:e.constant(t),origin:e.constant(o(0,0))}}}}),r("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(e,t){return function(n){var r=t.immutable.apply(null,n),o=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";o.push(e)},unbind:function(t){o=e.filter(o,function(e){return e!==t})},trigger:function(){var t=r.apply(null,arguments);e.each(o,function(e){e(t)})}}}}),r("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(e){return{create:function(t){return{registry:e.map(t,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:e.map(t,function(e){return e.trigger})}}}}),r("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(e){return{mode:e.exactly(["compare","extract","mutate","sink"]),sink:e.exactly(["element","start","stop","destroy"]),api:e.exactly(["forceDrop","drop","move","delayDrop"])}}),r("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-dragster").resolve}}),r("ephox.dragster.detect.Blocker",["ephox.dragster.style.Styles","ephox.katamari.api.Merger","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,a){return function(i){var u=t.merge({layerClass:e.resolve("blocker")},i),s=o.fromTag("div");r.setAll(s,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),n.add(s,e.resolve("blocker")),n.add(s,u.layerClass);return{element:function(){return s},destroy:function(){a.remove(s)}}}}),r("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(e,t){var n=function(n,r){return function(o){if(n(o)){var a,i,u,s,c,l,p,f=t.fromDom(o.target),d=function(){o.stopPropagation()},m=function(){o.preventDefault()},h=e.compose(m,d),g=(a=f,i=o.clientX,u=o.clientY,s=d,c=m,l=h,p=o,{target:e.constant(a),x:e.constant(i),y:e.constant(u),stop:s,prevent:c,kill:l,raw:e.constant(p)});r(g)}}},r=function(t,r,a,i,u){var s=n(a,i);return t.dom().addEventListener(r,s,u),{unbind:e.curry(o,t,r,s,u)}},o=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};return{bind:function(e,t,n,o){return r(e,t,n,o,!1)},capture:function(e,t,n,o){return r(e,t,n,o,!0)}}}),r("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(e,t){var n=e.constant(!0);return{bind:function(e,r,o){return t.bind(e,r,n,o)},capture:function(e,r,o){return t.capture(e,r,n,o)}}}),r("ephox.dragster.api.MouseDrag",["ephox.dragster.api.DragApis","ephox.dragster.detect.Blocker","ephox.katamari.api.Option","ephox.sugar.api.view.Position","ephox.sugar.api.events.DomEvent","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,a,i){return e.mode({compare:function(e,t){return r(t.left()-e.left(),t.top()-e.top())},extract:function(e){return n.some(r(e.x(),e.y()))},sink:function(n,r){var u=t(r),s=o.bind(u.element(),"mousedown",n.forceDrop),c=o.bind(u.element(),"mouseup",n.drop),l=o.bind(u.element(),"mousemove",n.move),p=o.bind(u.element(),"mouseout",n.delayDrop);return e.sink({element:u.element,start:function(e){a.append(e,u.element())},stop:function(){i.remove(u.element())},destroy:function(){u.destroy(),c.unbind(),l.unbind(),p.unbind(),s.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}})}),r("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t,n){return function(){var r=e.none(),o=n.create({move:t(["info"])});return{onEvent:function(t,n){n.extract(t).each(function(t){(function(t,n){var o=r.map(function(e){return t.compare(e,n)});return r=e.some(n),o})(n,t).each(function(e){o.trigger.move(e)})})},reset:function(){r=e.none()},events:o.registry}}}),r("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(e){return function(t){return{onEvent:function(e,t){},reset:e.noop}}}),r("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],function(e,t){return function(){var n=t(),r=e(),o=n;return{on:function(){o.reset(),o=r},off:function(){o.reset(),o=n},isOn:function(){return o===r},onEvent:function(e,t){o.onEvent(e,t)},events:r.events}}}),o("global!clearTimeout",clearTimeout),o("global!setTimeout",setTimeout),r("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){return{adaptable:function(n,r){var o=null,a=null;return{cancel:function(){null!==o&&(e(o),o=null,a=null)},throttle:function(){a=arguments,null===o&&(o=t(function(){n.apply(null,a),o=null,a=null},r))}}},first:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=t(function(){n.apply(null,e),o=null,e=null},r))}}},last:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var a=arguments;null!==o&&e(o),o=t(function(){n.apply(null,a),o=null,a=null},r)}}}}}),r("ephox.dragster.core.Dragging",["ephox.dragster.api.DragApis","ephox.dragster.detect.Movement","ephox.katamari.api.Throttler","ephox.porkbun.Event","ephox.porkbun.Events","global!Array"],function(e,t,n,r,o,a){return{setup:function(i,u,s){var c=!1,l=o.create({start:r([]),stop:r([])}),p=t(),f=function(){h.stop(),p.isOn()&&(p.off(),l.trigger.stop())},d=n.last(f,200);p.events.move.bind(function(e){u.mutate(i,e.info())});var m=function(e){return function(){var t=a.prototype.slice.call(arguments,0);if(c)return e.apply(null,t)}},h=u.sink(e.api({forceDrop:f,drop:m(f),move:m(function(e,t){d.cancel(),p.onEvent(e,u)}),delayDrop:m(d.throttle)}),s);return{element:h.element,go:function(e){h.start(e),p.on(),l.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){h.destroy()},events:l.registry}}}}),r("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(e,t,n){return{transform:function(n,r){var o=void 0!==r?r:{},a=void 0!==o.mode?o.mode:e;return t.setup(n,a,r)}}}),r("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t){return function(){var n=t.create({drag:e(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}}}),r("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(e,t,n,r){return function(){var o=n.create({drag:t(["xDelta","yDelta","target"])}),a=e.none(),i=r();i.events.drag.bind(function(e){a.each(function(t){o.trigger.drag(e.xDelta(),e.yDelta(),t)})});return{assign:function(t){a=e.some(t)},get:function(){return a},mutate:i.mutate,events:o.registry}}}),r("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),r("ephox.snooker.resize.BarManager",["ephox.dragster.api.Dragger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.BarMutation","ephox.snooker.resize.Bars","ephox.snooker.style.Styles","ephox.snooker.util.CellUtils","ephox.sugar.api.dom.Compare","ephox.sugar.api.events.DomEvent","ephox.sugar.api.node.Body","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorExists","ephox.sugar.api.search.SelectorFind","global!parseInt"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x,v){var b=u.resolve("resizer-bar-dragging");return function(u,w,y){var k=a(),S=e.transform(k,{}),C=n.none(),T=function(e,t){return n.from(d.get(e,t))};k.events.drag.bind(function(e){T(e.target(),"data-row").each(function(t){var n=s.getInt(e.target(),"top");h.set(e.target(),"top",n+e.yDelta()+"px")}),T(e.target(),"data-column").each(function(t){var n=s.getInt(e.target(),"left");h.set(e.target(),"left",n+e.xDelta()+"px")})});var R=function(e,t){return s.getInt(e,t)-v(d.get(e,"data-initial-"+t),10)};S.events.stop.bind(function(){k.get().each(function(e){C.each(function(t){T(e,"data-row").each(function(n){var r=R(e,"top");d.remove(e,"data-initial-top"),N.trigger.adjustHeight(t,r,v(n,10))}),T(e,"data-column").each(function(n){var r=R(e,"left");d.remove(e,"data-initial-left"),N.trigger.adjustWidth(t,r,v(n,10))}),i.refresh(u,t,y,w)})})});var A=function(e,t){N.trigger.startAdjust(),k.assign(e),d.set(e,"data-initial-"+t,v(h.get(e,t),10)),m.add(e,b),h.set(e,"opacity","0.2"),S.go(u.parent())},D=l.bind(u.parent(),"mousedown",function(e){i.isRowBar(e.target())&&A(e.target(),"top"),i.isColBar(e.target())&&A(e.target(),"left")}),O=function(e){return c.eq(e,u.view())},E=l.bind(u.view(),"mouseover",function(e){"table"===f.name(e.target())||g.ancestor(e.target(),"table",O)?(C="table"===f.name(e.target())?n.some(e.target()):x.ancestor(e.target(),"table",O)).each(function(e){i.refresh(u,e,y,w)}):p.inBody(e.target())&&i.destroy(u)}),N=o.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:function(){D.unbind(),E.unbind(),S.destroy(),i.destroy(u)},refresh:function(e){i.refresh(u,e,y,w)},on:S.on,off:S.off,hideBars:t.curry(i.hide,u),showBars:t.curry(i.show,u),events:N.registry}}}),r("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(e,t,n,r,o){return function(a,i){var u=o.height,s=r(a,i,u),c=t.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});return s.events.adjustHeight.bind(function(e){c.trigger.beforeResize(e.table());var t=u.delta(e.delta(),e.table());n.adjustHeight(e.table(),t,e.row(),u),c.trigger.afterResize(e.table())}),s.events.startAdjust.bind(function(e){c.trigger.startDrag()}),s.events.adjustWidth.bind(function(e){c.trigger.beforeResize(e.table());var t=i.delta(e.delta(),e.table());n.adjustWidth(e.table(),t,e.column(),i),c.trigger.afterResize(e.table())}),{on:s.on,off:s.off,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:c.registry}}}),r("tinymce.plugins.table.actions.TableWire",["ephox.snooker.api.ResizeWire","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","tinymce.plugins.table.alien.Util"],function(e,t,n,r,o,a,i){return{get:function(n,u){return n.inline?e.body(i.getBody(n),function(){var e=o.fromTag("div");return a.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),t.append(r.body(),e),e}()):e.only(o.fromDom(n.getDoc()))},remove:function(e,t){e.inline&&n.remove(t.parent())}}}),r("tinymce.plugins.table.actions.ResizeHandler",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.ResizeWire","ephox.snooker.api.TableDirection","ephox.snooker.api.TableResize","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.actions.TableWire","tinymce.plugins.table.queries.Direction","tinymce.core.util.Tools"],function(e,t,n,r,o,a,i,u,s,c,l){return function(p){var f,d,m=t.none(),h=t.none(),g=t.none(),x=/(\d+(\.\d+)?)%/,v=function(e){return"TABLE"===e.nodeName};return p.on("init",function(){var n=r(c.directionAt),a=s.get(p);if(g=t.some(a),p.settings.object_resizing&&!1!==p.settings.table_resize_bars&&(!0===p.settings.object_resizing||"table"===p.settings.object_resizing)){var l=o(a,n);l.on(),l.events.startDrag.bind(function(e){m=t.some(p.selection.getRng())}),l.events.afterResize.bind(function(t){var n=t.table(),r=u.descendants(n,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){i.remove(e,"data-mce-style")}),m.each(function(e){p.selection.setRng(e),p.focus()}),p.undoManager.add()}),h=t.some(l)}}),p.on("ObjectResizeStart",function(e){v(e.target)&&(f=e.width,t=e.target,d=p.dom.getStyle(t,"width")||p.dom.getAttrib(t,"width"));var t}),p.on("ObjectResized",function(e){if(v(e.target)){var t=e.target;if(x.test(d)){var n=parseFloat(x.exec(d)[1],10),r=e.width*n/f;p.dom.setStyle(t,"width",r+"%")}else{var o=[];l.each(t.rows,function(e){l.each(e.cells,function(e){var t=p.dom.getStyle(e,"width",!0);o.push({cell:e,width:t})})}),l.each(o,function(e){p.dom.setStyle(e.cell,"width",e.width),p.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:function(){return h},lazyWire:function(){return g.getOr(n.only(a.fromDom(p.getBody())))},destroy:function(){h.each(function(e){e.destroy()}),g.each(function(e){s.remove(p,e)})}}}}),r("ephox.snooker.api.CellLocation",[],function(){var e=function(e){return{fold:e}};return{none:function(t){return e(function(e,n,r,o){return e(t)})},first:function(t){return e(function(e,n,r,o){return n(t)})},middle:function(t,n){return e(function(e,r,o,a){return o(t,n)})},last:function(t){return e(function(e,n,r,o){return o(t)})}}}),r("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o){var a=function(n,a){return r.table(n,a).bind(function(a){var i=r.cells(a);return e.findIndex(i,function(e){return o.eq(n,e)}).map(function(e){return{index:t.constant(e),all:t.constant(i)}})})};return{next:function(e,t){return a(e,t).fold(function(){return n.none(e)},function(t){return t.index()+1<t.all().length?n.middle(e,t.all()[t.index()+1]):n.last(e)})},prev:function(e,t){return a(e,t).fold(function(){return n.none()},function(t){return t.index()-1>=0?n.middle(e,t.all()[t.index()-1]):n.first(e)})}}}),r("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(e,t){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);return{before:n.before,on:n.on,after:n.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(t.identity,t.identity,t.identity)}}}),r("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){var a=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),i=t.immutable("start","soffset","finish","foffset");return{domRange:a.domRange,relative:a.relative,exact:a.exact,exactFromRange:function(e){return a.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:i,getWin:function(e){var t,a=(t=e,t.match({domRange:function(e){return n.fromDom(e.startContainer)},relative:function(e,t){return o.getStart(e)},exact:function(e,t,n,r){return e}}));return r.defaultView(a)}}}),r("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,t,r,o){var a=n.owner(e).dom().createRange();return a.setStart(e.dom(),t),a.setEnd(r.dom(),o),a};return{after:function(t,n,o,a){var i=r(t,n,o,a),u=e.eq(t,o)&&n===a;return i.collapsed&&!u},commonAncestorContainer:function(e,n,o,a){var i=r(e,n,o,a);return t.fromDom(i.commonAncestorContainer)}}}),r("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var a=(o||n).createDocumentFragment();return e.each(r,function(e){a.appendChild(e.dom())}),t.fromDom(a)}}}),r("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r){var o=function(e,t){e.selectNodeContents(t.dom())},a=function(e){e.deleteContents()},i=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}};return{create:function(e){return e.document.createRange()},replaceWith:function(e,t){a(e),e.insertNode(t.dom())},selectNodeContents:function(e,t){var n=e.document.createRange();return o(n,t),n},selectNodeContentsUsing:o,isCollapsed:function(e,t,r,o){return n.eq(e,r)&&t===o},relativeToNative:function(e,t,n){var r=e.document.createRange();o=r,t.fold(function(e){o.setStartBefore(e.dom())},function(e,t){o.setStart(e.dom(),t)},function(e){o.setStartAfter(e.dom())});var o;a=r,n.fold(function(e){a.setEndBefore(e.dom())},function(e,t){a.setEnd(e.dom(),t)},function(e){a.setEndAfter(e.dom())});var a;return r},exactToNative:function(e,t,n,r,o){var a=e.document.createRange();return a.setStart(t.dom(),n),a.setEnd(r.dom(),o),a},deleteContents:a,cloneFragment:function(e){var t=e.cloneContents();return r.fromDom(t)},getFirstRect:function(e){var n=e.getClientRects(),r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(i):t.none()},getBounds:function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(i):t.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},toString:function(e){return e.toString()}}}),r("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,t,n,r,o,a){var i=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),u=function(e,t,n){return t(o.fromDom(n.startContainer),n.startOffset,o.fromDom(n.endContainer),n.endOffset)},s=function(e,s){var c;return function(e,t){var n=t.ltr();if(n.collapsed)return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return i.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return u(0,i.ltr,n)});return u(0,i.ltr,n)}(0,(c=e,s.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(e,t){return{ltr:r.cached(function(){return a.relativeToNative(c,e,t)}),rtl:r.cached(function(){return n.some(a.relativeToNative(c,t,e))})}},exact:function(e,t,o,i){return{ltr:r.cached(function(){return a.exactToNative(c,e,t,o,i)}),rtl:r.cached(function(){return n.some(a.exactToNative(c,o,i,e,t))})}}})))};return{ltr:i.ltr,rtl:i.rtl,diagnose:s,asLtrRange:function(e,t){return s(e,t).match({ltr:function(t,n,r,o){var a=e.document.createRange();return a.setStart(t.dom(),n),a.setEnd(r.dom(),o),a},rtl:function(t,n,r,o){var a=e.document.createRange();return a.setStart(r.dom(),o),a.setEnd(t.dom(),n),a}})}}}),r("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){return{inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:function(t,n,r,o,a){if(0===a)return 0;if(n===o)return a-1;for(var i=o,u=1;u<a;u++){var s=t(u),c=e.abs(n-s.left);if(r>s.bottom);else{if(r<s.top||c>i)return u-1;i=c}}return 0}}}),r("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,t,n,r,o){return{locate:function(o,a,i,u){var s=o.dom().createRange();s.selectNode(a.dom());var c=s.getClientRects();return t.findMap(c,function(t){return r.inRect(t,i,u)?e.some(t):e.none()}).map(function(e){return function(e,t,o,a,i){var u=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},s=n.get(t).length,c=r.searchForPoint(function(e){return u(e).getBoundingClientRect()},o,a,i.right,s);return u(c)}(o,a,i,u,e)})}}}),r("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,t,n,r,o,a,i){var u=function(n,a,i,u){var c=n.dom().createRange(),l=r.children(a);return t.findMap(l,function(t){return c.selectNode(t.dom()),o.inRect(c.getBoundingClientRect(),i,u)?s(n,t,i,u):e.none()})},s=function(e,t,r,o){return(n.isText(t)?a.locate:u)(e,t,r,o)};return{locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var a=o.getBoundingClientRect(),u=i.max(a.left,i.min(a.right,n)),c=i.max(a.top,i.min(a.bottom,r));return s(e,t,u,c)}}}),r("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n){var r=function(e,t){return t-e.left<e.right-t},o=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},a=function(e,t,a){var i=e.dom().createRange();i.selectNode(t.dom());var u=i.getBoundingClientRect(),s=r(u,a);return(!0===s?n.first:n.last)(t).map(function(t){return o(e,t,s)})},i=function(t,n,a){var i=n.dom().getBoundingClientRect(),u=r(i,a);return e.some(o(t,n,u))};return{search:function(e,n,r){return(0===t.children(n).length?i:a)(e,n,r)}}}),r("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,t,n,r,o,a,i,u){var s=i.caretPositionFromPoint?function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(null===n.offsetNode)return e.none();var r=t.dom().createRange();return r.setStart(n.offsetNode,n.offset),r.collapse(),e.some(r)})}:i.caretRangeFromPoint?function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))}:function(e,r,i){return t.fromPoint(e,r,i).bind(function(t){var s=function(){return a.search(e,t,r)};return 0===n.children(t).length?s():function(e,t,n,r){var a=e.dom().createRange();a.selectNode(t.dom());var i=a.getBoundingClientRect(),s=u.max(i.left,u.min(i.right,n)),c=u.max(i.top,u.min(i.bottom,r));return o.locate(e,t,s,c)}(e,t,r,i).orThunk(s)})};return{fromPoint:function(e,n,o){var a=t.fromDom(e.document);return s(a,n,o).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})}}}),r("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r,o,a,i){return{find:function(u,s,c){var l=i.asLtrRange(u,s),p=t.fromDom(l.commonAncestorContainer);return n.isElement(p)?function(t,n,i,u){var s=a.create(t),c=(o.is(n,u)?[n]:[]).concat(r.descendants(n,u));return e.filter(c,function(e){return a.selectNodeContentsUsing(s,e),a.isWithin(i,s)})}(u,p,l,c):[]}}}),r("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){var a=function(t,r){var a=n.name(t);return"input"===a?o.after(t):e.contains(["br","img"],a)?0===r?o.before(t):o.after(t):o.on(t,r)},i=function(e,t){var n=e.fold(o.before,a,o.after),i=t.fold(o.before,a,o.after);return r.relative(n,i)},u=function(e,t,n,o){var i=a(e,t),u=a(n,o);return r.relative(i,u)};return{beforeSpecial:a,preprocess:function(e){return e.match({domRange:function(e){var n=t.fromDom(e.startContainer),r=t.fromDom(e.endContainer);return u(n,e.startOffset,r,e.endOffset)},relative:i,exact:u})},preprocessRelative:i,preprocessExact:u}}),r("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,t,n,r,o,a,i,u,s,c,l){var p=function(t,n){e.from(t.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(n)})},f=function(e,t,n,r,o){var a=i.exactToNative(e,t,n,r,o);p(e,a)},d=function(e,t){return u.diagnose(e,t).match({ltr:function(t,n,r,o){f(e,t,n,r,o)},rtl:function(t,n,r,o){var a=e.getSelection();a.extend?(a.collapse(t.dom(),n),a.extend(r.dom(),o)):f(e,r,o,t,n)}})},m=function(r){var o=n.fromDom(r.anchorNode),i=n.fromDom(r.focusNode);return t.after(o,r.anchorOffset,i,r.focusOffset)?e.some(a.range(n.fromDom(r.anchorNode),r.anchorOffset,n.fromDom(r.focusNode),r.focusOffset)):function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return e.some(a.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(o.endContainer),o.endOffset))}return e.none()}(r)},h=function(t){var n=t.getSelection();return n.rangeCount>0?m(n):e.none()};return{setExact:function(e,t,n,r,o){var a=l.preprocessExact(t,n,r,o);d(e,a)},getExact:h,get:function(e){return h(e).map(function(e){return a.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},setRelative:function(e,t,n){var r=l.preprocessRelative(t,n);d(e,r)},toNative:function(e){var t=a.getWin(e).dom(),n=function(e,n,r,o){return i.exactToNative(t,e,n,r,o)},r=l.preprocess(e);return u.diagnose(t,r).match({ltr:n,rtl:n})},setToElement:function(e,t){var n=i.selectNodeContents(e,t);p(e,n)},clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=u.asLtrRange(e,t);return i.cloneFragment(n)},replace:function(e,t,n){var o=u.asLtrRange(e,t),a=r.fromElements(n,e.document);i.replaceWith(o,a)},deleteAt:function(e,t){var n=u.asLtrRange(e,t);i.deleteContents(n)},forElement:function(e,t){var r=i.selectNodeContents(e,t);return a.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)},getFirstRect:function(e,t){var n=u.asLtrRange(e,t);return i.getFirstRect(n)},getBounds:function(e,t){var n=u.asLtrRange(e,t);return i.getBounds(n)},getAtPoint:function(e,t,n){return s.fromPoint(e,t,n)},findWithin:function(e,t,n){return c.find(e,t,n)},getAsString:function(e,t){var n=u.asLtrRange(e,t);return i.toString(n)}}}),r("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),r("tinymce.plugins.table.queries.TabContext",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.CellNavigation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.CursorPosition","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.WindowSelection","tinymce.core.util.VK","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m){var h=function(e,t,r,o){return v(e,t,n.next(r),o)},g=function(e,t,r,o){return v(e,t,n.prev(r),o)},x=function(e,t){var n=l.exact(t,0,t,0);return p.toNative(n)},v=function(n,o,a,i,l){return a.fold(t.none,t.none,function(e,t){return c.first(t).map(function(e){return x(0,e)})},function(t){return r.table(t,o).bind(function(r){var o=m.noMenu(t);return n.undoManager.transact(function(){i.insertRowsAfter(r,o)}),function(t,n){var r=u.descendants(n,"tr");return e.last(r).bind(function(e){return s.descendant(e,"td,th").map(function(e){return x(0,e)})})}(0,r)})})},b=["table","li","dl"];return{handle:function(t,n,u,s){if(t.keyCode===f.TAB){var c=d.getBody(n),l=function(t){var n=i.name(t);return o.eq(t,c)||e.contains(b,n)},p=n.selection.getRng();if(p.collapsed){var m=a.fromDom(p.startContainer);r.cell(m,l).each(function(e){t.preventDefault(),(t.shiftKey?g:h)(n,l,e,u,s).each(function(e){n.selection.setRng(e)})})}}}}}),r("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],function(e){return{response:e.immutable("selection","kill")}}),r("ephox.darwin.api.SelectionKeys",[],function(){var e=function(e){return function(t){return t===e}},t=e(38),n=e(40);return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:t,isDown:n,isNavigation:function(e){return e>=37&&e<=40}}}),r("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r){return{convertToRange:function(n,o){var a=r.asLtrRange(n,o);return{start:e.constant(t.fromDom(a.startContainer)),soffset:e.constant(a.startOffset),finish:e.constant(t.fromDom(a.endContainer)),foffset:e.constant(a.endOffset)}},makeSitus:function(t,r,o,a){return{start:e.constant(n.on(t,r)),finish:e.constant(n.on(o,a))}}}}),r("ephox.darwin.api.WindowBridge",["ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.api.selection.WindowSelection"],function(e,t,n,r,o,a,i,u){return function(s){return{elementFromPoint:function(e,t){return r.from(s.document.elementFromPoint(e,t)).map(o.fromDom)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,r,o,i){var c=a.exact(e,r,o,i);return u.getFirstRect(s,c).map(function(e){return n.map(e,t.apply)})},getSelection:function(){return u.get(s).map(function(t){return e.convertToRange(s,t)})},fromSitus:function(t){var n=a.relative(t.start(),t.finish());return e.convertToRange(s,n)},situsFromPoint:function(e,n){return u.getAtPoint(s,e,n).map(function(e){return{start:t.constant(i.on(e.start(),e.soffset())),finish:t.constant(i.on(e.finish(),e.foffset()))}})},clearSelection:function(){u.clear(s)},setSelection:function(e){u.setExact(s,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){u.setRelative(s,e,t)},selectContents:function(e){u.setToElement(s,e)},getInnerHeight:function(){return s.innerHeight},getScrollY:function(){return s.scrollY},scrollBy:function(e,t){s.scrollBy(e,t)}}}}),r("ephox.darwin.keyboard.KeySelection",["ephox.darwin.api.Responses","ephox.darwin.selection.CellSelection","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,a,i,u,s,c){var l=function(r,i,s,c,l){if(!a.eq(s,c)){var p=t.identify(s,c,i).getOr([]);if(p.length>0)return l(r,p,s,c),o.some(e.response(o.some(n.makeSitus(s,0,s,u.getEnd(s))),!0))}return o.none()};return{sync:function(e,t,n,r,u,s,c){return a.eq(n,u)&&r===s?o.none():i.closest(n,"td,th",t).bind(function(n){return i.closest(u,"td,th",t).bind(function(r){return l(e,t,n,r,c)})})},detect:l,update:function(e,n,r,o,a){return t.shiftSelection(o,e,n,a.firstSelectedSelector(),a.lastSelectedSelector()).map(function(e){return a.clear(r),a.selectRange(r,e.boxes(),e.start(),e.finish()),e.boxes()})}}}),r("ephox.darwin.keyboard.Carets",["ephox.katamari.api.Struct"],function(e){var t=e.immutableBag(["left","top","right","bottom"],[]);return{nu:t,moveUp:function(e,n){return t({left:e.left(),top:e.top()-n,right:e.right(),bottom:e.bottom()-n})},moveDown:function(e,n){return t({left:e.left(),top:e.top()+n,right:e.right(),bottom:e.bottom()+n})},moveBottomTo:function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n-r,right:e.right(),bottom:n})},moveTopTo:function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n,right:e.right(),bottom:n+r})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,n,r){return t({left:e.left()+n,top:e.top()+r,right:e.right()+n,bottom:e.bottom()+r})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}}}),r("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(t){return e.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},a=function(e,n){return t.some(e.getRect(n))};return{getBoxAt:function(e,i,u){return n.isElement(i)?a(e,i).map(o):n.isText(i)?(s=e,c=i,l=u,l>=0&&l<r.getEnd(c)?s.getRangedRect(c,l,c,l+1):l>0?s.getRangedRect(c,l-1,c,l):t.none()).map(o):t.none();var s,c,l},getEntireBox:function(e,i){return n.isElement(i)?a(e,i).map(o):n.isText(i)?e.getRangedRect(i,0,i,r.getEnd(i)).map(o):t.none()}}}),r("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n){var r=n.immutable("item","mode"),o=function(e,t,n,o){var i=void 0!==o?o:a;return e.property().parent(t).map(function(e){return r(e,i)})},a=function(e,t,n,o){var a=void 0!==o?o:i;return n.sibling(e,t).map(function(e){return r(e,a)})},i=function(e,t,n,o){var a=void 0!==o?o:i,u=e.property().children(t);return n.first(u).map(function(e){return r(e,a)})},u=[{current:o,next:a,fallback:t.none()},{current:a,next:i,fallback:t.some(o)},{current:i,next:i,fallback:t.some(a)}],s=function(t,n,r,o,a){var i=void 0!==a?a:u;return e.find(i,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return s(t,n,e,o)})})})};return{backtrack:o,sidestep:a,advance:i,go:s}}),r("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(e){return{left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(t){return t.length>0?e.some(t[t.length-1]):e.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(t){return t.length>0?e.some(t[0]):e.none()}}}}}),r("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n){var r=function(n,o,a,i,u,s){return t.go(n,o,i,u).bind(function(t){return s(t.item())?e.none():a(t.item())?e.some(t.item()):r(n,t.item(),a,t.mode(),u,s)})};return{left:function(e,o,a,i){return r(e,o,a,t.sidestep,n.left(),i)},right:function(e,o,a,i){return r(e,o,a,t.sidestep,n.right(),i)}}}),r("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n,r){var o=function(e,t){return 0===e.property().children(t).length},a=function(e,n,r,o){return t.left(e,n,r,o)},i=function(e,n,r,o){return t.right(e,n,r,o)};return{before:function(t,n,r){return a(t,n,e.curry(o,t),r)},after:function(t,n,r){return i(t,n,e.curry(o,t),r)},seekLeft:a,seekRight:i,walkers:function(){return{left:r.left,right:r.right}},walk:function(e,t,r,o,a){return n.go(e,t,r,o,a)},backtrack:n.backtrack,sidestep:n.sidestep,advance:n.advance}}),r("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(e,t){var n=e();return{gather:function(e,r,o){return t.gather(n,e,r,o)},before:function(e,r){return t.before(n,e,r)},after:function(e,r){return t.after(n,e,r)},seekLeft:function(e,r,o){return t.seekLeft(n,e,r,o)},seekRight:function(e,r,o){return t.seekRight(n,e,r,o)},walkers:function(){return t.walkers()},walk:function(e,r,o,a){return t.walk(n,e,r,o,a)}}}),r("ephox.darwin.keyboard.Retries",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.dom.DomGather","ephox.robin.api.dom.DomStructure","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!Math"],function(e,t,n,r,o,a,i,u,s,c){var l=n.generate([{none:[]},{retry:["caret"]}]),p=function(e,n,o){return s.closest(n,i.isBlock).fold(r.constant(!1),function(n){return t.getEntireBox(e,n).exists(function(e){return n=e,(t=o).left()<n.left()||c.abs(n.right()-t.left())<1||t.left()>n.right();var t,n})})},f={point:e.getTop,adjuster:function(t,n,r,o,a){var i=e.moveUp(a,5);return c.abs(r.top()-o.top())<1?l.retry(i):r.bottom()<a.top()?l.retry(i):r.bottom()===a.top()?l.retry(e.moveUp(a,1)):p(t,n,a)?l.retry(e.translate(i,5,0)):l.none()},move:e.moveUp,gather:a.before},d={point:e.getBottom,adjuster:function(t,n,r,o,a){var i=e.moveDown(a,5);return c.abs(r.bottom()-o.bottom())<1?l.retry(i):r.top()>a.bottom()?l.retry(i):r.top()===a.bottom()?l.retry(e.moveDown(a,1)):p(t,n,a)?l.retry(e.translate(i,5,0)):l.none()},move:e.moveDown,gather:a.after},m=function(e,n,r,a,i){if(0===i)return o.some(a);if(d=e,h=a.left(),g=n.point(a),d.elementFromPoint(h,g).filter(function(e){return"table"===u.name(e)}).isSome())return s=e,c=n,l=r,p=a,f=i-1,m(s,c,l,c.move(p,5),f);var s,c,l,p,f,d,h,g;return e.situsFromPoint(a.left(),n.point(a)).bind(function(u){return u.start().fold(o.none,function(u,s){return t.getEntireBox(e,u,s).bind(function(t){return n.adjuster(e,u,t,r,a).fold(o.none,function(t){return m(e,n,r,t,i-1)})}).orThunk(function(){return o.some(a)})},o.none)})},h=function(e,t,n){var r=e.move(n,5),a=m(t,e,n,r,100).getOr(r);return(i=e,u=a,s=t,i.point(u)>s.getInnerHeight()?o.some(i.point(u)-s.getInnerHeight()):i.point(u)<0?o.some(-i.point(u)):o.none()).fold(function(){return t.situsFromPoint(a.left(),e.point(a))},function(n){return t.scrollBy(0,n),t.situsFromPoint(a.left(),e.point(a)-n)});var i,u,s};return{tryUp:r.curry(h,f),tryDown:r.curry(h,d),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:r.constant(5)}}),r("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o){var a=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),i=function(e){return r.closest(e,"tr")};return{verify:function(e,u,s,c,l,p,f){return r.closest(c,"td,th",f).bind(function(s){return r.closest(u,"td,th",f).map(function(r){return n.eq(s,r)?n.eq(c,s)&&o.getEnd(s)===l?p(r):a.none("in same cell"):t.sharedOne(i,[s,r]).fold(function(){return function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right}(e,r,s)?a.success():p(r)},function(e){return p(r)})})}).getOr(a.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:a}}),r("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(e){return{point:e.immutable("element","offset"),delta:e.immutable("element","deltaOffset"),range:e.immutable("element","start","finish"),points:e.immutable("begin","end"),text:e.immutable("element","text")}}),r("ephox.sugar.api.search.ElementAddress",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,a,i,u,s){var c=r.immutable("ancestor","descendants","element","index"),l=r.immutable("parent","children","element","index"),p=function(n,r){return e.findIndex(n,t.curry(o.eq,r))};return{childOf:function(e,t){return a.closest(e,function(e){return s.parent(e).exists(function(e){return o.eq(e,t)})})},indexOf:p,indexInParent:function(e){return s.parent(e).bind(function(t){var n=s.children(t);return p(n,e).map(function(r){return l(t,n,e,r)})})},selectorsInParent:function(e,t){return s.parent(e).bind(function(n){var r=i.children(n,t);return p(r,e).map(function(t){return l(n,r,e,t)})})},descendantsInAncestor:function(e,t,n){return u.closest(e,t).bind(function(t){var r=i.descendants(t,n);return p(r,e).map(function(n){return c(t,r,e,n)})})}}}),r("ephox.darwin.navigation.BrTags",["ephox.darwin.navigation.BeforeAfter","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.ElementAddress","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,a,i,u,s,c){var l=function(e){return"br"===o.name(e)},p=function(e,t,r){return t(e,r).bind(function(e){return o.isText(e)&&0===a.get(e).trim().length?p(e,t,r):n.some(e)})},f=function(e,t,n,r){return(o=t,a=n,u.child(o,a).filter(l).orThunk(function(){return u.child(o,a-1).filter(l)})).bind(function(t){return r.traverse(t).fold(function(){return p(t,r.gather,e).map(r.relative)},function(e){return i.indexInParent(e).map(function(e){return c.on(e.parent(),e.index())})})});var o,a};return{tryBr:function(e,n,r,o){var a,i,u;return(l(n)?(a=e,i=n,u=o,u.traverse(i).orThunk(function(){return p(i,u.gather,a)}).map(u.relative)):f(e,n,r,o)).map(function(e){return{start:t.constant(e),finish:t.constant(e)}})},process:function(t){return e.cata(t,function(e){return n.none("BR ADT: none")},function(){return n.none()},function(e){return n.some(r.point(e,0))},function(e){return n.some(r.point(e,s.getEnd(e)))})}}}),r("ephox.darwin.keyboard.TableKeys",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.darwin.navigation.BrTags","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o,a,i,u,s,c){var l=u.detect(),p=function(t,n,o,i,u,l){return 0===l?a.none():m(t,n,o,i,u).bind(function(d){var m=t.fromSitus(d),h=r.verify(t,o,i,m.finish(),m.foffset(),u.failure,n);return r.cata(h,function(){return a.none()},function(){return a.some(d)},function(r){return s.eq(o,r)&&0===i?f(t,o,i,e.moveUp,u):p(t,n,r,0,u,l-1)},function(r){return s.eq(o,r)&&i===c.getEnd(r)?f(t,o,i,e.moveDown,u):p(t,n,r,c.getEnd(r),u,l-1)})})},f=function(e,r,o,a,i){return t.getBoxAt(e,r,o).bind(function(t){return d(e,i,a(t,n.getJumpSize()))})},d=function(e,t,n){return l.browser.isChrome()||l.browser.isSafari()||l.browser.isFirefox()||l.browser.isEdge()?t.otherRetry(e,n):l.browser.isIE()?t.ieRetry(e,n):a.none()},m=function(e,n,r,o,a){return t.getBoxAt(e,r,o).bind(function(t){return d(e,a,t)})};return{handle:function(e,t,n){return(u=e,s=t,c=n,u.getSelection().bind(function(e){return o.tryBr(s,e.finish(),e.foffset(),c).fold(function(){return a.some(i.point(e.finish(),e.foffset()))},function(t){var n=u.fromSitus(t),a=r.verify(u,e.finish(),e.foffset(),n.finish(),n.foffset(),c.failure,s);return o.process(a)})})).bind(function(r){return p(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)});var u,s,c}}}),r("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),r("ephox.darwin.keyboard.VerticalMovement",["ephox.darwin.api.Responses","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.TableKeys","ephox.darwin.selection.Util","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m){var h=u.detect(),g=function(e,t,r,o,u){return p.closest(o,"td,th",t).bind(function(o){return p.closest(o,"table",t).bind(function(l){if(d=u,m=l,!c.ancestor(d,function(e){return f.parent(e).exists(function(e){return s.eq(e,m)})}))return i.none();var d,m;return n.handle(e,t,r).bind(function(e){return p.closest(e.finish(),"td,th",t).map(function(t){return{start:a.constant(o),finish:a.constant(t),range:a.constant(e)}})})})})};return{navigate:function(t,n,o,a,u,s){return h.browser.isIE()?i.none():s(a,n).orThunk(function(){return g(t,n,o,a,u).map(function(t){var n=t.range();return e.response(i.some(r.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),!0)})})},select:function(e,n,r,o,a,i,u){return g(e,r,o,a,i).bind(function(e){return t.detect(n,r,e.start(),e.finish(),u)})},firstUpCheck:function(t,n){return p.closest(t,"tr",n).bind(function(t){return p.closest(t,"table",n).bind(function(n){var o=l.descendants(n,"tr");return s.eq(t,o[0])?f.prevSibling(n).bind(m.last).map(function(t){var n=d.getEnd(t);return e.response(i.some(r.makeSitus(t,n,t,n)),!0)}):i.none()})})},lastDownCheck:function(t,n){return p.closest(t,"tr",n).bind(function(t){return p.closest(t,"table",n).bind(function(n){var o=l.descendants(n,"tr");return s.eq(t,o[o.length-1])?f.nextSibling(n).bind(m.first).map(function(t){return e.response(i.some(r.makeSitus(t,0,t,0)),!0)}):i.none()})})}}}),r("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r){var o=function(e,t){return r.closest(e,"td,th",t)};return function(r,a,i,u){var s=t.none(),c=function(){s=t.none()};return{mousedown:function(e){u.clear(a),s=o(e.target(),i)},mouseover:function(t){s.each(function(s){u.clear(a),o(t.target(),i).each(function(t){var o=e.identify(s,t,i).getOr([]);(o.length>1||1===o.length&&!n.eq(s,t))&&(u.selectRange(a,o,s,t),r.selectContents(t))})})},mouseup:function(){s.each(c)}}}}),r("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){return{down:{traverse:r.nextSibling,gather:n.after,relative:o.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:t.adt.failedDown},up:{traverse:r.prevSibling,gather:n.before,relative:o.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:t.adt.failedUp}}}),r("ephox.darwin.api.InputHandlers",["ephox.darwin.api.Responses","ephox.darwin.api.SelectionKeys","ephox.darwin.api.WindowBridge","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.VerticalMovement","ephox.darwin.mouse.MouseSelection","ephox.darwin.navigation.KeyDirection","ephox.darwin.selection.CellSelection","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,a,i,u,s,c,l,p,f){var d=p.immutable("rows","cols");return{mouse:function(e,t,r,o){var i=n(e),u=a(i,t,r,o);return{mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},keyboard:function(a,p,m,h){var g=n(a),x=function(){return h.clear(p),c.none()};return{keydown:function(n,a,v,b,w,y){var k=n.raw().which,S=!0===n.raw().shiftKey;return u.retrieve(p,h.selectedSelector()).fold(function(){return t.isDown(k)&&S?s.curry(o.select,g,p,m,i.down,b,a,h.selectRange):t.isUp(k)&&S?s.curry(o.select,g,p,m,i.up,b,a,h.selectRange):t.isDown(k)?s.curry(o.navigate,g,m,i.down,b,a,o.lastDownCheck):t.isUp(k)?s.curry(o.navigate,g,m,i.up,b,a,o.firstUpCheck):c.none},function(n){var o=function(o){return function(){return l.findMap(o,function(e){return r.update(e.rows(),e.cols(),p,n,h)}).fold(function(){return u.getEdges(p,h.firstSelectedSelector(),h.lastSelectedSelector()).map(function(n){var r=t.isDown(k)||y.isForward(k)?f.after:f.before;return g.setRelativeSelection(f.on(n.first(),0),r(n.table())),h.clear(p),e.response(c.none(),!0)})},function(t){return c.some(e.response(c.none(),!0))})}};return t.isDown(k)&&S?o([d(1,0)]):t.isUp(k)&&S?o([d(-1,0)]):y.isBackward(k)&&S?o([d(0,-1),d(-1,0)]):y.isForward(k)&&S?o([d(0,1),d(1,0)]):t.isNavigation(k)&&!1===S?x:c.none})()},keyup:function(e,n,o,a,i){return u.retrieve(p,h.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?c.none():t.isNavigation(u)?r.sync(p,m,n,o,a,i,h.selectRange):c.none()},c.none)}}}}}),r("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(e,t,n,r){return{add:function(n,r){e.each(r,function(e){t.add(n,e)})},remove:function(n,r){e.each(r,function(e){t.remove(n,e)})},toggle:function(n,r){e.each(r,function(e){t.toggle(n,e)})},hasAll:function(n,r){return e.forall(r,function(e){return t.has(n,e)})},hasAny:function(n,r){return e.exists(r,function(e){return t.has(n,e)})},get:function(e){return n.supports(e)?function(e){for(var t=e.dom().classList,n=new r(t.length),o=0;o<t.length;o++)n[o]=t.item(o);return n}(e):n.get(e)}}}),r("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(e,t){return{addClass:function(t){return function(n){e.add(n,t)}},removeClass:function(t){return function(n){e.remove(n,t)}},removeClasses:function(e){return function(n){t.remove(n,e)}},hasClass:function(t){return function(n){return e.has(n,t)}}}}),r("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,o){return{byClass:function(t){var a=r.addClass(t.selected()),i=r.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]),u=function(n){var r=o.descendants(n,t.selectedSelector());e.each(r,i)};return{clear:u,selectRange:function(r,o,i,s){u(r),e.each(o,a),n.add(i,t.firstSelected()),n.add(s,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(n){var r=function(e){t.remove(e,n.selected()),t.remove(e,n.firstSelected()),t.remove(e,n.lastSelected())},a=function(e){t.set(e,n.selected(),"1")},i=function(t){var a=o.descendants(t,n.selectedSelector());e.each(a,r)};return{clear:i,selectRange:function(r,o,u,s){i(r),e.each(o,a),t.set(u,n.firstSelected(),"1"),t.set(s,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}}}),r("tinymce.plugins.table.selection.CellSelection",["ephox.darwin.api.InputHandlers","ephox.darwin.api.SelectionAnnotation","ephox.darwin.api.SelectionKeys","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.SelectionDirection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.selection.Ephemera"],function(e,t,n,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x){return function(v,b){var w=a.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),y=o.none(),k=t.byAttr(x);v.on("init",function(t){var a=v.getWin(),x=h.getBody(v),S=h.getIsRoot(v),C=e.mouse(a,x,S,k),T=e.keyboard(a,x,S,k),R=function(e,t){t.kill()&&e.kill(),t.selection().each(function(e){var t=d.relative(e.start(),e.finish()),n=m.asLtrRange(a,t);v.selection.setRng(n)})},A=function(e){var t=E(e);if(t.raw().shiftKey&&n.isNavigation(t.raw().which)){var r=v.selection.getRng(),o=s.fromDom(r.startContainer),a=s.fromDom(r.endContainer);T.keyup(t,o,r.startOffset,a,r.endOffset).each(function(e){R(t,e)})}},D=function(e){return!(p.has(e,"data-mce-bogus")||"br"===c.name(e)||c.isText(e)&&0===l.get(e).length)},O=function(e){var t=E(e);b().each(function(e){e.hideBars()}),40===e.which&&function(){var e=s.fromDom(v.getBody()),t=function(e){return f.prevSibling(e).bind(function(e){return D(e)?o.some(e):t(e)})};return f.lastChild(e).bind(function(e){return D(e)?o.some(e):t(e)})}().each(function(e){"table"===c.name(e)&&(v.settings.forced_root_block?v.dom.add(v.getBody(),v.settings.forced_root_block,v.settings.forced_root_block_attrs,"<br/>"):v.dom.add(v.getBody(),"br"))});var r=v.selection.getRng(),a=s.fromDom(v.selection.getStart()),i=s.fromDom(r.startContainer),u=s.fromDom(r.endContainer),l=g.directionAt(a).isRtl()?n.rtl:n.ltr;T.keydown(t,i,r.startOffset,u,r.endOffset,l).each(function(e){R(t,e)}),b().each(function(e){e.showBars()})},E=function(e){var t=s.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},a=r.compose(o,n);return{target:r.constant(t),x:r.constant(e.x),y:r.constant(e.y),stop:n,prevent:o,kill:a,raw:r.constant(e)}},N=function(e){return 0===e.button},B=function(e){N(e)&&C.mousedown(E(e))},F=function(e){(void 0===(t=e).buttons||0!=(1&t.buttons))&&C.mouseover(E(e));var t},P=function(e){N&&C.mouseup(E(e))};v.on("mousedown",B),v.on("mouseover",F),v.on("mouseup",P),v.on("keyup",A),v.on("keydown",O),v.on("nodechange",function(){var e=v.selection,t=s.fromDom(e.getStart()),n=s.fromDom(e.getEnd()),a=i.table(t),c=i.table(n);a.bind(function(e){return c.bind(function(t){return u.eq(e,t)?o.some(!0):o.none()})}).fold(function(){k.clear(x)},r.noop)}),y=o.some(w({mousedown:B,mouseover:F,mouseup:P,keyup:A,keydown:O}))});return{clear:k.clear,destroy:function(){y.each(function(e){})}}}}),r("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r){return function(o){return{get:function(){var a=t.getBody(o);return e.retrieve(a,n.selectedSelector()).fold(function(){return void 0===o.selection.getStart()?r.none():r.single(o.selection)},function(e){return r.multiple(e)})}}}}),r("tinymce.plugins.table.ui.Buttons",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.ui.TableDialog"],function(e,t,n){var r=t.each;return{addButtons:function(t){var o=[];r("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?o.push({text:"-"}):o.push(t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:o});function a(e){return function(){t.execCommand(e)}}t.addButton("tableprops",{title:"Table properties",onclick:e.curry(n.open,t,!0),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")})},addToolbars:function(e){var t=e.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},t))}}}),r("tinymce.plugins.table.ui.MenuItems",["ephox.katamari.api.Fun","ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Element","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog"],function(e,t,n,r,o,a,i,u){return{addMenuItems:function(s,c){var l=n.none(),p=[],f=[],d=[],m=[],h=function(e){e.disabled(!0)},g=function(e){e.disabled(!1)},x=function(){var e=this;p.push(e),l.fold(function(){h(e)},function(t){g(e)})},v=function(){var e=this;f.push(e),l.fold(function(){h(e)},function(t){g(e)})};s.on("init",function(){s.on("nodechange",function(e){var a=n.from(s.dom.getParent(s.selection.getStart(),"th,td"));(l=a.bind(function(e){var t=o.fromDom(e);return r.table(t).map(function(e){return i.forMenu(c,e,t)})})).fold(function(){t.each(p,h),t.each(f,h),t.each(d,h),t.each(m,h)},function(e){t.each(p,g),t.each(f,g),t.each(d,function(t){t.disabled(e.mergable().isNone())}),t.each(m,function(t){t.disabled(e.unmergable().isNone())})})})});var b=function(e,t,n,r){var o,a,i,u,s,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"==r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),a=0;a<10;a++)for(o=0;o<10;o++)u=c.rows[a].childNodes[o].firstChild,s=(l?o>=t:o<=t)&&a<=n,e.dom.toggleClass(u,"mce-active",s),s&&(i=u);return i.parentNode},w=!1===s.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:e.curry(u.open,s)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),u.open(s))},onshow:function(){b(s,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");s.dom.removeClass(e,"mce-active"),s.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(b(s,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),s.undoManager.transact(function(){a.insert(s,t.lastX+1,t.lastY+1)}),s.addVisual())}}]};function y(e){return function(){s.execCommand(e)}}var k={text:"Table properties",context:"table",onPostRender:x,onclick:e.curry(u.open,s,!0)},S={text:"Delete table",context:"table",onPostRender:x,cmd:"mceTableDelete"},C={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:y("mceTableInsertRowBefore"),onPostRender:v},{text:"Insert row after",onclick:y("mceTableInsertRowAfter"),onPostRender:v},{text:"Delete row",onclick:y("mceTableDeleteRow"),onPostRender:v},{text:"Row properties",onclick:y("mceTableRowProps"),onPostRender:v},{text:"-"},{text:"Cut row",onclick:y("mceTableCutRow"),onPostRender:v},{text:"Copy row",onclick:y("mceTableCopyRow"),onPostRender:v},{text:"Paste row before",onclick:y("mceTablePasteRowBefore"),onPostRender:v},{text:"Paste row after",onclick:y("mceTablePasteRowAfter"),onPostRender:v}]},T={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:y("mceTableInsertColBefore"),onPostRender:v},{text:"Insert column after",onclick:y("mceTableInsertColAfter"),onPostRender:v},{text:"Delete column",onclick:y("mceTableDeleteCol"),onPostRender:v}]},R={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:y("mceTableCellProps"),onPostRender:v},{text:"Merge cells",onclick:y("mceTableMergeCells"),onPostRender:function(){var e=this;d.push(e),l.fold(function(){h(e)},function(t){e.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:y("mceTableSplitCells"),onPostRender:function(){var e=this;m.push(e),l.fold(function(){h(e)},function(t){e.disabled(t.unmergable().isNone())})}}]};s.addMenuItem("inserttable",w),s.addMenuItem("tableprops",k),s.addMenuItem("deletetable",S),s.addMenuItem("row",C),s.addMenuItem("column",T),s.addMenuItem("cell",R)}}}),r("tinymce.plugins.table.Plugin",["tinymce.core.PluginManager","tinymce.plugins.table.actions.Clipboard","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.TableActions","tinymce.plugins.table.actions.TableCommands","tinymce.plugins.table.actions.ResizeHandler","tinymce.plugins.table.queries.TabContext","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.Selections","tinymce.plugins.table.ui.Buttons","tinymce.plugins.table.ui.MenuItems"],function(e,t,n,r,o,a,i,u,s,c,l,p){return e.add("table",function(e){var f=a(e),d=u(e,f.lazyResize),m=r(e,f.lazyWire),h=c(e);o.registerCommands(e,m,d,h),t.registerEvents(e,h,m,d),p.addMenuItems(e,h),l.addButtons(e),l.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(s.firstSelected()),e.serializer.addTempAttr(s.lastSelected())}),!1!==e.settings.table_tab_navigation&&e.on("keydown",function(t){i.handle(t,e,m,f.lazyWire)}),e.on("remove",function(){f.destroy(),d.destroy()}),this.insertTable=function(t,r){return n.insert(e,t,r)},this.setClipboardRows=o.setClipboardRows,this.getClipboardRows=o.getClipboardRows}),function(){}}),n("tinymce.plugins.table.Plugin")()}();