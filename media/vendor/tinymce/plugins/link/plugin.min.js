!function(){var t={},e=function(e,n,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;t[e]={deps:n,defn:i,instance:void 0}},n=function(e){var i=t[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&function(e){for(var i=t[e],o=i.deps,l=i.defn,r=o.length,a=new Array(r),u=0;u<r;++u)a[u]=n(o[u]);var s=l.apply(null,a);if(void 0===s)throw"module ["+e+"] returned undefined";i.instance=s}(e),i.instance},i=e,o=function(t,e){i(t,[],function(){return e})};o("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.PluginManager")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.util.VK")}),i("tinymce.plugins.link.api.Settings",[],function(){var t=function(t){return t.target_list},e=function(t){return t.rel_list},n=function(t){return t.link_class_list};return{assumeExternalTargets:function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},hasContextToolbar:function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},getLinkList:function(t){return t.link_list},hasDefaultLinkTarget:function(t){return"string"==typeof t.default_link_target},getDefaultLinkTarget:function(t){return t.default_link_target},getTargetList:t,setTargetList:function(t,e){t.settings.target_list=e},shouldShowTargetList:function(e){return!1!==t(e)},getRelList:e,hasRelList:function(t){return void 0!==e(t)},getLinkClassList:n,hasLinkClassList:function(t){return void 0!==n(t)},shouldShowLinkTitle:function(t){return!1!==t.link_title},allowUnsafeLinkTarget:function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target}}}),o("global!document",document),o("global!window",window),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.dom.DOMUtils")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.Env")}),i("tinymce.plugins.link.core.OpenUrl",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(t,e,n,i){return{open:function(o){if(!i.ie||i.ie>10){var l=t.createElement("a");l.target="_blank",l.href=o,l.rel="noreferrer noopener";var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,null),s=l,c=r,t.body.appendChild(s),s.dispatchEvent(c),t.body.removeChild(s)}else{var a=e.open("","_blank");if(a){a.opener=null;var u=a.document;u.open(),u.write('<meta http-equiv="refresh" content="0; url='+n.DOM.encode(o)+'">'),u.close()}}var s,c}}}),o("global!RegExp",RegExp),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.util.Tools")}),i("tinymce.plugins.link.core.Utils",["global!RegExp","tinymce.core.util.Tools","tinymce.plugins.link.api.Settings"],function(t,e,n){var i=function(t,n){var i,o=["noopener"],l=t?t.split(/\s+/):[],r=function(t){return t.filter(function(t){return-1===e.inArray(o,t)})};return(l=n?(i=l,(i=r(i)).length?i.concat(o):o):r(l)).length?(a=l,e.trim(a.sort().join(" "))):null;var a},o=function(t,e){return e=e||t.selection.getNode(),r(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},l=function(t){return t&&"A"===t.nodeName&&t.href},r=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},a=function(t,e){var n,i;(i=t.dom.select("img",e)[0])&&(n=t.dom.getParents(i,"a[href]",e)[0])&&(n.parentNode.insertBefore(i,n),t.dom.remove(n))},u=function(t,e,n){var i,o;(o=t.dom.select("img",e)[0])&&(i=t.dom.create("a",n),o.parentNode.insertBefore(i,o),i.appendChild(o))};return{link:function(t,e){return function(l){t.undoManager.transact(function(){var a=t.selection.getNode(),s=o(t,a),c={href:l.href,target:l.target?l.target:null,rel:l.rel?l.rel:null,class:l.class?l.class:null,title:l.title?l.title:null};n.hasRelList(t.settings)||!1!==n.allowUnsafeLinkTarget(t.settings)||(c.rel=i(c.rel,"_blank"===c.target)),l.href===e.href&&(e.attach(),e={}),s?(t.focus(),l.hasOwnProperty("text")&&("innerText"in s?s.innerText=l.text:s.textContent=l.text),t.dom.setAttribs(s,c),t.selection.select(s),t.undoManager.add()):r(a)?u(t,a,c):l.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",c,t.dom.encode(l.text))):t.execCommand("mceInsertLink",!1,c)})}},unlink:function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();r(e)?a(t,e):t.execCommand("unlink")})}},isLink:l,hasLinks:function(t){return e.grep(t,l).length>0},isOnlyTextSelected:function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},getAnchorElement:o,getAnchorText:function(t,e){var n=e?e.innerText||e.textContent:t.getContent({format:"text"});return n.replace(/\uFEFF/g,"")},toggleTargetRules:i}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.util.Delay")}),i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(t){return t("tinymce.util.XHR")}),i("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.Utils"],function(t,e,n,i,o){var l={},r=function(t,n,i){var o=function(t,i){return i=i||[],e.each(t,function(t){var e={text:t.text||t.title};t.menu?e.menu=o(t.menu):(e.value=t.value,n&&n(e)),i.push(e)}),i};return o(t,i||[])},a=function(e,n,i){var o=e.selection.getRng();t.setEditorTimeout(e,function(){e.windowManager.confirm(n,function(t){e.selection.setRng(o),i(t)})})},u=function(t,n){var u,s,c,f,g,d,m,p,v,h,k,y={},x=t.selection,b=t.dom,T=function(t){var e=c.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),c.find("#href").value(t.control.value())},L=function(){s||!f||y.text||this.parent().parent().find("#text")[0].value(this.value())};f=o.isOnlyTextSelected(x.getContent()),u=o.getAnchorElement(t),y.text=s=o.getAnchorText(t.selection,u),y.href=u?b.getAttrib(u,"href"):"",u?y.target=b.getAttrib(u,"target"):i.hasDefaultLinkTarget(t.settings)&&(y.target=i.getDefaultLinkTarget(t.settings)),(k=b.getAttrib(u,"rel"))&&(y.rel=k),(k=b.getAttrib(u,"class"))&&(y.class=k),(k=b.getAttrib(u,"title"))&&(y.title=k),f&&(g={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){y.text=this.value()}}),n&&(d={type:"listbox",label:"Link list",values:r(n,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:T,value:t.convertURL(y.href,"href"),onPostRender:function(){d=this}}),i.shouldShowTargetList(t.settings)&&(void 0===i.getTargetList(t.settings)&&i.setTargetList(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),p={name:"target",type:"listbox",label:"Target",values:r(i.getTargetList(t.settings))}),i.hasRelList(t.settings)&&(m={name:"rel",type:"listbox",label:"Rel",values:r(i.getRelList(t.settings),function(e){!1===i.allowUnsafeLinkTarget(t.settings)&&(e.value=o.toggleTargetRules(e.value,"_blank"===y.target))})}),i.hasLinkClassList(t.settings)&&(v={name:"class",type:"listbox",label:"Class",values:r(i.getLinkClassList(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),i.shouldShowLinkTitle(t.settings)&&(h={name:"title",type:"textbox",label:"Title",value:y.title}),c=t.windowManager.open({title:"Insert link",data:y,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(n){var i=n.meta||{};d&&d.value(t.convertURL(this.value(),"href")),e.each(n.meta,function(t,e){var n=c.find("#"+e);"text"===e?0===s.length&&(n.value(t),y.text=t):n.value(t)}),i.attach&&(l={href:this.value(),attach:i.attach}),i.text||L.call(this)},onkeyup:L,onbeforecall:function(t){t.meta=c.toJSON()}},g,h,function(n){var i=[];if(e.each(t.dom.select("a:not([href])"),function(t){var e=t.name||t.id;e&&i.push({text:e,value:"#"+e,selected:-1!==n.indexOf("#"+e)})}),i.length)return i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:T}}(y.href),d,m,p,v],onSubmit:function(n){var r=i.assumeExternalTargets(t.settings),u=o.link(t,l),c=o.unlink(t),g=e.extend({},y,n.data),d=g.href;d?(f&&g.text!==s||delete g.text,d.indexOf("@")>0&&-1===d.indexOf("//")&&-1===d.indexOf("mailto:")?a(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(g.href="mailto:"+d),u(g)}):!0===r&&!/^\w+:/i.test(d)||!1===r&&/^\s*www[\.|\d\.]/i.test(d)?a(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(g.href="http://"+d),u(g)}):u(g)):c()}})};return{open:function(t){!function(t,e){var o=i.getLinkList(t.settings);"string"==typeof o?n.send({url:o,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof o?o(function(n){e(t,n)}):e(t,o)}(t,u)}}}),i("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils","tinymce.plugins.link.ui.Dialog"],function(t,e,n,i,o){var l=function(t,e){return t.dom.getParent(e,"a[href]")},r=function(t){return l(t,t.selection.getStart())},a=function(t,e){if(e){var i=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(i)){var o=t.$(i);o.length&&t.selection.scrollIntoView(o[0],!0)}else n.open(e.href)}};return{openDialog:function(t){return function(){o.open(t)}},gotoSelectedLink:function(t){return function(){a(t,r(t))}},leftClickedOnAHref:function(t){return function(n){var o,l,r;return!!(e.hasContextToolbar(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&i.isLink(n)&&3===(r=(l=(o=t.selection).getRng()).startContainer).nodeType&&o.isCollapsed()&&l.startOffset>0&&l.startOffset<r.data.length)}},setupGotoLinks:function(e){e.on("click",function(n){var i=l(e,n.target);i&&t.metaKeyPressed(n)&&(n.preventDefault(),a(e,i))}),e.on("keydown",function(t){var n=r(e);n&&13===t.keyCode&&(i=t,!0===i.altKey&&!1===i.shiftKey&&!1===i.ctrlKey&&!1===i.metaKey)&&(t.preventDefault(),a(e,n));var i})},toggleActiveState:function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!i.getAnchorElement(t,n.element))})}},toggleViewLinkState:function(t){return function(){var e=this,n=function(t){i.hasLinks(t.parents)?e.show():e.hide()};i.hasLinks(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}}}}),i("tinymce.plugins.link.api.Commands",["tinymce.plugins.link.core.Actions"],function(t){return{register:function(e){e.addCommand("mceLink",t.openDialog(e))}}}),i("tinymce.plugins.link.core.Keyboard",["tinymce.plugins.link.core.Actions"],function(t){return{setup:function(e){e.addShortcut("Meta+K","",t.openDialog(e))}}}),i("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(t,e){return{setupButtons:function(n){n.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:t.openDialog(n),onpostrender:t.toggleActiveState(n)}),n.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:e.unlink(n),onpostrender:t.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:t.gotoSelectedLink(n)})},setupMenuItems:function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:t.gotoSelectedLink(e),onPostRender:t.toggleViewLinkState(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:t.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(e){e.addContextToolbar&&e.addContextToolbar(t.leftClickedOnAHref(e),"openlink | link unlink")}}}),i("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.api.Commands","tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Keyboard","tinymce.plugins.link.ui.Controls"],function(t,e,n,i,o){return t.add("link",function(t){o.setupButtons(t),o.setupMenuItems(t),o.setupContextToolbars(t),n.setupGotoLinks(t),e.register(t),i.setup(t)}),function(){}}),n("tinymce.plugins.link.Plugin")()}();