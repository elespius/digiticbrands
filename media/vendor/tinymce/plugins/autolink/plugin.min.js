!function(){var n={},e=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},t=function(e){var i=n[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&function(e){for(var i=n[e],o=i.deps,r=i.defn,a=o.length,l=new Array(a),u=0;u<a;++u)l[u]=t(o[u]);var c=r.apply(null,l);if(void 0===c)throw"module ["+e+"] returned undefined";i.instance=c}(e),i.instance},i=e;o="global!tinymce.util.Tools.resolve",r=tinymce.util.Tools.resolve,i(o,[],function(){return r});var o,r;i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),i("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(n){return n.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(n){return n.getParam("default_link_target","")}}}),i("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(n,e,t){var i=function(n,e){if(e<0&&(e=0),3===n.nodeType){var t=n.data.length;e>t&&(e=t)}return e},o=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setStart(e,i(e,t)):n.setStartBefore(e)},r=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setEnd(e,i(e,t)):n.setEndAfter(e)},a=function(n,e,i){var a,l,u,c,f,s,d,g,m,y,h=t.getAutoLinkPattern(n),p=t.getDefaultLinkTarget(n);if("A"!==n.selection.getNode().tagName){if((a=n.selection.getRng(!0).cloneRange()).startOffset<5){if(!(g=a.endContainer.previousSibling)){if(!a.endContainer.firstChild||!a.endContainer.firstChild.nextSibling)return;g=a.endContainer.firstChild.nextSibling}if(m=g.length,o(a,g,m),r(a,g,m),a.endOffset<5)return;l=a.endOffset,c=g}else{if(3!==(c=a.endContainer).nodeType&&c.firstChild){for(;3!==c.nodeType&&c.firstChild;)c=c.firstChild;3===c.nodeType&&(o(a,c,0),r(a,c,c.nodeValue.length))}l=1===a.endOffset?2:a.endOffset-1-e}u=l;do{o(a,c,l>=2?l-2:0),r(a,c,l>=1?l-1:0),l-=1,y=a.toString()}while(" "!==y&&""!==y&&160!==y.charCodeAt(0)&&l-2>=0&&y!==i);(v=a.toString())===i||" "===v||160===v.charCodeAt(0)?(o(a,c,l),r(a,c,u),l+=1):0===a.startOffset?(o(a,c,0),r(a,c,u)):(o(a,c,l),r(a,c,u));var v;"."===(s=a.toString()).charAt(s.length-1)&&r(a,c,u-1),(d=(s=a.toString().trim()).match(h))&&("www."===d[1]?d[1]="http://www.":/@$/.test(d[1])&&!/^mailto:/.test(d[1])&&(d[1]="mailto:"+d[1]),f=n.selection.getBookmark(),n.selection.setRng(a),n.execCommand("createlink",!1,d[1]+d[2]),p&&n.dom.setAttrib(n.selection.getNode(),"target",p),n.selection.moveToBookmark(f),n.nodeChanged())}};return{setup:function(e){var t;e.on("keydown",function(n){13!==n.keyCode||a(e,-1,"",!1)}),n.ie?e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){41!==n.keyCode||a(e,-1,"(",!0)}),e.on("keyup",function(n){32!==n.keyCode||a(e,0,"",!0)}))}}}),i("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(n,e,t){return e.add("autolink",function(n){t.setup(n)}),function(){}}),t("tinymce.plugins.autolink.Plugin")()}();