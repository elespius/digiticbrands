!function(){var n,e,t={},i=function(n,e,i){if("string"!=typeof n)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+n;if(void 0===i)throw"no definition function for "+n;t[n]={deps:e,defn:i,instance:void 0}},o=function(n){var e=t[n];if(void 0===e)throw"module ["+n+"] was undefined";return void 0===e.instance&&function(n){for(var e=t[n],i=e.deps,r=e.defn,u=i.length,a=new Array(u),f=0;f<u;++f)a[f]=o(i[f]);var l=r.apply(null,a);if(void 0===l)throw"module ["+n+"] returned undefined";e.instance=l}(n),e.instance},r=i;n="global!tinymce.util.Tools.resolve",e=tinymce.util.Tools.resolve,r(n,[],function(){return e}),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),r("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(n){return n.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(n){return n.getParam("default_link_target","")}}}),r("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(n,e,t){var i=function(n,e){if(e<0&&(e=0),3===n.nodeType){var t=n.data.length;e>t&&(e=t)}return e},o=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setStart(e,i(e,t)):n.setStartBefore(e)},r=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setEnd(e,i(e,t)):n.setEndAfter(e)},u=function(n,e,i){var u,a,f,l,c,s,d,g,m,y,h=t.getAutoLinkPattern(n),p=t.getDefaultLinkTarget(n);if("A"!==n.selection.getNode().tagName){if((u=n.selection.getRng(!0).cloneRange()).startOffset<5){if(!(g=u.endContainer.previousSibling)){if(!u.endContainer.firstChild||!u.endContainer.firstChild.nextSibling)return;g=u.endContainer.firstChild.nextSibling}if(m=g.length,o(u,g,m),r(u,g,m),u.endOffset<5)return;a=u.endOffset,l=g}else{if(3!==(l=u.endContainer).nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(o(u,l,0),r(u,l,l.nodeValue.length))}a=1===u.endOffset?2:u.endOffset-1-e}f=a;do{o(u,l,a>=2?a-2:0),r(u,l,a>=1?a-1:0),a-=1,y=u.toString()}while(" "!==y&&""!==y&&160!==y.charCodeAt(0)&&a-2>=0&&y!==i);!function(n,e){return n===e||" "===n||160===n.charCodeAt(0)}(u.toString(),i)?0===u.startOffset?(o(u,l,0),r(u,l,f)):(o(u,l,a),r(u,l,f)):(o(u,l,a),r(u,l,f),a+=1),"."===(s=u.toString()).charAt(s.length-1)&&r(u,l,f-1),(d=(s=u.toString().trim()).match(h))&&("www."===d[1]?d[1]="http://www.":/@$/.test(d[1])&&!/^mailto:/.test(d[1])&&(d[1]="mailto:"+d[1]),c=n.selection.getBookmark(),n.selection.setRng(u),n.execCommand("createlink",!1,d[1]+d[2]),p&&n.dom.setAttrib(n.selection.getNode(),"target",p),n.selection.moveToBookmark(c),n.nodeChanged())}};return{setup:function(e){var t;e.on("keydown",function(n){if(13===n.keyCode)return function(n){u(n,-1,"",!1)}(e)}),n.ie?e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){if(41===n.keyCode)return function(n){u(n,-1,"(",!0)}(e)}),e.on("keyup",function(n){if(32===n.keyCode)return function(n){u(n,0,"",!0)}(e)}))}}}),r("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(n,e,t){return e.add("autolink",function(n){t.setup(n)}),function(){}}),o("tinymce.plugins.autolink.Plugin")()}();