!function(){var n={},e=function(e){for(var t=n[e],o=t.deps,r=t.defn,u=o.length,a=new Array(u),l=0;l<u;++l)a[l]=i(o[l]);var f=r.apply(null,a);if(void 0===f)throw"module ["+e+"] returned undefined";t.instance=f},t=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},i=function(t){var i=n[t];if(void 0===i)throw"module ["+t+"] was undefined";return void 0===i.instance&&e(t),i.instance},o=function(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;++r)o[r]=i(n[r]);e.apply(null,o)};({}).bolt={module:{api:{define:t,require:o,demand:i}}};var r=t;!function(n,e){r(n,[],function(){return e})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),r("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(n){return n.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(n){return n.getParam("default_link_target","")}}}),r("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(n,e,t){var i=function(n,e){return n===e||" "===n||160===n.charCodeAt(0)},o=function(n){c(n,-1,"(",!0)},r=function(n){c(n,0,"",!0)},u=function(n){c(n,-1,"",!1)},a=function(n,e){if(e<0&&(e=0),3===n.nodeType){var t=n.data.length;e>t&&(e=t)}return e},l=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setStart(e,a(e,t)):n.setStartBefore(e)},f=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setEnd(e,a(e,t)):n.setEndAfter(e)},c=function(n,e,o){var r,u,a,c,d,s,g,m,y,p,h=t.getAutoLinkPattern(n),v=t.getDefaultLinkTarget(n);if("A"!==n.selection.getNode().tagName){if((r=n.selection.getRng(!0).cloneRange()).startOffset<5){if(!(m=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;m=r.endContainer.firstChild.nextSibling}if(y=m.length,l(r,m,y),f(r,m,y),r.endOffset<5)return;u=r.endOffset,c=m}else{if(3!==(c=r.endContainer).nodeType&&c.firstChild){for(;3!==c.nodeType&&c.firstChild;)c=c.firstChild;3===c.nodeType&&(l(r,c,0),f(r,c,c.nodeValue.length))}u=1===r.endOffset?2:r.endOffset-1-e}a=u;do{l(r,c,u>=2?u-2:0),f(r,c,u>=1?u-1:0),u-=1,p=r.toString()}while(" "!==p&&""!==p&&160!==p.charCodeAt(0)&&u-2>=0&&p!==o);i(r.toString(),o)?(l(r,c,u),f(r,c,a),u+=1):0===r.startOffset?(l(r,c,0),f(r,c,a)):(l(r,c,u),f(r,c,a)),"."===(s=r.toString()).charAt(s.length-1)&&f(r,c,a-1),(g=(s=r.toString().trim()).match(h))&&("www."===g[1]?g[1]="http://www.":/@$/.test(g[1])&&!/^mailto:/.test(g[1])&&(g[1]="mailto:"+g[1]),d=n.selection.getBookmark(),n.selection.setRng(r),n.execCommand("createlink",!1,g[1]+g[2]),v&&n.dom.setAttrib(n.selection.getNode(),"target",v),n.selection.moveToBookmark(d),n.nodeChanged())}};return{setup:function(e){var t;e.on("keydown",function(n){if(13===n.keyCode)return u(e)}),n.ie?e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){if(41===n.keyCode)return o(e)}),e.on("keyup",function(n){if(32===n.keyCode)return r(e)}))}}}),r("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(n,e,t){return e.add("autolink",function(n){t.setup(n)}),function(){}}),i("tinymce.plugins.autolink.Plugin")()}();