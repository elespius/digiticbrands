!function(){var n={},e=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},t=function(e){var i=n[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&function(e){for(var i=n[e],o=i.deps,r=i.defn,u=o.length,a=new Array(u),l=0;l<u;++l)a[l]=t(o[l]);var f=r.apply(null,a);if(void 0===f)throw"module ["+e+"] returned undefined";i.instance=f}(e),i.instance},i=function(n,e){for(var i=n.length,o=new Array(i),r=0;r<i;++r)o[r]=t(n[r]);e.apply(null,o)};({}).bolt={module:{api:{define:e,require:i,demand:t}}};var o=e;!function(n,e){o(n,[],function(){return e})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),o("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),o("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),o("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(n){return n.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(n){return n.getParam("default_link_target","")}}}),o("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(n,e,t){var i=function(n,e){if(e<0&&(e=0),3===n.nodeType){var t=n.data.length;e>t&&(e=t)}return e},o=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setStart(e,i(e,t)):n.setStartBefore(e)},r=function(n,e,t){1!==e.nodeType||e.hasChildNodes()?n.setEnd(e,i(e,t)):n.setEndAfter(e)},u=function(n,e,i){var u,a,l,f,c,d,s,g,m,y,p=t.getAutoLinkPattern(n),h=t.getDefaultLinkTarget(n);if("A"!==n.selection.getNode().tagName){if((u=n.selection.getRng(!0).cloneRange()).startOffset<5){if(!(g=u.endContainer.previousSibling)){if(!u.endContainer.firstChild||!u.endContainer.firstChild.nextSibling)return;g=u.endContainer.firstChild.nextSibling}if(m=g.length,o(u,g,m),r(u,g,m),u.endOffset<5)return;a=u.endOffset,f=g}else{if(3!==(f=u.endContainer).nodeType&&f.firstChild){for(;3!==f.nodeType&&f.firstChild;)f=f.firstChild;3===f.nodeType&&(o(u,f,0),r(u,f,f.nodeValue.length))}a=1===u.endOffset?2:u.endOffset-1-e}l=a;do{o(u,f,a>=2?a-2:0),r(u,f,a>=1?a-1:0),a-=1,y=u.toString()}while(" "!==y&&""!==y&&160!==y.charCodeAt(0)&&a-2>=0&&y!==i);!function(n,e){return n===e||" "===n||160===n.charCodeAt(0)}(u.toString(),i)?0===u.startOffset?(o(u,f,0),r(u,f,l)):(o(u,f,a),r(u,f,l)):(o(u,f,a),r(u,f,l),a+=1),"."===(d=u.toString()).charAt(d.length-1)&&r(u,f,l-1),(s=(d=u.toString().trim()).match(p))&&("www."===s[1]?s[1]="http://www.":/@$/.test(s[1])&&!/^mailto:/.test(s[1])&&(s[1]="mailto:"+s[1]),c=n.selection.getBookmark(),n.selection.setRng(u),n.execCommand("createlink",!1,s[1]+s[2]),h&&n.dom.setAttrib(n.selection.getNode(),"target",h),n.selection.moveToBookmark(c),n.nodeChanged())}};return{setup:function(e){var t;e.on("keydown",function(n){if(13===n.keyCode)return function(n){u(n,-1,"",!1)}(e)}),n.ie?e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){if(41===n.keyCode)return function(n){u(n,-1,"(",!0)}(e)}),e.on("keyup",function(n){if(32===n.keyCode)return function(n){u(n,0,"",!0)}(e)}))}}}),o("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(n,e,t){return e.add("autolink",function(n){t.setup(n)}),function(){}}),t("tinymce.plugins.autolink.Plugin")()}();