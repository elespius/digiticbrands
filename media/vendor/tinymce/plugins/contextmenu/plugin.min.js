!function(){var n,e,t={},i=function(n,e,i){if("string"!=typeof n)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+n;if(void 0===i)throw"no definition function for "+n;t[n]={deps:e,defn:i,instance:void 0}},o=function(n){var e=t[n];if(void 0===e)throw"module ["+n+"] was undefined";return void 0===e.instance&&function(n){for(var e=t[n],i=e.deps,u=e.defn,r=i.length,c=new Array(r),l=0;l<r;++l)c[l]=o(i[l]);var s=u.apply(null,c);if(void 0===s)throw"module ["+n+"] returned undefined";e.instance=s}(n),e.instance},u=i;u("ephox.katamari.api.Cell",[],function(){var n=function(e){var t=e,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return n(i())}}};return n}),n="global!tinymce.util.Tools.resolve",e=tinymce.util.Tools.resolve,u(n,[],function(){return e}),u("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),u("tinymce.plugins.contextmenu.api.Api",[],function(){return{get:function(n){return{isContextMenuVisible:function(){return n.get()}}}}}),u("tinymce.plugins.contextmenu.api.Settings",[],function(){return{shouldNeverUseNative:function(n){return n.settings.contextmenu_never_use_native},getContextMenu:function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}}}),u("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),u("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),u("tinymce.plugins.contextmenu.core.Coords",["tinymce.core.Env","tinymce.core.dom.DOMUtils"],function(n,e){var t=function(n,e){return{x:n,y:e}},i=function(n,e,i){return t(n.x+e,n.y+i)},o=function(n,t){if(n&&"static"!==e.DOM.getStyle(n,"position",!0)){var o=e.DOM.getPos(n),u=o.x-n.scrollLeft,r=o.y-n.scrollTop;return i(t,-u,-r)}return i(t,0,0)},u=function(e){return n.container};return{getPos:function(n,r){if(n.inline)return o(u(),function(n){return t(n.pageX,n.pageY)}(r));var c,l,s,m=(c=n.getContentAreaContainer(),l=function(n){return t(n.clientX,n.clientY)}(r),s=e.DOM.getPos(c),i(l,s.x,s.y));return o(u(),m)}}}),u("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.ui.Factory")}),u("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),u("tinymce.plugins.contextmenu.ui.ContextMenu",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.plugins.contextmenu.api.Settings"],function(n,e,t){return{show:function(i,o,u,r){null===r.get()?r.set(function(i,o){var u,r,c=[];r=t.getContextMenu(i),e.each(r.split(/[ ,]/),function(n){var e=i.menuItems[n];"|"===n&&(e={text:n}),e&&(e.shortcut="",c.push(e))});for(var l=0;l<c.length;l++)"|"===c[l].text&&(0!==l&&l!==c.length-1||c.splice(l,1));return(u=n.create("menu",{items:c,context:"contextmenu",classes:"contextmenu"}).renderTo()).on("hide",function(n){n.control===this&&o.set(!1)}),i.on("remove",function(){u.remove(),u=null}),u}(i,u)):r.get().show(),r.get().moveTo(o.x,o.y),u.set(!0)}}}),u("tinymce.plugins.contextmenu.core.Bind",["tinymce.plugins.contextmenu.api.Settings","tinymce.plugins.contextmenu.core.Coords","tinymce.plugins.contextmenu.ui.ContextMenu"],function(n,e,t){return{setup:function(i,o,u){i.on("contextmenu",function(r){(function(e,t){return t.ctrlKey&&!n.shouldNeverUseNative(e)})(i,r)||(r.preventDefault(),t.show(i,e.getPos(i,r),o,u))})}}}),u("tinymce.plugins.contextmenu.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.contextmenu.api.Api","tinymce.plugins.contextmenu.core.Bind"],function(n,e,t,i){return e.add("contextmenu",function(e){var o=n(null),u=n(!1);return i.setup(e,u,o),t.get(u)}),function(){}}),o("tinymce.plugins.contextmenu.Plugin")()}();