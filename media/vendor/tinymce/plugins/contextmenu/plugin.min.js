!function(){var n={},e=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},t=function(e){var i=n[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&function(e){for(var i=n[e],o=i.deps,u=i.defn,r=o.length,c=new Array(r),l=0;l<r;++l)c[l]=t(o[l]);var s=u.apply(null,c);if(void 0===s)throw"module ["+e+"] returned undefined";i.instance=s}(e),i.instance},i=function(n,e){for(var i=n.length,o=new Array(i),u=0;u<i;++u)o[u]=t(n[u]);e.apply(null,o)};({}).bolt={module:{api:{define:e,require:i,demand:t}}};var o=e;o("ephox.katamari.api.Cell",[],function(){var n=function(e){var t=e,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return n(i())}}};return n}),function(n,e){o(n,[],function(){return e})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),o("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),o("tinymce.plugins.contextmenu.api.Api",[],function(){return{get:function(n){return{isContextMenuVisible:function(){return n.get()}}}}}),o("tinymce.plugins.contextmenu.api.Settings",[],function(){return{shouldNeverUseNative:function(n){return n.settings.contextmenu_never_use_native},getContextMenu:function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}}}),o("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),o("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),o("tinymce.plugins.contextmenu.core.Coords",["tinymce.core.Env","tinymce.core.dom.DOMUtils"],function(n,e){var t=function(n,e){return{x:n,y:e}},i=function(n,e,i){return t(n.x+e,n.y+i)},o=function(n,t){if(n&&"static"!==e.DOM.getStyle(n,"position",!0)){var o=e.DOM.getPos(n),u=o.x-n.scrollLeft,r=o.y-n.scrollTop;return i(t,-u,-r)}return i(t,0,0)},u=function(e){return n.container};return{getPos:function(n,r){if(n.inline)return o(u(),function(n){return t(n.pageX,n.pageY)}(r));var c=function(n,t){var o=e.DOM.getPos(n);return i(t,o.x,o.y)}(n.getContentAreaContainer(),function(n){return t(n.clientX,n.clientY)}(r));return o(u(),c)}}}),o("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.ui.Factory")}),o("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),o("tinymce.plugins.contextmenu.ui.ContextMenu",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.plugins.contextmenu.api.Settings"],function(n,e,t){return{show:function(i,o,u,r){null===r.get()?r.set(function(i,o){var u,r,c=[];r=t.getContextMenu(i),e.each(r.split(/[ ,]/),function(n){var e=i.menuItems[n];"|"===n&&(e={text:n}),e&&(e.shortcut="",c.push(e))});for(var l=0;l<c.length;l++)"|"===c[l].text&&(0!==l&&l!==c.length-1||c.splice(l,1));return(u=n.create("menu",{items:c,context:"contextmenu",classes:"contextmenu"}).renderTo()).on("hide",function(n){n.control===this&&o.set(!1)}),i.on("remove",function(){u.remove(),u=null}),u}(i,u)):r.get().show(),r.get().moveTo(o.x,o.y),u.set(!0)}}}),o("tinymce.plugins.contextmenu.core.Bind",["tinymce.plugins.contextmenu.api.Settings","tinymce.plugins.contextmenu.core.Coords","tinymce.plugins.contextmenu.ui.ContextMenu"],function(n,e,t){return{setup:function(i,o,u){i.on("contextmenu",function(r){(function(e,t){return t.ctrlKey&&!n.shouldNeverUseNative(e)})(i,r)||(r.preventDefault(),t.show(i,e.getPos(i,r),o,u))})}}}),o("tinymce.plugins.contextmenu.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.contextmenu.api.Api","tinymce.plugins.contextmenu.core.Bind"],function(n,e,t,i){return e.add("contextmenu",function(e){var o=n(null),u=n(!1);return i.setup(e,u,o),t.get(u)}),function(){}}),t("tinymce.plugins.contextmenu.Plugin")()}();