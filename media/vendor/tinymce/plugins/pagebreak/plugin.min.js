!function(){var e,n,t={},r=function(e,n,r){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===r)throw"no definition function for "+e;t[e]={deps:n,defn:r,instance:void 0}},a=function(e){var n=t[e];if(void 0===n)throw"module ["+e+"] was undefined";return void 0===n.instance&&function(e){for(var n=t[e],r=n.deps,i=n.defn,o=r.length,c=new Array(o),u=0;u<o;++u)c[u]=a(r[u]);var l=i.apply(null,c);if(void 0===l)throw"module ["+e+"] returned undefined";n.instance=l}(e),n.instance},i=r;e="global!tinymce.util.Tools.resolve",n=tinymce.util.Tools.resolve,i(e,[],function(){return n}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.pagebreak.api.Settings",[],function(){return{getSeparatorHtml:function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},shouldSplitBlock:function(e){return e.getParam("pagebreak_split_block",!1)}}}),i("tinymce.plugins.pagebreak.core.FilterContent",["tinymce.core.Env","tinymce.plugins.pagebreak.api.Settings"],function(e,n){var t=function(){return"mce-pagebreak"},r=function(){return'<img src="'+e.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(e){var t=n.getSeparatorHtml(e),a=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(a,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var a,i,o=r.length;o--;)if((i=(a=r[o]).attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var c=a.parent;if(e.schema.getBlockElements()[c.name]&&n.shouldSplitBlock(e)){c.type=3,c.value=t,c.raw=!0,a.remove();continue}a.type=3,a.value=t,a.raw=!0}})})},getPlaceholderHtml:r,getPageBreakClass:t}}),i("tinymce.plugins.pagebreak.api.Commands",["tinymce.plugins.pagebreak.core.FilterContent"],function(e){return{register:function(n){n.addCommand("mcePageBreak",function(){n.settings.pagebreak_split_block?n.insertContent("<p>"+e.getPlaceholderHtml()+"</p>"):n.insertContent(e.getPlaceholderHtml())})}}}),i("tinymce.plugins.pagebreak.core.ResolveName",["tinymce.plugins.pagebreak.core.FilterContent"],function(e){return{setup:function(n){n.on("ResolveName",function(t){"IMG"===t.target.nodeName&&n.dom.hasClass(t.target,e.getPageBreakClass())&&(t.name="pagebreak")})}}}),i("tinymce.plugins.pagebreak.ui.Buttons",[],function(){return{register:function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}}),i("tinymce.plugins.pagebreak.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.pagebreak.api.Commands","tinymce.plugins.pagebreak.core.FilterContent","tinymce.plugins.pagebreak.core.ResolveName","tinymce.plugins.pagebreak.ui.Buttons"],function(e,n,t,r,a,i){return n.add("pagebreak",function(e){t.register(e),i.register(e),r.setup(e),a.setup(e)}),function(){}}),a("tinymce.plugins.pagebreak.Plugin")()}();