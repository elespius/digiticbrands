!function(){var e={},t=function(t,n,i){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},n=function(t){var i=e[t];if(void 0===i)throw"module ["+t+"] was undefined";return void 0===i.instance&&function(t){for(var i=e[t],o=i.deps,r=i.defn,c=o.length,l=new Array(c),a=0;a<c;++a)l[a]=n(o[a]);var u=r.apply(null,l);if(void 0===u)throw"module ["+t+"] returned undefined";i.instance=u}(t),i.instance},i=t;o="global!tinymce.util.Tools.resolve",r=tinymce.util.Tools.resolve,i(o,[],function(){return r});var o,r;i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.preview.api.Settings",[],function(){return{getPreviewDialogWidth:function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},getPreviewDialogHeight:function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},getContentStyle:function(e){return e.getParam("content_style","")}}}),i("tinymce.plugins.preview.ui.IframeContent",["tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings"],function(e,t){var n=function(n){var i="",o=n.dom.encode,r=t.getContentStyle(n);i+='<base href="'+o(n.documentBaseURI.getURI())+'">',r&&(i+='<style type="text/css">'+r+"</style>"),e.each(n.contentCSS,function(e){i+='<link type="text/css" rel="stylesheet" href="'+o(n.documentBaseURI.toAbsolute(e))+'">'});var c=n.settings.body_id||"tinymce";-1!==c.indexOf("=")&&(c=(c=n.getParam("body_id","","hash"))[n.id]||c);var l=n.settings.body_class||"";-1!==l.indexOf("=")&&(l=(l=n.getParam("body_class","","hash"))[n.id]||"");var a=n.settings.directionality?' dir="'+n.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+i+'</head><body id="'+o(c)+'" class="mce-content-body '+o(l)+'"'+o(a)+">"+n.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'};return{getPreviewHtml:n,injectIframeContent:function(e,t,i){var o=n(e);if(i)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(o);else{var r=t.contentWindow.document;r.open(),r.write(o),r.close()}}}}),i("tinymce.plugins.preview.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings","tinymce.plugins.preview.ui.IframeContent"],function(e,t,n,i){return{open:function(t){var o=!e.ie,r='<iframe src="javascript:\'\'" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",c=n.getPreviewDialogWidth(t),l=n.getPreviewDialogHeight(t);t.windowManager.open({title:"Preview",width:c,height:l,html:r,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){var n=e.control.getEl("body").firstChild;i.injectIframeContent(t,n,o)}})}}}),i("tinymce.plugins.preview.api.Commands",["tinymce.plugins.preview.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mcePreview",function(){e.open(t)})}}}),i("tinymce.plugins.preview.ui.Buttons",[],function(){return{register:function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}}),i("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.plugins.preview.api.Commands","tinymce.plugins.preview.ui.Buttons"],function(e,t,n){return e.add("preview",function(e){t.register(e),n.register(e)}),function(){}}),n("tinymce.plugins.preview.Plugin")()}();