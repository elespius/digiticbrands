!function(){var n={},e=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},t=function(e){var i=n[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&function(e){for(var i=n[e],a=i.deps,o=i.defn,c=a.length,r=new Array(c),l=0;l<c;++l)r[l]=t(a[l]);var s=o.apply(null,r);if(void 0===s)throw"module ["+e+"] returned undefined";i.instance=s}(e),i.instance},i=e;a="global!tinymce.util.Tools.resolve",o=tinymce.util.Tools.resolve,i(a,[],function(){return o});var a,o;i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),i("tinymce.plugins.save.api.Settings",[],function(){return{enableWhenDirty:function(n){return n.getParam("save_enablewhendirty",!0)},hasOnSaveCallback:function(n){return!!n.getParam("save_onsavecallback")},hasOnCancelCallback:function(n){return!!n.getParam("save_oncancelcallback")}}}),i("tinymce.plugins.save.core.Actions",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.save.api.Settings"],function(n,e,t){var i=function(n,e){n.notificationManager.open({text:n.translate(e),type:"error"})};return{save:function(e){var a;if(a=n.DOM.getParent(e.id,"form"),!t.enableWhenDirty(e)||e.isDirty()){if(e.save(),t.hasOnSaveCallback(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();a?(e.setDirty(!1),a.onsubmit&&!a.onsubmit()||("function"==typeof a.submit?a.submit():i(e,"Error: Form submit field collision.")),e.nodeChanged()):i(e,"Error: No form element found.")}},cancel:function(n){var i=e.trim(n.startContent);t.hasOnCancelCallback(n)?n.execCallback("save_oncancelcallback",n):(n.setContent(i),n.undoManager.clear(),n.nodeChanged())}}}),i("tinymce.plugins.save.api.Commands",["tinymce.plugins.save.core.Actions"],function(n){return{register:function(e){e.addCommand("mceSave",function(){n.save(e)}),e.addCommand("mceCancel",function(){n.cancel(e)})}}}),i("tinymce.plugins.save.ui.Buttons",["tinymce.plugins.save.api.Settings"],function(n){var e=function(e){return function(t){var i=t.control;e.on("nodeChange dirty",function(){i.disabled(n.enableWhenDirty(e)&&!e.isDirty())})}};return{register:function(n){n.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:e(n)}),n.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:e(n)}),n.addShortcut("Meta+S","","mceSave")}}}),i("tinymce.plugins.save.Plugin",["tinymce.core.PluginManager","tinymce.plugins.save.api.Commands","tinymce.plugins.save.ui.Buttons"],function(n,e,t){return n.add("save",function(n){t.register(n),e.register(n)}),function(){}}),t("tinymce.plugins.save.Plugin")()}();