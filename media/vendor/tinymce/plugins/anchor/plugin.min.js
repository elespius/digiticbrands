!function(){var n,e,t={},o=function(n,e,o){if("string"!=typeof n)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+n;if(void 0===o)throw"no definition function for "+n;t[n]={deps:e,defn:o,instance:void 0}},i=function(n){var e=t[n];if(void 0===e)throw"module ["+n+"] was undefined";return void 0===e.instance&&function(n){for(var e=t[n],o=e.deps,r=e.defn,c=o.length,a=new Array(c),u=0;u<c;++u)a[u]=i(o[u]);var d=r.apply(null,a);if(void 0===d)throw"module ["+n+"] returned undefined";e.instance=d}(n),e.instance},r=o;n="global!tinymce.util.Tools.resolve",e=tinymce.util.Tools.resolve,r(n,[],function(){return e}),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),r("tinymce.plugins.anchor.core.Anchor",[],function(){return{isValidId:function(n){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(n)},getId:function(n){var e=n.selection.getNode();return"A"===e.tagName&&""===n.dom.getAttrib(e,"href")?e.id||e.name:""},insert:function(n,e){var t=n.selection.getNode();"A"===t.tagName&&""===n.dom.getAttrib(t,"href")?(t.removeAttribute("name"),t.id=e):(n.focus(),n.selection.collapse(!0),n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:e})))}}}),r("tinymce.plugins.anchor.ui.Dialog",["tinymce.plugins.anchor.core.Anchor"],function(n){return{open:function(e){var t=n.getId(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var o=t.data.id;(function(e,t){return n.isValidId(t)?(n.insert(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(e,o)&&t.preventDefault()}})}}}),r("tinymce.plugins.anchor.api.Commands",["tinymce.plugins.anchor.ui.Dialog"],function(n){return{register:function(e){e.addCommand("mceAnchor",function(){n.open(e)})}}}),r("tinymce.plugins.anchor.core.FilterContent",[],function(){var n=function(n){return function(e){for(var t=0;t<e.length;t++)(o=e[t]).attr("href")||!o.attr("id")&&!o.attr("name")||o.firstChild||e[t].attr("contenteditable",n);var o}};return{setup:function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",n("false")),e.serializer.addNodeFilter("a",n(null))})}}}),r("tinymce.plugins.anchor.ui.Buttons",[],function(){return{register:function(n){n.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),n.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}}}),r("tinymce.plugins.anchor.Plugin",["tinymce.core.PluginManager","tinymce.plugins.anchor.api.Commands","tinymce.plugins.anchor.core.FilterContent","tinymce.plugins.anchor.ui.Buttons"],function(n,e,t,o){return n.add("anchor",function(n){t.setup(n),e.register(n),o.register(n)}),function(){}}),i("tinymce.plugins.anchor.Plugin")()}();