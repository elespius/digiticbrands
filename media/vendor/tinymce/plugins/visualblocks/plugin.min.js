!function(){var n={},i=function(i,e,t){if("string"!=typeof i)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+i;if(void 0===t)throw"no definition function for "+i;n[i]={deps:e,defn:t,instance:void 0}},e=function(i){var t=n[i];if(void 0===t)throw"module ["+i+"] was undefined";return void 0===t.instance&&function(i){for(var t=n[i],o=t.deps,s=t.defn,l=o.length,c=new Array(l),u=0;u<l;++u)c[u]=e(o[u]);var a=s.apply(null,c);if(void 0===a)throw"module ["+i+"] returned undefined";t.instance=a}(i),t.instance},t=i;t("ephox.katamari.api.Cell",[],function(){var n=function(i){var e=i,t=function(){return e};return{get:t,set:function(n){e=n},clone:function(){return n(t())}}};return n}),o="global!tinymce.util.Tools.resolve",s=tinymce.util.Tools.resolve,t(o,[],function(){return s});var o,s;t("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),t("tinymce.plugins.visualblocks.api.Events",[],function(){return{fireVisualBlocks:function(n,i){n.fire("VisualBlocks",{state:i})}}}),t("tinymce.plugins.visualblocks.api.Settings",[],function(){return{isEnabledByDefault:function(n){return n.getParam("visualblocks_default_state",!1)},getContentCss:function(n){return n.settings.visualblocks_content_css}}}),t("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),t("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),t("tinymce.plugins.visualblocks.core.LoadCss",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(n,i){var e=n.DOM.uniqueId();return{load:function(t,o){var s=i.toArray(t.getElementsByTagName("link"));if(0===i.grep(s,function(n){return n.id===e}).length){var l=n.DOM.create("link",{id:e,rel:"stylesheet",href:o});t.getElementsByTagName("head")[0].appendChild(l)}}}}),t("tinymce.plugins.visualblocks.core.VisualBlocks",["tinymce.plugins.visualblocks.api.Events","tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.LoadCss"],function(n,i,e){return{toggleVisualBlocks:function(t,o,s){var l=t.dom,c=i.getContentCss(t);e.load(t.getDoc(),c||o+"/css/visualblocks.css"),l.toggleClass(t.getBody(),"mce-visualblocks"),s.set(!s.get()),n.fireVisualBlocks(t,s.get())}}}),t("tinymce.plugins.visualblocks.api.Commands",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){return{register:function(i,e,t){i.addCommand("mceVisualBlocks",function(){n.toggleVisualBlocks(i,e,t)})}}}),t("tinymce.plugins.visualblocks.core.Bindings",["tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.VisualBlocks"],function(n,i){return{setup:function(e,t,o){e.on("PreviewFormats AfterPreviewFormats",function(n){o.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)}),e.on("init",function(){n.isEnabledByDefault(e)&&i.toggleVisualBlocks(e,t,o)}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")})}}}),t("tinymce.plugins.visualblocks.ui.Buttons",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){var i=function(n,i){return function(e){var t=e.control;t.active(i.get()),n.on("VisualBlocks",function(n){t.active(n.state)})}};return{register:function(n,e){n.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:i(n,e)}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:i(n,e),selectable:!0,context:"view",prependToContext:!0})}}}),t("tinymce.plugins.visualblocks.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualblocks.api.Commands","tinymce.plugins.visualblocks.core.Bindings","tinymce.plugins.visualblocks.ui.Buttons"],function(n,i,e,t,o){return i.add("visualblocks",function(i,s){var l=n(!1);e.register(i,s,l),o.register(i,l),t.setup(i,s,l)}),function(){}}),e("tinymce.plugins.visualblocks.Plugin")()}();