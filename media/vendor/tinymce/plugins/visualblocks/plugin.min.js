!function(){var n={},e=function(e,i,t){if("string"!=typeof e)throw"module id must be a string";if(void 0===i)throw"no dependencies for "+e;if(void 0===t)throw"no definition function for "+e;n[e]={deps:i,defn:t,instance:void 0}},i=function(e){var t=n[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&function(e){for(var t=n[e],o=t.deps,s=t.defn,l=o.length,u=new Array(l),c=0;c<l;++c)u[c]=i(o[c]);var a=s.apply(null,u);if(void 0===a)throw"module ["+e+"] returned undefined";t.instance=a}(e),t.instance},t=function(n,e){for(var t=n.length,o=new Array(t),s=0;s<t;++s)o[s]=i(n[s]);e.apply(null,o)};({}).bolt={module:{api:{define:e,require:t,demand:i}}};var o=e;o("ephox.katamari.api.Cell",[],function(){var n=function(e){var i=e,t=function(){return i};return{get:t,set:function(n){i=n},clone:function(){return n(t())}}};return n}),function(n,e){o(n,[],function(){return e})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),o("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),o("tinymce.plugins.visualblocks.api.Events",[],function(){return{fireVisualBlocks:function(n,e){n.fire("VisualBlocks",{state:e})}}}),o("tinymce.plugins.visualblocks.api.Settings",[],function(){return{isEnabledByDefault:function(n){return n.getParam("visualblocks_default_state",!1)},getContentCss:function(n){return n.settings.visualblocks_content_css}}}),o("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),o("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),o("tinymce.plugins.visualblocks.core.LoadCss",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(n,e){var i=n.DOM.uniqueId();return{load:function(t,o){var s=e.toArray(t.getElementsByTagName("link"));if(0===e.grep(s,function(n){return n.id===i}).length){var l=n.DOM.create("link",{id:i,rel:"stylesheet",href:o});t.getElementsByTagName("head")[0].appendChild(l)}}}}),o("tinymce.plugins.visualblocks.core.VisualBlocks",["tinymce.plugins.visualblocks.api.Events","tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.LoadCss"],function(n,e,i){return{toggleVisualBlocks:function(t,o,s){var l=t.dom,u=e.getContentCss(t);i.load(t.getDoc(),u||o+"/css/visualblocks.css"),l.toggleClass(t.getBody(),"mce-visualblocks"),s.set(!s.get()),n.fireVisualBlocks(t,s.get())}}}),o("tinymce.plugins.visualblocks.api.Commands",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){return{register:function(e,i,t){e.addCommand("mceVisualBlocks",function(){n.toggleVisualBlocks(e,i,t)})}}}),o("tinymce.plugins.visualblocks.core.Bindings",["tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.VisualBlocks"],function(n,e){return{setup:function(i,t,o){i.on("PreviewFormats AfterPreviewFormats",function(n){o.get()&&i.dom.toggleClass(i.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)}),i.on("init",function(){n.isEnabledByDefault(i)&&e.toggleVisualBlocks(i,t,o)}),i.on("remove",function(){i.dom.removeClass(i.getBody(),"mce-visualblocks")})}}}),o("tinymce.plugins.visualblocks.ui.Buttons",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){var e=function(n,e){return function(i){var t=i.control;t.active(e.get()),n.on("VisualBlocks",function(n){t.active(n.state)})}};return{register:function(n,i){n.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(n,i)}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(n,i),selectable:!0,context:"view",prependToContext:!0})}}}),o("tinymce.plugins.visualblocks.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualblocks.api.Commands","tinymce.plugins.visualblocks.core.Bindings","tinymce.plugins.visualblocks.ui.Buttons"],function(n,e,i,t,o){return e.add("visualblocks",function(e,s){var l=n(!1);i.register(e,s,l),o.register(e,l),t.setup(e,s,l)}),function(){}}),i("tinymce.plugins.visualblocks.Plugin")()}();