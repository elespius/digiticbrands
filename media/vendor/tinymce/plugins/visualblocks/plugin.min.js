!function(){var n,i,e={},t=function(n,i,t){if("string"!=typeof n)throw"module id must be a string";if(void 0===i)throw"no dependencies for "+n;if(void 0===t)throw"no definition function for "+n;e[n]={deps:i,defn:t,instance:void 0}},o=function(n){var i=e[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&function(n){for(var i=e[n],t=i.deps,s=i.defn,l=t.length,c=new Array(l),u=0;u<l;++u)c[u]=o(t[u]);var a=s.apply(null,c);if(void 0===a)throw"module ["+n+"] returned undefined";i.instance=a}(n),i.instance},s=t;s("ephox.katamari.api.Cell",[],function(){var n=function(i){var e=i,t=function(){return e};return{get:t,set:function(n){e=n},clone:function(){return n(t())}}};return n}),n="global!tinymce.util.Tools.resolve",i=tinymce.util.Tools.resolve,s(n,[],function(){return i}),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),s("tinymce.plugins.visualblocks.api.Events",[],function(){return{fireVisualBlocks:function(n,i){n.fire("VisualBlocks",{state:i})}}}),s("tinymce.plugins.visualblocks.api.Settings",[],function(){return{isEnabledByDefault:function(n){return n.getParam("visualblocks_default_state",!1)},getContentCss:function(n){return n.settings.visualblocks_content_css}}}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),s("tinymce.plugins.visualblocks.core.LoadCss",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(n,i){var e=n.DOM.uniqueId();return{load:function(t,o){var s=i.toArray(t.getElementsByTagName("link"));if(0===i.grep(s,function(n){return n.id===e}).length){var l=n.DOM.create("link",{id:e,rel:"stylesheet",href:o});t.getElementsByTagName("head")[0].appendChild(l)}}}}),s("tinymce.plugins.visualblocks.core.VisualBlocks",["tinymce.plugins.visualblocks.api.Events","tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.LoadCss"],function(n,i,e){return{toggleVisualBlocks:function(t,o,s){var l=t.dom,c=i.getContentCss(t);e.load(t.getDoc(),c||o+"/css/visualblocks.css"),l.toggleClass(t.getBody(),"mce-visualblocks"),s.set(!s.get()),n.fireVisualBlocks(t,s.get())}}}),s("tinymce.plugins.visualblocks.api.Commands",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){return{register:function(i,e,t){i.addCommand("mceVisualBlocks",function(){n.toggleVisualBlocks(i,e,t)})}}}),s("tinymce.plugins.visualblocks.core.Bindings",["tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.VisualBlocks"],function(n,i){return{setup:function(e,t,o){e.on("PreviewFormats AfterPreviewFormats",function(n){o.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)}),e.on("init",function(){n.isEnabledByDefault(e)&&i.toggleVisualBlocks(e,t,o)}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")})}}}),s("tinymce.plugins.visualblocks.ui.Buttons",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){var i=function(n,i){return function(e){var t=e.control;t.active(i.get()),n.on("VisualBlocks",function(n){t.active(n.state)})}};return{register:function(n,e){n.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:i(n,e)}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:i(n,e),selectable:!0,context:"view",prependToContext:!0})}}}),s("tinymce.plugins.visualblocks.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualblocks.api.Commands","tinymce.plugins.visualblocks.core.Bindings","tinymce.plugins.visualblocks.ui.Buttons"],function(n,i,e,t,o){return i.add("visualblocks",function(i,s){var l=n(!1);e.register(i,s,l),o.register(i,l),t.setup(i,s,l)}),function(){}}),o("tinymce.plugins.visualblocks.Plugin")()}();