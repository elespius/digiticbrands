jQuery(document).ready(function(_){_("#toolbar-target").hide(),_("#toolbar-copy").hide(),Joomla.submitbutton=function(t){if("association.cancel"===t)Joomla.submitform(t);else if("copy"===t){Joomla.loadingLayer("show");var e=document.getElementById("target-association").getAttribute("data-language"),a=window.frames["reference-association"].document.getElementById("jform_language");a.removeAttribute("disabled"),a.value=e,window.frames["reference-association"].Joomla.submitbutton(document.getElementById("adminForm").getAttribute("data-associatedview")+".save2copy")}else if("undo-association"===t){var i=document.getElementById("reference-association"),n=document.getElementById("target-association"),o=(i.getAttribute("data-id"),i.getAttribute("data-language").replace(/-/,"_"));n.getAttribute("data-id"),e=n.getAttribute("data-language").replace(/-/,"_");i=_(i).contents(),n=_(n).contents(),i.find("#jform_associations_"+e+"_id").val(""),i.find("#jform_associations_"+e+"_name").val(""),i.find("#jform_associations_"+e+"_chzn").remove(),i.find("#jform_associations_"+e).val("").change().chosen();var s="";_("#jform_itemlanguage option").each(function(){void 0!==(s=_(this).val().split("|")[0])&&(s=s.replace(/-/,"_"),n.find("#jform_associations_"+s+"_id").val(""),n.find("#jform_associations_"+s+"_chzn").remove(),n.find("#jform_associations_"+s).val("").change().chosen())}),n.find("#jform_associations_"+o+"_id").val(""),n.find("#jform_associations_"+o+"_name").val(""),n.find("#jform_associations_"+o+"_chzn").remove(),n.find("#jform_associations_"+o).val("").change().chosen();var d=_("#jform_itemlanguage").val(),r=e.replace(/_/,"-");_('#jform_itemlanguage option[value="'+d+'"]').val(r+":0:add"),_("#jform_itemlanguage").val("").change(),_("#jform_itemlanguage").trigger("liszt:updated"),Joomla.submitbutton("reference")}else _("#"+t+"-association").contents().find("#jform_language").attr("disabled",!1),window.frames[t+"-association"].Joomla.submitbutton(document.getElementById("adminForm").getAttribute("data-associatedview")+".apply");return!1},Joomla.loadingLayer("load"),_(document).on("click","#toogle-left-panel",function(){var t=this.getAttribute("data-hide-reference"),e=this.getAttribute("data-show-reference");_(this).text()===t?_(this).text(e):_(this).text(t),_("#left-panel").toggle(),_("#right-panel").toggleClass("full-width")}),_(document).on("change","#jform_itemlanguage",function(){var t=document.getElementById("target-association"),e=_(this).val();""!==e&&void 0!==e?(t.setAttribute("data-action",e.split(":")[2]),t.setAttribute("data-id",e.split(":")[1]),t.setAttribute("data-language",e.split(":")[0]),Joomla.loadingLayer("show"),t.src=t.getAttribute("data-editurl")+"&task="+t.getAttribute("data-item")+"."+t.getAttribute("data-action")+"&id="+t.getAttribute("data-id")):(_("#toolbar-target").hide(),_("#toolbar-copy").hide(),_("#select-change").addClass("hidden"),_("#remove-assoc").addClass("hidden"),t.setAttribute("data-action",""),t.setAttribute("data-id","0"),t.setAttribute("data-language",""),t.src="")}),_("#reference-association").on("load",function(){if(document.getElementById("target-association").setAttribute("src",document.getElementById("target-association").getAttribute("src")),_(this).contents().find("#jform_id").val()!==this.getAttribute("data-id")){var t=document.getElementById("target-association");t.src=t.getAttribute("data-editurl")+"&task="+t.getAttribute("data-item")+".edit&id="+_(this).contents().find("#jform_id").val(),this.src=this.getAttribute("data-editurl")+"&task="+this.getAttribute("data-item")+".edit&id="+this.getAttribute("data-id")}var e=_(this).contents();e.find("#jform_language_chzn").remove(),e.find("#jform_language").attr("disabled",!0).chosen(),e.find("#associations").find(".btn").remove();var a="";_("#jform_itemlanguage option").each(function(){void 0!==(a=_(this).val().split(":"))[0]&&(langAssociation=a[0].replace(/-/,"_"),""==e.find("#jform_associations_"+langAssociation+"_id").val()&&e.find("#jform_associations_"+langAssociation+"_name").val(document.getElementById("reference-association").getAttribute("data-no-assoc")))}),Joomla.loadingLayer("hide")}),_("#target-association").on("load",function(){if(""!=this.getAttribute("src")){_("#toolbar-target").show(),_("#toolbar-copy").show(),_("#select-change").removeClass("hidden");var t=this.getAttribute("data-language"),e=this.getAttribute("data-id"),a=_(this).contents().find("#jform_id").val()||"0";if(_(this).contents().find('a[href="#associations"]').parent().find(".btn").remove(),_(this).contents().find("#associations").find(".btn").remove(),_(this).contents().find("#associations").hasClass("active")&&(_(this).contents().find('a[href="#associations"]').parent().removeClass("active"),_(this).contents().find("#associations").removeClass("active"),_(this).contents().find(".nav-tabs").find("li").first().addClass("active"),_(this).contents().find(".tab-content").find(".tab-pane").first().addClass("active")),_(this).contents().find("#jform_language_chzn").remove(),_(this).contents().find("#jform_language").val(t).change().attr("disabled",!0).chosen(),"0"==a)document.getElementById("select-change-text").innerHTML=document.getElementById("select-change").getAttribute("data-select");else{document.getElementById("select-change-text").innerHTML=document.getElementById("select-change").getAttribute("data-change"),_("#remove-assoc").removeClass("hidden"),_("#toolbar-copy").hide();var i=document.getElementById("target-id").value,n=""==i?a:i+","+a;document.getElementById("target-id").value=n,a!=e&&(_('#jform_itemlanguage option[value^="'+t+":"+e+':add"]').val(t+":"+a+":edit"),this.setAttribute("data-id",a),this.setAttribute("data-action","edit"));var o=document.getElementById("reference-association"),s=t.replace(/-/,"_"),d=o.getAttribute("data-title"),r=_(this).contents().find("#jform_"+d).val();_(o).contents().find("#jform_associations_"+s+"_id").val(a),_(o).contents().find("#jform_associations_"+s+"_name").val(r),_(o).contents().find("#jform_associations_"+s+"_chzn").remove(),_(o).contents().find("#jform_associations_"+s).append('<option value="'+a+'">'+r+"</option>"),_(o).contents().find("#jform_associations_"+s).val(a).change().chosen()}var c=(o=document.getElementById("reference-association")).getAttribute("data-id"),l=(s=o.getAttribute("data-language").replace(/-/,"_"),m.getAttribute("data-title")),m=(r=_(this).contents().find("#jform_"+l).val(),_(this).contents());m.find("#jform_associations_"+s+"_id").val(c),m.find("#jform_associations_"+s+"_name").val(r),m.find("#jform_associations_"+s+"_chzn").remove();var g,f,u=m.find("#jform_associations_"+s);u.append('<option value="'+c+'">'+r+"</option>"),u.val(c).change().chosen(),_("#jform_itemlanguage option").each(function(){void 0!==(g=_(this).val().split(":"))[1]&&"0"!==g[1]&&(f=g[0].replace(/-/,"_"),m.find("#jform_associations_"+f+"_id").val(g[1]),m.find("#jform_associations_"+f+"_chzn").remove(),(u=m.find("#jform_associations_"+f)).append('<option value="'+g[1]+'"></option>'),u.val(g[1]).change().chosen())}),Joomla.loadingLayer("hide")}})});