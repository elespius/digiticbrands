!function(e){"use strict";class t{constructor(e){this.lowercase=e.lowercase||0,this.uppercase=e.uppercase||0,this.numbers=e.numbers||0,this.special=e.special||0,this.length=e.length||4}getScore(e){for(var t=0,s=0,r=["lowercase","uppercase","numbers","special","length"],i=0,n=r.length;n>i;i++)this.hasOwnProperty(r[i])&&this[r[i]]>0&&(s+=1);return t+=this.calc(e,/[a-z]/g,this.lowercase,s),t+=this.calc(e,/[A-Z]/g,this.uppercase,s),t+=this.calc(e,/[0-9]/g,this.numbers,s),t+=this.calc(e,/[\$\!\#\?\=\;\:\*\-\_\€\%\&\(\)\`\´]/g,this.special,s),t+=1==s?e.length>this.length?100:100/this.length*e.length:e.length>this.length?100/s:100/s/this.length*e.length}calc(e,t,s,r){const i=e.match(t);return i&&i.length>s&&0!=s?100/r:i&&s>0?100/r/s*i.length:0}}e.define("joomla-field-password",class extends HTMLElement{static get observedAttributes(){return["min-length","min-integers","min-symbols","min-uppercase","min-lowercase","reveal","text-show","text-hide","text-complete","text-incomplete"]}get minLength(){return parseInt(this.getAttribute("min-length")||0)}get minIntegers(){return parseInt(this.getAttribute("min-integers")||0)}get minSymbols(){return parseInt(this.getAttribute("min-symbols")||0)}get minUppercase(){return parseInt(this.getAttribute("min-uppercase")||0)}get minLowercase(){return parseInt(this.getAttribute("min-lowercase")||0)}get reveal(){return this.getAttribute("reveal")||!1}get showText(){return this.getAttribute("text-show")||"Show"}get hideText(){return this.getAttribute("text-hide")||"Hide"}get completeText(){return this.getAttribute("text-complete")||"Password meets site's requirements"}get incompleteText(){return this.getAttribute("text-incomplete")||"Password does not meet site's requirements"}constructor(){if(super(),!window.Joomla)throw new Error("Joomla API is not iniatiated!");if(this.input=this.querySelector("input"),!this.input)throw new Error("Joomla Password field requires an input element!");this.meterLabel="",this.meter=""}connectedCallback(){if("true"===this.reveal){const e=document.createElement("div"),t=document.createElement("span"),s=document.createElement("span"),r=document.createElement("span");e.classList.add("input-group-append"),t.setAttribute("class","input-group-text"),s.setAttribute("class","fa fa-eye"),s.setAttribute("aria-hidden","true"),r.setAttribute("class","sr-only"),r.innerText=this.showText,t.appendChild(s),t.appendChild(r),e.appendChild(t);let i=this.querySelector(".input-group");i||((i=document.createElement("div")).classList.add("input-group"),i.appendChild(this.input),this.appendChild(i)),i.appendChild(e);const n=this;this.input=this.querySelector("input"),s.addEventListener("click",()=>{s.classList.contains("fa-eye")?(s.classList.remove("fa-eye"),s.classList.add("fa-eye-slash"),n.input.type="text",r.innerText=n.showText):(s.classList.add("fa-eye"),s.classList.remove("fa-eye-slash"),n.input.type="password",r.innerText=n.hideText)})}if(this.minLength&&this.minLength>0||this.minIntegers&&this.minIntegers>0||this.minSymbols&&this.minSymbols>0||this.minUppercase&&this.minUppercase>0||this.minLowercase&&this.minLowercase>0){let e="",t="";this.input.value.length||(e=" bg-danger",t=0);const s=Math.random().toString(36).substr(2,9),r=document.createElement("div");r.setAttribute("class","progress"),this.meter=document.createElement("div"),this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated"+e),this.meter.style.width=0+t,this.meter.max=100,this.meter.setAttribute("aria-describedby","password-"+s),r.appendChild(this.meter),this.meterLabel=document.createElement("div"),this.meterLabel.setAttribute("class","text-xs-center"),this.meterLabel.setAttribute("id","password-"+s),this.insertAdjacentElement("beforeend",this.meterLabel),this.insertAdjacentElement("beforeend",r),this.input.value.length>0&&this.input.setAttribute("required",""),this.input.addEventListener("keyup",this.getMeter.bind(this)),this.setAttribute("validation-handler","password-strength_"+Math.random().toString(36).substr(2,9)),document.formvalidator&&document.formvalidator.setHandler(this.getAttribute("validation-handler"),this.handler.bind(this))}}disconnectedCallback(){}getMeter(){if(!this.meter||!this.meterLabel)return;const e=new t({lowercase:this.minLowercase?this.minLowercase:0,uppercase:this.minUppercase?this.minUppercase:0,numbers:this.minIntegers?this.minIntegers:0,special:this.minSymbols?this.minSymbols:0,length:this.minLength?this.minLength:4}).getScore(this.input.value);e>79&&(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-warning"),this.meterLabel.innerHTML=this.completeText),e>64&&e<80&&(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-warning"),this.meterLabel.innerHTML=this.incompleteText),e>50&&e<65&&(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-warning"),this.meterLabel.innerHTML=this.incompleteText),e>40&&e<51&&(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-warning"),this.meterLabel.innerHTML=this.incompleteText),e<41&&(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-danger"),this.meterLabel.innerHTML=this.incompleteText),100===e&&this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated bg-success"),this.meter.style.width=e+"%",this.input.value.length||(this.meter.setAttribute("class","progress-bar progress-bar-striped progress-bar-animated"),this.meterLabel.innerHTML="",this.input.setAttribute("required",""))}handler(e){return 100===new t({lowercase:this.minLowercase?this.minLowercase:0,uppercase:this.minUppercase?this.minUppercase:0,numbers:this.minIntegers?this.minIntegers:0,special:this.minSymbols?this.minSymbols:0,length:this.minLength?this.minLength:4}).getScore(e)}})}(customElements);