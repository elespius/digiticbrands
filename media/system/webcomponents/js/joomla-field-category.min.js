(()=>{!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.accessibleAutocomplete=t():e.accessibleAutocomplete=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e,t,n){!function(){"use strict";function t(e,t){var n,o,r,i,l=N;for(i=arguments.length;i-- >2;)C.push(arguments[i]);for(t&&null!=t.children&&(C.length||C.push(t.children),delete t.children);C.length;)if((o=C.pop())&&void 0!==o.pop)for(i=o.length;i--;)C.push(o[i]);else!0!==o&&!1!==o||(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===N?l=[o]:l.push(o),n=r;var s=new function(){};return s.nodeName=e,s.children=l,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==E.vnode&&E.vnode(s),s}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e){!e.__d&&(e.__d=!0)&&1==S.push(e)&&(E.debounceRendering||setTimeout)(r)}function r(){var e,t=S;for(S=[];e=t.pop();)e.__d&&g(e)}function i(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):n||e._componentConstructor===t.nodeName}function l(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function s(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function a(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===k.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,c,l):e.removeEventListener(t,c,l),(e.__l||(e.__l={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)(function(e,t,n){try{e[t]=n}catch(e){}})(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var s=r&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function c(e){return this.__l[e.type](E.event&&E.event(e)||e)}function p(){for(var e;e=I.pop();)E.afterMount&&E.afterMount(e),e.componentDidMount&&e.componentDidMount()}function d(e,t,n,o,r,i){A++||(L=null!=r&&void 0!==r.ownerSVGElement,M=null!=e&&!("__preactattr_"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--A||(M=!1,i||p()),l}function h(e,t,n,o,r){var i=e,s=L;if(null==t&&(t=""),"string"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0))),i.__preactattr_=!0,i;if("function"==typeof t.nodeName)return w(e,t,n,o);if(L="svg"===t.nodeName||"foreignObject"!==t.nodeName&&L,(!e||!l(e,String(t.nodeName)))&&(i=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}(String(t.nodeName),L),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0)}var a=i.firstChild,c=i.__preactattr_||(i.__preactattr_={}),p=t.children;return!M&&p&&1===p.length&&"string"==typeof p[0]&&null!=a&&void 0!==a.splitText&&null==a.nextSibling?a.nodeValue!=p[0]&&(a.nodeValue=p[0]):(p&&p.length||null!=a)&&f(i,p,n,o,M||null!=c.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||u(e,o,n[o],n[o]=void 0,L);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||u(e,o,n[o],n[o]=t[o],L)}(i,t.attributes,c),L=s,i}function f(e,t,n,o,r){var l,s,u,c,p=e.childNodes,d=[],f={},_=0,v=0,b=p.length,y=0,g=t?t.length:0;if(0!==b)for(var w=0;w<b;w++){var x=p[w],O=x.__preactattr_;null!=(E=g&&O?x._component?x._component.__k:O.key:null)?(_++,f[E]=x):(O||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(d[y++]=x)}if(0!==g)for(w=0;w<g;w++){var E;if(c=null,null!=(E=(u=t[w]).key))_&&void 0!==f[E]&&(c=f[E],f[E]=void 0,_--);else if(!c&&v<y)for(l=v;l<y;l++)if(void 0!==d[l]&&i(s=d[l],u,r)){c=s,d[l]=void 0,l===y-1&&y--,l===v&&v++;break}(c=h(c,u,n,o))&&c!==e&&(w>=b?e.appendChild(c):c!==p[w]&&(c===p[w+1]?a(p[w]):e.insertBefore(c,p[w]||null)))}if(_)for(var w in f)void 0!==f[w]&&m(f[w],!1);for(;v<=y;)void 0!==(c=d[y--])&&m(c,!1)}function m(e,t){var n=e._component;n?x(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||a(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;m(e,!0),e=t}}function v(e,t,n){var o,r=T[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),O.call(o,t,n)):((o=new O(t,n)).constructor=e,o.render=b),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.__b=r[i].__b,r.splice(i,1);break}return o}function b(e,t,n){return this.constructor(e,n)}function y(e,t,n,r,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.__c||(e.__c=e.context),e.context=r),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===E.syncComponentUpdates&&e.base?o(e):g(e,1,i)),e.__r&&e.__r(e))}function g(e,t,o,r){if(!e.__x){var i,l,a,u=e.props,c=e.state,h=e.context,f=e.__p||u,_=e.__s||c,b=e.__c||h,w=e.base,O=e.__b,C=w||O,N=e._component,k=!1;if(w&&(e.props=f,e.state=_,e.context=b,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,h)?k=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,h),e.props=u,e.state=c,e.context=h),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!k){i=e.render(u,c,h),e.getChildContext&&(h=n(n({},h),e.getChildContext()));var S,L,M=i&&i.nodeName;if("function"==typeof M){var T=s(i);(l=N)&&l.constructor===M&&T.key==l.__k?y(l,T,1,h,!1):(S=l,e._component=l=v(M,T,h),l.__b=l.__b||O,l.__u=e,y(l,T,0,h,!1),g(l,1,o,!0)),L=l.base}else a=C,(S=N)&&(a=e._component=null),(C||1===t)&&(a&&(a._component=null),L=d(a,i,h,o||!w,C&&C.parentNode,!0));if(C&&L!==C&&l!==N){var D=C.parentNode;D&&L!==D&&(D.replaceChild(L,C),S||(C._component=null,m(C,!1)))}if(S&&x(S),e.base=L,L&&!r){for(var V=e,q=e;q=q.__u;)(V=q).base=L;L._component=V,L._componentConstructor=V.constructor}}if(!w||o?I.unshift(e):k||(p(),e.componentDidUpdate&&e.componentDidUpdate(f,_,b),E.afterUpdate&&E.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);A||r||p()}}function w(e,t,n,o){for(var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,u=a,c=s(t);r&&!u&&(r=r.__u);)u=r.constructor===t.nodeName;return r&&u&&(!o||r._component)?(y(r,c,3,n,o),e=r.base):(i&&!a&&(x(i),e=l=null),r=v(t.nodeName,c,n),e&&!r.__b&&(r.__b=e,l=null),y(r,c,1,n,o),e=r.base,l&&e!==l&&(l._component=null,m(l,!1))),e}function x(e){E.beforeUnmount&&E.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?x(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,a(t),function(e){var t=e.constructor.name;(T[t]||(T[t]=[])).push(e)}(e),_(t)),e.__r&&e.__r(null)}function O(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}var E={},C=[],N=[],k=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,S=[],I=[],A=0,L=!1,M=!1,T={};n(O.prototype,{setState:function(e,t){var r=this.state;this.__s||(this.__s=n({},r)),n(r,"function"==typeof e?e(r,this.props):e),t&&(this.__h=this.__h||[]).push(t),o(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),g(this,2)},render:function(){}});var D={h:t,createElement:t,cloneElement:function(e,o){return t(e.nodeName,n(n({},e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)},Component:O,render:function(e,t,n){return d(n,e,{},!1,t,!1)},rerender:r,options:E};e.exports=D}()},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";function o(e){if(!e.element)throw new Error("element is not defined");if(!e.id)throw new Error("id is not defined");if(!e.source)throw new Error("source is not defined");Array.isArray(e.source)&&(e.source=s(e.source)),(0,i.render)((0,i.createElement)(l.default,e),e.element)}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),s=function(e){return function(t,n){n(e.filter(function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}))}};o.enhanceSelectElement=function(e){if(!e.selectElement)throw new Error("selectElement is not defined");if(!e.source){var t=[].filter.call(e.selectElement.options,function(t){return t.value||e.preserveNullOptions});e.source=t.map(function(e){return e.textContent||e.innerText})}if(e.onConfirm=e.onConfirm||function(t){var n=[].filter.call(e.selectElement.options,function(e){return(e.textContent||e.innerText)===t})[0];n&&(n.selected=!0)},e.selectElement.value||void 0===e.defaultValue){var n=e.selectElement.options[e.selectElement.options.selectedIndex];e.defaultValue=n.textContent||n.innerText}void 0===e.name&&(e.name=""),void 0===e.id&&(void 0===e.selectElement.id?e.id="":e.id=e.selectElement.id),void 0===e.autoselect&&(e.autoselect=!0);var i=document.createElement("span");e.selectElement.parentNode.insertBefore(i,e.selectElement),o(r({},e,{element:i})),e.selectElement.style.display="none",e.selectElement.id=e.selectElement.id+"-select"},e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(){return!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}function i(e){return d?{onInput:e}:h?{onChange:e}:void 0}t.__esModule=!0,t.default=void 0;var l,s,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=n(0),c=o(n(4)),p=o(n(5)),d=!0,h=!1,f={13:"enter",27:"escape",32:"space",38:"up",40:"down"},m=function(){var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),_=(s=l=function(e){function t(t){var n=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t));return n.elementReferences={},n.state={focused:null,hovered:null,menuOpen:!1,options:t.defaultValue?[t.defaultValue]:[],query:t.defaultValue,selected:null},n.handleComponentBlur=n.handleComponentBlur.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleUpArrow=n.handleUpArrow.bind(n),n.handleDownArrow=n.handleDownArrow.bind(n),n.handleEnter=n.handleEnter.bind(n),n.handlePrintableKey=n.handlePrintableKey.bind(n),n.handleOptionBlur=n.handleOptionBlur.bind(n),n.handleOptionClick=n.handleOptionClick.bind(n),n.handleOptionFocus=n.handleOptionFocus.bind(n),n.handleOptionMouseDown=n.handleOptionMouseDown.bind(n),n.handleOptionMouseEnter=n.handleOptionMouseEnter.bind(n),n.handleOptionMouseOut=n.handleOptionMouseOut.bind(n),n.handleInputBlur=n.handleInputBlur.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleInputFocus=n.handleInputFocus.bind(n),n.pollInputElement=n.pollInputElement.bind(n),n.getDirectInputChanges=n.getDirectInputChanges.bind(n),n}return function(e,t){"function"!=typeof t&&null!==t||(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t))}(t,e),t.prototype.componentDidMount=function(){this.pollInputElement()},t.prototype.componentWillUnmount=function(){clearTimeout(this.$pollInput)},t.prototype.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout(function(){e.pollInputElement()},100)},t.prototype.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},t.prototype.componentDidUpdate=function(e,t){var n=this.state.focused,o=null===n,r=t.focused!==n;r&&!o&&this.elementReferences[n].focus();var i=-1===n,l=r&&null===t.focused;if(i&&l){var s=this.elementReferences[n];s.setSelectionRange(0,s.value.length)}},t.prototype.hasAutoselect=function(){return!r()&&this.props.autoselect},t.prototype.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},t.prototype.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},t.prototype.handleComponentBlur=function(e){var t=this.state,n=t.options,o=t.query,r=t.selected,i=void 0;this.props.confirmOnBlur?(i=e.query||o,this.props.onConfirm(n[r])):i=o,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:i,selected:null})},t.prototype.handleOptionBlur=function(e,t){var n=this.state,o=n.focused,i=n.menuOpen,l=n.options,s=n.selected,a=null===e.relatedTarget,u=e.relatedTarget===this.elementReferences[-1],c=o!==t&&-1!==o;if(!c&&a||!c&&!u){var p=i&&r();this.handleComponentBlur({menuOpen:p,query:this.templateInputValue(l[s])})}},t.prototype.handleInputBlur=function(e){var t=this.state,n=t.focused,o=t.menuOpen,i=t.options,l=t.query,s=t.selected;if(-1===n){var a=o&&r(),u=r()?l:this.templateInputValue(i[s]);this.handleComponentBlur({menuOpen:a,query:u})}},t.prototype.handleInputChange=function(e){var t=this,n=this.props,o=n.minLength,r=n.source,i=n.showAllValues,l=this.hasAutoselect(),s=e.target.value,a=0===s.length,u=this.state.query.length!==s.length,c=s.length>=o;this.setState({query:s}),i||!a&&u&&c?r(s,function(e){var n=e.length>0;t.setState({menuOpen:n,options:e,selected:l&&n?0:-1})}):!a&&c||this.setState({menuOpen:!1,options:[]})},t.prototype.handleInputClick=function(e){this.handleInputChange(e)},t.prototype.handleInputFocus=function(e){this.setState({focused:-1})},t.prototype.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},t.prototype.handleOptionMouseEnter=function(e,t){this.setState({hovered:t})},t.prototype.handleOptionMouseOut=function(e,t){this.setState({hovered:null})},t.prototype.handleOptionClick=function(e,t){var n=this.state.options[t],o=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,menuOpen:!1,query:o,selected:-1}),this.forceUpdate()},t.prototype.handleOptionMouseDown=function(e){e.preventDefault()},t.prototype.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,o=t.selected;-1!==o&&n&&this.handleOptionFocus(o-1)},t.prototype.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})});else if(!0===this.state.menuOpen){var n=this.state,o=n.menuOpen,r=n.options,i=n.selected;i!==r.length-1&&o&&this.handleOptionFocus(i+1)}},t.prototype.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&(e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e})})),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},t.prototype.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),this.state.selected>=0&&this.handleOptionClick(e,this.state.selected))},t.prototype.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},t.prototype.handleKeyDown=function(e){switch(f[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(function(e){return e>47&&e<58||32===e||8===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223})(e.keyCode)&&this.handlePrintableKey(e)}},t.prototype.render=function(){var e=this,t=this.props,n=t.cssNamespace,o=t.displayMenu,r=t.id,l=t.minLength,s=t.name,p=t.placeholder,d=t.required,h=t.showAllValues,f=t.tNoResults,_=t.tStatusQueryTooShort,v=t.tStatusNoResults,b=t.tStatusSelectedOption,y=t.tStatusResults,g=t.dropdownArrow,w=this.state,x=w.focused,O=w.hovered,E=w.menuOpen,C=w.options,N=w.query,k=w.selected,S=this.hasAutoselect(),I=-1===x,A=0===C.length,L=0!==N.length,M=N.length>=l,T=this.props.showNoOptionsFound&&I&&A&&L&&M,D=n+"__wrapper",V=n+"__input",q=null!==x?" "+V+"--focused":"",j=this.props.showAllValues?" "+V+"--show-all-values":" "+V+"--default",R=n+"__dropdown-arrow-down",B=-1!==x&&null!==x,P=n+"__menu",U=P+"--"+o,H=P+"--"+(E||T?"visible":"hidden"),F=n+"__option",W=n+"__hint",K=this.templateInputValue(C[k]),z=K&&0===K.toLowerCase().indexOf(N.toLowerCase())&&S?N+K.substr(N.length):"",Q=m&&z,$=void 0;return h&&"string"==typeof($=g({className:R}))&&($=(0,u.createElement)("div",{className:n+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:$}})),(0,u.createElement)("div",{className:D,onKeyDown:this.handleKeyDown,role:"combobox","aria-expanded":E?"true":"false"},(0,u.createElement)(c.default,{length:C.length,queryLength:N.length,minQueryLength:l,selectedOption:this.templateInputValue(C[k]),tQueryTooShort:_,tNoResults:v,tSelectedOption:b,tResults:y}),Q&&(0,u.createElement)("span",null,(0,u.createElement)("input",{className:W,readonly:!0,tabIndex:"-1",value:z})),(0,u.createElement)("input",a({"aria-activedescendant":!!B&&r+"__option--"+x,"aria-owns":r+"__listbox",autoComplete:"off",className:""+V+q+j,id:r,onClick:function(t){return e.handleInputClick(t)},onBlur:this.handleInputBlur},i(this.handleInputChange),{onFocus:this.handleInputFocus,name:s,placeholder:p,ref:function(t){e.elementReferences[-1]=t},type:"text",role:"textbox",required:d,value:N})),$,(0,u.createElement)("ul",{className:P+" "+U+" "+H,id:r+"__listbox",role:"listbox"},C.map(function(t,n){var o=(-1===x?k===n:x===n)&&null===O?" "+F+"--focused":"",i=n%2?" "+F+"--odd":"";return(0,u.createElement)("li",{"aria-selected":x===n,className:""+F+o+i,dangerouslySetInnerHTML:{__html:e.templateSuggestion(t)},id:r+"__option--"+n,key:n,onFocusOut:function(t){return e.handleOptionBlur(t,n)},onClick:function(t){return e.handleOptionClick(t,n)},onMouseDown:e.handleOptionMouseDown,onMouseEnter:function(t){return e.handleOptionMouseEnter(t,n)},onMouseOut:function(t){return e.handleOptionMouseOut(t,n)},ref:function(t){e.elementReferences[n]=t},role:"option",tabIndex:"-1"})}),T&&(0,u.createElement)("li",{className:F+" "+F+"--no-results"},f())))},t}(u.Component),l.defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},dropdownArrow:p.default},s);t.default=_},function(e,t,n){"use strict";function o(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.__esModule=!0,t.default=void 0;var r,i,l=n(0),s=(i=r=function(e){function t(){for(var t,n,r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=n=o(this,e.call.apply(e,[this].concat(i))),n.state={bump:!1},o(n,t)}return function(e,t){"function"!=typeof t&&null!==t||(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t))}(t,e),t.prototype.componentWillReceiveProps=function(e){e.queryLength!==this.props.queryLength&&this.setState(function(e){return{bump:!e.bump}})},t.prototype.render=function(){var e,t=this.props,n=t.length,o=t.queryLength,r=t.minQueryLength,i=t.selectedOption,s=t.tQueryTooShort,a=t.tNoResults,u=t.tSelectedOption,c=t.tResults,p=this.state.bump,d=o<r,h=0===n,f=i?u(i,n):"";return e=d?s(r):h?a():c(n,f),(0,l.createElement)("div",{"aria-atomic":"true","aria-live":"polite",role:"status",style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},e,(0,l.createElement)("span",null,p?",":",,"))},t}(l.Component),r.defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results."},tNoResults:function(){return"No search results."},tSelectedOption:function(e,t){return e+" (1 of "+t+") is selected."},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}},i);t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var o=n(0);t.default=function(e){var t=e.className;return(0,o.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},(0,o.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},(0,o.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))}}])}),customElements.define("joomla-field-category",class extends HTMLElement{constructor(){super(),this.element="",Joomla.loadingLayer("load",document.body),this.css=".autocomplete__wrapper{position:relative}.autocomplete__hint,.autocomplete__input{-webkit-appearance:none;border:2px solid;border-radius:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;margin-bottom:0;width:100%}.autocomplete__input{background-color:transparent;position:relative}.autocomplete__hint{color:#bfc1c3;position:absolute}.autocomplete__input--default{padding:4px}.autocomplete__input--focused{outline-offset:0;outline:3px solid #ffbf47}.autocomplete__input--show-all-values{padding:4px 34px 4px 4px;cursor:pointer}.autocomplete__dropdown-arrow-down{z-index:-1;display:inline-block;position:absolute;right:8px;width:24px;height:24px;top:10px}.autocomplete__menu{background-color:#fff;border:2px solid #0b0c0c;border-top:0;color:#34384b;margin:0;max-height:342px;overflow-x:hidden;padding:0;width:100%;width:calc(100% - 4px)}.autocomplete__menu--visible{display:block}.autocomplete__menu--hidden{display:none}.autocomplete__menu--overlay{box-shadow:rgba(0,0,0,.256863) 0 2px 6px;left:0;position:absolute;top:100%;z-index:100}.autocomplete__menu--inline{position:relative}.autocomplete__option{border-bottom:solid #bfc1c3;border-width:1px 0;cursor:pointer;display:block;position:relative}.autocomplete__option>*{pointer-events:none}.autocomplete__option:first-of-type{border-top-width:0}.autocomplete__option:last-of-type{border-bottom-width:0}.autocomplete__option--odd{background-color:#fafafa}.autocomplete__option--focused,.autocomplete__option:hover{background-color:#005ea5;border-color:#005ea5;color:#fff;outline:0}.autocomplete__option--no-results{background-color:#fafafa;color:#646b6f;cursor:not-allowed}.autocomplete__hint,.autocomplete__input,.autocomplete__option{font-size:16px;line-height:1.25}.autocomplete__hint,.autocomplete__option{padding:4px}@media (min-width:641px){.autocomplete__hint,.autocomplete__input,.autocomplete__option{font-size:19px;line-height:1.31579}}",this.styleEl=document.createElement("style"),this.styleEl.id="joomla-field-category-css",this.styleEl.innerHTML=this.css,document.head.querySelector("joomla-field-category-css")||document.head.appendChild(this.styleEl)}connectedCallback(){const e=this;if("true"===this.getAttribute("custom-fields-enabled")){if(this.element=this.querySelector("select"),this.check=this.check.bind(this),window.accessibleAutocomplete.enhanceSelectElement({autoselect:!1,defaultValue:this.element.options[this.element.options.selectedIndex].innerHTML,minLength:1,selectElement:this.element,showAllValues:!0,onEnter:t=>{e.check(t)}}),this.values=[],this.texts=[],[].slice.call(this.element.options).forEach(e=>{e.value&&this.values.push(e.value),e.innerHTML&&this.texts.push(e.innerHTML.replace("- ","").replace("- - ","").replace("- - - ","").replace("- - - - ",""))}),console.log(this.values),console.log(this.texts),console.log(this.getAttribute("enable-create")),"true"===this.getAttribute("enable-create")){this.addNew=this.addNew.bind(this),this.confirm=this.confirm.bind(this);const e=document.createElement("button");e.innerText="Create",e.classList.add("btn"),e.classList.add("btn-success"),e.setAttribute("type","button"),e.addEventListener("click",this.addNew),this.insertBefore(e,this.select)}this.categoryHasChanged=this.categoryHasChanged.bind(this),!this.element.value!==this.getAttribute("custom-fields-cat-id")&&(this.element.value=this.getAttribute("custom-fields-cat-id")),this.element.addEventListener("change",this.categoryHasChanged)}}categoryHasChanged(){this.element.value!==parseInt(this.element.parentNode.getAttribute("custom-fields-cat-id"))&&(Joomla.loadingLayer("show",document.body),document.querySelector("input[name=task]").value=this.element.parentNode.getAttribute("custom-fields-section")+".reload",this.element.form.submit())}check(e){if(e&&-1===this.texts.indexOf(e)){const t=document.createElement("option");t.value="something",t.innerText=e,this.element.insertAdjacentElement("afterbegin",t)}}addNew(e){e.target.removeEventListener("click",this.addNew),this.newInput=document.createElement("input"),this.newInput.type="text",e.target.innerText="apply",e.target.classList.remove("btn-success"),e.target.classList.add("btn-warning"),this.insertBefore(this.newInput,e.target),e.target.addEventListener("click",this.confirm),this.querySelector("span").style.display="none"}confirm(e){if(this.newInput.value&&-1===this.texts.indexOf(this.newInput.value)){const e=document.createElement("option");e.value=this.newInput.value,[].slice.call(this.element.options).forEach(e=>{e.selected&&e.removeAttribute("selected")}),e.setAttribute("selected","selected"),e.innerText=this.newInput.value,this.element.insertAdjacentElement("afterbegin",e)}e.target.classList.add("btn-success"),e.target.classList.remove("btn-warning"),e.target.removeEventListener("click",this.confirm),e.target.addEventListener("click",this.addNew),this.element=this.querySelector("select"),this.querySelector("span").remove(),this.newInput.remove(),window.accessibleAutocomplete.enhanceSelectElement({autoselect:!1,defaultValue:this.element.options[this.element.options.selectedIndex].innerHTML,minLength:1,selectElement:this.element,showAllValues:!0})}})})();