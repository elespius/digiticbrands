Joomla=window.Joomla||{},function(a,b){a.Highlighter=function(a){var c,d,e={autoUnhighlight:!0,caseSensitive:!1,startElement:!1,endElement:!1,elements:[],className:"highlight",onlyWords:!0,tag:"span"},f=function(a){a.constructor===String&&(a=[a]),e.autoUnhighlight&&g(a);var b=e.onlyWords?"\b"+b+"\b":"("+a.join("\\b|\\b")+")",c=new RegExp(b,e.caseSensitive?"":"i");return e.elements.map(function(a){h(a,c,e.className)}),this},g=function(a){a.constructor===String&&(a=[a]);var b,d;return a.map(function(f){f=e.caseSensitive?f:f.toUpperCase(),a[f]&&(b=c(a[f]),b.removeClass(),b.each(function(a,b){d=document.createTextNode(c(b).text()),b.parentNode.replaceChild(d,b)}))}),this},h=function(a,b,f){if(3===a.nodeType){var g,i,j,k,l,m,n=a.nodeValue.match(b);if(n)return g=document.createElement(e.tag),i=c(g),i.addClass(f),j=a.splitText(n.index),j.splitText(n[0].length),k=j.cloneNode(!0),i.append(k),c(j).replaceWith(g),i.attr("rel",i.text()),l=i.text(),e.caseSensitive||(l=i.text().toUpperCase()),d[l]||(d[l]=[]),d[l].push(g),1}else if(1===a.nodeType&&a.childNodes&&!/(script|style|textarea|iframe)/i.test(a.tagName)&&(a.tagName!==e.tag.toUpperCase()||a.className!==f))for(m=0;m<a.childNodes.length;m++)m+=h(a.childNodes[m],b,f);return 0},i=function(a,b){var c=a.next();c.attr("id")!==b.attr("id")&&(e.elements.push(c.get(0)),i(c,b))},j=function(a){c=b.noConflict(),c.extend(e,a),i(c(e.startElement),c(e.endElement)),d=[]};return j(a),{highlight:f,unhighlight:g}},b(document).ready(function(b){var c=a.getOptions("js-highlighter");if(c.length){var d=document.getElementById(c.start),e=document.getElementById(c.end);if(!d||!e||!a.Highlighter)return!0;highlighter=new a.Highlighter({startElement:b(d),endElement:b(e),className:c.class,onlyWords:!1,tag:c.tag}).highlight(c.terms),b(d).remove(),b(e).remove()}})}(Joomla,jQuery);