!function(e,t,a){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var i={init:function(a,i){var r=this;r.elem=i,r.$elem=e(i),i.H5Form=r,r.options=e.extend({},e.fn.h5f.options,a),r.field=t.createElement("input"),r.checkSupport(r),"form"===i.nodeName.toLowerCase()&&r.bindWithForm(r.elem,r.$elem)},bindWithForm:function(e,t){var i=this,r=!!t.attr("novalidate"),s=e.elements,o=s.length;for("onSubmit"===i.options.formValidationEvent&&t.on("submit",function(e){r=!!t.attr("novalidate");var s=this.H5Form.donotValidate!=a?this.H5Form.donotValidate:!1;s||r||i.validateForm(i)?t.find(":input").each(function(){i.placeholder(i,this,"submit")}):(e.preventDefault(),this.donotValidate=!1)}),t.on("focusout focusin",function(e){i.placeholder(i,e.target,e.type)}),t.on("focusout change",i.validateField),t.find("fieldset").on("change",function(){i.validateField(this)}),i.browser.isFormnovalidateNative||t.find(":submit[formnovalidate]").on("click",function(){i.donotValidate=!0});o--;){var n=s[o];i.polyfill(n),i.autofocus(i,n)}},polyfill:function(e){if("form"===e.nodeName.toLowerCase())return!0;var t=e.form.H5Form;t.placeholder(t,e),t.numberType(t,e)},checkSupport:function(e){e.browser={},e.browser.isRequiredNative=!!("required"in e.field),e.browser.isPatternNative=!!("pattern"in e.field),e.browser.isPlaceholderNative=!!("placeholder"in e.field),e.browser.isAutofocusNative=!!("autofocus"in e.field),e.browser.isFormnovalidateNative=!!("formnovalidate"in e.field),e.field.setAttribute("type","email"),e.browser.isEmailNative="email"==e.field.type,e.field.setAttribute("type","url"),e.browser.isUrlNative="url"==e.field.type,e.field.setAttribute("type","number"),e.browser.isNumberNative="number"==e.field.type,e.field.setAttribute("type","range"),e.browser.isRangeNative="range"==e.field.type},validateForm:function(){var e=this,t=e.elem,a=t.elements,i=a.length,r=!0;t.isValid=!0;for(var s=0;i>s;s++){var o=a[s];o.isRequired=!!o.required,o.isDisabled=!!o.disabled,o.isDisabled||(r=e.validateField(o),t.isValid&&!r&&e.setFocusOn(o),t.isValid=r&&t.isValid)}return e.options.doRenderMessage&&e.renderErrorMessages(e,t),t.isValid},validateField:function(t){var i=t.target||t;if(i.form===a)return null;var r=i.form.H5Form,s=e(i),o=!1,n=!1,l=!!e(i).attr("required");if(i.isDisabled||(o=!r.browser.isRequiredNative&&l&&r.isValueMissing(r,i),n=!r.browser.isPatternNative&&r.matchPattern(r,i)),i.validityState={valueMissing:o,patterMismatch:n,valid:i.isDisabled||!(o||n)},r.browser.isRequiredNative||(i.validityState.valueMissing?s.addClass(r.options.requiredClass):s.removeClass(r.options.requiredClass)),r.browser.isPatternNative||(i.validityState.patterMismatch?s.addClass(r.options.patternClass):s.removeClass(r.options.patternClass)),i.validityState.valid){s.removeClass(r.options.invalidClass);var d=r.findLabel(s);d.removeClass(r.options.invalidClass)}else{s.addClass(r.options.invalidClass);var d=r.findLabel(s);d.addClass(r.options.invalidClass)}return i.validityState.valid},isValueMissing:function(i,r){var s=e(r),o=/^submit$/i,n=s.val(),l=r.type!==a?r.type:r.tagName.toLowerCase(),d=/^(checkbox|radio|fieldset)$/i;if(d.test(l)||o.test(l)){if(d.test(l)){if("checkbox"===l)return!s.is(":checked");var u;u="fieldset"===l?s.find("input"):t.getElementsByName(r.name);for(var f=0;f<u.length;f++)if(e(u[f]).is(":checked"))return!1;return!0}}else{if(""===n)return!0;if(!i.browser.isPlaceholderNative&&s.hasClass(i.options.placeholderClass))return!0}return!1},matchPattern:function(t,i){var r=e(i),s=!t.browser.isPlaceholderNative&&r.attr("placeholder")&&r.hasClass(t.options.placeholderClass)?"":r.attr("value"),o=r.attr("pattern"),n=r.attr("type");if(""!==s)if("email"===n){var l=!0;if(r.attr("multiple")===a)return!t.options.emailPatt.test(s);s=s.split(t.options.mutipleDelimiter);for(var d=0;d<s.length;d++)if(l=t.options.emailPatt.test(s[d].replace(/[ ]*/g,"")),!l)return!0}else{if("url"===n)return!t.options.urlPatt.test(s);if("text"===n&&o!==a)return usrPatt=new RegExp("^(?:"+o+")$"),!usrPatt.test(s)}return!1},placeholder:function(t,i,r){var s=e(i),o={placeholder:s.attr("placeholder")},n=/^(focusin|submit)$/i,l=/^(input|textarea)$/i,d=/^password$/i,u=t.browser.isPlaceholderNative;u||!l.test(i.nodeName)||d.test(i.type)||o.placeholder===a||(""!==i.value||n.test(r)?i.value===o.placeholder&&n.test(r)&&(i.value="",s.removeClass(t.options.placeholderClass)):(i.value=o.placeholder,s.addClass(t.options.placeholderClass)))},numberType:function(t,a){var i=e(a);if(node=/^input$/i,type=i.attr("type"),node.test(a.nodeName)&&("number"==type&&!t.browser.isNumberNative||"range"==type&&!t.browser.isRangeNative)){var r,s=parseInt(i.attr("min")),o=parseInt(i.attr("max")),n=parseInt(i.attr("step")),l=parseInt(i.attr("value")),d=i.prop("attributes"),u=e("<select>");s=isNaN(s)?-100:s;for(var f=s;o>=f;f+=n)r=e("<option>").attr("value",f).text(f),(l==f||l>f&&f+n>l)&&r.attr("selected",""),u.append(r);e.each(d,function(){u.attr(this.name,this.value)}),i.replaceWith(u)}},autofocus:function(a,i){var r=e(i),s=!!r.attr("autofocus"),o=/^(input|textarea|select|fieldset)$/i,n=/^submit$/i,l=a.browser.isAutofocusNative;!l&&o.test(i.nodeName)&&!n.test(i.type)&&s&&e(t).ready(function(){a.setFocusOn(i)})},findLabel:function(t){var a=e('label[for="'+t.attr("id")+'"]');if(a.length<=0){var i=t.parent(),r=i.get(0).tagName.toLowerCase();"label"==r&&(a=i)}return a},setFocusOn:function(t){"fieldset"===t.tagName.toLowerCase()?e(t).find(":first").focus():e(t).focus()},renderErrorMessages:function(t,a){var i=a.elements,r=i.length,s={};for(s.errors=new Array;r--;){var o=e(i[r]),n=t.findLabel(o);o.hasClass(t.options.requiredClass)&&(s.errors[r]=n.text().replace("*","")+t.options.requiredMessage),o.hasClass(t.options.patternClass)&&(s.errors[r]=n.text().replace("*","")+t.options.patternMessage)}s.errors.length>0&&Joomla.renderMessages(s)}};e.fn.h5f=function(e){return this.each(function(){var t=Object.create(i);t.init(e,this)})},e.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},e(function(){e("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);