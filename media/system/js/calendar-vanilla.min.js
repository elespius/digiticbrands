var JoomlaCalendar=function(e){"use strict";var a,t,r,n=[];if(JoomlaCalendar.prototype=JoomlaCalendar.init.prototype,a=function(e){return e._joomlaCalendar&&e._joomlaCalendar.destroy(),e._joomlaCalendar=new JoomlaCalendar.init(e),e._joomlaCalendar},e.nodeName)return a(e);if(t=document.getElementsByClassName(e),1===t.length)return a(t[0]);for(r=0;r<t.length;r++)n.push(a(t[r]));return n};JoomlaCalendar.init=function(e){"use strict";var a=this,t=e.getElementsByTagName("button")[0],r={inputField:null,firstDayOfWeek:0,time24:!1,showsOthers:!0,showsTime:!1,weekNumbers:!1,showsTodayBtn:!0,compressedHeader:!1,minYear:1970,maxYear:2050,dateFormat:"%Y-%m-%d %H:%M:%S",dateType:"gregorian",direction:"ltr"},n={dateType:"gregorian",inputField:t.parentNode.getElementsByTagName("INPUT")[0],firstDayOfWeek:t.getAttribute("data-firstday")?parseInt(t.getAttribute("data-firstday")):0,time24:24==parseInt(t.getAttribute("data-time_24"))?!0:!1,showsOthers:0==parseInt(t.getAttribute("data-show_others"))?!1:!0,showsTime:1==parseInt(t.getAttribute("data-shows_time"))?!0:!1,weekNumbers:1==parseInt(t.getAttribute("data-week_numbers"))?!0:!1,showsTodayBtn:0==parseInt(t.getAttribute("data-today_btn"))?!1:!0,compressedHeader:1==parseInt(t.getAttribute("data-only_months_nav"))?!0:!1,minYear:t.getAttribute("data-min_year")?parseInt(t.getAttribute("data-min_year")):1970,maxYear:t.getAttribute("data-max_year")?parseInt(t.getAttribute("data-max_year")):2050,dateFormat:t.getAttribute("data-dayformat")?t.getAttribute("data-dayformat"):"%Y-%m-%d %H:%M:%S",direction:void 0!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir")};Date.stringDN=t.getAttribute("data-weekdays_full")&&"gregorian"==n.dateType?t.getAttribute("data-weekdays_full").split("_"):["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Date.stringSDN=t.getAttribute("data-weekdays_short")&&"gregorian"==n.dateType?t.getAttribute("data-weekdays_short").split("_"):["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Date.stringMN=t.getAttribute("data-months_long")&&"gregorian"==n.dateType?t.getAttribute("data-months_long").split("_"):["January","February","March","April","May","June","July","August","September","October","November","December"],Date.stringSMN=t.getAttribute("data-months_short")&&"gregorian"==n.dateType?t.getAttribute("data-months_short").split("_"):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.stringTODAY=t.getAttribute("data-today_trans")&&"gregorian"==n.dateType?t.getAttribute("data-today_trans"):"Today",Date.stringWEEKEND=t.getAttribute("data-weekend")&&"gregorian"==n.dateType?t.getAttribute("data-weekend").split(",").map(Number):[0,6],Date.stringWK=t.getAttribute("data-wk")&&"gregorian"==n.dateType?t.getAttribute("data-wk"):"wk",Date.stringTIME=t.getAttribute("data-time")&&"gregorian"==n.dateType?t.getAttribute("data-time"):"Time:",Date.stringTIMEAM=t.getAttribute("data-time_am")&&"gregorian"==n.dateType?t.getAttribute("data-time_am"):"AM",Date.stringTIMEPM=t.getAttribute("data-time_pm")&&"gregorian"==n.dateType?t.getAttribute("data-time_pm"):"PM";var s=function(e,a){return(" "+e.className+" ").indexOf(" "+a+" ")>-1},d=function(e,a){o(e,a),e.className+=" "+a},o=function(e,a){if(e&&e.className){for(var t=e.className.split(" "),r=new Array,n=t.length;n>0;)t[--n]!=a&&(r[r.length]=t[n]);e.className=r.join(" ")}},l=function(e){return e||(e=window.event),/msie/i.test(navigator.userAgent)?(e.cancelBubble=!0,e.returnValue=!1):(e.preventDefault(),e.stopPropagation()),!1},i=function(e,a,t){e.attachEvent?e.attachEvent("on"+a,t):e.addEventListener?e.addEventListener(a,t,!0):e["on"+a]=t},p=function(e,a,t){e.detachEvent?e.detachEvent("on"+a,t):e.removeEventListener?e.removeEventListener(a,t,!0):e["on"+a]=null},c=function(e,a){var t=null;return t=document.createElement(e),"undefined"!=typeof a&&a.appendChild(t),t},m=function(e){return"undefined"!=typeof e.month?e:"undefined"!=typeof e.parentNode.month?e.parentNode:null},u=function(e){return"undefined"!=typeof e.year?e:"undefined"!=typeof e.parentNode.year?e.parentNode:null},g=function(e,t,r){var n=a.date;r&&(/pm/i.test(r)&&12>e?e=parseInt(e)+12:/am/i.test(r)&&12==e&&(e=0));var s=a.date.getDate(),d=a.date.getMonth(),o=a.date.getFullYear();n.setHours(e),n.setMinutes(parseInt(t,10)),n.setFullYear(o),n.setMonth(d),n.setDate(s),a.dateClicked=!1,v()},y=function(e){e.equalsTo(a.date)||(a.date=e,N())},N=function(){A(a.params.firstDayOfWeek,a.date)},v=function(){var e=a.dateClicked;"gregorian"==a.params.dateType?(a.params.inputField.value=a.date.print(a.params.dateFormat,a.params.dateType),a.params.inputField.setAttribute("data-alt-value",a.date.print("%Y-%m-%d %H:%M:%S",a.params.dateType))):(a.jGregorianDate=Date.convertFromLocal(date),a.params.inputField.value=a.jGregorianDate.print(a.params.dateFormat,a.params.dateType),a.params.inputField.setAttribute("data-alt-value",a.jGregorianDate.print("%Y-%m-%d %H:%M:%S",a.params.dateType))),"function"==typeof a.params.inputField.onchange&&a.params.inputField.onchange(),e&&"function"==typeof a.params.onUpdate&&a.params.onUpdate(a),e&&a.dateClicked&&h()},h=function(){D()},f=function(){var e=a.element.parentNode;e&&e.removeChild(a.element)},b=function(e){if(!a)return!1;for(var t=e.target.parentNode;null!=t&&t!=a.element;t=t.parentNode);return null==t?(h(),l(e)):void 0},T=function(){for(var e=a.table.getElementsByTagName("tr"),t=e.length;t>0;)for(var r=e[--t],n=r.getElementsByTagName("td"),s=n.length;s>0;){var d=n[--s];o(d,"alert-info"),o(d,"alert-success")}a.element.style.display="block",a.hidden=!1,i(document,"keydown",_),i(document,"keypress",_),i(document,"mousedown",b),a.params.inputField.value!=a.date&&(a.date=new Date),N()},D=function(){p(document,"keydown",_),p(document,"keypress",_),p(document,"mousedown",b),a.element.style.display="none",a.hidden=!0},w=function(e){var t=e.currentTarget,r=e.target||e.srcElement;if("TD"!==t.nodeName){var n=t.getParent("TD");"TD"===n.nodeName?t=n:(t=t.getParent("TD"),s(t,"dropdown-menu")&&(t=t.getElementsByTagName("table")))}else if(!s(r,"btn")&&!s(t,"day")&&!s(t,"title"))return;if(!t||t.disabled)return!1;t.calendar;if("undefined"==typeof t.navtype||300!=t.navtype){50==t.navtype&&(t._current=t.innerHTML),o(t,"alert-success"),(r==t||r.parentNode==t)&&L(t,e);var d=m(r),i=null;if(d)i=new Date(a.date),d.month!=i.getMonth()&&(i.setMonth(d.month),y(i),a.dateClicked=!1,v());else{var p=u(r);p&&(i=new Date(a.date),p.year!=i.getFullYear()&&(i.setFullYear(p.year),y(i),a.dateClicked=!1,v()))}}return l(e)},L=function(e,t){var r=!1,n=!1,s=null;if("undefined"==typeof e.navtype){a.currentDateEl&&(o(a.currentDateEl,"selected"),o(a.currentDateEl,"alert-success"),d(e,"selected alert-success"),a.currentDateEl=e,r=a.currentDateEl==e,r||(a.currentDateEl=e)),a.date.setDateOnly(e.caldate),s=a.date;var l=!(a.dateClicked=!e.otherMonth);a.currentDateEl&&(n=!e.disabled),l&&A(a.params.firstDayOfWeek,s)}else{if(200==e.navtype)return o(e,"hilite"),void h();if(s=new Date(a.date),0==e.navtype)return a.date.setDateOnly(new Date),v(),void h();a.dateClicked=!1;var i=s.getLocalFullYear(a.params.dateType),p=s.getLocalMonth(a.params.dateType);switch(e.navtype){case 400:break;case-2:a.params.compressedHeader||i>a.params.minYear&&s._calSetLocalFullYear(a.params.dateType,i-1);break;case-1:var c=s.getDate();if(p>0){var m=s.getLocalMonthDays(a.params.dateType,p-1);c>m&&s.setLocalDate(a.params.dateType,m),s.setMonth(p-1)}else if(i-- >a.params.minYear){s._calSetLocalFullYear(a.params.dateType,i);var m=s.getLocalMonthDays(a.params.dateType,11);c>m&&s.setLocalDate(a.params.dateType,m),s.setMonth(11)}break;case 1:var c=s.getDate();if(11>p){var m=s.getLocalMonthDays(a.params.dateType,p+1);c>m&&s.setLocalDate(a.params.dateType,m),s.setMonth(p+1)}else if(i<a.params.maxYear){s._calSetLocalFullYear(a.params.dateType,i+1);var m=s.getLocalMonthDays(a.params.dateType,0);c>m&&s.setLocalDate(a.params.dateType,m),s.setMonth(0)}break;case 2:a.params.compressedHeader||i<a.params.maxYear&&s._calSetLocalFullYear(a.params.dateType,i+1);break;case 0:if("function"==typeof a.getDateStatus&&a.getDateStatus(s,s.getLocalFullYear(a.params.dateType),s.getLocalMonth(a.params.dateType),s.getLocalDate(a.params.dateType)))return!1}s.equalsTo(a.date)?0==e.navtype&&(n=r=!0):(y(s),n=!0)}n&&t&&v(),r&&(o(e,"hilite"),t&&h())},M=function(e){"0000-00-00 00:00:00"!=a.params.inputField.getAttribute("data-alt-value")?"gregorian"==a.params.dateType?a.date=Date.parseDate(a.params.inputField.getAttribute("data-alt-value"),"%Y-%m-%d %H:%M:%S",a.params.dateType):(a.date=Date.parseDate(a.params.inputField.getAttribute("data-alt-value"),"%Y-%m-%d %H:%M:%S",a.params.dateType),a.date=DateToLocal(tmpLocalDate)):(a.date=new Date,"gregorian"!=a.params.dateType&&(a.date=DateToLocal(a.date)));var t=c("table");a.table=t,t.className="table",t.cellSpacing=0,t.cellPadding=0,t.calendar=a,t.style.marginBottom=0,i(t,"mousedown",a.tableMouseDown);var r=c("div");a.element=r,a.params.direction&&(a.element.style.direction=a.params.direction),r.className="dropdown-menu j-calendar",r.style.position="absolute",r.style.boxShadow="0px 0px 70px 0px rgba(0,0,0,0.67)",r.style.minWidth=e.width,r.style.padding="0",r.style.left="auto",r.style.top="auto",a.wrapper=c("div"),a.wrapper.className="calendar-container",r.appendChild(a.wrapper),a.wrapper.appendChild(t);var n=c("thead",t);n.className="calendar-header";var s=null,o=null,l=a,p=function(e,a,t,r,n,d){r=r?r:"td",d=d?'class="'+d+'"':"",n=n?n:{},s=c(r,o),s.colSpan=a;for(var p in n)s.style[p]=n[p];return 0!=t&&Math.abs(t)<=2&&(s.className+=" nav"),i(s,"mousedown",w),s.calendar=l,s.navtype=t,0!=t&&Math.abs(t)<=2?s.innerHTML="<a "+d+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+e+"</a>":s.innerHTML="<div unselectable='on'"+d+">"+e+"</div>",s};if(0==a.params.compressedHeader&&(o=c("tr",n),o.className="calendar-head-row",a._nav_py=p("<",1,-2,"","","btn btn-small btn-default pull-left prev_month_btn"),a.title=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',a.params.weekNumbers?6:5,300),a.title.className="title",a._nav_ny=p(">",1,2,"","","btn btn-small btn-default pull-right")),o=c("tr",n),o.className="calendar-head-row",a._nav_pm=p("<",1,-1,"","","btn btn-small btn-default pull-left next_month_btn"),a._nav_month=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',a.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),a._nav_month.className="title",a._nav_nm=p(">",1,1,"","","btn btn-small btn-default pull-right"),a.params.showsTodayBtn){o=c("tr",n),o.className="headrow",a._nav_now=p('<a class="btn btn-small btn-success" data-action="today" style="display:block;padding:2px 6px;">'+Date.stringTODAY+"</a>",a.params.weekNumbers?8:7,0,"td",{textAlign:"center"});var m=o.querySelector("a[data-action=today]");if("undefined"==typeof m){var u,y=o.getElementsByTagName("A"),m=null;for(u=0;u<y.length;u++)"today"==y[u].getAttribute("data-action")&&(m=y[u])}i(m,"click",function(e){var t=m.parentNode.parentNode;"TD"===t.tagName&&L(a._nav_now)})}o=c("tr",n),o.className="daynames",a.params.weekNumbers&&(s=c("td",o),s.className="name wn",s.innerHTML=Date.stringWK);for(var u=7;u>0;--u)s=c("td",o),u||(s.calendar=a);a.firstdayname=a.params.weekNumbers?o.firstChild.nextSibling:o.firstChild;for(var N=a.params.firstDayOfWeek,s=a.firstdayname,v=Date.stringWEEKEND,u=0;7>u;++u){s.className="day name",s.style.textAlign="center";var h=(u+N)%7;u&&(s.calendar=a,s.fdow=h),-1!=v.indexOf(h.toString())&&d(s,"weekend"),s.innerHTML=Date.stringSDN[(u+N)%7],s=s.nextSibling}var f=c("tbody",t);for(a.tbody=f,u=6;u>0;--u){o=c("tr",f),a.params.weekNumbers&&(s=c("td",o));for(var b=7;b>0;--b)s=c("td",o),s.calendar=a,i(s,"mousedown",w)}if(a.params.showsTime){o=c("tr",f),o.className="time",s=c("td",o),s.className="time time-title",s.colSpan=1,s.style.verticalAlign="middle",s.innerHTML=Date.stringTIME||"&#160;";var T=c("td",o);T.className="time hours-select",T.colSpan=2;var D=c("td",o);D.className="time minutes-select",D.colSpan=2,function(){function e(e,t,r,n,s){var d=c("select",s);d.calendar=a,d.className="no-chozen-here "+e,d.style.width="100%",d.navtype=50,d._range=[];for(var o=r;n>=o;++o){var l,i="";o==t&&(i=!0),l=10>o&&n>=10?"0"+o:""+o,d.options.add(new Option(l,l,i,i))}return d}var t=a.date.getHours(),r=a.date.getMinutes(),n=!a.params.time24,d=t>12;n&&d&&(t-=12);var l=e("time hour",t,n?1:0,n?12:23,T),p=e("time minutes",r,0,59,D),m=null;if(s=c("td",o),s.className="time ampm",s.colSpan=a.params.weekNumbers?1:2,n){var u="";d&&(u=!0);var y=c("select",s);y.style.width="100%",y.options.add(new Option(Date.stringTIMEPM,"pm",d?u:"",d?u:"")),y.options.add(new Option(Date.stringTIMEAM,"am",d?"":u,d?"":u)),m=y,m.attachEvent?m.attachEvent("onchange",function(){g(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1):m.addEventListener("change",function(){g(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)}else s.innerHTML="&#160;";i(l,"change",g),l.attachEvent?(l.attachEvent("onchange",function(){g(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),p.attachEvent("onchange",function(e){g(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)):(l.addEventListener("change",function(e){g(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),p.addEventListener("change",function(){g(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)),a.onSetTime=function(){},a.onUpdateTime=function(e,a){}}()}else a.onSetTime=a.onUpdateTime=function(){};A(a.params.firstDayOfWeek,a.date),e.parentNode.parentNode.appendChild(a.element)},_=function(e){function t(){var e=new Date(a.date);e.setLocalDate(a.params.dateType,e.getLocalDate(a.params.dateType)-o),y(e)}function r(){var e=new Date(a.date);e.setLocalDate(a.params.dateType,e.getLocalDate(a.params.dateType)+o),y(e)}function n(){var e=new Date(a.date);e.setDate(e.getDate()-o),y(e)}function s(){var e=new Date(a.date);e.setDate(e.getDate()+o),y(e)}if(!a)return!1;var d=e.keyCode;"rtl"==a.params.direction&&(37===d&&(d=39),39===d&&(d=37));var o=37===d||39===d?1:7;switch(d){case 32:L(a._nav_now);break;case 27:h();break;case 37:t();break;case 38:n();break;case 39:r();break;case 40:s();break;case 13:L(a.currentDateEl,e);break;default:return!1}return l(e)},A=function(e,t){var r=new Date,n=r.getLocalFullYear(a.params.dateType),s=r.getLocalMonth(a.params.dateType),d=r.getLocalDate(a.params.dateType);a.table.style.visibility="hidden";var o=t.getLocalFullYear(a.params.dateType);o<a.params.minYear?(o=a.params.minYear,t._calSetLocalFullYear(a.params.dateType,o)):o>a.params.maxYear&&(o=a.params.maxYear,t._calSetLocalFullYear(a.params.dateType,o)),a.params.firstDayOfWeek=e,a.date=new Date(t);var l=t.getLocalMonth(a.params.dateType),i=t.getLocalDate(a.params.dateType);t.getLocalMonthDays(a.params.dateType);t.setLocalDate(a.params.dateType,1);var p=(t.getDay()-a.params.firstDayOfWeek)%7;0>p&&(p+=7),t.setLocalDate(a.params.dateType,-p),t.setLocalDate(a.params.dateType,t.getLocalDate(a.params.dateType)+1);for(var c=a.tbody.firstChild,m=a.ar_days=new Array,u=Date.stringWEEKEND,g=0;6>g;++g,c=c.nextSibling){var y=c.firstChild;a.params.weekNumbers&&(y.className="day wn",y.innerHTML="[object Array]"===Object.prototype.toString.call(Date.localLangNumbers)&&"gregorian"!=a.params.dateType?String.convertNumbers(t.getLocalWeekNumber(a.params.dateType)):t.getLocalWeekNumber(a.params.dateType),y=y.nextSibling),c.className="daysrow";for(var N,v=!1,h=m[g]=[],f=0;7>f;++f,y=y.nextSibling,t.setLocalDate(a.params.dateType,N+1)){N=t.getLocalDate(a.params.dateType);var b=t.getDay();y.className="day",y.style.textAlign="center",y.pos=g<<4|f,h[f]=y;var T=t.getLocalMonth(a.params.dateType)==l;if(T)y.otherMonth=!1,v=!0,y.style.cursor="pointer";else{if(!a.params.showsOthers){y.className+=" emptycell",y.innerHTML="&#160;",y.disabled=!0;continue}y.className+=" disabled othermonth ",y.otherMonth=!0}if(y.disabled=!1,y.innerHTML="[object Array]"===Object.prototype.toString.call(Date.localLangNumbers)&&"gregorian"!=a.params.dateType?String.convertNumbers(N):N,a.getDateStatus){var D=a.getDateStatus(t,o,l,N);D===!0?(y.className+=" table-active disabled",y.disabled=!0):(/disabled/i.test(D)&&(y.disabled=!0),y.className+=" "+D)}y.disabled||(y.caldate=new Date(t),T&&N==i&&(y.className+=" selected table-success alert alert-success",a.currentDateEl=y),t.getLocalFullYear(a.params.dateType)==n&&t.getLocalMonth(a.params.dateType)==s&&N==d&&(y.className+=" today",y.className+=" table-warning"),-1!=u.indexOf(b.toString())&&(y.className+=y.otherMonth?" oweekend":" weekend"))}v||a.params.showsOthers?c.style.display="":(c.style.display="none",c.className="emptyrow")}if(a.params.compressedHeader){var w="[object Array]"===Object.prototype.toString.call(Date.localLangNumbers)&&"gregorian"!=a.params.dateType?String.convertNumbers(o):o;a._nav_month.getElementsByTagName("span")[0].innerHTML=" "+Date.stringMN[l]+" - "+w}else a._nav_month.getElementsByTagName("span")[0].innerHTML=Date.stringMN[l],a.title.getElementsByTagName("span")[0].innerHTML="[object Array]"===Object.prototype.toString.call(Date.localLangNumbers)&&"gregorian"!=a.params.dateType?String.convertNumbers(o):o;a.onSetTime(),a.table.style.visibility="visible"},k=function(e){i(e,"click",T,!1)},E=function(){if(a.destroy=f,a.element=e,a.params={},!e.parentNode.getElementsByTagName("INPUT")[0]&&!e.getElementsByTagName("button")[0])return console.log("Calendar.setup:\n  Nothing to setup (no fields found). Please check your code"),!1;for(var s in r)a.params[s]=n[s]||r[s];M(e.parentNode.getElementsByTagName("INPUT")[0]),k(t)};return E(),a},String.prototype.convertNumbers=function(){"use strict";var e=this.toString();if("[object Array]"===Object.prototype.toString.call(Date.localLangNumbers))for(var a=0;a<Date.localLangNumbers.length;a++)e=e.replace(new RegExp(a,"g"),Date.localLangNumbers[a]);return e},document.onreadystatechange=function(){"interactive"==document.readyState&&(JoomlaCalendar("field-calendar"),"undefined"!=typeof window.jQuery&&jQuery(document).ready(function(){jQuery().chosen&&jQuery.each(jQuery(".no-chozen-here"),function(e,a){jQuery(a).chosen("destroy")})}))};