!function(){"use strict";Date.convertNumbers=function(e){var e=e.toString();if("[object Array]"===Object.prototype.toString.call(Date.localLangNumbers))for(var a=0;a<Date.localLangNumbers.length;a++)e=e.replace(new RegExp(a,"g"),Date.localLangNumbers[a]);return e},Date.toEnglish=function(e){e=this.toString();for(var a=[0,1,2,3,4,5,6,7,8,9],t=0;t<a.length;t++)e=e.replace(new RegExp(a[t],"g"),t);return e},window.getJoomlaCalendarValuesFromAlt=function(){for(var e=document.getElementsByClassName("field-calendar"),a=0;a<e.length;a++){var t=e[a].getElementsByTagName("INPUT")[0],r=t.getAttribute("data-alt-value")?t.getAttribute("data-alt-value"):"0000-00-00 00:00:00";t.value=r}};var a=function(e){var t,r,n,s=[];if(a.prototype=a.init.prototype,t=function(e){return e._joomlaCalendar?e._joomlaCalendar:(e._joomlaCalendar=new a.init(e),e._joomlaCalendar)},e.nodeName)return t(e);if(r=document.getElementsByClassName(e),"undefined"==typeof JoomlaCalLocale){var d=1===r.length?r:r[0],l=d.getElementsByTagName("button")[0];window.JoomlaCalLocale={today:l.getAttribute("data-today_trans")?l.getAttribute("data-today_trans"):"Today",weekend:l.getAttribute("data-weekend")?l.getAttribute("data-weekend").split(",").map(Number):[0,6],wk:l.getAttribute("data-wk")?l.getAttribute("data-wk"):"wk",time:l.getAttribute("data-time")?l.getAttribute("data-time"):"Time:",days:l.getAttribute("data-weekdays_full")?l.getAttribute("data-weekdays_full").split("_"):["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],shortDays:l.getAttribute("data-weekdays_short")?l.getAttribute("data-weekdays_short").split("_"):["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],months:l.getAttribute("data-months_long")?l.getAttribute("data-months_long").split("_"):["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:l.getAttribute("data-months_short")?l.getAttribute("data-months_short").split("_"):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AM:l.getAttribute("data-time_am")&&"gregorian"==l.getAttribute("data-cal_type")?l.getAttribute("data-time_am"):"AM",PM:l.getAttribute("data-time_pm")&&"gregorian"==l.getAttribute("data-cal_type")?l.getAttribute("data-time_pm"):"PM",am:l.getAttribute("data-time_am_lower")&&"gregorian"==l.getAttribute("data-cal_type")?l.getAttribute("data-time_am_lower"):"am",pm:l.getAttribute("data-time_pm_lower")&&"gregorian"==l.getAttribute("data-time_pm_lower")?l.getAttribute("data-time_pm_lower"):"pm",dateType:l.getAttribute("data-cal-type")?l.getAttribute("data-cal-type"):"gregorian"}}if(1===r.length)return t(r[0]);for(n=0;n<r.length;n++)s.push(t(r[n]));return s};a.init=function(a){var t,r,n,s,d,l,o,i,m,p,c=this,u=a.getElementsByTagName("button")[0],y={inputField:null,firstDayOfWeek:0,time24:!1,showsOthers:!0,showsTime:!1,weekNumbers:!1,showsTodayBtn:!0,compressedHeader:!1,monthBefore:!1,minYear:1970,maxYear:2050,dateFormat:"%Y-%m-%d %H:%M:%S",dateType:"gregorian",direction:"ltr",debug:!1,classes:{containerClass:"dropdown-menu j-calendar",wrapperClass:"calendar-container",day:"day"}},g={dateType:u.getAttribute("data-cal-type")?u.getAttribute("data-cal-type"):"gregorian",inputField:u.parentNode.getElementsByTagName("INPUT")[0],firstDayOfWeek:u.getAttribute("data-firstday")?parseInt(u.getAttribute("data-firstday")):0,time24:24==parseInt(u.getAttribute("data-time_24"))?!0:!1,showsOthers:0==parseInt(u.getAttribute("data-show_others"))?!1:!0,showsTime:1==parseInt(u.getAttribute("data-shows_time"))?!0:!1,weekNumbers:1==parseInt(u.getAttribute("data-week_numbers"))?!0:!1,showsTodayBtn:0==parseInt(u.getAttribute("data-today_btn"))?!1:!0,compressedHeader:1==parseInt(u.getAttribute("data-only_months_nav"))?!0:!1,minYear:u.getAttribute("data-min_year")?parseInt(u.getAttribute("data-min_year")):1970,maxYear:u.getAttribute("data-max_year")?parseInt(u.getAttribute("data-max_year")):2050,dateFormat:u.getAttribute("data-dayformat")?u.getAttribute("data-dayformat"):"%Y-%m-%d %H:%M:%S",direction:void 0!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir")};t=function(e,a){return(" "+e.className+" ").indexOf(" "+a+" ")>-1},r=function(e,a){n(e,a),e.className+=" "+a},n=function(e,a){if(e&&e.className){for(var t=e.className.split(" "),r=new Array,n=t.length;n>0;)t[--n]!=a&&(r[r.length]=t[n]);e.className=r.join(" ")}},s=function(e){return e||(e=window.event),/msie/i.test(navigator.userAgent)?(e.cancelBubble=!0,e.returnValue=!1):(e.preventDefault(),e.stopPropagation()),!1},d=function(e,a,t){e.attachEvent?e.attachEvent("on"+a,t):e.addEventListener?e.addEventListener(a,t,!0):e["on"+a]=t},l=function(e,a,t){e.detachEvent?e.detachEvent("on"+a,t):e.removeEventListener?e.removeEventListener(a,t,!0):e["on"+a]=null},o=function(e,a){var t=null;return t=document.createElement(e),"undefined"!=typeof a&&a.appendChild(t),t},i=function(e,a,t){var r=c.date;c.params.time24||(/pm/i.test(ampm)&&12>e?e=parseInt(e)+12:/am/i.test(ampm)&&12==e&&(e=0));var n=c.date.getLocalDate(c.params.dateType),s=c.date.getLocalMonth(c.params.dateType),d=c.date.getLocalFullYear(c.params.dateType);r.setHours(e),r.setMinutes(parseInt(a,10)),r.setSeconds(r.getSeconds()),r.setLocalFullYear(c.params.dateType,d),r.setLocalMonth(c.params.dateType,s),r.setLocalDate(c.params.dateType,n),c.dateClicked=!1,h()},p=function(e){e.equalsTo(c.date)||(c.date=e,_(c.params.firstDayOfWeek,e))},m=function(e){var a=new Date(c.date);a.setDate(a.getDate()-e),p(a)};var h=function(){"gregorian"==c.params.dateType?(c.params.inputField.value=c.date.print(c.params.dateFormat,c.params.dateType,!0),c.params.inputField.setAttribute("data-alt-value",c.date.print("%Y-%m-%d %H:%M:%S",c.params.dateType,!1))):(c.params.inputField.setAttribute("data-alt-value",c.date.print("%Y-%m-%d %H:%M:%S","gregorian",!1)),c.params.inputField.value=c.date.print(c.params.dateFormat,c.params.dateType,!0),c.params.inputField.setAttribute("data-local-value",c.date.print(c.params.dateFormat,c.params.dateType,!1))),"function"==typeof c.params.inputField.onchange&&c.params.inputField.onchange(),c.dateClicked&&"function"==typeof c.params.onUpdate&&c.params.onUpdate(c),c.dateClicked?v():_(c.params.firstDayOfWeek,c.date)},v=function(){document.activeElement.blur(),T()},N=function(){var e=c.element.parentNode;e&&e.removeChild(c.element)},f=function(e){if(!c)return!1;for(var a=e.target.parentNode;null!=a&&a!=c.element;a=a.parentNode);return null==a?(document.activeElement.blur(),T(),s(e)):void 0},b=function(){M();for(var e=c.table.getElementsByTagName("tr"),a=e.length;a>0;)for(var t=e[--a],r=t.getElementsByTagName("td"),s=r.length;s>0;){var l=r[--s];n(l,"alert-info"),n(l,"alert-success")}c.element.style.display="block",c.hidden=!1,d(document,"keydown",L),d(document,"keypress",L),d(document,"mousedown",f),_(c.params.firstDayOfWeek,c.date)},T=function(){l(document,"keydown",L),l(document,"keypress",L),l(document,"mousedown",f),c.element.style.display="none",c.hidden=!0},w=function(e){var a=e.currentTarget,r=e.target||e.srcElement;if("TD"!==a.nodeName){var d=a.getParent("TD");"TD"===d.nodeName?a=d:(a=a.getParent("TD"),t(a,"dropdown-menu")&&(a=a.getElementsByTagName("table")))}else if(!t(r,"btn")&&!t(a,"day")&&!t(a,"title"))return;if(!a||a.disabled)return!1;if("undefined"==typeof a.navtype||300!=a.navtype){50==a.navtype&&(a._current=a.innerHTML),n(a,"alert-success"),(r==a||r.parentNode==a)&&D(a,e);var l=null;"undefined"!=typeof a.month&&(l=a),"undefined"!=typeof a.parentNode.month&&(l=a.parentNode);var o=null;if(l)o=new Date(c.date),l.month!=o.getLocalMonth(c.params.dateType)&&(o.setLocalMonth(c.params.dateType,l.month),p(o),c.dateClicked=!1,h());else{var i=null;"undefined"!=typeof a.year&&(i=r),"undefined"!=typeof a.parentNode.year&&(i=r.parentNode),i&&(o=new Date(c.date),i.year!=o.getLocalFullYear(c.params.dateType)&&(o.setFullYear(c.params.dateType,i.year),p(o),c.dateClicked=!1,h()))}}return s(e)},D=function(e,a){var t=!1,s=!1,d=null;if("undefined"==typeof e.navtype){c.currentDateEl&&(n(c.currentDateEl,"selected"),n(c.currentDateEl,"alert-success"),r(e,"selected alert-success"),c.currentDateEl=e.caldate,t=c.currentDateEl==e.caldate,t||(c.currentDateEl=e.caldate)),c.date.setLocalDateOnly("gregorian",e.caldate),d=c.date;var l=!(c.dateClicked=!e.otherMonth);c.currentDateEl&&(s=!e.disabled),l&&_(c.params.firstDayOfWeek,d)}else{if(200==e.navtype)return n(e,"hilite"),void v();if(d=new Date(c.date),0==e.navtype)return c.date.setLocalDateOnly("gregorian",new Date),c.dateClicked=!0,h(),void v();c.dateClicked=!1;var o=d.getOtherFullYear(c.params.dateType),i=d.getLocalMonth(c.params.dateType);switch(e.navtype){case 400:break;case-2:c.params.compressedHeader||o>c.params.minYear&&d.setOtherFullYear(c.params.dateType,o-1);break;case-1:var m=d.getLocalDate(c.params.dateType);if(i>0){var u=d.getLocalMonthDays(c.params.dateType,i-1);m>u&&d.setLocalDate(c.params.dateType,u),d.setLocalMonth(c.params.dateType,i-1)}else if(o-- >c.params.minYear){d.setOtherFullYear(c.params.dateType,o);var u=d.getLocalMonthDays(c.params.dateType,11);m>u&&d.setLocalDate(c.params.dateType,u),d.setLocalMonth(c.params.dateType,11)}break;case 1:var m=d.getLocalDate(c.params.dateType);if(11>i){var u=d.getLocalMonthDays(c.params.dateType,i+1);m>u&&d.setLocalDate(c.params.dateType,u),d.setLocalMonth(c.params.dateType,i+1)}else if(o<c.params.maxYear){d.setOtherFullYear(c.params.dateType,o+1);var u=d.getLocalMonthDays(c.params.dateType,0);m>u&&d.setLocalDate(c.params.dateType,u),d.setLocalMonth(c.params.dateType,0)}break;case 2:c.params.compressedHeader||o<c.params.maxYear&&d.setOtherFullYear(c.params.dateType,o+1);break;case 0:}d.equalsTo(c.date)?0==e.navtype&&(s=t=!0):(p(d),s=!0)}s&&a&&h(),t&&(n(e,"hilite"),a&&v())},L=function(a){if(!c)return!1;a=window.event?event:e;var t=parseInt(a.keyCode);return"rtl"==c.params.direction&&(37==t?t=39:39==t&&(t=37)),32===t&&D(c._nav_now),27===t&&v(),13===t&&D(c.currentDateEl,a),38===t&&m(7),40===t&&m(-7),37===t&&m(1),39===t&&m(-1),s(a)},A=function(e){var a=o("table");c.table=a,a.className="table",a.cellSpacing=0,a.cellPadding=0,a.style.marginBottom=0,d(a,"mousedown",c.tableMouseDown);var t=o("div");c.element=t,c.params.direction&&(c.element.style.direction=c.params.direction),t.className=c.params.classes.containerClass,t.style.position="absolute",t.style.boxShadow="0px 0px 70px 0px rgba(0,0,0,0.67)",t.style.minWidth=e.width,t.style.padding="0",t.style.left="auto",t.style.top="auto",c.wrapper=o("div"),c.wrapper.className=c.params.classes.wrapperClass,t.appendChild(c.wrapper),c.wrapper.appendChild(a);var n=o("thead",a);n.className="calendar-header";var s=null,l=null,m=c,p=function(e,a,t,r,n,i){r=r?r:"td",i=i?'class="'+i+'"':"",n=n?n:{},s=o(r,l),s.colSpan=a;for(var p in n)s.style[p]=n[p];return 0!=t&&Math.abs(t)<=2&&(s.className+=" nav"),d(s,"mousedown",w),s.calendar=m,s.navtype=t,0!=t&&Math.abs(t)<=2?s.innerHTML="<a "+i+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+e+"</a>":s.innerHTML="<div unselectable='on'"+i+">"+e+"</div>",s};if(0==c.params.compressedHeader&&(l=o("tr",n),l.className="calendar-head-row",c._nav_py=p("<",1,-2,"","","btn btn-small btn-default pull-left"),c.title=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',c.params.weekNumbers?6:5,300),c.title.className="title",c._nav_ny=p(">",1,2,"","","btn btn-small btn-default pull-right")),l=o("tr",n),l.className="calendar-head-row",c._nav_pm=p("<",1,-1,"","","btn btn-small btn-default pull-left"),c._nav_month=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',c.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),c._nav_month.className="title",c._nav_nm=p(">",1,1,"","","btn btn-small btn-default pull-right"),c.params.showsTodayBtn){l=o("tr",n),l.className="headrow",c._nav_now=p('<a class="btn btn-small btn-success" data-action="today" style="display:block;padding:2px 6px;">'+JoomlaCalLocale.today+"</a>",c.params.weekNumbers?8:7,0,"td",{textAlign:"center"});var u=l.querySelector("a[data-action=today]");if("undefined"==typeof u){var y,g=l.getElementsByTagName("A"),u=null;for(y=0;y<g.length;y++)"today"==g[y].getAttribute("data-action")&&(u=g[y])}d(u,"click",function(e){var a=u.parentNode.parentNode;"TD"===a.tagName&&D(c._nav_now)})}l=o("tr",n),l.className="daynames",c.params.weekNumbers&&(s=o("td",l),s.className="name wn",s.innerHTML=JoomlaCalLocale.wk);for(var y=7;y>0;--y)s=o("td",l),y||(s.calendar=c);c.firstdayname=c.params.weekNumbers?l.firstChild.nextSibling:l.firstChild;for(var h=c.params.firstDayOfWeek,s=c.firstdayname,v=JoomlaCalLocale.weekend,y=0;7>y;++y){s.className="day name",s.style.textAlign="center";var N=(y+h)%7;y&&(s.calendar=c,s.fdow=N),-1!=v.indexOf(N.toString())&&r(s,"weekend"),s.innerHTML=JoomlaCalLocale.shortDays[(y+h)%7],s=s.nextSibling}var f=o("tbody",a);for(c.tbody=f,y=6;y>0;--y){l=o("tr",f),c.params.weekNumbers&&(s=o("td",l));for(var b=7;b>0;--b)s=o("td",l),s.calendar=c,d(s,"mousedown",w)}if(c.params.showsTime){l=o("tr",f),l.className="time",s=o("td",l),s.className="time time-title",s.colSpan=1,s.style.verticalAlign="middle",s.innerHTML=JoomlaCalLocale.time||"&#160;";var T=o("td",l);T.className="time hours-select",T.colSpan=2;var L=o("td",l);L.className="time minutes-select",L.colSpan=2,function(){function e(e,a,t,r,n){var s,d=o("select",n);d.calendar=c,d.className="no-chozen-here "+e,d.style.width="100%",d.navtype=50,d._range=[];for(var l=t;r>=l;++l){var i,m="";l==a&&(m=!0),10>l&&r>=10?(s="0"+l,i=Date.convertNumbers("0")+Date.convertNumbers(l)):(s=""+l,i=""+Date.convertNumbers(l)),d.options.add(new Option(i,s,m,m))}return d}var a=c.date.getHours(),t=c.date.getMinutes(),r=!c.params.time24,n=a>12;r&&n&&(a-=12);var d=e("time hour",a,r?1:0,r?12:23,T),m=e("time minutes",t,0,59,L),p=null;if(s=o("td",l),s.className="time ampm",s.colSpan=c.params.weekNumbers?1:2,r){var u="";n&&(u=!0);var y=o("select",s);y.style.width="100%",y.options.add(new Option(JoomlaCalLocale.PM,"pm",n?u:"",n?u:"")),y.options.add(new Option(JoomlaCalLocale.AM,"am",n?"":u,n?"":u)),p=y,p.attachEvent?p.attachEvent("onchange",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1):p.addEventListener("change",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)}else s.innerHTML="&#160;";d.attachEvent?(d.attachEvent("onchange",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),m.attachEvent("onchange",function(e){i(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)):(d.addEventListener("change",function(e){i(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),m.addEventListener("change",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1))}()}_(c.params.firstDayOfWeek,c.date),e.parentNode.parentNode.appendChild(c.element)},_=function(e,a){c.table.style.visibility="hidden";var t=new Date,r=t.getLocalFullYear(c.params.dateType),n=t.getLocalMonth(c.params.dateType),s=t.getLocalDate(c.params.dateType),d=a.getOtherFullYear(c.params.dateType);d<c.params.minYear?(d=c.params.minYear,a.getOtherFullYear(c.params.dateType,d)):d>c.params.maxYear&&(d=c.params.maxYear,a.getOtherFullYear(c.params.dateType,d)),c.params.firstDayOfWeek=e,c.date=new Date(a);var l=a.getLocalMonth(c.params.dateType),o=a.getLocalDate(c.params.dateType);a.setLocalDate(c.params.dateType,1);var i=(a.getLocalDay(c.params.dateType)-c.params.firstDayOfWeek)%7;0>i&&(i+=7),a.setLocalDate(c.params.dateType,-i),a.setLocalDate(c.params.dateType,a.getLocalDate(c.params.dateType)+1);for(var m=c.tbody.firstChild,p=c.ar_days=new Array,u=JoomlaCalLocale.weekend,y=parseInt(a.getLocalWeekDays(c.params.dateType)),g=0;y>g;++g,m=m.nextSibling){var h=m.firstChild;c.params.weekNumbers&&(h.className="day wn",h.innerHTML=a.convertNumbers(a.getLocalWeekNumber(c.params.dateType)),h=h.nextSibling),m.className="daysrow";for(var v,N=!1,f=p[g]=[],b=y+1,T=0;b>T;++T,h=h.nextSibling,a.setLocalDate(c.params.dateType,v+1)){h.className="day",h.style.textAlign="center",v=a.getLocalDate(c.params.dateType);var w=a.getLocalDate(c.params.dateType);h.pos=g<<4|T,f[T]=h;var D=a.getLocalMonth(c.params.dateType)==l;if(D)h.otherMonth=!1,N=!0,h.style.cursor="pointer";else{if(!c.params.showsOthers){h.className+=" emptycell",h.innerHTML="&#160;",h.disabled=!0;continue}h.className+=" disabled othermonth ",h.otherMonth=!0}h.disabled=!1,h.innerHTML=c.params.debug?v:Date.convertNumbers(v),h.disabled||(h.caldate=new Date(a),D&&v==o&&(h.className+=" selected table-success alert alert-success",c.currentDateEl=h),a.getLocalFullYear(c.params.dateType)==r&&a.getLocalMonth(c.params.dateType)==n&&v==s&&(h.className+=" today",h.className+=" table-warning"),-1!=u.indexOf(w.toString())&&(h.className+=h.otherMonth?" oweekend":" weekend"))}N||c.params.showsOthers?m.style.display="":(m.style.display="none",m.className="emptyrow")}if(c.params.compressedHeader){var L=Date.convertNumbers(d.toString());c._nav_month.getElementsByTagName("span")[0].innerHTML=c.params.monthBefore?L+" - "+JoomlaCalLocale.months[l]:JoomlaCalLocale.months[l]+" - "+L}else c._nav_month.getElementsByTagName("span")[0].innerHTML=c.params.debug?l+" "+JoomlaCalLocale.months[l]:JoomlaCalLocale.months[l],c.title.getElementsByTagName("span")[0].innerHTML=c.params.debug?d+" "+Date.convertNumbers(d.toString()):Date.convertNumbers(d.toString());c.table.style.visibility="visible"},k=function(e){d(e.parentNode.getElementsByTagName("INPUT")[0],"focus",b,!0),d(e,"click",b,!1),d(e.parentNode.getElementsByTagName("INPUT")[0].form,"submit",getJoomlaCalendarValuesFromAlt(),!1)},M=function(){var e=Date.parseFieldDate(c.params.inputField.getAttribute("data-alt-value"),"%Y-%m-%d %H:%M:%S","gregorian");if(c.params.inputField.value.length){if("0000-00-00 00:00:00"!=c.params.inputField.getAttribute("data-alt-value")||""!=c.params.inputField.value){if("gregorian"!=c.params.dateType){var a=new Date(e);c.params.inputField.value=a.print(c.params.dateFormat,c.params.dateType,!0)}c.date=new Date(e)}}else c.date=new Date},E=function(){if(c.destroy=N,c.element=a,c.params={},!a.parentNode.getElementsByTagName("INPUT")[0]&&!a.getElementsByTagName("button")[0])return console.log("Calendar setup failed:\n  No valid fields found, Please check your code"),!1;for(var e in y)c.params[e]=g[e]||y[e];M(),A(a.parentNode.getElementsByTagName("INPUT")[0]),k(u)};return E(),c},document.onreadystatechange=function(){"interactive"==document.readyState&&(a("field-calendar"),"undefined"!=typeof window.jQuery&&jQuery(document).ready(function(){jQuery().chosen&&jQuery.each(jQuery(".no-chozen-here"),function(e,a){jQuery(a).chosen("destroy")})}))}}();