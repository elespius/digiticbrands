!function(){"use strict";var a=function(e){var t,n,r,o=[];if(a.prototype=a.init.prototype,t=function(e){return e._joomlaCalendar&&e._joomlaCalendar.destroy(),e._joomlaCalendar=new a.init(e),e._joomlaCalendar},e.nodeName)return t(e);if(n=document.getElementsByClassName(e),n.length>0){var l=1===n.length?n:n[0],d=l.getElementsByTagName("button")[0];window.JoomlaCalLocale={today:d.getAttribute("data-today_trans")?d.getAttribute("data-today_trans"):"Today",weekend:d.getAttribute("data-weekend")?d.getAttribute("data-weekend").split(",").map(Number):[0,6],wk:d.getAttribute("data-wk")?d.getAttribute("data-wk"):"wk",time:d.getAttribute("data-time")?d.getAttribute("data-time"):"Time:",days:d.getAttribute("data-weekdays_full")?d.getAttribute("data-weekdays_full").split("_"):["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],shortDays:d.getAttribute("data-weekdays_short")?d.getAttribute("data-weekdays_short").split("_"):["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],months:d.getAttribute("data-months_long")?d.getAttribute("data-months_long").split("_"):["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:d.getAttribute("data-months_short")?d.getAttribute("data-months_short").split("_"):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AM:d.getAttribute("data-time_am")&&"gregorian"==d.getAttribute("data-cal_type")?d.getAttribute("data-time_am"):"AM",PM:d.getAttribute("data-time_pm")&&"gregorian"==d.getAttribute("data-cal_type")?d.getAttribute("data-time_pm"):"PM",am:d.getAttribute("data-time_am_lower")&&"gregorian"==d.getAttribute("data-cal_type")?d.getAttribute("data-time_am_lower"):"am",pm:d.getAttribute("data-time_pm_lower")&&"gregorian"==d.getAttribute("data-time_pm_lower")?d.getAttribute("data-time_pm_lower"):"pm",dateType:d.getAttribute("data-cal-type")?d.getAttribute("data-cal-type"):"gregorian"},Date.convertNumbers=function(e){var e=e.toString();if("[object Array]"===Object.prototype.toString.call(Date.localLangNumbers))for(var a=0;a<Date.localLangNumbers.length;a++)e=e.replace(new RegExp(a,"g"),Date.localLangNumbers[a]);return e},Date.toEnglish=function(e){e=this.toString();for(var a=[0,1,2,3,4,5,6,7,8,9],t=0;t<a.length;t++)e=e.replace(new RegExp(a[t],"g"),t);return e},window.getJoomlaCalendarValuesFromAlt=function(){for(var e=document.getElementsByClassName("field-calendar"),a=0;a<e.length;a++){var t=e[a].getElementsByTagName("INPUT")[0],n=t.value,r=t.getAttribute("data-alt-value")?t.getAttribute("data-alt-value"):"0000-00-00 00:00:00";n=n?n:r}}}if(1===n.length)return t(n[0]);for(r=0;r<n.length;r++)o.push(t(n[r]));return o};a.init=function(a){var t,n,r,o,l,d,s,i,m,p,c=this,u=a.getElementsByTagName("button")[0],g={inputField:null,firstDayOfWeek:0,time24:!1,showsOthers:!0,showsTime:!1,weekNumbers:!1,showsTodayBtn:!0,compressedHeader:!1,monthBefore:!1,minYear:1970,maxYear:2050,dateFormat:"%Y-%m-%d %H:%M:%S",dateType:"gregorian",direction:"ltr"},y={dateType:u.getAttribute("data-cal-type")?u.getAttribute("data-cal-type"):"gregorian",inputField:u.parentNode.getElementsByTagName("INPUT")[0],firstDayOfWeek:u.getAttribute("data-firstday")?parseInt(u.getAttribute("data-firstday")):0,time24:24==parseInt(u.getAttribute("data-time_24"))?!0:!1,showsOthers:0==parseInt(u.getAttribute("data-show_others"))?!1:!0,showsTime:1==parseInt(u.getAttribute("data-shows_time"))?!0:!1,weekNumbers:1==parseInt(u.getAttribute("data-week_numbers"))?!0:!1,showsTodayBtn:0==parseInt(u.getAttribute("data-today_btn"))?!1:!0,compressedHeader:1==parseInt(u.getAttribute("data-only_months_nav"))?!0:!1,minYear:u.getAttribute("data-min_year")?parseInt(u.getAttribute("data-min_year")):1970,maxYear:u.getAttribute("data-max_year")?parseInt(u.getAttribute("data-max_year")):2050,dateFormat:u.getAttribute("data-dayformat")?u.getAttribute("data-dayformat"):"%Y-%m-%d %H:%M:%S",direction:void 0!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir")};t=function(e,a){return(" "+e.className+" ").indexOf(" "+a+" ")>-1},n=function(e,a){r(e,a),e.className+=" "+a},r=function(e,a){if(e&&e.className){for(var t=e.className.split(" "),n=new Array,r=t.length;r>0;)t[--r]!=a&&(n[n.length]=t[r]);e.className=n.join(" ")}},o=function(e){return e||(e=window.event),/msie/i.test(navigator.userAgent)?(e.cancelBubble=!0,e.returnValue=!1):(e.preventDefault(),e.stopPropagation()),!1},l=function(e,a,t){e.attachEvent?e.attachEvent("on"+a,t):e.addEventListener?e.addEventListener(a,t,!0):e["on"+a]=t},d=function(e,a,t){e.detachEvent?e.detachEvent("on"+a,t):e.removeEventListener?e.removeEventListener(a,t,!0):e["on"+a]=null},s=function(e,a){var t=null;return t=document.createElement(e),"undefined"!=typeof a&&a.appendChild(t),t},i=function(e,a,t){var n=c.date;c.params.time24||(/pm/i.test(ampm)&&12>e?e=parseInt(e)+12:/am/i.test(ampm)&&12==e&&(e=0));var r=c.date.getLocalDate(c.params.dateType),o=c.date.getLocalMonth(c.params.dateType),l=c.date.getLocalFullYear(c.params.dateType);n.setHours(e),n.setMinutes(parseInt(a,10)),n.setSeconds(n.getSeconds()),n.setFullYear(l),n.setMonth(o),n.setDate(r),c.dateClicked=!1,h()},p=function(e){e.equalsTo(c.date)||(c.date=e,_(c.params.firstDayOfWeek,e))},m=function(e){var a=new Date(c.date);console.log(a),a.setLocalDate(c.params.dateType,a.getLocalDate(c.params.dateType)-e),console.log(a),p(a),console.log(a),console.log(c.date)};var h=function(){"gregorian"==c.params.dateType?(c.params.inputField.value=c.date.print(c.params.dateFormat,c.params.dateType,!0),console.log(c.params.inputField.value),c.params.inputField.setAttribute("data-alt-value",c.date.print("%Y-%m-%d %H:%M:%S",c.params.dateType,!1)),console.log(c.params.inputField.getAttribute("data-alt-value"))):(c.params.inputField.setAttribute("data-alt-value",c.date.print("%Y-%m-%d %H:%M:%S","gregorian",!1)),c.params.inputField.value=c.date.print(c.params.dateFormat,c.params.dateType,!0),c.params.inputField.setAttribute("data-local-value",c.date.print(c.params.dateFormat,c.params.dateType,!1))),"function"==typeof c.params.inputField.onchange&&c.params.inputField.onchange(),c.dateClicked&&"function"==typeof c.params.onUpdate&&c.params.onUpdate(c),c.dateClicked?v():_(c.params.firstDayOfWeek,c.date)},v=function(){document.activeElement.blur(),T()},N=function(){var e=c.element.parentNode;e&&e.removeChild(c.element)},f=function(e){if(!c)return!1;for(var a=e.target.parentNode;null!=a&&a!=c.element;a=a.parentNode);return null==a?(document.activeElement.blur(),T(),o(e)):void 0},b=function(){M();for(var e=c.table.getElementsByTagName("tr"),a=e.length;a>0;)for(var t=e[--a],n=t.getElementsByTagName("td"),o=n.length;o>0;){var d=n[--o];r(d,"alert-info"),r(d,"alert-success")}c.element.style.display="block",c.hidden=!1,l(document,"keydown",L),l(document,"keypress",L),l(document,"mousedown",f),_(c.params.firstDayOfWeek,c.date)},T=function(){d(document,"keydown",L),d(document,"keypress",L),d(document,"mousedown",f),c.element.style.display="none",c.hidden=!0},w=function(e){var a=e.currentTarget,n=e.target||e.srcElement;if("TD"!==a.nodeName){var l=a.getParent("TD");"TD"===l.nodeName?a=l:(a=a.getParent("TD"),t(a,"dropdown-menu")&&(a=a.getElementsByTagName("table")))}else if(!t(n,"btn")&&!t(a,"day")&&!t(a,"title"))return;if(!a||a.disabled)return!1;if("undefined"==typeof a.navtype||300!=a.navtype){50==a.navtype&&(a._current=a.innerHTML),r(a,"alert-success"),(n==a||n.parentNode==a)&&D(a,e);var d=null;"undefined"!=typeof a.month&&(d=a),"undefined"!=typeof a.parentNode.month&&(d=a.parentNode);var s=null;if(d)s=new Date(c.date),d.month!=s.getLocalMonth(c.params.dateType)&&(s.setLocalMonth(c.params.dateType,d.month),p(s),c.dateClicked=!1,h());else{var i=null;"undefined"!=typeof a.year&&(i=n),"undefined"!=typeof a.parentNode.year&&(i=n.parentNode),i&&(s=new Date(c.date),i.year!=s.getLocalFullYear(c.params.dateType)&&(s.setFullYear(c.params.dateType,i.year),p(s),c.dateClicked=!1,h()))}}return o(e)},D=function(e,a){var t=!1,o=!1,l=null;if("undefined"==typeof e.navtype){c.currentDateEl&&(r(c.currentDateEl,"selected"),r(c.currentDateEl,"alert-success"),n(e,"selected alert-success"),c.currentDateEl=e,t=c.currentDateEl==e,t||(c.currentDateEl=e)),c.date.setLocalDateOnly(c.params.dateType,e.caldate),l=c.date;var d=!(c.dateClicked=!e.otherMonth);c.currentDateEl&&(o=!e.disabled),d&&_(c.params.firstDayOfWeek,l)}else{if(200==e.navtype)return r(e,"hilite"),void v();if(l=new Date(c.date),0==e.navtype)return c.date.setLocalDateOnly(c.params.dateType,new Date),c.dateClicked=!0,h(),void v();c.dateClicked=!1;var s=l.getLocalFullYear(c.params.dateType),i=l.getLocalMonth(c.params.dateType);switch(e.navtype){case 400:break;case-2:c.params.compressedHeader||s>c.params.minYear&&l.setOtherFullYear(c.params.dateType,s-1);break;case-1:var m=l.getLocalDate(c.params.dateType);if(i>0){var u=l.getLocalMonthDays(c.params.dateType,i-1);m>u&&l.setLocalDate(c.params.dateType,u),l.setLocalMonth(c.params.dateType,i-1)}else if(s-- >c.params.minYear){l.setFullYear(s);var u=l.getLocalMonthDays(c.params.dateType,11);m>u&&l.setLocalDate(c.params.dateType,u),l.setLocalMonth(c.params.dateType,11)}break;case 1:var m=l.getLocalDate(c.params.dateType);if(11>i){var u=l.getLocalMonthDays(c.params.dateType,i+1);m>u&&l.setLocalDate(c.params.dateType,u),l.setLocalMonth(c.params.dateType,i+1)}else if(s<c.params.maxYear){l.setFullYear(s+1);var u=l.getLocalMonthDays(c.params.dateType,0);m>u&&l.setLocalDate(c.params.dateType,u),l.setLocalMonth(c.params.dateType,0)}break;case 2:c.params.compressedHeader||s<c.params.maxYear&&l.setOtherFullYear(c.params.dateType,s+1);break;case 0:}l.equalsTo(c.date)?0==e.navtype&&(o=t=!0):(p(l),o=!0)}o&&a&&h(),t&&(r(e,"hilite"),a&&v())},L=function(a){if(!c)return!1;a=window.event?event:e;var t=parseInt(a.keyCode);return"rtl"==c.params.direction&&(37==t?t=39:39==t&&(t=37)),32===t&&D(c._nav_now),27===t&&v(),13===t&&D(c.currentDateEl,a),38===t&&m(7),40===t&&m(-7),37===t&&m(1),39===t&&m(-1),o(a)},A=function(e){var a=s("table");c.table=a,a.className="table",a.cellSpacing=0,a.cellPadding=0,a.style.marginBottom=0,l(a,"mousedown",c.tableMouseDown);var t=s("div");c.element=t,c.params.direction&&(c.element.style.direction=c.params.direction),t.className="dropdown-menu j-calendar",t.style.position="absolute",t.style.boxShadow="0px 0px 70px 0px rgba(0,0,0,0.67)",t.style.minWidth=e.width,t.style.padding="0",t.style.left="auto",t.style.top="auto",c.wrapper=s("div"),c.wrapper.className="calendar-container",t.appendChild(c.wrapper),c.wrapper.appendChild(a);var r=s("thead",a);r.className="calendar-header";var o=null,d=null,m=c,p=function(e,a,t,n,r,i){n=n?n:"td",i=i?'class="'+i+'"':"",r=r?r:{},o=s(n,d),o.colSpan=a;for(var p in r)o.style[p]=r[p];return 0!=t&&Math.abs(t)<=2&&(o.className+=" nav"),l(o,"mousedown",w),o.calendar=m,o.navtype=t,0!=t&&Math.abs(t)<=2?o.innerHTML="<a "+i+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+e+"</a>":o.innerHTML="<div unselectable='on'"+i+">"+e+"</div>",o};if(0==c.params.compressedHeader&&(d=s("tr",r),d.className="calendar-head-row",c._nav_py=p("<",1,-2,"","","btn btn-small btn-default pull-left prev_month_btn"),c.title=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',c.params.weekNumbers?6:5,300),c.title.className="title",c._nav_ny=p(">",1,2,"","","btn btn-small btn-default pull-right")),d=s("tr",r),d.className="calendar-head-row",c._nav_pm=p("<",1,-1,"","","btn btn-small btn-default pull-left next_month_btn"),c._nav_month=p('<div style="text-align:center;font-size:1.2em"><span></span></div>',c.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),c._nav_month.className="title",c._nav_nm=p(">",1,1,"","","btn btn-small btn-default pull-right"),c.params.showsTodayBtn){d=s("tr",r),d.className="headrow",c._nav_now=p('<a class="btn btn-small btn-success" data-action="today" style="display:block;padding:2px 6px;">'+JoomlaCalLocale.today+"</a>",c.params.weekNumbers?8:7,0,"td",{textAlign:"center"});var u=d.querySelector("a[data-action=today]");if("undefined"==typeof u){var g,y=d.getElementsByTagName("A"),u=null;for(g=0;g<y.length;g++)"today"==y[g].getAttribute("data-action")&&(u=y[g])}l(u,"click",function(e){var a=u.parentNode.parentNode;"TD"===a.tagName&&D(c._nav_now)})}d=s("tr",r),d.className="daynames",c.params.weekNumbers&&(o=s("td",d),o.className="name wn",o.innerHTML=JoomlaCalLocale.wk);for(var g=7;g>0;--g)o=s("td",d),g||(o.calendar=c);c.firstdayname=c.params.weekNumbers?d.firstChild.nextSibling:d.firstChild;for(var h=c.params.firstDayOfWeek,o=c.firstdayname,v=JoomlaCalLocale.weekend,g=0;7>g;++g){o.className="day name",o.style.textAlign="center";var N=(g+h)%7;g&&(o.calendar=c,o.fdow=N),-1!=v.indexOf(N.toString())&&n(o,"weekend"),o.innerHTML=JoomlaCalLocale.shortDays[(g+h)%7],o=o.nextSibling}var f=s("tbody",a);for(c.tbody=f,g=6;g>0;--g){d=s("tr",f),c.params.weekNumbers&&(o=s("td",d));for(var b=7;b>0;--b)o=s("td",d),o.calendar=c,l(o,"mousedown",w)}if(c.params.showsTime){d=s("tr",f),d.className="time",o=s("td",d),o.className="time time-title",o.colSpan=1,o.style.verticalAlign="middle",o.innerHTML=JoomlaCalLocale.time||"&#160;";var T=s("td",d);T.className="time hours-select",T.colSpan=2;var L=s("td",d);L.className="time minutes-select",L.colSpan=2,function(){function e(e,a,t,n,r){var o,l=s("select",r);l.calendar=c,l.className="no-chozen-here "+e,l.style.width="100%",l.navtype=50,l._range=[];for(var d=t;n>=d;++d){var i,m="";d==a&&(m=!0),10>d&&n>=10?(o="0"+d,i=Date.convertNumbers("0")+Date.convertNumbers(d)):(o=""+d,i=""+Date.convertNumbers(d)),l.options.add(new Option(i,o,m,m))}return l}var a=c.date.getHours(),t=c.date.getMinutes(),n=!c.params.time24,r=a>12;n&&r&&(a-=12);var l=e("time hour",a,n?1:0,n?12:23,T),m=e("time minutes",t,0,59,L),p=null;if(o=s("td",d),o.className="time ampm",o.colSpan=c.params.weekNumbers?1:2,n){var u="";r&&(u=!0);var g=s("select",o);g.style.width="100%",g.options.add(new Option(JoomlaCalLocale.PM,"pm",r?u:"",r?u:"")),g.options.add(new Option(JoomlaCalLocale.AM,"am",r?"":u,r?"":u)),p=g,p.attachEvent?p.attachEvent("onchange",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1):p.addEventListener("change",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)}else o.innerHTML="&#160;";l.attachEvent?(l.attachEvent("onchange",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),m.attachEvent("onchange",function(e){i(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)):(l.addEventListener("change",function(e){i(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),m.addEventListener("change",function(){i(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1))}()}_(c.params.firstDayOfWeek,c.date),e.parentNode.parentNode.appendChild(c.element)},_=function(e,a){c.table.style.visibility="hidden";var t=new Date,n=t.getLocalFullYear(c.params.dateType),r=t.getLocalMonth(c.params.dateType),o=t.getLocalDate(c.params.dateType),l=a.getOtherFullYear(c.params.dateType);l<c.params.minYear?(l=c.params.minYear,a.getOtherFullYear(c.params.dateType,l)):l>c.params.maxYear&&(l=c.params.maxYear,a.getOtherFullYear(c.params.dateType,l)),c.params.firstDayOfWeek=e,c.date=new Date(a);var d=a.getLocalMonth(c.params.dateType),s=a.getLocalDate(c.params.dateType);a.setLocalDate(c.params.dateType,1);var i=(a.getLocalDay(c.params.dateType)-c.params.firstDayOfWeek)%7;0>i&&(i+=7),a.setLocalDate(c.params.dateType,-i),a.setLocalDate(c.params.dateType,a.getLocalDate(c.params.dateType)+1);for(var m=c.tbody.firstChild,p=c.ar_days=new Array,u=JoomlaCalLocale.weekend,g=parseInt(a.getLocalWeekDays(c.params.dateType)),y=0;g>y;++y,m=m.nextSibling){var h=m.firstChild;c.params.weekNumbers&&(h.className="day wn",h.innerHTML=a.convertNumbers(a.getLocalWeekNumber(c.params.dateType)),h=h.nextSibling),m.className="daysrow";for(var v,N=!1,f=p[y]=[],b=g+1,T=0;b>T;++T,h=h.nextSibling,a.setDate(v+1)){h.className="day",h.style.textAlign="center",v=a.getLocalDate(c.params.dateType);var w=a.getLocalDate(c.params.dateType);h.pos=y<<4|T,f[T]=h;var D=a.getLocalMonth(c.params.dateType)==d;if(D)h.otherMonth=!1,N=!0,h.style.cursor="pointer";else{if(!c.params.showsOthers){h.className+=" emptycell",h.innerHTML="&#160;",h.disabled=!0;continue}h.className+=" disabled othermonth ",h.otherMonth=!0}h.disabled=!1,h.innerHTML=Date.convertNumbers(v),h.disabled||(h.caldate=new Date(a),D&&v==s&&(h.className+=" selected table-success alert alert-success",c.currentDateEl=h),a.getLocalFullYear(c.params.dateType)==n&&a.getLocalMonth(c.params.dateType)==r&&v==o&&(h.className+=" today",h.className+=" table-warning"),-1!=u.indexOf(w.toString())&&(h.className+=h.otherMonth?" oweekend":" weekend"))}N||c.params.showsOthers?m.style.display="":(m.style.display="none",m.className="emptyrow")}if(c.params.compressedHeader){var L=Date.convertNumbers(l.toString());c._nav_month.getElementsByTagName("span")[0].innerHTML=c.params.monthBefore?L+" - "+JoomlaCalLocale.months[d]:JoomlaCalLocale.months[d]+" - "+L}else c._nav_month.getElementsByTagName("span")[0].innerHTML=JoomlaCalLocale.months[d],c.title.getElementsByTagName("span")[0].innerHTML=Date.convertNumbers(l.toString());c.table.style.visibility="visible"},k=function(e){t(a.getElementsByTagName("button")[0],"hidden")?l(e.parentNode.getElementsByTagName("INPUT")[0],"focus",b,!0):l(e,"click",b,!1),l(e.parentNode.getElementsByTagName("INPUT")[0].form,"submit",getJoomlaCalendarValuesFromAlt(),!0)},M=function(){console.log(c.params.inputField.value);var e=Date.parseFieldDate(c.params.inputField.value,c.params.dateFormat,c.params.dateType),a=Date.parseFieldDate(c.params.inputField.getAttribute("data-alt-value"),"%Y-%m-%d %H:%M:%S",c.params.dateType);c.params.inputField.value.length?("0000-00-00 00:00:00"!=c.params.inputField.getAttribute("data-alt-value")||""!=c.params.inputField.value)&&(e&&a&&e.equalsTo(a)?(console.log("Equality "+e+" "+a),c.date=new Date(e)):(console.log("Non equality "),c.date=new Date)):(console.log("Empty input "),c.date=new Date)},E=function(){if(c.destroy=N,console.log("ooops"),c.element=a,c.params={},!a.parentNode.getElementsByTagName("INPUT")[0]&&!a.getElementsByTagName("button")[0])return console.log("Calendar setup failed:\n  No valid fields found, Please check your code"),!1;for(var e in g)c.params[e]=y[e]||g[e];M(),A(a.parentNode.getElementsByTagName("INPUT")[0]),k(u)};return E(),c},document.onreadystatechange=function(){"interactive"==document.readyState&&(a("field-calendar"),"undefined"!=typeof window.jQuery&&jQuery(document).ready(function(){jQuery().chosen&&jQuery.each(jQuery(".no-chozen-here"),function(e,a){jQuery(a).chosen("destroy")})}))}}();