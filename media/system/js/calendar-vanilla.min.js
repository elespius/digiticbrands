!function(){"use strict";Date.convertNumbers=function(a){var a=a.toString();if("[object Array]"===Object.prototype.toString.call(Date.localLangNumbers))for(var b=0;b<Date.localLangNumbers.length;b++)a=a.replace(new RegExp(b,"g"),Date.localLangNumbers[b]);return a},Date.toEnglish=function(a){a=this.toString();for(var b=[0,1,2,3,4,5,6,7,8,9],c=0;c<10;c++)a=a.replace(new RegExp(b[c],"g"),c);return a},window.getJoomlaCalendarValuesFromAlt=function(){for(var a=document.getElementsByClassName("field-calendar"),b=0;b<a.length;b++){var c=a[b].getElementsByTagName("INPUT")[0],d=c.getAttribute("data-alt-value")?c.getAttribute("data-alt-value"):"0000-00-00 00:00:00";c.value=d}};var a=function(a){a._joomlaCalendar={writable:!0},this.params={},a._joomlaCalendar.params={};var j=this,k=a.getElementsByTagName("button")[0],l={inputField:null,firstDayOfWeek:0,time24:!1,showsOthers:!0,showsTime:!1,weekNumbers:!1,showsTodayBtn:!0,compressedHeader:!1,monthBefore:!1,minYear:1970,maxYear:2050,dateFormat:"%Y-%m-%d %H:%M:%S",dateType:"gregorian",direction:"ltr",debug:!1,clicked:!1,element:{style:{display:"none"}},writable:!0},m={dateType:k.getAttribute("data-cal-type")?k.getAttribute("data-cal-type"):"gregorian",inputField:k.parentNode.getElementsByTagName("INPUT")[0],firstDayOfWeek:k.getAttribute("data-firstday")?parseInt(k.getAttribute("data-firstday")):0,time24:24==parseInt(k.getAttribute("data-time-24")),showsOthers:0!=parseInt(k.getAttribute("data-show-others")),showsTime:1==parseInt(k.getAttribute("data-show-time")),weekNumbers:1==parseInt(k.getAttribute("data-week-numbers")),showsTodayBtn:0!=parseInt(k.getAttribute("data-today-btn")),compressedHeader:1==parseInt(k.getAttribute("data-only-months-nav")),minYear:k.getAttribute("data-min-year")?parseInt(k.getAttribute("data-min-year")):1970,maxYear:k.getAttribute("data-max-year")?parseInt(k.getAttribute("data-max-year")):2050,dateFormat:k.getAttribute("data-dayformat")?k.getAttribute("data-dayformat"):"%Y-%m-%d %H:%M:%S",direction:void 0!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir")};if(!a)return console.log("Calendar setup failed:\n  No valid fields found, Please check your code"),!1;for(var n in l)j.params[n]=m[n]||l[n];var o=function(){var a=Date.parseFieldDate(j.params.inputField.getAttribute("data-alt-value"),"%Y-%m-%d %H:%M:%S","gregorian");if(j.params.inputField.value.length){if(j.params.inputField.value){if("gregorian"!=j.params.dateType){var b=new Date(a);j.params.inputField.value=b.print(j.params.dateFormat,j.params.dateType,!0)}j.date=new Date(a)}}else j.date=new Date},p=function(a,b,c){var d=j.date;j.params.time24||(/pm/i.test(ampm)&&a<12?a=parseInt(a)+12:/am/i.test(ampm)&&12==a&&(a=0));var e=j.date.getLocalDate(j.params.dateType),f=j.date.getLocalMonth(j.params.dateType),g=j.date.getLocalFullYear(j.params.dateType);d.setHours(a),d.setMinutes(parseInt(b,10)),d.setSeconds(d.getSeconds()),d.setLocalFullYear(j.params.dateType,g),d.setLocalMonth(j.params.dateType,f),d.setLocalDate(j.params.dateType,e),j.dateClicked=!1,s()},q=function(a){a.equalsTo(j.date)||(j.date=a,C(j.params.firstDayOfWeek,a))},r=function(a){var b=new Date(j.date);b.setDate(b.getDate()-a),q(b)},s=function(){"gregorian"==j.params.dateType?(j.params.inputField.setAttribute("data-alt-value",j.date.print("%Y-%m-%d %H:%M:%S",j.params.dateType,!1)),j.params.inputField.getAttribute("data-alt-value")&&"0000-00-00 00:00:00"!=j.params.inputField.getAttribute("data-alt-value")&&(j.params.inputField.value=j.date.print(j.params.dateFormat,j.params.dateType,!0))):(j.params.inputField.setAttribute("data-alt-value",j.date.print("%Y-%m-%d %H:%M:%S","gregorian",!1)),j.params.inputField.setAttribute("data-local-value",j.date.print(j.params.dateFormat,j.params.dateType,!1)),j.params.inputField.value=j.date.print(j.params.dateFormat,j.params.dateType,!0)),"function"==typeof j.params.inputField.onchange&&j.params.inputField.onchange(),j.dateClicked&&"function"==typeof j.params.onUpdate&&j.params.onUpdate(j),j.dateClicked?t():C(j.params.firstDayOfWeek,j.date)},t=function(a){document.activeElement.blur(),x(a)},v=function(a){var b=a.target.parentNode;if(!j)return t(),j.params.inputField.blur(),f(a);for(;null!=b&&b!=j.element;b=b.parentNode);return null==b?(document.activeElement.blur(),x(),f(a)):void 0},w=function(a){a.target;o(),j.params.inputField.focus();for(var c=j.table.getElementsByTagName("tr"),e=c.length;e>0;)for(var f=c[--e],h=f.getElementsByTagName("td"),i=h.length;i>0;){var k=h[--i];d(k,"alert-info"),d(k,"alert-success")}j.element.style.display="block",j.hidden=!1,g(document,"keydown",A),g(document,"keypress",A),g(document,"mousedown",v),C(j.params.firstDayOfWeek,j.date)},x=function(){h(document,"keydown",A),h(document,"keypress",A),h(document,"mousedown",v),j.element.style.display="none",j.hidden=!0},y=function(a){var c=a.currentTarget,e=a.target||a.srcElement;if("TD"!==c.nodeName){var g=c.getParent("TD");"TD"===g.nodeName?c=g:(c=c.getParent("TD"),b(c,"dropdown-menu")&&(c=c.getElementsByTagName("table")))}else if(!b(e,"btn")&&!b(c,"day")&&!b(c,"title"))return;if(!c||c.disabled)return!1;if("undefined"==typeof c.navtype||300!=c.navtype){50==c.navtype&&(c._current=c.innerHTML),d(c,"alert-success"),e!=c&&e.parentNode!=c||z(c,a);var h=null;"undefined"!=typeof c.month&&(h=c),"undefined"!=typeof c.parentNode.month&&(h=c.parentNode);var i=null;if(h)i=new Date(j.date),h.month!=i.getLocalMonth(j.params.dateType)&&(i.setLocalMonth(j.params.dateType,h.month),q(i),j.dateClicked=!1,s());else{var k=null;"undefined"!=typeof c.year&&(k=e),"undefined"!=typeof c.parentNode.year&&(k=e.parentNode),k&&(i=new Date(j.date),k.year!=i.getLocalFullYear(j.params.dateType)&&(i.setFullYear(j.params.dateType,k.year),q(i),j.dateClicked=!1,s()))}}return f(a)},z=function(a,b){var e=!1,f=!1,g=null;if("undefined"==typeof a.navtype){j.currentDateEl&&(d(j.currentDateEl,"selected"),d(j.currentDateEl,"alert-success"),c(a,"selected alert-success"),j.currentDateEl=a.caldate,e=j.currentDateEl==a.caldate,e||(j.currentDateEl=a.caldate)),j.date.setLocalDateOnly("gregorian",a.caldate),g=j.date;var h=!(j.dateClicked=!a.otherMonth);j.currentDateEl&&(f=!a.disabled),h&&C(j.params.firstDayOfWeek,g)}else{if(200==a.navtype)return d(a,"hilite"),void t(j);if(g=new Date(j.date),0==a.navtype)return j.date.setLocalDateOnly("gregorian",new Date),j.dateClicked=!0,s(),void t();j.dateClicked=!1;var i=g.getOtherFullYear(j.params.dateType),k=g.getLocalMonth(j.params.dateType);switch(a.navtype){case 400:break;case-2:j.params.compressedHeader||i>j.params.minYear&&g.setOtherFullYear(j.params.dateType,i-1);break;case-1:var l=g.getLocalDate(j.params.dateType);if(k>0){var m=g.getLocalMonthDays(j.params.dateType,k-1);l>m&&g.setLocalDate(j.params.dateType,m),g.setLocalMonth(j.params.dateType,k-1)}else if(i-- >j.params.minYear){g.setOtherFullYear(j.params.dateType,i);var m=g.getLocalMonthDays(j.params.dateType,11);l>m&&g.setLocalDate(j.params.dateType,m),g.setLocalMonth(j.params.dateType,11)}break;case 1:var l=g.getLocalDate(j.params.dateType);if(k<11){var m=g.getLocalMonthDays(j.params.dateType,k+1);l>m&&g.setLocalDate(j.params.dateType,m),g.setLocalMonth(j.params.dateType,k+1)}else if(i<j.params.maxYear){g.setOtherFullYear(j.params.dateType,i+1);var m=g.getLocalMonthDays(j.params.dateType,0);l>m&&g.setLocalDate(j.params.dateType,m),g.setLocalMonth(j.params.dateType,0)}break;case 2:j.params.compressedHeader||i<j.params.maxYear&&g.setOtherFullYear(j.params.dateType,i+1);break;case 0:}g.equalsTo(j.date)?0==a.navtype&&(f=e=!0):(q(g),f=!0)}f&&b&&s(),e&&(d(a,"hilite"),b&&t())},A=function(a){if(a=window.event?event:e,!j)return!1;var b=parseInt(a.keyCode);return a.target===j.params.inputField&&13===b?(j.date=Date.parseFieldDate(j.params.inputField.value,j.params.dateFormat,j.params.dateType),C(j.params.firstDayOfWeek,j.date),f(a)):("rtl"==j.params.direction&&(37==b?b=39:39==b&&(b=37)),32===b&&z(j._nav_now,a),27===b&&t(),13===b&&z(j.currentDateEl,a),38===b&&r(7),40===b&&r(-7),37===b&&r(1),39===b&&r(-1),a.target!==j.params.inputField||b>48||b<57||186===b||189===b||190===b?void 0:f(a))},B=function(a){var b=a.parentNode.getElementsByTagName("INPUT")[0],d=i("table");j.table=d,d.className="table",d.cellSpacing=0,d.cellPadding=0,d.style.marginBottom=0,g(d,"mousedown",j.tableMouseDown);var e=i("div");j.element=e,j.params.direction&&(j.element.style.direction=j.params.direction),e.className="dropdown-menu j-calendar",e.style.position="absolute",e.style.boxShadow="0px 0px 70px 0px rgba(0,0,0,0.67)",e.style.minWidth=b.width,e.style.padding="0",e.style.left="auto",e.style.top="auto",j.wrapper=i("div"),j.wrapper.className="calendar-container",e.appendChild(j.wrapper),j.wrapper.appendChild(d);var f=i("thead",d);f.className="calendar-header";var h=null,k=null,l=j,m=function(a,b,c,d,e,f){d=d?d:"td",f=f?'class="'+f+'"':"",e=e?e:{},h=i(d,k),h.colSpan=b;for(var j in e)h.style[j]=e[j];return 0!=c&&Math.abs(c)<=2&&(h.className+=" nav"),g(h,"mousedown",y),h.calendar=l,h.navtype=c,0!=c&&Math.abs(c)<=2?h.innerHTML="<a "+f+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+a+"</a>":h.innerHTML="<div unselectable='on'"+f+">"+a+"</div>",h};if(0==j.params.compressedHeader&&(k=i("tr",f),k.className="calendar-head-row",j._nav_py=m("<",1,-2,"","","btn btn-small btn-default pull-left"),j.title=m('<div style="text-align:center;font-size:1.2em"><span></span></div>',j.params.weekNumbers?6:5,300),j.title.className="title",j._nav_ny=m(">",1,2,"","","btn btn-small btn-default pull-right")),k=i("tr",f),k.className="calendar-head-row",j._nav_pm=m("<",1,-1,"","","btn btn-small btn-default pull-left"),j._nav_month=m('<div style="text-align:center;font-size:1.2em"><span></span></div>',j.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),j._nav_month.className="title",j._nav_nm=m(">",1,1,"","","btn btn-small btn-default pull-right"),j.params.showsTodayBtn){k=i("tr",f),k.className="headrow",j._nav_now=m('<a class="btn btn-small btn-success" data-action="today" style="display:block;padding:2px 6px;">'+JoomlaCalLocale.today+"</a>",j.params.weekNumbers?8:7,0,"td",{textAlign:"center"});var n=k.querySelector("a[data-action=today]");if("undefined"==typeof n){var q,o=k.getElementsByTagName("A"),n=null;for(q=0;q<o.length;q++)"today"==o[q].getAttribute("data-action")&&(n=o[q])}g(n,"click",function(a){var b=n.parentNode.parentNode;"TD"===b.tagName&&z(j._nav_now,a)})}k=i("tr",f),k.className="daynames",j.params.weekNumbers&&(h=i("td",k),h.className="name wn",h.innerHTML=JoomlaCalLocale.wk);for(var q=7;q>0;--q)h=i("td",k),q||(h.calendar=j);j.firstdayname=j.params.weekNumbers?k.firstChild.nextSibling:k.firstChild;for(var r=j.params.firstDayOfWeek,h=j.firstdayname,s=JoomlaCalLocale.weekend,q=0;q<7;++q){h.className="day-name",h.style.textAlign="center";var t=(q+r)%7;q&&(h.calendar=j,h.fdow=t),s.indexOf(t.toString())!=-1&&c(h,"weekend"),h.innerHTML=JoomlaCalLocale.shortDays[(q+r)%7],h=h.nextSibling}var u=i("tbody",d);for(j.tbody=u,q=6;q>0;--q){k=i("tr",u),j.params.weekNumbers&&(h=i("td",k));for(var v=7;v>0;--v)h=i("td",k),h.calendar=j,g(h,"mousedown",y)}if(j.params.showsTime){k=i("tr",u),k.className="time",h=i("td",k),h.className="time time-title",h.colSpan=1,h.style.verticalAlign="middle",h.innerHTML=JoomlaCalLocale.time||"&#160;";var w=i("td",k);w.className="time hours-select",w.colSpan=2;var x=i("td",k);x.className="time minutes-select",x.colSpan=2,function(){function a(a,b,c,d,e){var g,f=i("select",e);f.calendar=j,f.className="no-chozen-here "+a,f.style.width="100%",f.navtype=50,f._range=[];for(var h=c;h<=d;++h){var k,l="";h==b&&(l=!0),h<10&&d>=10?(g="0"+h,k=Date.convertNumbers("0")+Date.convertNumbers(h)):(g=""+h,k=""+Date.convertNumbers(h)),f.options.add(new Option(k,g,l,l))}return f}var b=j.date.getHours(),c=j.date.getMinutes(),d=!j.params.time24,e=b>12;d&&e&&(b-=12);var f=a("time hour",b,d?1:0,d?12:23,w),g=a("time minutes",c,0,59,x),l=null;if(h=i("td",k),h.className="time ampm",h.colSpan=j.params.weekNumbers?1:2,d){var m="";e&&(m=!0);var n=i("select",h);n.style.width="100%",n.options.add(new Option(JoomlaCalLocale.PM,"pm",e?m:"",e?m:"")),n.options.add(new Option(JoomlaCalLocale.AM,"am",e?"":m,e?"":m)),l=n,l.attachEvent?l.attachEvent("onchange",function(){p(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1):l.addEventListener("change",function(){p(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1)}else h.innerHTML="&#160;";f.attachEvent?(f.attachEvent("onchange",function(){p(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1),g.attachEvent("onchange",function(a){p(a.target.parentNode.parentNode.childNodes[1].childNodes[0].value,a.target.parentNode.parentNode.childNodes[2].childNodes[0].value,a.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1)):(f.addEventListener("change",function(a){p(a.target.parentNode.parentNode.childNodes[1].childNodes[0].value,a.target.parentNode.parentNode.childNodes[2].childNodes[0].value,a.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1),g.addEventListener("change",function(){p(event.target.parentNode.parentNode.childNodes[1].childNodes[0].value,event.target.parentNode.parentNode.childNodes[2].childNodes[0].value,event.target.parentNode.parentNode.childNodes[3].childNodes[0].value,j)},!1))}()}C(j.params.firstDayOfWeek,j.date),b.parentNode.appendChild(j.element)},C=function(a,b){j.table.style.visibility="hidden";var c=new Date,d=c.getLocalFullYear(j.params.dateType),e=c.getLocalMonth(j.params.dateType),f=c.getLocalDate(j.params.dateType),g=b.getOtherFullYear(j.params.dateType);g<j.params.minYear?(g=j.params.minYear,b.getOtherFullYear(j.params.dateType,g)):g>j.params.maxYear&&(g=j.params.maxYear,b.getOtherFullYear(j.params.dateType,g)),j.params.firstDayOfWeek=a,j.date=new Date(b);var h=b.getLocalMonth(j.params.dateType),i=b.getLocalDate(j.params.dateType);b.setLocalDate(j.params.dateType,1);var k=(b.getLocalDay(j.params.dateType)-j.params.firstDayOfWeek)%7;k<0&&(k+=7),b.setLocalDate(j.params.dateType,-k),b.setLocalDate(j.params.dateType,b.getLocalDate(j.params.dateType)+1);for(var l=j.tbody.firstChild,m=j.ar_days=new Array,n=JoomlaCalLocale.weekend,o=parseInt(b.getLocalWeekDays(j.params.dateType)),p=0;p<o;++p,l=l.nextSibling){var q=l.firstChild;j.params.weekNumbers&&(q.className="day wn",q.innerHTML=b.convertNumbers(b.getLocalWeekNumber(j.params.dateType)),q=q.nextSibling),l.className="daysrow";for(var s,r=!1,t=m[p]=[],u=o+1,v=0;v<u;++v,q=q.nextSibling,b.setLocalDate(j.params.dateType,s+1)){q.className="day",q.style.textAlign="center",s=b.getLocalDate(j.params.dateType);var w=b.getLocalDate(j.params.dateType);q.pos=p<<4|v,t[v]=q;var x=b.getLocalMonth(j.params.dateType)==h;if(x)q.otherMonth=!1,r=!0,q.style.cursor="pointer";else{if(!j.params.showsOthers){q.className+=" emptycell",q.innerHTML="&#160;",q.disabled=!0;continue}q.className+=" disabled othermonth ",q.otherMonth=!0}q.disabled=!1,q.innerHTML=j.params.debug?s:Date.convertNumbers(s),q.disabled||(q.caldate=new Date(b),x&&s==i&&(q.className+=" selected table-success alert alert-success",j.currentDateEl=q),b.getLocalFullYear(j.params.dateType)==d&&b.getLocalMonth(j.params.dateType)==e&&s==f&&(q.className+=" today",q.className+=" table-warning"),n.indexOf(w.toString())!=-1&&(q.className+=q.otherMonth?" oweekend":" weekend"))}r||j.params.showsOthers?l.style.display="":(l.style.display="none",l.className="emptyrow")}if(j.params.compressedHeader){var y=Date.convertNumbers(g.toString());j._nav_month.getElementsByTagName("span")[0].innerHTML=j.params.monthBefore?y+" - "+JoomlaCalLocale.months[h]:JoomlaCalLocale.months[h]+" - "+y}else j._nav_month.getElementsByTagName("span")[0].innerHTML=j.params.debug?h+" "+JoomlaCalLocale.months[h]:JoomlaCalLocale.months[h],j.title.getElementsByTagName("span")[0].innerHTML=j.params.debug?g+" "+Date.convertNumbers(g.toString()):Date.convertNumbers(g.toString());j.table.style.visibility="visible"},D=function(a){var b=a.getElementsByTagName("button")[0],c=a.getElementsByTagName("input")[0];g(c,"focus",w,!0),g(b,"click",w,!1),g(c.form,"submit",getJoomlaCalendarValuesFromAlt,!0)};o(),B(a),D(a)},b=function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},c=function(a,b){d(a,b),a.className+=" "+b},d=function(a,b){if(a&&a.className){for(var c=a.className.split(" "),d=new Array,e=c.length;e>0;)c[--e]!=b&&(d[d.length]=c[e]);a.className=d.join(" ")}},f=function(a){return a||(a=window.event),/msie/i.test(navigator.userAgent)?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation()),!1},g=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!0):a["on"+b]=c},h=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!0):a["on"+b]=null},i=function(a,b){var c=null;return c=document.createElement(a),"undefined"!=typeof b&&b.appendChild(c),c};a.getCalObject=function(b){if(!b)return!1;for(;b.parentNode;)if(b=b.parentNode,a.hasClass(b,"field-calendar"))return b;return!1},a.init=function(b){var c,d;if(c=document.getElementsByClassName(b),"undefined"==typeof JoomlaCalLocale){var e=1===c.length?c:c[0],f=e.getElementsByTagName("button")[0];window.JoomlaCalLocale={today:f.getAttribute("data-today-trans")?f.getAttribute("data-today-trans"):"Today",weekend:f.getAttribute("data-weekend")?f.getAttribute("data-weekend").split(",").map(Number):[0,6],wk:f.getAttribute("data-wk")?f.getAttribute("data-wk"):"wk",time:f.getAttribute("data-time")?f.getAttribute("data-time"):"Time:",days:f.getAttribute("data-weekdays-full")?f.getAttribute("data-weekdays-full").split("_"):["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],shortDays:f.getAttribute("data-weekdays-short")?f.getAttribute("data-weekdays-short").split("_"):["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],months:f.getAttribute("data-months-long")?f.getAttribute("data-months-long").split("_"):["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:f.getAttribute("data-months-short")?f.getAttribute("data-months-short").split("_"):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AM:f.getAttribute("data-time-am")&&"gregorian"==f.getAttribute("data-cal-type")?f.getAttribute("data-time-am"):"AM",PM:f.getAttribute("data-time-pm")&&"gregorian"==f.getAttribute("data-cal-type")?f.getAttribute("data-time-pm"):"PM",am:f.getAttribute("data-time-am-lower")&&"gregorian"==f.getAttribute("data-cal-type")?f.getAttribute("data-time-am-lower"):"am",pm:f.getAttribute("data-time-pm-lower")&&"gregorian"==f.getAttribute("data-time-pm-lower")?f.getAttribute("data-time-pm-lower"):"pm",dateType:f.getAttribute("data-cal-type")?f.getAttribute("data-cal-type"):"gregorian"}}for(d=0;d<c.length;d++)c[d]._joomlaCalendar||(c[d]._joomlaCalendar=new a(c[d]),"undefined"!=typeof window.jQuery&&jQuery(document).ready(function(){jQuery().chosen&&jQuery.each(jQuery(".no-chozen-here"),function(a,b){jQuery(b).chosen("destroy")})}))},document.addEventListener("DOMContentLoaded",function(){a.init("field-calendar")})}();