var JFormValidator=function(){"use strict";var e,t,a,r=function(t,a,r){r=""===r?!0:r,e[t]={enabled:r,exec:a}},n=function(e,t){var a,r=jQuery(t);return e?(a=r.find("#"+e+"-lbl"),a.length?a:(a=r.find('label[for="'+e+'"]'),a.length?a:!1)):!1},i=function(e,t){var a=t.data("label");void 0===a&&(a=n(t.attr("id"),t.get(0).form),t.data("label",a)),e===!1?(t.addClass("invalid").attr("aria-invalid","true"),a&&a.addClass("invalid")):(t.removeClass("invalid").attr("aria-invalid","false"),a&&a.removeClass("invalid"))},l=function(t){var a,r,n=jQuery(t);if(n.attr("disabled"))return i(!0,n),!0;if(n.attr("required")||n.hasClass("required"))if(a=n.prop("tagName").toLowerCase(),"fieldset"===a&&(n.hasClass("radio")||n.hasClass("checkboxes"))){if(!n.find("input:checked").length)return i(!1,n),!1}else if(!n.val()||n.hasClass("placeholder")||"checkbox"===n.attr("type")&&!n.is(":checked"))return i(!1,n),!1;return r=n.attr("class")&&n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",""===r?(i(!0,n),!0):r&&"none"!==r&&e[r]&&n.val()&&e[r].exec(n.val(),n)!==!0?(i(!1,n),!1):(i(!0,n),!0)},u=function(e){var t,r,n,i,u,s,o=!0,d=[];for(t=jQuery(e).find("input, textarea, select, fieldset"),u=0,s=t.length;s>u;u++)l(t[u])===!1&&(o=!1,d.push(t[u]));if(jQuery.each(a,function(e,t){t.exec()!==!0&&(o=!1)}),!o&&d.length>0){for(r=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),n={error:[]},u=d.length-1;u>=0;u--)i=jQuery(d[u]).data("label"),i&&n.error.push(r+i.text().replace("*",""));Joomla.renderMessages(n)}return o},s=function(e){var a,r=[],n=jQuery(e);a=n.find("input, textarea, select, fieldset, button");for(var i=0,s=a.length;s>i;i++){var o=jQuery(a[i]),d=o.prop("tagName").toLowerCase();"input"!==d&&"button"!==d||"submit"!==o.attr("type")&&"image"!==o.attr("type")?"button"===d||"input"===d&&"button"===o.attr("type")||(o.hasClass("required")&&o.attr("aria-required","true").attr("required","required"),"fieldset"!==d&&(o.on("blur",function(){return l(this)}),o.hasClass("validate-email")&&t&&(o.get(0).type="email")),r.push(o)):o.hasClass("validate")&&o.on("click",function(){return u(e)})}n.data("inputfields",r)},o=function(){e={},a=a||{},t=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type}(),r("username",function(e,t){var a=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!a.test(e)}),r("password",function(e,t){var a=/^\S[\S ]{2,98}\S$/;return a.test(e)}),r("numeric",function(e,t){var a=/^(\d|-)?(\d|,)*\.?\d*$/;return a.test(e)}),r("email",function(e,t){e=punycode.encode(e);var a=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return a.test(e)});for(var n=jQuery("form.form-validate"),i=0,l=n.length;l>i;i++)s(n[i])};return o(),{isValid:u,validate:l,setHandler:r,attachToForm:s,custom:a}};document.formvalidator=null,jQuery(function(){document.formvalidator=new JFormValidator});