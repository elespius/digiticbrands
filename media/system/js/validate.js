var JFormValidator=function(t){"use strict";var e,a,r,n=t,i=function(t,a,r){r=""===r?!0:r,e[t]={enabled:r,exec:a}},l=function(t,e){var a,r=jQuery(e);return t?(a=r.find("#"+t+"-lbl"),a.length?a:(a=r.find('label[for="'+t+'"]'),a.length?a:!1)):!1},s=function(t,e){var a=e.data("label");void 0===a&&(a=l(e.attr("id"),e.get(0).form),e.data("label",a)),t===!1?(e.addClass(n).attr("aria-invalid","true"),a&&a.addClass(n)):(e.removeClass(n).attr("aria-invalid","false"),a&&a.removeClass(n))},u=function(t){var a,r,n=jQuery(t);if(n.attr("disabled"))return s(!0,n),!0;if(n.attr("required")||n.hasClass("required"))if(a=n.prop("tagName").toLowerCase(),"fieldset"===a&&(n.hasClass("radio")||n.hasClass("checkboxes"))){if(!n.find("input:checked").length)return s(!1,n),!1}else if(!n.val()||n.hasClass("placeholder")||"checkbox"===n.attr("type")&&!n.is(":checked"))return s(!1,n),!1;return r=n.attr("class")&&n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",n.attr("pattern")&&""!=n.attr("pattern")?n.val().length?(o=RegExp("^"+n.attr("pattern")+"$").test(n.val()),s(o,n),o):(s(!1,n),!1):""===r?(s(!0,n),!0):r&&"none"!==r&&e[r]&&n.val()&&e[r].exec(n.val(),n)!==!0?(s(!1,n),!1):(s(!0,n),!0)},o=function(t){var e,a,n,i,l,s,o=!0,d=[];for(e=jQuery(t).find("input, textarea, select, fieldset"),l=0,s=e.length;s>l;l++)jQuery(e[l]).hasClass("novalidate")||u(e[l])===!1&&(o=!1,d.push(e[l]));if(jQuery.each(r,function(t,e){e.exec()!==!0&&(o=!1)}),!o&&d.length>0){for(a=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),n={error:[]},l=d.length-1;l>=0;l--)i=jQuery(d[l]).data("label"),i&&n.error.push(a+i.text().replace("*",""));Joomla.renderMessages(n)}return o},d=function(t){var e,r=[],n=jQuery(t);e=n.find("input, textarea, select, fieldset, button");for(var i=0,l=e.length;l>i;i++){var s=jQuery(e[i]),d=s.prop("tagName").toLowerCase();"input"!==d&&"button"!==d||"submit"!==s.attr("type")&&"image"!==s.attr("type")?"button"===d||"input"===d&&"button"===s.attr("type")||(s.hasClass("required")&&s.attr("aria-required","true").attr("required","required"),"fieldset"!==d&&(s.on("blur",function(){return u(this)}),s.hasClass("validate-email")&&a&&e[i].setAttribute("type","email")),r.push(s)):s.hasClass("validate")&&s.on("click",function(){return o(t)})}n.data("inputfields",r)},c=function(){e={},r=r||{},a=function(){var t=document.createElement("input");return t.setAttribute("type","email"),"text"!==t.type}(),i("username",function(t){var e=RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!e.test(t)}),i("password",function(t){var e=/^\S[\S ]{2,98}\S$/;return e.test(t)}),i("numeric",function(t){var e=/^(\d|-)?(\d|,)*\.?\d*$/;return e.test(t)}),i("email",function(t){t=punycode.toASCII(t);var e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return e.test(t)});for(var t=jQuery("form.form-validate"),n=0,l=t.length;l>n;n++)d(t[n])};return c(),{isValid:o,validate:u,setHandler:i,attachToForm:d,custom:r}};