/*
        GNU General Public License version 2 or later; see LICENSE.txt
*/
var JFormValidator=function(){var e,c,a,b,l,i,j=function(o,p,n){n=(n==="")?true:n;c[o]={enabled:n,exec:p}},f=function(o){var p=o.attr("id"),n;if(!p){return false}else{if(i[p]){n=i[p]}else{n=e('label[for="'+p+'"]');i[p]=n}}return n},h=function(p,o){var n=f(o);if(p===false){o.addClass("invalid").attr("aria-invalid","true");if(n){n.addClass("invalid").attr("aria-invalid","true")}}else{o.removeClass("invalid").attr("aria-invalid","false");if(n){n.removeClass("invalid").attr("aria-invalid","false")}}},k=function(s){var q=e(s),p,r,n,o=0;if(q.attr("disabled")){h(true,q);return true}if(q.hasClass("required")){p=q.prop("tagName").toLowerCase();if(p==="fieldset"&&(q.hasClass("radio")||q.hasClass("checkboxes"))){while(true){n="#"+q.attr("id")+o;if(e(n).get(0)){if(e(n).is(":checked")){break}}else{h(false,q);return false}o++}}else{if(!q.val()){h(false,q);return false}}}r=(q.attr("class")&&q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/))?q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(r===""){h(true,q);return true}if((r)&&(r!=="none")&&(c[r])&&q.val()){if(c[r].exec(q.val())!==true){h(false,q);return false}}h(true,q);return true},m=function(o){var n=true,v=e(o),q,p,u,t,r,s;l=l||v.find("input, textarea, select, button, fieldset");l.each(function(w,x){if(k(x)===false){n=false}});for(p in b){if(b.hasOwnProperty(p)){if(b[p].exec()!==true){n=false}}}if(!n){u=Joomla.JText._("JLIB_FORM_FIELD_INVALID");t=e("label.invalid");r={};r.error=[];for(q=0;q<t.length;q++){s=e(t[q]).text();if(s!=="undefined"){r.error[q]=u+s.replace("*","")}}Joomla.renderMessages(r)}return n},g=function(o){var n=e(o).find("input,textarea,select,button");n.each(function(){var q=e(this),p=q.prop("tagName").toLowerCase();if(q.hasClass("required")){q.attr("aria-required","true").attr("required","required")}if((p==="input"||p==="button")&&q.attr("type")==="submit"){if(q.hasClass("validate")){q.on("click",function(){return m(o)})}}else{q.on("blur",function(){return k(this)});if(q.hasClass("validate-email")&&a){q.get(0).type="email"}}})},d=function(){e=jQuery.noConflict();c={};b=b||{};i=[];a=(function(){var n=document.createElement("input");n.setAttribute("type","email");return n.type!=="text"})();j("username",function(n){regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return !regex.test(n)});j("password",function(n){regex=/^\S[\S ]{2,98}\S$/;return regex.test(n)});j("numeric",function(n){regex=/^(\d|-)?(\d|,)*\.?\d*$/;return regex.test(n)});j("email",function(n){regex=/^[^(\.)][a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return regex.test(n)});e("form.form-validate").each(function(){g(this)},this)};d();return{isValid:m,validate:k,setHandler:j,attachToForm:g,custom:b}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator()});