/*
        GNU General Public License version 2 or later; see LICENSE.txt
*/
var JFormValidator=function(){var g,e,b,c,a,l,d,j=function(o,p,n){n=(n==="")?true:n;e[o]={enabled:n,exec:p}},i=function(p,o){var n,q;if(!o.get(0).labelref){d=d||g("label");d.each(function(){n=g(this);if(n.attr("for")===o.attr("id")){o.get(0).labelref=this}})}q=o.get(0).labelref;if(p===false){o.addClass("invalid").attr("aria-invalid","true");if(q){g(q).addClass("invalid").attr("aria-invalid","true")}}else{o.removeClass("invalid").attr("aria-invalid","false");if(q){g(q).removeClass("invalid").attr("aria-invalid","false")}}},k=function(s){var q=g(s),p,r,n,o=0;if(q.attr("disabled")){i(true,q);return true}if(q.hasClass("required")){p=q.prop("tagName").toLowerCase();if(p==="fieldset"&&(q.hasClass("radio")||q.hasClass("checkboxes"))){while(true){n="#"+q.attr("id")+o;if(g(n).get(0)){if(g(n).is(":checked")){break}}else{i(false,q);return false}o++}}else{if(!q.val()){i(false,q);return false}}}r=(q.attr("class")&&q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/))?q.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(r===""){i(true,q);return true}if((r)&&(r!=="none")&&(e[r])&&q.val()){if(e[r].exec(q.val())!==true){i(false,q);return false}}i(true,q);return true},m=function(o){var n=true,v=g(o),q,p,u,t,r,s;l=l||v.find("input, textarea, select, button, fieldset");l.each(function(w,x){if(k(x)===false){n=false}});for(p in c){if(c.hasOwnProperty(p)){if(c[p].exec()!==true){n=false}}}if(!n){u=Joomla.JText._("JLIB_FORM_FIELD_INVALID");t=g("label.invalid");r={};r.error=[];for(q=0;q<t.length;q++){s=g(t[q]).text();if(s!=="undefined"){r.error[q]=u+s.replace("*","")}}Joomla.renderMessages(r)}return n},h=function(n){a=a||g(n).find("input,textarea,select,button");a.each(function(){var p=g(this),o=p.prop("tagName").toLowerCase();if(p.hasClass("required")){p.attr("aria-required","true").attr("required","required")}if((o==="input"||o==="button")&&p.attr("type")==="submit"){if(p.hasClass("validate")){p.on("click",function(){return m(n)})}}else{p.on("blur",function(){return k(this)});if(p.hasClass("validate-email")&&b){p.get(0).type="email"}}})},f=function(){g=jQuery.noConflict();e={};c=c||{};b=(function(){var n=document.createElement("input");n.setAttribute("type","email");return n.type!=="text"})();j("username",function(n){regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return !regex.test(n)});j("password",function(n){regex=/^\S[\S ]{2,98}\S$/;return regex.test(n)});j("numeric",function(n){regex=/^(\d|-)?(\d|,)*\.?\d*$/;return regex.test(n)});j("email",function(n){regex=/^[^(\.)][a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return regex.test(n)});g("form.form-validate").each(function(){h(this)},this)};f();return{isValid:m,validate:k,setHandler:j,attachToForm:h,custom:c}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator()});
