var JFormValidator=function(){var d,a,b,h=function(l,m,k){k=(k==="")?true:k;d[l]={enabled:k,exec:m}},c=function(n,m){var k,l=jQuery(m);if(!n){return false}k=l.find("#"+n+"-lbl");if(k.length){return k}k=l.find('label[for="'+n+'"]');if(k.length){return k}return false},g=function(m,l){var k=l.data("label");if(k===undefined){k=c(l.attr("id"),l.get(0).form);l.data("label",k)}if(m===false){l.addClass("invalid").attr("aria-invalid","true");if(k){k.addClass("invalid").attr("aria-invalid","true")}}else{l.removeClass("invalid").attr("aria-invalid","false");if(k){k.removeClass("invalid").attr("aria-invalid","false")}}},i=function(n){var l=jQuery(n),k,m;if(l.attr("disabled")){g(true,l);return true}if(l.attr("required")||l.hasClass("required")){k=l.prop("tagName").toLowerCase();if(k==="fieldset"&&(l.hasClass("radio")||l.hasClass("checkboxes"))){if(!l.find("input:checked").length){g(false,l);return false}}else{if(!l.val()||l.hasClass("placeholder")||(l.attr("type")==="checkbox"&&!l.is(":checked"))){g(false,l);return false}}}m=(l.attr("class")&&l.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/))?l.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(m===""){g(true,l);return true}if((m)&&(m!=="none")&&(d[m])&&l.val()){if(d[m].exec(l.val(),l)!==true){g(false,l);return false}}g(true,l);return true},j=function(m){var p,k=true,t,r,s,q=[],o,n;p=jQuery(m).find("input, textarea, select, fieldset");for(o=0,n=p.length;o<n;o++){if(i(p[o])===false){k=false;q.push(p[o])}}jQuery.each(b,function(u,l){if(l.exec()!==true){k=false}});if(!k&&q.length>0){t=Joomla.JText._("JLIB_FORM_FIELD_INVALID");r={error:[]};for(o=0,n=q.length;o<n;o++){s=jQuery(q[o]).data("label");if(s){r.error.push(t+s.text().replace("*",""))}}Joomla.renderMessages(r)}return k},f=function(r){var q=[],s,m=jQuery(r);s=m.find("input, textarea, select, fieldset, button");for(var p=0,k=s.length;p<k;p++){var o=jQuery(s[p]),n=o.prop("tagName").toLowerCase();if((n==="input"||n==="button")&&(o.attr("type")==="submit"||o.attr("type")==="image")){if(o.hasClass("validate")){o.on("click",function(){return j(r)})}}else{if(n!=="button"&&!(n==="input"&&o.attr("type")==="button")){if(o.hasClass("required")){o.attr("aria-required","true").attr("required","required")}if(n!=="fieldset"){o.on("blur",function(){return i(s[p])});if(o.hasClass("validate-email")&&a){o.get(0).type="email"}}q.push(o)}}}m.data("inputfields",q)},e=function(){d={};b=b||{};a=(function(){var l=document.createElement("input");l.setAttribute("type","email");return l.type!=="text"})();h("username",function(p,l){var o=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return !o.test(p)});h("password",function(p,l){var o=/^\S[\S ]{2,98}\S$/;return o.test(p)});h("numeric",function(p,l){var o=/^(\d|-)?(\d|,)*\.?\d*$/;return o.test(p)});h("email",function(p,l){p=punycode.toASCII(p);var o=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return o.test(p)});var m=jQuery("form.form-validate");for(var n=0,k=m.length;n<k;n++){f(m[n])}};e();return{isValid:j,validate:i,setHandler:h,attachToForm:f,custom:b}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator()});
