/*
        GNU General Public License version 2 or later; see LICENSE.txt
*/
var JFormValidator=function(){var e,c,a,b,l,i,j=function(o,p,n){n=(n==="")?true:n;c[o]={enabled:n,exec:p}},f=function(o){var p=o.attr("id"),n;if(!p){return false}else{if(i[p]){n=i[p]}else{n=e('label[for="'+p+'"]');i[p]=n}}return n},h=function(p,o){var n=f(o);if(p===false){o.addClass("invalid").attr("aria-invalid","true");if(n){n.addClass("invalid").attr("aria-invalid","true")}}else{o.removeClass("invalid").attr("aria-invalid","false");if(n){n.removeClass("invalid").attr("aria-invalid","false")}}},k=function(q){var o=e(q),n,p;if(o.attr("disabled")){h(true,o);return true}if(o.attr("required")||o.hasClass("required")){n=o.prop("tagName").toLowerCase();if(n==="fieldset"&&(o.hasClass("radio")||o.hasClass("checkboxes"))){if(!o.find("input:checked").length){h(false,o);return false}}else{if(!o.val()||o.hasClass("placeholder")||(o.attr("type")==="checkbox"&&!o.is(":checked"))){h(false,o);return false}}}p=(o.attr("class")&&o.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/))?o.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(p===""){h(true,o);return true}if((p)&&(p!=="none")&&(c[p])&&o.val()){if(c[p].exec(o.val())!==true){h(false,o);return false}}h(true,o);return true},m=function(t){var s=true,n=e(t),q,r,u,p,o;l=l||n.find("input, textarea, select, button, fieldset");l.each(function(v,w){if(k(w)===false){s=false}});e.each(b,function(w,v){if(v.exec()!==true){s=false}});if(!s){r=Joomla.JText._("JLIB_FORM_FIELD_INVALID");u=e("label.invalid");p={};p.error=[];for(q=0;q<u.length;q++){o=e(u[q]).text();if(o!=="undefined"){p.error[q]=r+o.replace("*","")}}Joomla.renderMessages(p)}return s},g=function(o){var n=e(o).find("input,textarea,select,button");n.each(function(){var q=e(this),p=q.prop("tagName").toLowerCase();if(q.hasClass("required")){q.attr("aria-required","true").attr("required","required")}if((p==="input"||p==="button")&&q.attr("type")==="submit"){if(q.hasClass("validate")){q.on("click",function(){return m(o)})}}else{q.on("blur",function(){return k(this)});if(q.hasClass("validate-email")&&a){q.get(0).type="email"}}})},d=function(){e=jQuery.noConflict();c={};b=b||{};i=[];a=(function(){var n=document.createElement("input");n.setAttribute("type","email");return n.type!=="text"})();j("username",function(n){regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return !regex.test(n)});j("password",function(n){regex=/^\S[\S ]{2,98}\S$/;return regex.test(n)});j("numeric",function(n){regex=/^(\d|-)?(\d|,)*\.?\d*$/;return regex.test(n)});j("email",function(n){regex=/^[^(\.)][a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return regex.test(n)});e("form.form-validate").each(function(){g(this)},this)};d();return{isValid:m,validate:k,setHandler:j,attachToForm:g,custom:b}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator()});
