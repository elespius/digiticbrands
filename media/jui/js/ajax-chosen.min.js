!function(t){return t.fn.ajaxChosen=function(e,n,a){var r,i,o,s;return null==e&&(e={}),null==a&&(a={}),i={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},s=this,r=null,o=t.extend({},i,t(s).data(),e),this.chosen(a?a:{}),this.each(function(){return t(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var a,i,u,l,h;return l=t(this).val(),h=t.trim(t(this).val()),i=h.length<o.minTermLength?o.keepTypingMsg:o.lookingForMsg+(" '"+h+"'"),s.next(".chosen-container").find(".no-results").text(i),h===t(this).data("prevVal")?!1:(t(this).data("prevVal",h),this.timer&&clearTimeout(this.timer),h.length<o.minTermLength?!1:(a=t(this),null==o.data&&(o.data={}),o.data[o.jsonTermKey]=h,null!=o.dataCallback&&(o.data=o.dataCallback(o.data)),u=o.success,o.success=function(r){var i,o,u;if(null!=r)return u=[],s.find("option").each(function(){return t(this).is(":selected")?u.push(t(this).val()+"-"+t(this).text()):t(this).remove()}),s.find("optgroup:empty").each(function(){return t(this).remove()}),i=null!=n?n(r,a):r,o=0,t.each(i,function(e,n){var a,r,i;return o++,n.group?(a=s.find("optgroup[label='"+n.text+"']"),a.size()||(a=t("<optgroup />")),a.attr("label",n.text).appendTo(s),t.each(n.items,function(e,n){var r,i;return"string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,u)?t("<option />").attr("value",i).html(r).appendTo(a):void 0})):("string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,u)?t("<option />").attr("value",i).html(r).appendTo(s):void 0)}),o?s.trigger("chosen:updated"):(s.data().chosen.no_results_clear(),s.data().chosen.no_results(a.val())),null!=e.success&&e.success(r),a.val(l)},this.timer=setTimeout(function(){return r&&r.abort(),r=t.ajax(o)},o.afterTypeDelay)))})})}}(jQuery);